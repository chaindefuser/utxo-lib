"use strict";function cov_edesms666(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/mock.ts";var hash="bb6568248481041ef2d6cfc3312e51d4a4817186";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/mock.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:41}},"2":{start:{line:4,column:0},end:{line:4,column:32}},"3":{start:{line:5,column:0},end:{line:5,column:62}},"4":{start:{line:6,column:0},end:{line:6,column:66}},"5":{start:{line:7,column:0},end:{line:7,column:46}},"6":{start:{line:8,column:0},end:{line:8,column:36}},"7":{start:{line:9,column:15},end:{line:9,column:32}},"8":{start:{line:10,column:14},end:{line:10,column:41}},"9":{start:{line:11,column:16},end:{line:11,column:29}},"10":{start:{line:12,column:19},end:{line:12,column:41}},"11":{start:{line:13,column:16},end:{line:13,column:35}},"12":{start:{line:14,column:18},end:{line:14,column:39}},"13":{start:{line:15,column:24},end:{line:15,column:57}},"14":{start:{line:16,column:15},end:{line:16,column:32}},"15":{start:{line:18,column:28},end:{line:18,column:74}},"16":{start:{line:19,column:20},end:{line:19,column:54}},"17":{start:{line:20,column:19},end:{line:20,column:36}},"18":{start:{line:21,column:4},end:{line:21,column:31}},"19":{start:{line:22,column:20},end:{line:22,column:55}},"20":{start:{line:23,column:23},end:{line:23,column:37}},"21":{start:{line:24,column:4},end:{line:25,column:81}},"22":{start:{line:25,column:8},end:{line:25,column:81}},"23":{start:{line:26,column:4},end:{line:33,column:5}},"24":{start:{line:26,column:21},end:{line:26,column:22}},"25":{start:{line:27,column:8},end:{line:32,column:9}},"26":{start:{line:28,column:12},end:{line:28,column:71}},"27":{start:{line:31,column:12},end:{line:31,column:69}},"28":{start:{line:34,column:4},end:{line:38,column:7}},"29":{start:{line:39,column:4},end:{line:42,column:7}},"30":{start:{line:41,column:30},end:{line:41,column:117}},"31":{start:{line:43,column:4},end:{line:43,column:52}},"32":{start:{line:44,column:4},end:{line:44,column:40}},"33":{start:{line:45,column:4},end:{line:45,column:48}},"34":{start:{line:47,column:0},end:{line:47,column:74}},"35":{start:{line:48,column:37},end:{line:48,column:140}},"36":{start:{line:50,column:4},end:{line:50,column:96}},"37":{start:{line:53,column:25},end:{line:53,column:100}},"38":{start:{line:54,column:28},end:{line:54,column:82}},"39":{start:{line:55,column:4},end:{line:55,column:82}},"40":{start:{line:58,column:24},end:{line:58,column:65}},"41":{start:{line:59,column:20},end:{line:59,column:182}},"42":{start:{line:60,column:4},end:{line:74,column:5}},"43":{start:{line:61,column:8},end:{line:61,column:52}},"44":{start:{line:64,column:32},end:{line:64,column:203}},"45":{start:{line:65,column:24},end:{line:67,column:70}},"46":{start:{line:68,column:8},end:{line:73,column:10}},"47":{start:{line:77,column:4},end:{line:92,column:7}},"48":{start:{line:78,column:8},end:{line:90,column:9}},"49":{start:{line:79,column:12},end:{line:83,column:15}},"50":{start:{line:85,column:13},end:{line:90,column:9}},"51":{start:{line:86,column:12},end:{line:89,column:15}},"52":{start:{line:91,column:8},end:{line:91,column:51}}},fnMap:{"0":{name:"mockPrevTx",decl:{start:{line:17,column:9},end:{line:17,column:19}},loc:{start:{line:17,column:56},end:{line:46,column:1}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:41,column:14},end:{line:41,column:15}},loc:{start:{line:41,column:30},end:{line:41,column:117}},line:41},"2":{name:"isReplayProtectionUnspent",decl:{start:{line:49,column:9},end:{line:49,column:34}},loc:{start:{line:49,column:47},end:{line:51,column:1}},line:49},"3":{name:"mockReplayProtectionUnspent",decl:{start:{line:52,column:9},end:{line:52,column:36}},loc:{start:{line:52,column:111},end:{line:56,column:1}},line:52},"4":{name:"mockWalletUnspent",decl:{start:{line:57,column:9},end:{line:57,column:26}},loc:{start:{line:57,column:132},end:{line:75,column:1}},line:57},"5":{name:"mockUnspents",decl:{start:{line:76,column:9},end:{line:76,column:21}},loc:{start:{line:76,column:83},end:{line:93,column:1}},line:76},"6":{name:"(anonymous_6)",decl:{start:{line:77,column:32},end:{line:77,column:33}},loc:{start:{line:77,column:42},end:{line:92,column:5}},line:77}},branchMap:{"0":{loc:{start:{line:24,column:4},end:{line:25,column:81}},type:"if",locations:[{start:{line:24,column:4},end:{line:25,column:81}},{start:{line:24,column:4},end:{line:25,column:81}}],line:24},"1":{loc:{start:{line:27,column:8},end:{line:32,column:9}},type:"if",locations:[{start:{line:27,column:8},end:{line:32,column:9}},{start:{line:27,column:8},end:{line:32,column:9}}],line:27},"2":{loc:{start:{line:52,column:53},end:{line:52,column:109}},type:"default-arg",locations:[{start:{line:52,column:107},end:{line:52,column:109}}],line:52},"3":{loc:{start:{line:52,column:55},end:{line:52,column:92}},type:"default-arg",locations:[{start:{line:52,column:61},end:{line:52,column:92}}],line:52},"4":{loc:{start:{line:52,column:94},end:{line:52,column:102}},type:"default-arg",locations:[{start:{line:52,column:101},end:{line:52,column:102}}],line:52},"5":{loc:{start:{line:57,column:43},end:{line:57,column:130}},type:"default-arg",locations:[{start:{line:57,column:128},end:{line:57,column:130}}],line:57},"6":{loc:{start:{line:57,column:45},end:{line:57,column:54}},type:"default-arg",locations:[{start:{line:57,column:53},end:{line:57,column:54}}],line:57},"7":{loc:{start:{line:57,column:56},end:{line:57,column:65}},type:"default-arg",locations:[{start:{line:57,column:64},end:{line:57,column:65}}],line:57},"8":{loc:{start:{line:57,column:67},end:{line:57,column:108}},type:"default-arg",locations:[{start:{line:57,column:74},end:{line:57,column:108}}],line:57},"9":{loc:{start:{line:57,column:110},end:{line:57,column:118}},type:"default-arg",locations:[{start:{line:57,column:117},end:{line:57,column:118}}],line:57},"10":{loc:{start:{line:60,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:74,column:5}},{start:{line:60,column:4},end:{line:74,column:5}}],line:60},"11":{loc:{start:{line:60,column:8},end:{line:60,column:36}},type:"binary-expr",locations:[{start:{line:60,column:8},end:{line:60,column:10}},{start:{line:60,column:14},end:{line:60,column:36}}],line:60},"12":{loc:{start:{line:65,column:24},end:{line:67,column:70}},type:"cond-expr",locations:[{start:{line:66,column:14},end:{line:66,column:60}},{start:{line:67,column:14},end:{line:67,column:70}}],line:65},"13":{loc:{start:{line:65,column:24},end:{line:65,column:121}},type:"binary-expr",locations:[{start:{line:65,column:24},end:{line:65,column:52}},{start:{line:65,column:56},end:{line:65,column:121}}],line:65},"14":{loc:{start:{line:78,column:8},end:{line:90,column:9}},type:"if",locations:[{start:{line:78,column:8},end:{line:90,column:9}},{start:{line:78,column:8},end:{line:90,column:9}}],line:78},"15":{loc:{start:{line:85,column:13},end:{line:90,column:9}},type:"if",locations:[{start:{line:85,column:13},end:{line:90,column:9}},{start:{line:85,column:13},end:{line:90,column:9}}],line:85}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0],"3":[0],"4":[0],"5":[0],"6":[0],"7":[0],"8":[0],"9":[0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/mock.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/mock.ts"],names:[],mappings:"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",sourcesContent:["import * as assert from 'assert';\nimport { BIP32Interface } from 'bip32';\nimport * as noble from '@noble/secp256k1';\nimport * as utxolib from '..';\nimport { getMainnet, Network, networks } from '../networks';\n\nimport {\n  ChainCode,\n  createPsbtForNetwork,\n  fromOutput,\n  fromOutputWithPrevTx,\n  getExternalChainCode,\n  isSegwit,\n  NonWitnessWalletUnspent,\n  outputScripts,\n  RootWalletKeys,\n  scriptTypeForChain,\n  Unspent,\n  UnspentWithPrevTx,\n  UtxoTransaction,\n  WalletUnspent,\n} from '../bitgo';\nimport { fromOutputScript } from '../address';\nimport { createOutputScript2of3, createOutputScriptP2shP2pk } from '../bitgo/outputScripts';\n\nimport { getDefaultWalletKeys, getKey } from './keys';\n\nexport type InputType = outputScripts.ScriptType2Of3;\n\nexport function mockPrevTx(\n  vout: number,\n  outputScript: Buffer,\n  value: bigint,\n  network: Network\n): UtxoTransaction<bigint> {\n  const psbtFromNetwork = createPsbtForNetwork({ network });\n\n  const keypair = getKey('mock-prev-tx');\n  const pubkey = keypair.publicKey;\n  assert(keypair.privateKey);\n  const payment = utxolib.payments.p2wpkh({ pubkey });\n  const destOutput = payment.output;\n  if (!destOutput) throw new Error('Impossible, payment we just constructed has no output');\n\n  for (let index = 0; index <= vout; index++) {\n    if (index === vout) {\n      psbtFromNetwork.addOutput({ script: outputScript, value });\n    } else {\n      psbtFromNetwork.addOutput({ script: destOutput, value });\n    }\n  }\n  psbtFromNetwork.addInput({\n    hash: Buffer.alloc(32, 0x01),\n    index: 0,\n    witnessUtxo: { script: destOutput, value: value * (BigInt(vout) + BigInt(1)) + BigInt(1000) },\n  });\n  psbtFromNetwork.signInput(0, {\n    publicKey: pubkey,\n    sign: (hash: Buffer, lowR?: boolean) =>\n      Buffer.from(noble.signSync(hash, keypair.privateKey as Buffer, { canonical: !lowR, der: false })),\n  });\n  psbtFromNetwork.validateSignaturesOfAllInputs();\n  psbtFromNetwork.finalizeAllInputs();\n  return psbtFromNetwork.extractTransaction();\n}\n\nexport const replayProtectionKeyPair = getKey('replay-protection');\nconst replayProtectionScriptPubKey = createOutputScriptP2shP2pk(replayProtectionKeyPair.publicKey).scriptPubKey;\n\nexport function isReplayProtectionUnspent<TNumber extends bigint | number>(\n  u: Unspent<TNumber>,\n  network: Network\n): boolean {\n  return u.address === fromOutputScript(replayProtectionScriptPubKey, network);\n}\n\nexport function mockReplayProtectionUnspent<TNumber extends number | bigint>(\n  network: Network,\n  value: TNumber,\n  { key = replayProtectionKeyPair, vout = 0 }: { key?: BIP32Interface; vout?: number } = {}\n): UnspentWithPrevTx<TNumber> {\n  const outputScript = createOutputScriptP2shP2pk(key.publicKey).scriptPubKey;\n  const prevTransaction = mockPrevTx(vout, outputScript, BigInt(value), network);\n  return { ...fromOutputWithPrevTx(prevTransaction, vout), value };\n}\n\nexport function mockWalletUnspent<TNumber extends number | bigint>(\n  network: Network,\n  value: TNumber,\n  {\n    chain = 0,\n    index = 0,\n    keys = getDefaultWalletKeys(),\n    vout = 0,\n    id,\n  }: { chain?: ChainCode; index?: number; keys?: RootWalletKeys; vout?: number; id?: string } = {}\n): WalletUnspent<TNumber> | NonWitnessWalletUnspent<TNumber> {\n  const derivedKeys = keys.deriveForChainAndIndex(chain, index);\n  const address = fromOutputScript(\n    createOutputScript2of3(derivedKeys.publicKeys, scriptTypeForChain(chain)).scriptPubKey,\n    network\n  );\n  if (id && typeof id === 'string') {\n    return { id, address, chain, index, value };\n  } else {\n    const prevTransaction = mockPrevTx(\n      vout,\n      createOutputScript2of3(derivedKeys.publicKeys, scriptTypeForChain(chain), network).scriptPubKey,\n      BigInt(value),\n      network\n    );\n    const unspent =\n      isSegwit(chain) || getMainnet(network) === networks.zcash\n        ? fromOutput(prevTransaction, vout)\n        : fromOutputWithPrevTx(prevTransaction, vout);\n    return {\n      ...unspent,\n      chain,\n      index,\n      value,\n    };\n  }\n}\n\nexport function mockUnspents<TNumber extends number | bigint>(\n  rootWalletKeys: RootWalletKeys,\n  inputScriptTypes: (InputType | outputScripts.ScriptTypeP2shP2pk)[],\n  testOutputAmount: TNumber,\n  network: Network\n): (Unspent<TNumber> | WalletUnspent<TNumber>)[] {\n  return inputScriptTypes.map((t, i): Unspent<TNumber> => {\n    if (outputScripts.isScriptType2Of3(t)) {\n      return mockWalletUnspent(network, testOutputAmount, {\n        keys: rootWalletKeys,\n        chain: getExternalChainCode(t),\n        vout: i,\n      });\n    } else if (t === outputScripts.scriptTypeP2shP2pk) {\n      return mockReplayProtectionUnspent(network, testOutputAmount, {\n        key: replayProtectionKeyPair,\n        vout: i,\n      });\n    }\n    throw new Error(`invalid input type ${t}`);\n  });\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bb6568248481041ef2d6cfc3312e51d4a4817186"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_edesms666=function(){return actualCoverage;};}return actualCoverage;}cov_edesms666();cov_edesms666().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_edesms666().s[1]++;exports.replayProtectionKeyPair=void 0;cov_edesms666().s[2]++;exports.mockPrevTx=mockPrevTx;cov_edesms666().s[3]++;exports.isReplayProtectionUnspent=isReplayProtectionUnspent;cov_edesms666().s[4]++;exports.mockReplayProtectionUnspent=mockReplayProtectionUnspent;cov_edesms666().s[5]++;exports.mockWalletUnspent=mockWalletUnspent;cov_edesms666().s[6]++;exports.mockUnspents=mockUnspents;const assert=(cov_edesms666().s[7]++,require("assert"));const noble=(cov_edesms666().s[8]++,require("@noble/secp256k1"));const utxolib=(cov_edesms666().s[9]++,require(".."));const networks_1=(cov_edesms666().s[10]++,require("../networks"));const bitgo_1=(cov_edesms666().s[11]++,require("../bitgo"));const address_1=(cov_edesms666().s[12]++,require("../address"));const outputScripts_1=(cov_edesms666().s[13]++,require("../bitgo/outputScripts"));const keys_1=(cov_edesms666().s[14]++,require("./keys"));function mockPrevTx(vout,outputScript,value,network){cov_edesms666().f[0]++;const psbtFromNetwork=(cov_edesms666().s[15]++,(0,bitgo_1.createPsbtForNetwork)({network}));const keypair=(cov_edesms666().s[16]++,(0,keys_1.getKey)('mock-prev-tx'));const pubkey=(cov_edesms666().s[17]++,keypair.publicKey);cov_edesms666().s[18]++;assert(keypair.privateKey);const payment=(cov_edesms666().s[19]++,utxolib.payments.p2wpkh({pubkey}));const destOutput=(cov_edesms666().s[20]++,payment.output);cov_edesms666().s[21]++;if(!destOutput){cov_edesms666().b[0][0]++;cov_edesms666().s[22]++;throw new Error('Impossible, payment we just constructed has no output');}else{cov_edesms666().b[0][1]++;}cov_edesms666().s[23]++;for(let index=(cov_edesms666().s[24]++,0);index<=vout;index++){cov_edesms666().s[25]++;if(index===vout){cov_edesms666().b[1][0]++;cov_edesms666().s[26]++;psbtFromNetwork.addOutput({script:outputScript,value});}else{cov_edesms666().b[1][1]++;cov_edesms666().s[27]++;psbtFromNetwork.addOutput({script:destOutput,value});}}cov_edesms666().s[28]++;psbtFromNetwork.addInput({hash:Buffer.alloc(32,0x01),index:0,witnessUtxo:{script:destOutput,value:value*(BigInt(vout)+BigInt(1))+BigInt(1000)}});cov_edesms666().s[29]++;psbtFromNetwork.signInput(0,{publicKey:pubkey,sign:(hash,lowR)=>{cov_edesms666().f[1]++;cov_edesms666().s[30]++;return Buffer.from(noble.signSync(hash,keypair.privateKey,{canonical:!lowR,der:false}));}});cov_edesms666().s[31]++;psbtFromNetwork.validateSignaturesOfAllInputs();cov_edesms666().s[32]++;psbtFromNetwork.finalizeAllInputs();cov_edesms666().s[33]++;return psbtFromNetwork.extractTransaction();}cov_edesms666().s[34]++;exports.replayProtectionKeyPair=(0,keys_1.getKey)('replay-protection');const replayProtectionScriptPubKey=(cov_edesms666().s[35]++,(0,outputScripts_1.createOutputScriptP2shP2pk)(exports.replayProtectionKeyPair.publicKey).scriptPubKey);function isReplayProtectionUnspent(u,network){cov_edesms666().f[2]++;cov_edesms666().s[36]++;return u.address===(0,address_1.fromOutputScript)(replayProtectionScriptPubKey,network);}function mockReplayProtectionUnspent(network,value,{key=(cov_edesms666().b[3][0]++,exports.replayProtectionKeyPair),vout=(cov_edesms666().b[4][0]++,0)}=(cov_edesms666().b[2][0]++,{})){cov_edesms666().f[3]++;const outputScript=(cov_edesms666().s[37]++,(0,outputScripts_1.createOutputScriptP2shP2pk)(key.publicKey).scriptPubKey);const prevTransaction=(cov_edesms666().s[38]++,mockPrevTx(vout,outputScript,BigInt(value),network));cov_edesms666().s[39]++;return{...(0,bitgo_1.fromOutputWithPrevTx)(prevTransaction,vout),value};}function mockWalletUnspent(network,value,{chain=(cov_edesms666().b[6][0]++,0),index=(cov_edesms666().b[7][0]++,0),keys=(cov_edesms666().b[8][0]++,(0,keys_1.getDefaultWalletKeys)()),vout=(cov_edesms666().b[9][0]++,0),id}=(cov_edesms666().b[5][0]++,{})){cov_edesms666().f[4]++;const derivedKeys=(cov_edesms666().s[40]++,keys.deriveForChainAndIndex(chain,index));const address=(cov_edesms666().s[41]++,(0,address_1.fromOutputScript)((0,outputScripts_1.createOutputScript2of3)(derivedKeys.publicKeys,(0,bitgo_1.scriptTypeForChain)(chain)).scriptPubKey,network));cov_edesms666().s[42]++;if((cov_edesms666().b[11][0]++,id)&&(cov_edesms666().b[11][1]++,typeof id==='string')){cov_edesms666().b[10][0]++;cov_edesms666().s[43]++;return{id,address,chain,index,value};}else{cov_edesms666().b[10][1]++;const prevTransaction=(cov_edesms666().s[44]++,mockPrevTx(vout,(0,outputScripts_1.createOutputScript2of3)(derivedKeys.publicKeys,(0,bitgo_1.scriptTypeForChain)(chain),network).scriptPubKey,BigInt(value),network));const unspent=(cov_edesms666().s[45]++,(cov_edesms666().b[13][0]++,(0,bitgo_1.isSegwit)(chain))||(cov_edesms666().b[13][1]++,(0,networks_1.getMainnet)(network)===networks_1.networks.zcash)?(cov_edesms666().b[12][0]++,(0,bitgo_1.fromOutput)(prevTransaction,vout)):(cov_edesms666().b[12][1]++,(0,bitgo_1.fromOutputWithPrevTx)(prevTransaction,vout)));cov_edesms666().s[46]++;return{...unspent,chain,index,value};}}function mockUnspents(rootWalletKeys,inputScriptTypes,testOutputAmount,network){cov_edesms666().f[5]++;cov_edesms666().s[47]++;return inputScriptTypes.map((t,i)=>{cov_edesms666().f[6]++;cov_edesms666().s[48]++;if(bitgo_1.outputScripts.isScriptType2Of3(t)){cov_edesms666().b[14][0]++;cov_edesms666().s[49]++;return mockWalletUnspent(network,testOutputAmount,{keys:rootWalletKeys,chain:(0,bitgo_1.getExternalChainCode)(t),vout:i});}else{cov_edesms666().b[14][1]++;cov_edesms666().s[50]++;if(t===bitgo_1.outputScripts.scriptTypeP2shP2pk){cov_edesms666().b[15][0]++;cov_edesms666().s[51]++;return mockReplayProtectionUnspent(network,testOutputAmount,{key:exports.replayProtectionKeyPair,vout:i});}else{cov_edesms666().b[15][1]++;}}cov_edesms666().s[52]++;throw new Error(`invalid input type ${t}`);});}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvdGVzdHV0aWwvbW9jay50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvdGVzdHV0aWwvbW9jay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUE2QkEsZ0NBbUNDO0FBS0QsOERBS0M7QUFFRCxrRUFRQztBQUVELDhDQW9DQztBQUVELG9DQXFCQztBQWpKRCxpQ0FBaUM7QUFFakMsMENBQTBDO0FBQzFDLDhCQUE4QjtBQUM5QiwwQ0FBNEQ7QUFFNUQsb0NBZWtCO0FBQ2xCLHdDQUE4QztBQUM5QywwREFBNEY7QUFFNUYsaUNBQXNEO0FBSXRELFNBQWdCLFVBQVUsQ0FDeEIsSUFBWSxFQUNaLFlBQW9CLEVBQ3BCLEtBQWEsRUFDYixPQUFnQjtJQUVoQixNQUFNLGVBQWUsR0FBRyxJQUFBLDRCQUFvQixFQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUUxRCxNQUFNLE9BQU8sR0FBRyxJQUFBLGFBQU0sRUFBQyxjQUFjLENBQUMsQ0FBQztJQUN2QyxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO0lBQ2pDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDM0IsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO0lBQ3BELE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7SUFDbEMsSUFBSSxDQUFDLFVBQVU7UUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLHVEQUF1RCxDQUFDLENBQUM7SUFFMUYsS0FBSyxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxJQUFJLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDO1FBQzNDLElBQUksS0FBSyxLQUFLLElBQUksRUFBRSxDQUFDO1lBQ25CLGVBQWUsQ0FBQyxTQUFTLENBQUMsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDN0QsQ0FBQzthQUFNLENBQUM7WUFDTixlQUFlLENBQUMsU0FBUyxDQUFDLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQzNELENBQUM7SUFDSCxDQUFDO0lBQ0QsZUFBZSxDQUFDLFFBQVEsQ0FBQztRQUN2QixJQUFJLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDO1FBQzVCLEtBQUssRUFBRSxDQUFDO1FBQ1IsV0FBVyxFQUFFLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsS0FBSyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRTtLQUM5RixDQUFDLENBQUM7SUFDSCxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRTtRQUMzQixTQUFTLEVBQUUsTUFBTTtRQUNqQixJQUFJLEVBQUUsQ0FBQyxJQUFZLEVBQUUsSUFBYyxFQUFFLEVBQUUsQ0FDckMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsVUFBb0IsRUFBRSxFQUFFLFNBQVMsRUFBRSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztLQUNwRyxDQUFDLENBQUM7SUFDSCxlQUFlLENBQUMsNkJBQTZCLEVBQUUsQ0FBQztJQUNoRCxlQUFlLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUNwQyxPQUFPLGVBQWUsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0FBQzlDLENBQUM7QUFFWSxRQUFBLHVCQUF1QixHQUFHLElBQUEsYUFBTSxFQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDbkUsTUFBTSw0QkFBNEIsR0FBRyxJQUFBLDBDQUEwQixFQUFDLCtCQUF1QixDQUFDLFNBQVMsQ0FBQyxDQUFDLFlBQVksQ0FBQztBQUVoSCxTQUFnQix5QkFBeUIsQ0FDdkMsQ0FBbUIsRUFDbkIsT0FBZ0I7SUFFaEIsT0FBTyxDQUFDLENBQUMsT0FBTyxLQUFLLElBQUEsMEJBQWdCLEVBQUMsNEJBQTRCLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDL0UsQ0FBQztBQUVELFNBQWdCLDJCQUEyQixDQUN6QyxPQUFnQixFQUNoQixLQUFjLEVBQ2QsRUFBRSxHQUFHLEdBQUcsK0JBQXVCLEVBQUUsSUFBSSxHQUFHLENBQUMsS0FBOEMsRUFBRTtJQUV6RixNQUFNLFlBQVksR0FBRyxJQUFBLDBDQUEwQixFQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxZQUFZLENBQUM7SUFDNUUsTUFBTSxlQUFlLEdBQUcsVUFBVSxDQUFDLElBQUksRUFBRSxZQUFZLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQy9FLE9BQU8sRUFBRSxHQUFHLElBQUEsNEJBQW9CLEVBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDO0FBQ25FLENBQUM7QUFFRCxTQUFnQixpQkFBaUIsQ0FDL0IsT0FBZ0IsRUFDaEIsS0FBYyxFQUNkLEVBQ0UsS0FBSyxHQUFHLENBQUMsRUFDVCxLQUFLLEdBQUcsQ0FBQyxFQUNULElBQUksR0FBRyxJQUFBLDJCQUFvQixHQUFFLEVBQzdCLElBQUksR0FBRyxDQUFDLEVBQ1IsRUFBRSxNQUMwRixFQUFFO0lBRWhHLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDOUQsTUFBTSxPQUFPLEdBQUcsSUFBQSwwQkFBZ0IsRUFDOUIsSUFBQSxzQ0FBc0IsRUFBQyxXQUFXLENBQUMsVUFBVSxFQUFFLElBQUEsMEJBQWtCLEVBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxZQUFZLEVBQ3RGLE9BQU8sQ0FDUixDQUFDO0lBQ0YsSUFBSSxFQUFFLElBQUksT0FBTyxFQUFFLEtBQUssUUFBUSxFQUFFLENBQUM7UUFDakMsT0FBTyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQztJQUM5QyxDQUFDO1NBQU0sQ0FBQztRQUNOLE1BQU0sZUFBZSxHQUFHLFVBQVUsQ0FDaEMsSUFBSSxFQUNKLElBQUEsc0NBQXNCLEVBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxJQUFBLDBCQUFrQixFQUFDLEtBQUssQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLFlBQVksRUFDL0YsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUNiLE9BQU8sQ0FDUixDQUFDO1FBQ0YsTUFBTSxPQUFPLEdBQ1gsSUFBQSxnQkFBUSxFQUFDLEtBQUssQ0FBQyxJQUFJLElBQUEscUJBQVUsRUFBQyxPQUFPLENBQUMsS0FBSyxtQkFBUSxDQUFDLEtBQUs7WUFDdkQsQ0FBQyxDQUFDLElBQUEsa0JBQVUsRUFBQyxlQUFlLEVBQUUsSUFBSSxDQUFDO1lBQ25DLENBQUMsQ0FBQyxJQUFBLDRCQUFvQixFQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNsRCxPQUFPO1lBQ0wsR0FBRyxPQUFPO1lBQ1YsS0FBSztZQUNMLEtBQUs7WUFDTCxLQUFLO1NBQ04sQ0FBQztJQUNKLENBQUM7QUFDSCxDQUFDO0FBRUQsU0FBZ0IsWUFBWSxDQUMxQixjQUE4QixFQUM5QixnQkFBa0UsRUFDbEUsZ0JBQXlCLEVBQ3pCLE9BQWdCO0lBRWhCLE9BQU8sZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBb0IsRUFBRTtRQUNyRCxJQUFJLHFCQUFhLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUN0QyxPQUFPLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRTtnQkFDbEQsSUFBSSxFQUFFLGNBQWM7Z0JBQ3BCLEtBQUssRUFBRSxJQUFBLDRCQUFvQixFQUFDLENBQUMsQ0FBQztnQkFDOUIsSUFBSSxFQUFFLENBQUM7YUFDUixDQUFDLENBQUM7UUFDTCxDQUFDO2FBQU0sSUFBSSxDQUFDLEtBQUsscUJBQWEsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQ2xELE9BQU8sMkJBQTJCLENBQUMsT0FBTyxFQUFFLGdCQUFnQixFQUFFO2dCQUM1RCxHQUFHLEVBQUUsK0JBQXVCO2dCQUM1QixJQUFJLEVBQUUsQ0FBQzthQUNSLENBQUMsQ0FBQztRQUNMLENBQUM7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzdDLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGFzc2VydCBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHsgQklQMzJJbnRlcmZhY2UgfSBmcm9tICdiaXAzMic7XG5pbXBvcnQgKiBhcyBub2JsZSBmcm9tICdAbm9ibGUvc2VjcDI1NmsxJztcbmltcG9ydCAqIGFzIHV0eG9saWIgZnJvbSAnLi4nO1xuaW1wb3J0IHsgZ2V0TWFpbm5ldCwgTmV0d29yaywgbmV0d29ya3MgfSBmcm9tICcuLi9uZXR3b3Jrcyc7XG5cbmltcG9ydCB7XG4gIENoYWluQ29kZSxcbiAgY3JlYXRlUHNidEZvck5ldHdvcmssXG4gIGZyb21PdXRwdXQsXG4gIGZyb21PdXRwdXRXaXRoUHJldlR4LFxuICBnZXRFeHRlcm5hbENoYWluQ29kZSxcbiAgaXNTZWd3aXQsXG4gIE5vbldpdG5lc3NXYWxsZXRVbnNwZW50LFxuICBvdXRwdXRTY3JpcHRzLFxuICBSb290V2FsbGV0S2V5cyxcbiAgc2NyaXB0VHlwZUZvckNoYWluLFxuICBVbnNwZW50LFxuICBVbnNwZW50V2l0aFByZXZUeCxcbiAgVXR4b1RyYW5zYWN0aW9uLFxuICBXYWxsZXRVbnNwZW50LFxufSBmcm9tICcuLi9iaXRnbyc7XG5pbXBvcnQgeyBmcm9tT3V0cHV0U2NyaXB0IH0gZnJvbSAnLi4vYWRkcmVzcyc7XG5pbXBvcnQgeyBjcmVhdGVPdXRwdXRTY3JpcHQyb2YzLCBjcmVhdGVPdXRwdXRTY3JpcHRQMnNoUDJwayB9IGZyb20gJy4uL2JpdGdvL291dHB1dFNjcmlwdHMnO1xuXG5pbXBvcnQgeyBnZXREZWZhdWx0V2FsbGV0S2V5cywgZ2V0S2V5IH0gZnJvbSAnLi9rZXlzJztcblxuZXhwb3J0IHR5cGUgSW5wdXRUeXBlID0gb3V0cHV0U2NyaXB0cy5TY3JpcHRUeXBlMk9mMztcblxuZXhwb3J0IGZ1bmN0aW9uIG1vY2tQcmV2VHgoXG4gIHZvdXQ6IG51bWJlcixcbiAgb3V0cHV0U2NyaXB0OiBCdWZmZXIsXG4gIHZhbHVlOiBiaWdpbnQsXG4gIG5ldHdvcms6IE5ldHdvcmtcbik6IFV0eG9UcmFuc2FjdGlvbjxiaWdpbnQ+IHtcbiAgY29uc3QgcHNidEZyb21OZXR3b3JrID0gY3JlYXRlUHNidEZvck5ldHdvcmsoeyBuZXR3b3JrIH0pO1xuXG4gIGNvbnN0IGtleXBhaXIgPSBnZXRLZXkoJ21vY2stcHJldi10eCcpO1xuICBjb25zdCBwdWJrZXkgPSBrZXlwYWlyLnB1YmxpY0tleTtcbiAgYXNzZXJ0KGtleXBhaXIucHJpdmF0ZUtleSk7XG4gIGNvbnN0IHBheW1lbnQgPSB1dHhvbGliLnBheW1lbnRzLnAyd3BraCh7IHB1YmtleSB9KTtcbiAgY29uc3QgZGVzdE91dHB1dCA9IHBheW1lbnQub3V0cHV0O1xuICBpZiAoIWRlc3RPdXRwdXQpIHRocm93IG5ldyBFcnJvcignSW1wb3NzaWJsZSwgcGF5bWVudCB3ZSBqdXN0IGNvbnN0cnVjdGVkIGhhcyBubyBvdXRwdXQnKTtcblxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDw9IHZvdXQ7IGluZGV4KyspIHtcbiAgICBpZiAoaW5kZXggPT09IHZvdXQpIHtcbiAgICAgIHBzYnRGcm9tTmV0d29yay5hZGRPdXRwdXQoeyBzY3JpcHQ6IG91dHB1dFNjcmlwdCwgdmFsdWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBzYnRGcm9tTmV0d29yay5hZGRPdXRwdXQoeyBzY3JpcHQ6IGRlc3RPdXRwdXQsIHZhbHVlIH0pO1xuICAgIH1cbiAgfVxuICBwc2J0RnJvbU5ldHdvcmsuYWRkSW5wdXQoe1xuICAgIGhhc2g6IEJ1ZmZlci5hbGxvYygzMiwgMHgwMSksXG4gICAgaW5kZXg6IDAsXG4gICAgd2l0bmVzc1V0eG86IHsgc2NyaXB0OiBkZXN0T3V0cHV0LCB2YWx1ZTogdmFsdWUgKiAoQmlnSW50KHZvdXQpICsgQmlnSW50KDEpKSArIEJpZ0ludCgxMDAwKSB9LFxuICB9KTtcbiAgcHNidEZyb21OZXR3b3JrLnNpZ25JbnB1dCgwLCB7XG4gICAgcHVibGljS2V5OiBwdWJrZXksXG4gICAgc2lnbjogKGhhc2g6IEJ1ZmZlciwgbG93Uj86IGJvb2xlYW4pID0+XG4gICAgICBCdWZmZXIuZnJvbShub2JsZS5zaWduU3luYyhoYXNoLCBrZXlwYWlyLnByaXZhdGVLZXkgYXMgQnVmZmVyLCB7IGNhbm9uaWNhbDogIWxvd1IsIGRlcjogZmFsc2UgfSkpLFxuICB9KTtcbiAgcHNidEZyb21OZXR3b3JrLnZhbGlkYXRlU2lnbmF0dXJlc09mQWxsSW5wdXRzKCk7XG4gIHBzYnRGcm9tTmV0d29yay5maW5hbGl6ZUFsbElucHV0cygpO1xuICByZXR1cm4gcHNidEZyb21OZXR3b3JrLmV4dHJhY3RUcmFuc2FjdGlvbigpO1xufVxuXG5leHBvcnQgY29uc3QgcmVwbGF5UHJvdGVjdGlvbktleVBhaXIgPSBnZXRLZXkoJ3JlcGxheS1wcm90ZWN0aW9uJyk7XG5jb25zdCByZXBsYXlQcm90ZWN0aW9uU2NyaXB0UHViS2V5ID0gY3JlYXRlT3V0cHV0U2NyaXB0UDJzaFAycGsocmVwbGF5UHJvdGVjdGlvbktleVBhaXIucHVibGljS2V5KS5zY3JpcHRQdWJLZXk7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlcGxheVByb3RlY3Rpb25VbnNwZW50PFROdW1iZXIgZXh0ZW5kcyBiaWdpbnQgfCBudW1iZXI+KFxuICB1OiBVbnNwZW50PFROdW1iZXI+LFxuICBuZXR3b3JrOiBOZXR3b3JrXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIHUuYWRkcmVzcyA9PT0gZnJvbU91dHB1dFNjcmlwdChyZXBsYXlQcm90ZWN0aW9uU2NyaXB0UHViS2V5LCBuZXR3b3JrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vY2tSZXBsYXlQcm90ZWN0aW9uVW5zcGVudDxUTnVtYmVyIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50PihcbiAgbmV0d29yazogTmV0d29yayxcbiAgdmFsdWU6IFROdW1iZXIsXG4gIHsga2V5ID0gcmVwbGF5UHJvdGVjdGlvbktleVBhaXIsIHZvdXQgPSAwIH06IHsga2V5PzogQklQMzJJbnRlcmZhY2U7IHZvdXQ/OiBudW1iZXIgfSA9IHt9XG4pOiBVbnNwZW50V2l0aFByZXZUeDxUTnVtYmVyPiB7XG4gIGNvbnN0IG91dHB1dFNjcmlwdCA9IGNyZWF0ZU91dHB1dFNjcmlwdFAyc2hQMnBrKGtleS5wdWJsaWNLZXkpLnNjcmlwdFB1YktleTtcbiAgY29uc3QgcHJldlRyYW5zYWN0aW9uID0gbW9ja1ByZXZUeCh2b3V0LCBvdXRwdXRTY3JpcHQsIEJpZ0ludCh2YWx1ZSksIG5ldHdvcmspO1xuICByZXR1cm4geyAuLi5mcm9tT3V0cHV0V2l0aFByZXZUeChwcmV2VHJhbnNhY3Rpb24sIHZvdXQpLCB2YWx1ZSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW9ja1dhbGxldFVuc3BlbnQ8VE51bWJlciBleHRlbmRzIG51bWJlciB8IGJpZ2ludD4oXG4gIG5ldHdvcms6IE5ldHdvcmssXG4gIHZhbHVlOiBUTnVtYmVyLFxuICB7XG4gICAgY2hhaW4gPSAwLFxuICAgIGluZGV4ID0gMCxcbiAgICBrZXlzID0gZ2V0RGVmYXVsdFdhbGxldEtleXMoKSxcbiAgICB2b3V0ID0gMCxcbiAgICBpZCxcbiAgfTogeyBjaGFpbj86IENoYWluQ29kZTsgaW5kZXg/OiBudW1iZXI7IGtleXM/OiBSb290V2FsbGV0S2V5czsgdm91dD86IG51bWJlcjsgaWQ/OiBzdHJpbmcgfSA9IHt9XG4pOiBXYWxsZXRVbnNwZW50PFROdW1iZXI+IHwgTm9uV2l0bmVzc1dhbGxldFVuc3BlbnQ8VE51bWJlcj4ge1xuICBjb25zdCBkZXJpdmVkS2V5cyA9IGtleXMuZGVyaXZlRm9yQ2hhaW5BbmRJbmRleChjaGFpbiwgaW5kZXgpO1xuICBjb25zdCBhZGRyZXNzID0gZnJvbU91dHB1dFNjcmlwdChcbiAgICBjcmVhdGVPdXRwdXRTY3JpcHQyb2YzKGRlcml2ZWRLZXlzLnB1YmxpY0tleXMsIHNjcmlwdFR5cGVGb3JDaGFpbihjaGFpbikpLnNjcmlwdFB1YktleSxcbiAgICBuZXR3b3JrXG4gICk7XG4gIGlmIChpZCAmJiB0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHsgaWQsIGFkZHJlc3MsIGNoYWluLCBpbmRleCwgdmFsdWUgfTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBwcmV2VHJhbnNhY3Rpb24gPSBtb2NrUHJldlR4KFxuICAgICAgdm91dCxcbiAgICAgIGNyZWF0ZU91dHB1dFNjcmlwdDJvZjMoZGVyaXZlZEtleXMucHVibGljS2V5cywgc2NyaXB0VHlwZUZvckNoYWluKGNoYWluKSwgbmV0d29yaykuc2NyaXB0UHViS2V5LFxuICAgICAgQmlnSW50KHZhbHVlKSxcbiAgICAgIG5ldHdvcmtcbiAgICApO1xuICAgIGNvbnN0IHVuc3BlbnQgPVxuICAgICAgaXNTZWd3aXQoY2hhaW4pIHx8IGdldE1haW5uZXQobmV0d29yaykgPT09IG5ldHdvcmtzLnpjYXNoXG4gICAgICAgID8gZnJvbU91dHB1dChwcmV2VHJhbnNhY3Rpb24sIHZvdXQpXG4gICAgICAgIDogZnJvbU91dHB1dFdpdGhQcmV2VHgocHJldlRyYW5zYWN0aW9uLCB2b3V0KTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4udW5zcGVudCxcbiAgICAgIGNoYWluLFxuICAgICAgaW5kZXgsXG4gICAgICB2YWx1ZSxcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb2NrVW5zcGVudHM8VE51bWJlciBleHRlbmRzIG51bWJlciB8IGJpZ2ludD4oXG4gIHJvb3RXYWxsZXRLZXlzOiBSb290V2FsbGV0S2V5cyxcbiAgaW5wdXRTY3JpcHRUeXBlczogKElucHV0VHlwZSB8IG91dHB1dFNjcmlwdHMuU2NyaXB0VHlwZVAyc2hQMnBrKVtdLFxuICB0ZXN0T3V0cHV0QW1vdW50OiBUTnVtYmVyLFxuICBuZXR3b3JrOiBOZXR3b3JrXG4pOiAoVW5zcGVudDxUTnVtYmVyPiB8IFdhbGxldFVuc3BlbnQ8VE51bWJlcj4pW10ge1xuICByZXR1cm4gaW5wdXRTY3JpcHRUeXBlcy5tYXAoKHQsIGkpOiBVbnNwZW50PFROdW1iZXI+ID0+IHtcbiAgICBpZiAob3V0cHV0U2NyaXB0cy5pc1NjcmlwdFR5cGUyT2YzKHQpKSB7XG4gICAgICByZXR1cm4gbW9ja1dhbGxldFVuc3BlbnQobmV0d29yaywgdGVzdE91dHB1dEFtb3VudCwge1xuICAgICAgICBrZXlzOiByb290V2FsbGV0S2V5cyxcbiAgICAgICAgY2hhaW46IGdldEV4dGVybmFsQ2hhaW5Db2RlKHQpLFxuICAgICAgICB2b3V0OiBpLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0ID09PSBvdXRwdXRTY3JpcHRzLnNjcmlwdFR5cGVQMnNoUDJwaykge1xuICAgICAgcmV0dXJuIG1vY2tSZXBsYXlQcm90ZWN0aW9uVW5zcGVudChuZXR3b3JrLCB0ZXN0T3V0cHV0QW1vdW50LCB7XG4gICAgICAgIGtleTogcmVwbGF5UHJvdGVjdGlvbktleVBhaXIsXG4gICAgICAgIHZvdXQ6IGksXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGlucHV0IHR5cGUgJHt0fWApO1xuICB9KTtcbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfZWRlc21zNjY2IiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwiZXhwb3J0cyIsIm1vY2tQcmV2VHgiLCJpc1JlcGxheVByb3RlY3Rpb25VbnNwZW50IiwibW9ja1JlcGxheVByb3RlY3Rpb25VbnNwZW50IiwibW9ja1dhbGxldFVuc3BlbnQiLCJtb2NrVW5zcGVudHMiLCJhc3NlcnQiLCJyZXF1aXJlIiwibm9ibGUiLCJ1dHhvbGliIiwibmV0d29ya3NfMSIsImJpdGdvXzEiLCJhZGRyZXNzXzEiLCJvdXRwdXRTY3JpcHRzXzEiLCJrZXlzXzEiLCJ2b3V0Iiwib3V0cHV0U2NyaXB0IiwidmFsdWUiLCJuZXR3b3JrIiwiZiIsInBzYnRGcm9tTmV0d29yayIsImNyZWF0ZVBzYnRGb3JOZXR3b3JrIiwia2V5cGFpciIsImdldEtleSIsInB1YmtleSIsInB1YmxpY0tleSIsInByaXZhdGVLZXkiLCJwYXltZW50IiwicGF5bWVudHMiLCJwMndwa2giLCJkZXN0T3V0cHV0Iiwib3V0cHV0IiwiYiIsIkVycm9yIiwiaW5kZXgiLCJhZGRPdXRwdXQiLCJzY3JpcHQiLCJhZGRJbnB1dCIsImhhc2giLCJCdWZmZXIiLCJhbGxvYyIsIndpdG5lc3NVdHhvIiwiQmlnSW50Iiwic2lnbklucHV0Iiwic2lnbiIsImxvd1IiLCJmcm9tIiwic2lnblN5bmMiLCJjYW5vbmljYWwiLCJkZXIiLCJ2YWxpZGF0ZVNpZ25hdHVyZXNPZkFsbElucHV0cyIsImZpbmFsaXplQWxsSW5wdXRzIiwiZXh0cmFjdFRyYW5zYWN0aW9uIiwicmVwbGF5UHJvdGVjdGlvbktleVBhaXIiLCJyZXBsYXlQcm90ZWN0aW9uU2NyaXB0UHViS2V5IiwiY3JlYXRlT3V0cHV0U2NyaXB0UDJzaFAycGsiLCJzY3JpcHRQdWJLZXkiLCJ1IiwiYWRkcmVzcyIsImZyb21PdXRwdXRTY3JpcHQiLCJrZXkiLCJwcmV2VHJhbnNhY3Rpb24iLCJmcm9tT3V0cHV0V2l0aFByZXZUeCIsImNoYWluIiwia2V5cyIsImdldERlZmF1bHRXYWxsZXRLZXlzIiwiaWQiLCJkZXJpdmVkS2V5cyIsImRlcml2ZUZvckNoYWluQW5kSW5kZXgiLCJjcmVhdGVPdXRwdXRTY3JpcHQyb2YzIiwicHVibGljS2V5cyIsInNjcmlwdFR5cGVGb3JDaGFpbiIsInVuc3BlbnQiLCJpc1NlZ3dpdCIsImdldE1haW5uZXQiLCJuZXR3b3JrcyIsInpjYXNoIiwiZnJvbU91dHB1dCIsInJvb3RXYWxsZXRLZXlzIiwiaW5wdXRTY3JpcHRUeXBlcyIsInRlc3RPdXRwdXRBbW91bnQiLCJtYXAiLCJ0IiwiaSIsIm91dHB1dFNjcmlwdHMiLCJpc1NjcmlwdFR5cGUyT2YzIiwiZ2V0RXh0ZXJuYWxDaGFpbkNvZGUiLCJzY3JpcHRUeXBlUDJzaFAycGsiXSwic291cmNlcyI6WyIvVXNlcnMvcXJvYy9Db2RlL2hhcGkvY2hhaW5kZWZ1c2VyL3V0eG8tbGliL3NyYy90ZXN0dXRpbC9tb2NrLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGFzc2VydCBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHsgQklQMzJJbnRlcmZhY2UgfSBmcm9tICdiaXAzMic7XG5pbXBvcnQgKiBhcyBub2JsZSBmcm9tICdAbm9ibGUvc2VjcDI1NmsxJztcbmltcG9ydCAqIGFzIHV0eG9saWIgZnJvbSAnLi4nO1xuaW1wb3J0IHsgZ2V0TWFpbm5ldCwgTmV0d29yaywgbmV0d29ya3MgfSBmcm9tICcuLi9uZXR3b3Jrcyc7XG5cbmltcG9ydCB7XG4gIENoYWluQ29kZSxcbiAgY3JlYXRlUHNidEZvck5ldHdvcmssXG4gIGZyb21PdXRwdXQsXG4gIGZyb21PdXRwdXRXaXRoUHJldlR4LFxuICBnZXRFeHRlcm5hbENoYWluQ29kZSxcbiAgaXNTZWd3aXQsXG4gIE5vbldpdG5lc3NXYWxsZXRVbnNwZW50LFxuICBvdXRwdXRTY3JpcHRzLFxuICBSb290V2FsbGV0S2V5cyxcbiAgc2NyaXB0VHlwZUZvckNoYWluLFxuICBVbnNwZW50LFxuICBVbnNwZW50V2l0aFByZXZUeCxcbiAgVXR4b1RyYW5zYWN0aW9uLFxuICBXYWxsZXRVbnNwZW50LFxufSBmcm9tICcuLi9iaXRnbyc7XG5pbXBvcnQgeyBmcm9tT3V0cHV0U2NyaXB0IH0gZnJvbSAnLi4vYWRkcmVzcyc7XG5pbXBvcnQgeyBjcmVhdGVPdXRwdXRTY3JpcHQyb2YzLCBjcmVhdGVPdXRwdXRTY3JpcHRQMnNoUDJwayB9IGZyb20gJy4uL2JpdGdvL291dHB1dFNjcmlwdHMnO1xuXG5pbXBvcnQgeyBnZXREZWZhdWx0V2FsbGV0S2V5cywgZ2V0S2V5IH0gZnJvbSAnLi9rZXlzJztcblxuZXhwb3J0IHR5cGUgSW5wdXRUeXBlID0gb3V0cHV0U2NyaXB0cy5TY3JpcHRUeXBlMk9mMztcblxuZXhwb3J0IGZ1bmN0aW9uIG1vY2tQcmV2VHgoXG4gIHZvdXQ6IG51bWJlcixcbiAgb3V0cHV0U2NyaXB0OiBCdWZmZXIsXG4gIHZhbHVlOiBiaWdpbnQsXG4gIG5ldHdvcms6IE5ldHdvcmtcbik6IFV0eG9UcmFuc2FjdGlvbjxiaWdpbnQ+IHtcbiAgY29uc3QgcHNidEZyb21OZXR3b3JrID0gY3JlYXRlUHNidEZvck5ldHdvcmsoeyBuZXR3b3JrIH0pO1xuXG4gIGNvbnN0IGtleXBhaXIgPSBnZXRLZXkoJ21vY2stcHJldi10eCcpO1xuICBjb25zdCBwdWJrZXkgPSBrZXlwYWlyLnB1YmxpY0tleTtcbiAgYXNzZXJ0KGtleXBhaXIucHJpdmF0ZUtleSk7XG4gIGNvbnN0IHBheW1lbnQgPSB1dHhvbGliLnBheW1lbnRzLnAyd3BraCh7IHB1YmtleSB9KTtcbiAgY29uc3QgZGVzdE91dHB1dCA9IHBheW1lbnQub3V0cHV0O1xuICBpZiAoIWRlc3RPdXRwdXQpIHRocm93IG5ldyBFcnJvcignSW1wb3NzaWJsZSwgcGF5bWVudCB3ZSBqdXN0IGNvbnN0cnVjdGVkIGhhcyBubyBvdXRwdXQnKTtcblxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDw9IHZvdXQ7IGluZGV4KyspIHtcbiAgICBpZiAoaW5kZXggPT09IHZvdXQpIHtcbiAgICAgIHBzYnRGcm9tTmV0d29yay5hZGRPdXRwdXQoeyBzY3JpcHQ6IG91dHB1dFNjcmlwdCwgdmFsdWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBzYnRGcm9tTmV0d29yay5hZGRPdXRwdXQoeyBzY3JpcHQ6IGRlc3RPdXRwdXQsIHZhbHVlIH0pO1xuICAgIH1cbiAgfVxuICBwc2J0RnJvbU5ldHdvcmsuYWRkSW5wdXQoe1xuICAgIGhhc2g6IEJ1ZmZlci5hbGxvYygzMiwgMHgwMSksXG4gICAgaW5kZXg6IDAsXG4gICAgd2l0bmVzc1V0eG86IHsgc2NyaXB0OiBkZXN0T3V0cHV0LCB2YWx1ZTogdmFsdWUgKiAoQmlnSW50KHZvdXQpICsgQmlnSW50KDEpKSArIEJpZ0ludCgxMDAwKSB9LFxuICB9KTtcbiAgcHNidEZyb21OZXR3b3JrLnNpZ25JbnB1dCgwLCB7XG4gICAgcHVibGljS2V5OiBwdWJrZXksXG4gICAgc2lnbjogKGhhc2g6IEJ1ZmZlciwgbG93Uj86IGJvb2xlYW4pID0+XG4gICAgICBCdWZmZXIuZnJvbShub2JsZS5zaWduU3luYyhoYXNoLCBrZXlwYWlyLnByaXZhdGVLZXkgYXMgQnVmZmVyLCB7IGNhbm9uaWNhbDogIWxvd1IsIGRlcjogZmFsc2UgfSkpLFxuICB9KTtcbiAgcHNidEZyb21OZXR3b3JrLnZhbGlkYXRlU2lnbmF0dXJlc09mQWxsSW5wdXRzKCk7XG4gIHBzYnRGcm9tTmV0d29yay5maW5hbGl6ZUFsbElucHV0cygpO1xuICByZXR1cm4gcHNidEZyb21OZXR3b3JrLmV4dHJhY3RUcmFuc2FjdGlvbigpO1xufVxuXG5leHBvcnQgY29uc3QgcmVwbGF5UHJvdGVjdGlvbktleVBhaXIgPSBnZXRLZXkoJ3JlcGxheS1wcm90ZWN0aW9uJyk7XG5jb25zdCByZXBsYXlQcm90ZWN0aW9uU2NyaXB0UHViS2V5ID0gY3JlYXRlT3V0cHV0U2NyaXB0UDJzaFAycGsocmVwbGF5UHJvdGVjdGlvbktleVBhaXIucHVibGljS2V5KS5zY3JpcHRQdWJLZXk7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlcGxheVByb3RlY3Rpb25VbnNwZW50PFROdW1iZXIgZXh0ZW5kcyBiaWdpbnQgfCBudW1iZXI+KFxuICB1OiBVbnNwZW50PFROdW1iZXI+LFxuICBuZXR3b3JrOiBOZXR3b3JrXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIHUuYWRkcmVzcyA9PT0gZnJvbU91dHB1dFNjcmlwdChyZXBsYXlQcm90ZWN0aW9uU2NyaXB0UHViS2V5LCBuZXR3b3JrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vY2tSZXBsYXlQcm90ZWN0aW9uVW5zcGVudDxUTnVtYmVyIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50PihcbiAgbmV0d29yazogTmV0d29yayxcbiAgdmFsdWU6IFROdW1iZXIsXG4gIHsga2V5ID0gcmVwbGF5UHJvdGVjdGlvbktleVBhaXIsIHZvdXQgPSAwIH06IHsga2V5PzogQklQMzJJbnRlcmZhY2U7IHZvdXQ/OiBudW1iZXIgfSA9IHt9XG4pOiBVbnNwZW50V2l0aFByZXZUeDxUTnVtYmVyPiB7XG4gIGNvbnN0IG91dHB1dFNjcmlwdCA9IGNyZWF0ZU91dHB1dFNjcmlwdFAyc2hQMnBrKGtleS5wdWJsaWNLZXkpLnNjcmlwdFB1YktleTtcbiAgY29uc3QgcHJldlRyYW5zYWN0aW9uID0gbW9ja1ByZXZUeCh2b3V0LCBvdXRwdXRTY3JpcHQsIEJpZ0ludCh2YWx1ZSksIG5ldHdvcmspO1xuICByZXR1cm4geyAuLi5mcm9tT3V0cHV0V2l0aFByZXZUeChwcmV2VHJhbnNhY3Rpb24sIHZvdXQpLCB2YWx1ZSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW9ja1dhbGxldFVuc3BlbnQ8VE51bWJlciBleHRlbmRzIG51bWJlciB8IGJpZ2ludD4oXG4gIG5ldHdvcms6IE5ldHdvcmssXG4gIHZhbHVlOiBUTnVtYmVyLFxuICB7XG4gICAgY2hhaW4gPSAwLFxuICAgIGluZGV4ID0gMCxcbiAgICBrZXlzID0gZ2V0RGVmYXVsdFdhbGxldEtleXMoKSxcbiAgICB2b3V0ID0gMCxcbiAgICBpZCxcbiAgfTogeyBjaGFpbj86IENoYWluQ29kZTsgaW5kZXg/OiBudW1iZXI7IGtleXM/OiBSb290V2FsbGV0S2V5czsgdm91dD86IG51bWJlcjsgaWQ/OiBzdHJpbmcgfSA9IHt9XG4pOiBXYWxsZXRVbnNwZW50PFROdW1iZXI+IHwgTm9uV2l0bmVzc1dhbGxldFVuc3BlbnQ8VE51bWJlcj4ge1xuICBjb25zdCBkZXJpdmVkS2V5cyA9IGtleXMuZGVyaXZlRm9yQ2hhaW5BbmRJbmRleChjaGFpbiwgaW5kZXgpO1xuICBjb25zdCBhZGRyZXNzID0gZnJvbU91dHB1dFNjcmlwdChcbiAgICBjcmVhdGVPdXRwdXRTY3JpcHQyb2YzKGRlcml2ZWRLZXlzLnB1YmxpY0tleXMsIHNjcmlwdFR5cGVGb3JDaGFpbihjaGFpbikpLnNjcmlwdFB1YktleSxcbiAgICBuZXR3b3JrXG4gICk7XG4gIGlmIChpZCAmJiB0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHsgaWQsIGFkZHJlc3MsIGNoYWluLCBpbmRleCwgdmFsdWUgfTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBwcmV2VHJhbnNhY3Rpb24gPSBtb2NrUHJldlR4KFxuICAgICAgdm91dCxcbiAgICAgIGNyZWF0ZU91dHB1dFNjcmlwdDJvZjMoZGVyaXZlZEtleXMucHVibGljS2V5cywgc2NyaXB0VHlwZUZvckNoYWluKGNoYWluKSwgbmV0d29yaykuc2NyaXB0UHViS2V5LFxuICAgICAgQmlnSW50KHZhbHVlKSxcbiAgICAgIG5ldHdvcmtcbiAgICApO1xuICAgIGNvbnN0IHVuc3BlbnQgPVxuICAgICAgaXNTZWd3aXQoY2hhaW4pIHx8IGdldE1haW5uZXQobmV0d29yaykgPT09IG5ldHdvcmtzLnpjYXNoXG4gICAgICAgID8gZnJvbU91dHB1dChwcmV2VHJhbnNhY3Rpb24sIHZvdXQpXG4gICAgICAgIDogZnJvbU91dHB1dFdpdGhQcmV2VHgocHJldlRyYW5zYWN0aW9uLCB2b3V0KTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4udW5zcGVudCxcbiAgICAgIGNoYWluLFxuICAgICAgaW5kZXgsXG4gICAgICB2YWx1ZSxcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb2NrVW5zcGVudHM8VE51bWJlciBleHRlbmRzIG51bWJlciB8IGJpZ2ludD4oXG4gIHJvb3RXYWxsZXRLZXlzOiBSb290V2FsbGV0S2V5cyxcbiAgaW5wdXRTY3JpcHRUeXBlczogKElucHV0VHlwZSB8IG91dHB1dFNjcmlwdHMuU2NyaXB0VHlwZVAyc2hQMnBrKVtdLFxuICB0ZXN0T3V0cHV0QW1vdW50OiBUTnVtYmVyLFxuICBuZXR3b3JrOiBOZXR3b3JrXG4pOiAoVW5zcGVudDxUTnVtYmVyPiB8IFdhbGxldFVuc3BlbnQ8VE51bWJlcj4pW10ge1xuICByZXR1cm4gaW5wdXRTY3JpcHRUeXBlcy5tYXAoKHQsIGkpOiBVbnNwZW50PFROdW1iZXI+ID0+IHtcbiAgICBpZiAob3V0cHV0U2NyaXB0cy5pc1NjcmlwdFR5cGUyT2YzKHQpKSB7XG4gICAgICByZXR1cm4gbW9ja1dhbGxldFVuc3BlbnQobmV0d29yaywgdGVzdE91dHB1dEFtb3VudCwge1xuICAgICAgICBrZXlzOiByb290V2FsbGV0S2V5cyxcbiAgICAgICAgY2hhaW46IGdldEV4dGVybmFsQ2hhaW5Db2RlKHQpLFxuICAgICAgICB2b3V0OiBpLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0ID09PSBvdXRwdXRTY3JpcHRzLnNjcmlwdFR5cGVQMnNoUDJwaykge1xuICAgICAgcmV0dXJuIG1vY2tSZXBsYXlQcm90ZWN0aW9uVW5zcGVudChuZXR3b3JrLCB0ZXN0T3V0cHV0QW1vdW50LCB7XG4gICAgICAgIGtleTogcmVwbGF5UHJvdGVjdGlvbktleVBhaXIsXG4gICAgICAgIHZvdXQ6IGksXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGlucHV0IHR5cGUgJHt0fWApO1xuICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6IncrZ0JBeUJBO0FBQUFBLGFBQUEsU0FB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