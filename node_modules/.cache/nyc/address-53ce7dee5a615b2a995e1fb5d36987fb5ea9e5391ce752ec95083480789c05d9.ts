"use strict";function cov_arz6903pk(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/zcash/address.ts";var hash="a6bce8cd2577e769c31c7b4f7a363a5cb7561b5b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/zcash/address.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:42}},"2":{start:{line:4,column:0},end:{line:4,column:38}},"3":{start:{line:5,column:0},end:{line:5,column:44}},"4":{start:{line:6,column:0},end:{line:6,column:40}},"5":{start:{line:7,column:15},end:{line:7,column:32}},"6":{start:{line:8,column:24},end:{line:8,column:48}},"7":{start:{line:9,column:14},end:{line:9,column:48}},"8":{start:{line:10,column:19},end:{line:10,column:44}},"9":{start:{line:11,column:18},end:{line:11,column:38}},"10":{start:{line:12,column:18},end:{line:12,column:38}},"11":{start:{line:14,column:20},end:{line:14,column:45}},"12":{start:{line:15,column:20},end:{line:15,column:43}},"13":{start:{line:16,column:17},end:{line:16,column:33}},"14":{start:{line:17,column:4},end:{line:17,column:29}},"15":{start:{line:20,column:4},end:{line:20,column:70}},"16":{start:{line:21,column:20},end:{line:21,column:42}},"17":{start:{line:22,column:4},end:{line:22,column:38}},"18":{start:{line:23,column:4},end:{line:23,column:26}},"19":{start:{line:24,column:4},end:{line:24,column:37}},"20":{start:{line:27,column:4},end:{line:27,column:45}},"21":{start:{line:30,column:4},end:{line:34,column:17}},"22":{start:{line:31,column:8},end:{line:31,column:69}},"23":{start:{line:32,column:8},end:{line:32,column:36}},"24":{start:{line:35,column:4},end:{line:39,column:17}},"25":{start:{line:36,column:8},end:{line:36,column:68}},"26":{start:{line:37,column:8},end:{line:37,column:36}},"27":{start:{line:40,column:4},end:{line:42,column:5}},"28":{start:{line:41,column:8},end:{line:41,column:52}},"29":{start:{line:43,column:4},end:{line:43,column:41}},"30":{start:{line:46,column:4},end:{line:46,column:45}},"31":{start:{line:47,column:30},end:{line:47,column:54}},"32":{start:{line:48,column:4},end:{line:50,column:5}},"33":{start:{line:49,column:8},end:{line:49,column:63}},"34":{start:{line:51,column:4},end:{line:53,column:5}},"35":{start:{line:52,column:8},end:{line:52,column:62}},"36":{start:{line:54,column:4},end:{line:54,column:57}}},fnMap:{"0":{name:"fromBase58Check",decl:{start:{line:13,column:9},end:{line:13,column:24}},loc:{start:{line:13,column:34},end:{line:18,column:1}},line:13},"1":{name:"toBase58Check",decl:{start:{line:19,column:9},end:{line:19,column:22}},loc:{start:{line:19,column:38},end:{line:25,column:1}},line:19},"2":{name:"fromOutputScript",decl:{start:{line:26,column:9},end:{line:26,column:25}},loc:{start:{line:26,column:49},end:{line:44,column:1}},line:26},"3":{name:"toOutputScript",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:42},end:{line:55,column:1}},line:45}},branchMap:{"0":{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:40,column:4},end:{line:42,column:5}}],line:40},"1":{loc:{start:{line:40,column:8},end:{line:40,column:45}},type:"binary-expr",locations:[{start:{line:40,column:8},end:{line:40,column:10}},{start:{line:40,column:14},end:{line:40,column:21}},{start:{line:40,column:25},end:{line:40,column:45}}],line:40},"2":{loc:{start:{line:48,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:50,column:5}},{start:{line:48,column:4},end:{line:50,column:5}}],line:48},"3":{loc:{start:{line:51,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:53,column:5}},{start:{line:51,column:4},end:{line:53,column:5}}],line:51}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0,0],"2":[0,0],"3":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/zcash/address.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/zcash/address.ts"],names:[],mappings:";;AAQA,0CAKC;AAED,sCAOC;AAED,4CAgBC;AAED,wCAUC;AApDD,iCAAiC;AACjC,iDAAyC;AACzC,iDAAiD;AAEjD,6CAAkD;AAClD,MAAM,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACvC,MAAM,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AAEvC,SAAgB,eAAe,CAAC,OAAe;IAC7C,MAAM,OAAO,GAAG,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IAC1C,MAAM,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;IACxC,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IAC9B,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;AAC3B,CAAC;AAED,SAAgB,aAAa,CAAC,IAAY,EAAE,OAAe;IACzD,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,MAAM,CAAC,EAAE,SAAS,CAAC,CAAC;IAElE,MAAM,OAAO,GAAG,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IACvC,OAAO,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;IAClC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;IACtB,OAAO,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AACnC,CAAC;AAED,SAAgB,gBAAgB,CAAC,YAAoB,EAAE,OAAgB;IACrE,MAAM,CAAC,IAAA,kBAAO,EAAC,OAAO,CAAC,CAAC,CAAC;IACzB,IAAI,CAAC,CAAC;IACN,IAAI,MAAM,CAAC;IACX,IAAI,CAAC;QACH,CAAC,GAAG,wBAAQ,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,YAAY,EAAE,CAAC,CAAC;QAC7C,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC;IAC9B,CAAC;IAAC,OAAO,CAAC,EAAE,CAAC,CAAA,CAAC;IACd,IAAI,CAAC;QACH,CAAC,GAAG,wBAAQ,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,YAAY,EAAE,CAAC,CAAC;QAC5C,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC;IAC9B,CAAC;IAAC,OAAO,CAAC,EAAE,CAAC,CAAA,CAAC;IACd,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;QAC1C,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;IAC9C,CAAC;IACD,OAAO,aAAa,CAAC,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AACvC,CAAC;AAED,SAAgB,cAAc,CAAC,OAAe,EAAE,OAAgB;IAC9D,MAAM,CAAC,IAAA,kBAAO,EAAC,OAAO,CAAC,CAAC,CAAC;IACzB,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,eAAe,CAAC,OAAO,CAAC,CAAC;IACnD,IAAI,OAAO,KAAK,OAAO,CAAC,UAAU,EAAE,CAAC;QACnC,OAAO,wBAAQ,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,MAAgB,CAAC;IACnD,CAAC;IACD,IAAI,OAAO,KAAK,OAAO,CAAC,UAAU,EAAE,CAAC;QACnC,OAAO,wBAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,MAAgB,CAAC;IAClD,CAAC;IACD,MAAM,IAAI,KAAK,CAAC,OAAO,GAAG,yBAAyB,CAAC,CAAC;AACvD,CAAC",sourcesContent:["import * as assert from 'assert';\nimport { payments } from 'bitcoinjs-lib';\nimport * as types from 'bitcoinjs-lib/src/types';\nimport { Base58CheckResult } from 'bitcoinjs-lib/src/address';\nimport { isZcash, Network } from '../../networks';\nconst bs58check = require('bs58check');\nconst typeforce = require('typeforce');\n\nexport function fromBase58Check(address: string): Base58CheckResult {\n  const payload = bs58check.decode(address);\n  const version = payload.readUInt16BE(0);\n  const hash = payload.slice(2);\n  return { version, hash };\n}\n\nexport function toBase58Check(hash: Buffer, version: number): string {\n  typeforce(types.tuple(types.Hash160bit, types.Number), arguments);\n\n  const payload = Buffer.allocUnsafe(22);\n  payload.writeUInt16BE(version, 0);\n  hash.copy(payload, 2);\n  return bs58check.encode(payload);\n}\n\nexport function fromOutputScript(outputScript: Buffer, network: Network): string {\n  assert(isZcash(network));\n  let o;\n  let prefix;\n  try {\n    o = payments.p2pkh({ output: outputScript });\n    prefix = network.pubKeyHash;\n  } catch (e) {}\n  try {\n    o = payments.p2sh({ output: outputScript });\n    prefix = network.scriptHash;\n  } catch (e) {}\n  if (!o || !o.hash || prefix === undefined) {\n    throw new Error(`unsupported outputScript`);\n  }\n  return toBase58Check(o.hash, prefix);\n}\n\nexport function toOutputScript(address: string, network: Network): Buffer {\n  assert(isZcash(network));\n  const { version, hash } = fromBase58Check(address);\n  if (version === network.pubKeyHash) {\n    return payments.p2pkh({ hash }).output as Buffer;\n  }\n  if (version === network.scriptHash) {\n    return payments.p2sh({ hash }).output as Buffer;\n  }\n  throw new Error(address + ' has no matching Script');\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a6bce8cd2577e769c31c7b4f7a363a5cb7561b5b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_arz6903pk=function(){return actualCoverage;};}return actualCoverage;}cov_arz6903pk();cov_arz6903pk().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_arz6903pk().s[1]++;exports.fromBase58Check=fromBase58Check;cov_arz6903pk().s[2]++;exports.toBase58Check=toBase58Check;cov_arz6903pk().s[3]++;exports.fromOutputScript=fromOutputScript;cov_arz6903pk().s[4]++;exports.toOutputScript=toOutputScript;const assert=(cov_arz6903pk().s[5]++,require("assert"));const bitcoinjs_lib_1=(cov_arz6903pk().s[6]++,require("bitcoinjs-lib"));const types=(cov_arz6903pk().s[7]++,require("bitcoinjs-lib/src/types"));const networks_1=(cov_arz6903pk().s[8]++,require("../../networks"));const bs58check=(cov_arz6903pk().s[9]++,require('bs58check'));const typeforce=(cov_arz6903pk().s[10]++,require('typeforce'));function fromBase58Check(address){cov_arz6903pk().f[0]++;const payload=(cov_arz6903pk().s[11]++,bs58check.decode(address));const version=(cov_arz6903pk().s[12]++,payload.readUInt16BE(0));const hash=(cov_arz6903pk().s[13]++,payload.slice(2));cov_arz6903pk().s[14]++;return{version,hash};}function toBase58Check(hash,version){cov_arz6903pk().f[1]++;cov_arz6903pk().s[15]++;typeforce(types.tuple(types.Hash160bit,types.Number),arguments);const payload=(cov_arz6903pk().s[16]++,Buffer.allocUnsafe(22));cov_arz6903pk().s[17]++;payload.writeUInt16BE(version,0);cov_arz6903pk().s[18]++;hash.copy(payload,2);cov_arz6903pk().s[19]++;return bs58check.encode(payload);}function fromOutputScript(outputScript,network){cov_arz6903pk().f[2]++;cov_arz6903pk().s[20]++;assert((0,networks_1.isZcash)(network));let o;let prefix;cov_arz6903pk().s[21]++;try{cov_arz6903pk().s[22]++;o=bitcoinjs_lib_1.payments.p2pkh({output:outputScript});cov_arz6903pk().s[23]++;prefix=network.pubKeyHash;}catch(e){}cov_arz6903pk().s[24]++;try{cov_arz6903pk().s[25]++;o=bitcoinjs_lib_1.payments.p2sh({output:outputScript});cov_arz6903pk().s[26]++;prefix=network.scriptHash;}catch(e){}cov_arz6903pk().s[27]++;if((cov_arz6903pk().b[1][0]++,!o)||(cov_arz6903pk().b[1][1]++,!o.hash)||(cov_arz6903pk().b[1][2]++,prefix===undefined)){cov_arz6903pk().b[0][0]++;cov_arz6903pk().s[28]++;throw new Error(`unsupported outputScript`);}else{cov_arz6903pk().b[0][1]++;}cov_arz6903pk().s[29]++;return toBase58Check(o.hash,prefix);}function toOutputScript(address,network){cov_arz6903pk().f[3]++;cov_arz6903pk().s[30]++;assert((0,networks_1.isZcash)(network));const{version,hash}=(cov_arz6903pk().s[31]++,fromBase58Check(address));cov_arz6903pk().s[32]++;if(version===network.pubKeyHash){cov_arz6903pk().b[2][0]++;cov_arz6903pk().s[33]++;return bitcoinjs_lib_1.payments.p2pkh({hash}).output;}else{cov_arz6903pk().b[2][1]++;}cov_arz6903pk().s[34]++;if(version===network.scriptHash){cov_arz6903pk().b[3][0]++;cov_arz6903pk().s[35]++;return bitcoinjs_lib_1.payments.p2sh({hash}).output;}else{cov_arz6903pk().b[3][1]++;}cov_arz6903pk().s[36]++;throw new Error(address+' has no matching Script');}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vemNhc2gvYWRkcmVzcy50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vemNhc2gvYWRkcmVzcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQVFBLDBDQUtDO0FBRUQsc0NBT0M7QUFFRCw0Q0FnQkM7QUFFRCx3Q0FVQztBQXBERCxpQ0FBaUM7QUFDakMsaURBQXlDO0FBQ3pDLGlEQUFpRDtBQUVqRCw2Q0FBa0Q7QUFDbEQsTUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3ZDLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUV2QyxTQUFnQixlQUFlLENBQUMsT0FBZTtJQUM3QyxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzFDLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeEMsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5QixPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDO0FBQzNCLENBQUM7QUFFRCxTQUFnQixhQUFhLENBQUMsSUFBWSxFQUFFLE9BQWU7SUFDekQsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFFbEUsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN2QyxPQUFPLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN0QixPQUFPLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDbkMsQ0FBQztBQUVELFNBQWdCLGdCQUFnQixDQUFDLFlBQW9CLEVBQUUsT0FBZ0I7SUFDckUsTUFBTSxDQUFDLElBQUEsa0JBQU8sRUFBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ3pCLElBQUksQ0FBQyxDQUFDO0lBQ04sSUFBSSxNQUFNLENBQUM7SUFDWCxJQUFJLENBQUM7UUFDSCxDQUFDLEdBQUcsd0JBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQztRQUM3QyxNQUFNLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQztJQUM5QixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFBLENBQUM7SUFDZCxJQUFJLENBQUM7UUFDSCxDQUFDLEdBQUcsd0JBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQztRQUM1QyxNQUFNLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQztJQUM5QixDQUFDO0lBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFBLENBQUM7SUFDZCxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFLENBQUM7UUFDMUMsTUFBTSxJQUFJLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFDRCxPQUFPLGFBQWEsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3ZDLENBQUM7QUFFRCxTQUFnQixjQUFjLENBQUMsT0FBZSxFQUFFLE9BQWdCO0lBQzlELE1BQU0sQ0FBQyxJQUFBLGtCQUFPLEVBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUN6QixNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxHQUFHLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNuRCxJQUFJLE9BQU8sS0FBSyxPQUFPLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbkMsT0FBTyx3QkFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsTUFBZ0IsQ0FBQztJQUNuRCxDQUFDO0lBQ0QsSUFBSSxPQUFPLEtBQUssT0FBTyxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ25DLE9BQU8sd0JBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQWdCLENBQUM7SUFDbEQsQ0FBQztJQUNELE1BQU0sSUFBSSxLQUFLLENBQUMsT0FBTyxHQUFHLHlCQUF5QixDQUFDLENBQUM7QUFDdkQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGFzc2VydCBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHsgcGF5bWVudHMgfSBmcm9tICdiaXRjb2luanMtbGliJztcbmltcG9ydCAqIGFzIHR5cGVzIGZyb20gJ2JpdGNvaW5qcy1saWIvc3JjL3R5cGVzJztcbmltcG9ydCB7IEJhc2U1OENoZWNrUmVzdWx0IH0gZnJvbSAnYml0Y29pbmpzLWxpYi9zcmMvYWRkcmVzcyc7XG5pbXBvcnQgeyBpc1pjYXNoLCBOZXR3b3JrIH0gZnJvbSAnLi4vLi4vbmV0d29ya3MnO1xuY29uc3QgYnM1OGNoZWNrID0gcmVxdWlyZSgnYnM1OGNoZWNrJyk7XG5jb25zdCB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21CYXNlNThDaGVjayhhZGRyZXNzOiBzdHJpbmcpOiBCYXNlNThDaGVja1Jlc3VsdCB7XG4gIGNvbnN0IHBheWxvYWQgPSBiczU4Y2hlY2suZGVjb2RlKGFkZHJlc3MpO1xuICBjb25zdCB2ZXJzaW9uID0gcGF5bG9hZC5yZWFkVUludDE2QkUoMCk7XG4gIGNvbnN0IGhhc2ggPSBwYXlsb2FkLnNsaWNlKDIpO1xuICByZXR1cm4geyB2ZXJzaW9uLCBoYXNoIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0Jhc2U1OENoZWNrKGhhc2g6IEJ1ZmZlciwgdmVyc2lvbjogbnVtYmVyKTogc3RyaW5nIHtcbiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkhhc2gxNjBiaXQsIHR5cGVzLk51bWJlciksIGFyZ3VtZW50cyk7XG5cbiAgY29uc3QgcGF5bG9hZCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSgyMik7XG4gIHBheWxvYWQud3JpdGVVSW50MTZCRSh2ZXJzaW9uLCAwKTtcbiAgaGFzaC5jb3B5KHBheWxvYWQsIDIpO1xuICByZXR1cm4gYnM1OGNoZWNrLmVuY29kZShwYXlsb2FkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21PdXRwdXRTY3JpcHQob3V0cHV0U2NyaXB0OiBCdWZmZXIsIG5ldHdvcms6IE5ldHdvcmspOiBzdHJpbmcge1xuICBhc3NlcnQoaXNaY2FzaChuZXR3b3JrKSk7XG4gIGxldCBvO1xuICBsZXQgcHJlZml4O1xuICB0cnkge1xuICAgIG8gPSBwYXltZW50cy5wMnBraCh7IG91dHB1dDogb3V0cHV0U2NyaXB0IH0pO1xuICAgIHByZWZpeCA9IG5ldHdvcmsucHViS2V5SGFzaDtcbiAgfSBjYXRjaCAoZSkge31cbiAgdHJ5IHtcbiAgICBvID0gcGF5bWVudHMucDJzaCh7IG91dHB1dDogb3V0cHV0U2NyaXB0IH0pO1xuICAgIHByZWZpeCA9IG5ldHdvcmsuc2NyaXB0SGFzaDtcbiAgfSBjYXRjaCAoZSkge31cbiAgaWYgKCFvIHx8ICFvLmhhc2ggfHwgcHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYHVuc3VwcG9ydGVkIG91dHB1dFNjcmlwdGApO1xuICB9XG4gIHJldHVybiB0b0Jhc2U1OENoZWNrKG8uaGFzaCwgcHJlZml4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvT3V0cHV0U2NyaXB0KGFkZHJlc3M6IHN0cmluZywgbmV0d29yazogTmV0d29yayk6IEJ1ZmZlciB7XG4gIGFzc2VydChpc1pjYXNoKG5ldHdvcmspKTtcbiAgY29uc3QgeyB2ZXJzaW9uLCBoYXNoIH0gPSBmcm9tQmFzZTU4Q2hlY2soYWRkcmVzcyk7XG4gIGlmICh2ZXJzaW9uID09PSBuZXR3b3JrLnB1YktleUhhc2gpIHtcbiAgICByZXR1cm4gcGF5bWVudHMucDJwa2goeyBoYXNoIH0pLm91dHB1dCBhcyBCdWZmZXI7XG4gIH1cbiAgaWYgKHZlcnNpb24gPT09IG5ldHdvcmsuc2NyaXB0SGFzaCkge1xuICAgIHJldHVybiBwYXltZW50cy5wMnNoKHsgaGFzaCB9KS5vdXRwdXQgYXMgQnVmZmVyO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihhZGRyZXNzICsgJyBoYXMgbm8gbWF0Y2hpbmcgU2NyaXB0Jyk7XG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfYXJ6NjkwM3BrIiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwiZXhwb3J0cyIsImZyb21CYXNlNThDaGVjayIsInRvQmFzZTU4Q2hlY2siLCJmcm9tT3V0cHV0U2NyaXB0IiwidG9PdXRwdXRTY3JpcHQiLCJhc3NlcnQiLCJyZXF1aXJlIiwiYml0Y29pbmpzX2xpYl8xIiwidHlwZXMiLCJuZXR3b3Jrc18xIiwiYnM1OGNoZWNrIiwidHlwZWZvcmNlIiwiYWRkcmVzcyIsImYiLCJwYXlsb2FkIiwiZGVjb2RlIiwidmVyc2lvbiIsInJlYWRVSW50MTZCRSIsImhhc2giLCJzbGljZSIsInR1cGxlIiwiSGFzaDE2MGJpdCIsIk51bWJlciIsImFyZ3VtZW50cyIsIkJ1ZmZlciIsImFsbG9jVW5zYWZlIiwid3JpdGVVSW50MTZCRSIsImNvcHkiLCJlbmNvZGUiLCJvdXRwdXRTY3JpcHQiLCJuZXR3b3JrIiwiaXNaY2FzaCIsIm8iLCJwcmVmaXgiLCJwYXltZW50cyIsInAycGtoIiwib3V0cHV0IiwicHViS2V5SGFzaCIsImUiLCJwMnNoIiwic2NyaXB0SGFzaCIsImIiLCJ1bmRlZmluZWQiLCJFcnJvciJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9xcm9jL0NvZGUvaGFwaS9jaGFpbmRlZnVzZXIvdXR4by1saWIvc3JjL2JpdGdvL3pjYXNoL2FkZHJlc3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYXNzZXJ0IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgeyBwYXltZW50cyB9IGZyb20gJ2JpdGNvaW5qcy1saWInO1xuaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnYml0Y29pbmpzLWxpYi9zcmMvdHlwZXMnO1xuaW1wb3J0IHsgQmFzZTU4Q2hlY2tSZXN1bHQgfSBmcm9tICdiaXRjb2luanMtbGliL3NyYy9hZGRyZXNzJztcbmltcG9ydCB7IGlzWmNhc2gsIE5ldHdvcmsgfSBmcm9tICcuLi8uLi9uZXR3b3Jrcyc7XG5jb25zdCBiczU4Y2hlY2sgPSByZXF1aXJlKCdiczU4Y2hlY2snKTtcbmNvbnN0IHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpO1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbUJhc2U1OENoZWNrKGFkZHJlc3M6IHN0cmluZyk6IEJhc2U1OENoZWNrUmVzdWx0IHtcbiAgY29uc3QgcGF5bG9hZCA9IGJzNThjaGVjay5kZWNvZGUoYWRkcmVzcyk7XG4gIGNvbnN0IHZlcnNpb24gPSBwYXlsb2FkLnJlYWRVSW50MTZCRSgwKTtcbiAgY29uc3QgaGFzaCA9IHBheWxvYWQuc2xpY2UoMik7XG4gIHJldHVybiB7IHZlcnNpb24sIGhhc2ggfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvQmFzZTU4Q2hlY2soaGFzaDogQnVmZmVyLCB2ZXJzaW9uOiBudW1iZXIpOiBzdHJpbmcge1xuICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuSGFzaDE2MGJpdCwgdHlwZXMuTnVtYmVyKSwgYXJndW1lbnRzKTtcblxuICBjb25zdCBwYXlsb2FkID0gQnVmZmVyLmFsbG9jVW5zYWZlKDIyKTtcbiAgcGF5bG9hZC53cml0ZVVJbnQxNkJFKHZlcnNpb24sIDApO1xuICBoYXNoLmNvcHkocGF5bG9hZCwgMik7XG4gIHJldHVybiBiczU4Y2hlY2suZW5jb2RlKHBheWxvYWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU91dHB1dFNjcmlwdChvdXRwdXRTY3JpcHQ6IEJ1ZmZlciwgbmV0d29yazogTmV0d29yayk6IHN0cmluZyB7XG4gIGFzc2VydChpc1pjYXNoKG5ldHdvcmspKTtcbiAgbGV0IG87XG4gIGxldCBwcmVmaXg7XG4gIHRyeSB7XG4gICAgbyA9IHBheW1lbnRzLnAycGtoKHsgb3V0cHV0OiBvdXRwdXRTY3JpcHQgfSk7XG4gICAgcHJlZml4ID0gbmV0d29yay5wdWJLZXlIYXNoO1xuICB9IGNhdGNoIChlKSB7fVxuICB0cnkge1xuICAgIG8gPSBwYXltZW50cy5wMnNoKHsgb3V0cHV0OiBvdXRwdXRTY3JpcHQgfSk7XG4gICAgcHJlZml4ID0gbmV0d29yay5zY3JpcHRIYXNoO1xuICB9IGNhdGNoIChlKSB7fVxuICBpZiAoIW8gfHwgIW8uaGFzaCB8fCBwcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgdW5zdXBwb3J0ZWQgb3V0cHV0U2NyaXB0YCk7XG4gIH1cbiAgcmV0dXJuIHRvQmFzZTU4Q2hlY2soby5oYXNoLCBwcmVmaXgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9PdXRwdXRTY3JpcHQoYWRkcmVzczogc3RyaW5nLCBuZXR3b3JrOiBOZXR3b3JrKTogQnVmZmVyIHtcbiAgYXNzZXJ0KGlzWmNhc2gobmV0d29yaykpO1xuICBjb25zdCB7IHZlcnNpb24sIGhhc2ggfSA9IGZyb21CYXNlNThDaGVjayhhZGRyZXNzKTtcbiAgaWYgKHZlcnNpb24gPT09IG5ldHdvcmsucHViS2V5SGFzaCkge1xuICAgIHJldHVybiBwYXltZW50cy5wMnBraCh7IGhhc2ggfSkub3V0cHV0IGFzIEJ1ZmZlcjtcbiAgfVxuICBpZiAodmVyc2lvbiA9PT0gbmV0d29yay5zY3JpcHRIYXNoKSB7XG4gICAgcmV0dXJuIHBheW1lbnRzLnAyc2goeyBoYXNoIH0pLm91dHB1dCBhcyBCdWZmZXI7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGFkZHJlc3MgKyAnIGhhcyBubyBtYXRjaGluZyBTY3JpcHQnKTtcbn1cbiJdLCJtYXBwaW5ncyI6ImlxUUFXUTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FBQUEsYUFBQSxHQUFBRSxDQUFBLE0sZ0ZBSFJDLE9BQUEsQ0FBQUMsZUFBQSxDQUFBQSxlQUFBLENBS0NKLGFBQUEsR0FBQUUsQ0FBQSxNQUVEQyxPQUFBLENBQUFFLGFBQUEsQ0FBQUEsYUFBQSxDQU9DTCxhQUFBLEdBQUFFLENBQUEsTUFFREMsT0FBQSxDQUFBRyxnQkFBQSxDQUFBQSxnQkFBQSxDQWdCQ04sYUFBQSxHQUFBRSxDQUFBLE1BRURDLE9BQUEsQ0FBQUksY0FBQSxDQUFBQSxjQUFBLENBMUNBLE1BQUFDLE1BQUEsRUFBQVIsYUFBQSxHQUFBRSxDQUFBLE1BQUFPLE9BQUEsWUFDQSxNQUFBQyxlQUFBLEVBQUFWLGFBQUEsR0FBQUUsQ0FBQSxNQUFBTyxPQUFBLG1CQUNBLE1BQUFFLEtBQUEsRUFBQVgsYUFBQSxHQUFBRSxDQUFBLE1BQUFPLE9BQUEsNkJBRUEsTUFBQUcsVUFBQSxFQUFBWixhQUFBLEdBQUFFLENBQUEsTUFBQU8sT0FBQSxvQkFDQSxLQUFNLENBQUFJLFNBQVMsRUFBQWIsYUFBQSxHQUFBRSxDQUFBLE1BQUdPLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFDdEMsS0FBTSxDQUFBSyxTQUFTLEVBQUFkLGFBQUEsR0FBQUUsQ0FBQSxPQUFHTyxPQUFPLENBQUMsV0FBVyxDQUFDLEVBRXRDLFFBQWdCLENBQUFMLGVBQWVBLENBQUNXLE9BQWUsRUFBQWYsYUFBQSxHQUFBZ0IsQ0FBQSxNQUM3QyxLQUFNLENBQUFDLE9BQU8sRUFBQWpCLGFBQUEsR0FBQUUsQ0FBQSxPQUFHVyxTQUFTLENBQUNLLE1BQU0sQ0FBQ0gsT0FBTyxDQUFDLEVBQ3pDLEtBQU0sQ0FBQUksT0FBTyxFQUFBbkIsYUFBQSxHQUFBRSxDQUFBLE9BQUdlLE9BQU8sQ0FBQ0csWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUN2QyxLQUFNLENBQUFDLElBQUksRUFBQXJCLGFBQUEsR0FBQUUsQ0FBQSxPQUFHZSxPQUFPLENBQUNLLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBQ3RCLGFBQUEsR0FBQUUsQ0FBQSxPQUM5QixNQUFPLENBQUVpQixPQUFPLENBQUVFLElBQUksQ0FBRSxDQUMxQixDQUVBLFFBQWdCLENBQUFoQixhQUFhQSxDQUFDZ0IsSUFBWSxDQUFFRixPQUFlLEVBQUFuQixhQUFBLEdBQUFnQixDQUFBLE1BQUFoQixhQUFBLEdBQUFFLENBQUEsT0FDekRZLFNBQVMsQ0FBQ0gsS0FBSyxDQUFDWSxLQUFLLENBQUNaLEtBQUssQ0FBQ2EsVUFBVSxDQUFFYixLQUFLLENBQUNjLE1BQU0sQ0FBQyxDQUFFQyxTQUFTLENBQUMsQ0FFakUsS0FBTSxDQUFBVCxPQUFPLEVBQUFqQixhQUFBLEdBQUFFLENBQUEsT0FBR3lCLE1BQU0sQ0FBQ0MsV0FBVyxDQUFDLEVBQUUsQ0FBQyxFQUFDNUIsYUFBQSxHQUFBRSxDQUFBLE9BQ3ZDZSxPQUFPLENBQUNZLGFBQWEsQ0FBQ1YsT0FBTyxDQUFFLENBQUMsQ0FBQyxDQUFDbkIsYUFBQSxHQUFBRSxDQUFBLE9BQ2xDbUIsSUFBSSxDQUFDUyxJQUFJLENBQUNiLE9BQU8sQ0FBRSxDQUFDLENBQUMsQ0FBQ2pCLGFBQUEsR0FBQUUsQ0FBQSxPQUN0QixNQUFPLENBQUFXLFNBQVMsQ0FBQ2tCLE1BQU0sQ0FBQ2QsT0FBTyxDQUFDLENBQ2xDLENBRUEsUUFBZ0IsQ0FBQVgsZ0JBQWdCQSxDQUFDMEIsWUFBb0IsQ0FBRUMsT0FBZ0IsRUFBQWpDLGFBQUEsR0FBQWdCLENBQUEsTUFBQWhCLGFBQUEsR0FBQUUsQ0FBQSxPQUNyRU0sTUFBTSxDQUFDLEdBQUFJLFVBQUEsQ0FBQXNCLE9BQU8sRUFBQ0QsT0FBTyxDQUFDLENBQUMsQ0FDeEIsR0FBSSxDQUFBRSxDQUFDLENBQ0wsR0FBSSxDQUFBQyxNQUFNLENBQUNwQyxhQUFBLEdBQUFFLENBQUEsT0FDWCxHQUFJLENBQUFGLGFBQUEsR0FBQUUsQ0FBQSxPQUNGaUMsQ0FBQyxDQUFHekIsZUFBQSxDQUFBMkIsUUFBUSxDQUFDQyxLQUFLLENBQUMsQ0FBRUMsTUFBTSxDQUFFUCxZQUFZLENBQUUsQ0FBQyxDQUFDaEMsYUFBQSxHQUFBRSxDQUFBLE9BQzdDa0MsTUFBTSxDQUFHSCxPQUFPLENBQUNPLFVBQVUsQ0FDN0IsQ0FBRSxNQUFPQyxDQUFDLENBQUUsQ0FBQyxDQUFDekMsYUFBQSxHQUFBRSxDQUFBLE9BQ2QsR0FBSSxDQUFBRixhQUFBLEdBQUFFLENBQUEsT0FDRmlDLENBQUMsQ0FBR3pCLGVBQUEsQ0FBQTJCLFFBQVEsQ0FBQ0ssSUFBSSxDQUFDLENBQUVILE1BQU0sQ0FBRVAsWUFBWSxDQUFFLENBQUMsQ0FBQ2hDLGFBQUEsR0FBQUUsQ0FBQSxPQUM1Q2tDLE1BQU0sQ0FBR0gsT0FBTyxDQUFDVSxVQUFVLENBQzdCLENBQUUsTUFBT0YsQ0FBQyxDQUFFLENBQUMsQ0FBQ3pDLGFBQUEsR0FBQUUsQ0FBQSxPQUNkLEdBQUksQ0FBQUYsYUFBQSxHQUFBNEMsQ0FBQSxVQUFDVCxDQUFDLElBQUFuQyxhQUFBLEdBQUE0QyxDQUFBLFNBQUksQ0FBQ1QsQ0FBQyxDQUFDZCxJQUFJLElBQUFyQixhQUFBLEdBQUE0QyxDQUFBLFNBQUlSLE1BQU0sR0FBS1MsU0FBUyxFQUFFLENBQUE3QyxhQUFBLEdBQUE0QyxDQUFBLFNBQUE1QyxhQUFBLEdBQUFFLENBQUEsT0FDekMsS0FBTSxJQUFJLENBQUE0QyxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FDN0MsQ0FBQyxLQUFBOUMsYUFBQSxHQUFBNEMsQ0FBQSxVQUFBNUMsYUFBQSxHQUFBRSxDQUFBLE9BQ0QsTUFBTyxDQUFBRyxhQUFhLENBQUM4QixDQUFDLENBQUNkLElBQUksQ0FBRWUsTUFBTSxDQUFDLENBQ3RDLENBRUEsUUFBZ0IsQ0FBQTdCLGNBQWNBLENBQUNRLE9BQWUsQ0FBRWtCLE9BQWdCLEVBQUFqQyxhQUFBLEdBQUFnQixDQUFBLE1BQUFoQixhQUFBLEdBQUFFLENBQUEsT0FDOURNLE1BQU0sQ0FBQyxHQUFBSSxVQUFBLENBQUFzQixPQUFPLEVBQUNELE9BQU8sQ0FBQyxDQUFDLENBQ3hCLEtBQU0sQ0FBRWQsT0FBTyxDQUFFRSxJQUFJLENBQUUsRUFBQXJCLGFBQUEsR0FBQUUsQ0FBQSxPQUFHRSxlQUFlLENBQUNXLE9BQU8sQ0FBQyxFQUFDZixhQUFBLEdBQUFFLENBQUEsT0FDbkQsR0FBSWlCLE9BQU8sR0FBS2MsT0FBTyxDQUFDTyxVQUFVLENBQUUsQ0FBQXhDLGFBQUEsR0FBQTRDLENBQUEsU0FBQTVDLGFBQUEsR0FBQUUsQ0FBQSxPQUNsQyxNQUFPLENBQUFRLGVBQUEsQ0FBQTJCLFFBQVEsQ0FBQ0MsS0FBSyxDQUFDLENBQUVqQixJQUFJLENBQUUsQ0FBQyxDQUFDa0IsTUFBZ0IsQ0FDbEQsQ0FBQyxLQUFBdkMsYUFBQSxHQUFBNEMsQ0FBQSxVQUFBNUMsYUFBQSxHQUFBRSxDQUFBLE9BQ0QsR0FBSWlCLE9BQU8sR0FBS2MsT0FBTyxDQUFDVSxVQUFVLENBQUUsQ0FBQTNDLGFBQUEsR0FBQTRDLENBQUEsU0FBQTVDLGFBQUEsR0FBQUUsQ0FBQSxPQUNsQyxNQUFPLENBQUFRLGVBQUEsQ0FBQTJCLFFBQVEsQ0FBQ0ssSUFBSSxDQUFDLENBQUVyQixJQUFJLENBQUUsQ0FBQyxDQUFDa0IsTUFBZ0IsQ0FDakQsQ0FBQyxLQUFBdkMsYUFBQSxHQUFBNEMsQ0FBQSxVQUFBNUMsYUFBQSxHQUFBRSxDQUFBLE9BQ0QsS0FBTSxJQUFJLENBQUE0QyxLQUFLLENBQUMvQixPQUFPLENBQUcseUJBQXlCLENBQUMsQ0FDdEQsQyIsImlnbm9yZUxpc3QiOltdfQ==