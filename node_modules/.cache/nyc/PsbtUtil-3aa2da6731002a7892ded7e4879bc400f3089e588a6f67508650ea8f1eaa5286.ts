"use strict";function cov_1g8p2e4du8(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/PsbtUtil.ts";var hash="b7a1df4c9b9a72099f05d317c6feb4c1ce12ffc7";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/PsbtUtil.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:77}},"2":{start:{line:4,column:0},end:{line:4,column:72}},"3":{start:{line:5,column:0},end:{line:5,column:64}},"4":{start:{line:6,column:0},end:{line:6,column:52}},"5":{start:{line:7,column:0},end:{line:7,column:24}},"6":{start:{line:8,column:0},end:{line:8,column:36}},"7":{start:{line:9,column:0},end:{line:9,column:50}},"8":{start:{line:10,column:28},end:{line:10,column:71}},"9":{start:{line:14,column:0},end:{line:14,column:46}},"10":{start:{line:19,column:0},end:{line:24,column:90}},"11":{start:{line:20,column:4},end:{line:20,column:108}},"12":{start:{line:21,column:4},end:{line:21,column:116}},"13":{start:{line:22,column:4},end:{line:22,column:94}},"14":{start:{line:23,column:4},end:{line:23,column:98}},"15":{start:{line:30,column:4},end:{line:32,column:5}},"16":{start:{line:31,column:8},end:{line:31,column:18}},"17":{start:{line:33,column:4},end:{line:35,column:5}},"18":{start:{line:34,column:8},end:{line:34,column:98}},"19":{start:{line:36,column:20},end:{line:38,column:6}},"20":{start:{line:37,column:8},end:{line:37,column:82}},"21":{start:{line:39,column:4},end:{line:45,column:7}},"22":{start:{line:40,column:8},end:{line:44,column:114}},"23":{start:{line:51,column:4},end:{line:53,column:5}},"24":{start:{line:52,column:8},end:{line:52,column:54}},"25":{start:{line:54,column:4},end:{line:57,column:15}},"26":{start:{line:63,column:4},end:{line:63,column:94}},"27":{start:{line:72,column:4},end:{line:77,column:5}},"28":{start:{line:73,column:8},end:{line:75,column:9}},"29":{start:{line:74,column:12},end:{line:74,column:25}},"30":{start:{line:76,column:8},end:{line:76,column:53}},"31":{start:{line:78,column:4},end:{line:78,column:97}},"32":{start:{line:92,column:4},end:{line:99,column:5}},"33":{start:{line:94,column:8},end:{line:96,column:9}},"34":{start:{line:95,column:12},end:{line:95,column:24}},"35":{start:{line:98,column:8},end:{line:98,column:38}},"36":{start:{line:100,column:4},end:{line:115,column:5}},"37":{start:{line:101,column:26},end:{line:101,column:43}},"38":{start:{line:102,column:8},end:{line:113,column:9}},"39":{start:{line:104,column:12},end:{line:109,column:13}},"40":{start:{line:105,column:16},end:{line:105,column:53}},"41":{start:{line:108,column:16},end:{line:108,column:25}},"42":{start:{line:110,column:12},end:{line:112,column:13}},"43":{start:{line:111,column:16},end:{line:111,column:30}},"44":{start:{line:114,column:8},end:{line:114,column:96}},"45":{start:{line:116,column:4},end:{line:116,column:57}},"46":{start:{line:122,column:4},end:{line:122,column:50}},"47":{start:{line:123,column:4},end:{line:123,column:56}},"48":{start:{line:124,column:4},end:{line:130,column:5}},"49":{start:{line:125,column:8},end:{line:125,column:20}},"50":{start:{line:128,column:8},end:{line:128,column:53}},"51":{start:{line:129,column:8},end:{line:129,column:57}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:19,column:1},end:{line:19,column:2}},loc:{start:{line:19,column:34},end:{line:24,column:1}},line:19},"1":{name:"getPsbtInputProprietaryKeyVals",decl:{start:{line:29,column:9},end:{line:29,column:39}},loc:{start:{line:29,column:58},end:{line:46,column:1}},line:29},"2":{name:"(anonymous_2)",decl:{start:{line:36,column:45},end:{line:36,column:46}},loc:{start:{line:36,column:68},end:{line:38,column:5}},line:36},"3":{name:"(anonymous_3)",decl:{start:{line:39,column:26},end:{line:39,column:27}},loc:{start:{line:39,column:38},end:{line:45,column:5}},line:39},"4":{name:"getPsbtInputSignatureCount",decl:{start:{line:50,column:9},end:{line:50,column:35}},loc:{start:{line:50,column:43},end:{line:58,column:1}},line:50},"5":{name:"isPsbtInputFinalized",decl:{start:{line:62,column:9},end:{line:62,column:29}},loc:{start:{line:62,column:37},end:{line:64,column:1}},line:62},"6":{name:"isPsbt",decl:{start:{line:69,column:9},end:{line:69,column:15}},loc:{start:{line:69,column:22},end:{line:79,column:1}},line:69},"7":{name:"toPsbtBuffer",decl:{start:{line:91,column:9},end:{line:91,column:21}},loc:{start:{line:91,column:28},end:{line:117,column:1}},line:91},"8":{name:"withUnsafeNonSegwit",decl:{start:{line:121,column:9},end:{line:121,column:28}},loc:{start:{line:121,column:54},end:{line:131,column:1}},line:121}},branchMap:{"0":{loc:{start:{line:24,column:3},end:{line:24,column:88}},type:"binary-expr",locations:[{start:{line:24,column:3},end:{line:24,column:24}},{start:{line:24,column:29},end:{line:24,column:87}}],line:24},"1":{loc:{start:{line:30,column:4},end:{line:32,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:32,column:5}},{start:{line:30,column:4},end:{line:32,column:5}}],line:30},"2":{loc:{start:{line:33,column:4},end:{line:35,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:35,column:5}},{start:{line:33,column:4},end:{line:35,column:5}}],line:33},"3":{loc:{start:{line:33,column:8},end:{line:33,column:90}},type:"binary-expr",locations:[{start:{line:33,column:8},end:{line:33,column:17}},{start:{line:33,column:21},end:{line:33,column:52}},{start:{line:33,column:56},end:{line:33,column:90}}],line:33},"4":{loc:{start:{line:40,column:16},end:{line:44,column:112}},type:"binary-expr",locations:[{start:{line:40,column:16},end:{line:40,column:39}},{start:{line:41,column:13},end:{line:41,column:59}},{start:{line:42,column:17},end:{line:42,column:48}},{start:{line:43,column:21},end:{line:43,column:61}},{start:{line:44,column:25},end:{line:44,column:60}},{start:{line:44,column:64},end:{line:44,column:108}}],line:40},"5":{loc:{start:{line:51,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:53,column:5}},{start:{line:51,column:4},end:{line:53,column:5}}],line:51},"6":{loc:{start:{line:54,column:20},end:{line:54,column:81}},type:"cond-expr",locations:[{start:{line:54,column:54},end:{line:54,column:77}},{start:{line:54,column:80},end:{line:54,column:81}}],line:54},"7":{loc:{start:{line:54,column:83},end:{line:54,column:148}},type:"cond-expr",locations:[{start:{line:54,column:119},end:{line:54,column:144}},{start:{line:54,column:147},end:{line:54,column:148}}],line:54},"8":{loc:{start:{line:63,column:11},end:{line:63,column:93}},type:"binary-expr",locations:[{start:{line:63,column:11},end:{line:63,column:48}},{start:{line:63,column:52},end:{line:63,column:93}}],line:63},"9":{loc:{start:{line:72,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:72,column:4},end:{line:77,column:5}},{start:{line:72,column:4},end:{line:77,column:5}}],line:72},"10":{loc:{start:{line:73,column:8},end:{line:75,column:9}},type:"if",locations:[{start:{line:73,column:8},end:{line:75,column:9}},{start:{line:73,column:8},end:{line:75,column:9}}],line:73},"11":{loc:{start:{line:78,column:11},end:{line:78,column:96}},type:"binary-expr",locations:[{start:{line:78,column:11},end:{line:78,column:27}},{start:{line:78,column:31},end:{line:78,column:66}},{start:{line:78,column:70},end:{line:78,column:96}}],line:78},"12":{loc:{start:{line:92,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:99,column:5}},{start:{line:92,column:4},end:{line:99,column:5}}],line:92},"13":{loc:{start:{line:94,column:8},end:{line:96,column:9}},type:"if",locations:[{start:{line:94,column:8},end:{line:96,column:9}},{start:{line:94,column:8},end:{line:96,column:9}}],line:94},"14":{loc:{start:{line:100,column:4},end:{line:115,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:115,column:5}},{start:{line:100,column:4},end:{line:115,column:5}}],line:100},"15":{loc:{start:{line:110,column:12},end:{line:112,column:13}},type:"if",locations:[{start:{line:110,column:12},end:{line:112,column:13}},{start:{line:110,column:12},end:{line:112,column:13}}],line:110},"16":{loc:{start:{line:121,column:39},end:{line:121,column:52}},type:"default-arg",locations:[{start:{line:121,column:48},end:{line:121,column:52}}],line:121}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0,0,0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/PsbtUtil.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/PsbtUtil.ts"],names:[],mappings:"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",sourcesContent:["import { decodeProprietaryKey, ProprietaryKey } from 'bip174/src/lib/proprietaryKeyVal';\nimport { PsbtInput } from 'bip174/src/lib/interfaces';\nimport { Psbt } from 'bitcoinjs-lib/src/psbt';\n\n/**\n * bitgo proprietary key identifier\n */\nexport const PSBT_PROPRIETARY_IDENTIFIER = 'BITGO';\n\n/**\n * subtype for proprietary keys that bitgo uses\n */\nexport enum ProprietaryKeySubtype {\n  ZEC_CONSENSUS_BRANCH_ID = 0x00,\n  MUSIG2_PARTICIPANT_PUB_KEYS = 0x01,\n  MUSIG2_PUB_NONCE = 0x02,\n  MUSIG2_PARTIAL_SIG = 0x03,\n}\n\n/**\n * Psbt proprietary keydata object.\n * <compact size uint identifier length> <bytes identifier> <compact size uint subtype> <bytes subkeydata>\n * => <bytes valuedata>\n */\nexport interface ProprietaryKeyValue {\n  key: ProprietaryKey;\n  value: Buffer;\n}\n\n/**\n * Psbt proprietary keydata object search fields.\n * <compact size uint identifier length> <bytes identifier> <compact size uint subtype> <bytes subkeydata>\n */\nexport interface ProprietaryKeySearch {\n  identifier: string;\n  subtype?: number;\n  keydata?: Buffer;\n  identifierEncoding?: BufferEncoding;\n}\n\n/**\n * Search any data from psbt proprietary key value against keydata.\n * Default identifierEncoding is utf-8 for identifier.\n */\nexport function getPsbtInputProprietaryKeyVals(\n  input: PsbtInput,\n  keySearch?: ProprietaryKeySearch\n): ProprietaryKeyValue[] {\n  if (!input.unknownKeyVals?.length) {\n    return [];\n  }\n  if (keySearch && keySearch.subtype === undefined && Buffer.isBuffer(keySearch.keydata)) {\n    throw new Error('invalid proprietary key search filter combination. subtype is required');\n  }\n  const keyVals = input.unknownKeyVals.map(({ key, value }, i) => {\n    return { key: decodeProprietaryKey(key), value };\n  });\n  return keyVals.filter((keyVal) => {\n    return (\n      keySearch === undefined ||\n      (keySearch.identifier === keyVal.key.identifier &&\n        (keySearch.subtype === undefined ||\n          (keySearch.subtype === keyVal.key.subtype &&\n            (!Buffer.isBuffer(keySearch.keydata) || keySearch.keydata.equals(keyVal.key.keydata)))))\n    );\n  });\n}\n\n/**\n * @return partialSig/tapScriptSig/MUSIG2_PARTIAL_SIG count iff input is not finalized\n */\nexport function getPsbtInputSignatureCount(input: PsbtInput): number {\n  if (isPsbtInputFinalized(input)) {\n    throw new Error('Input is already finalized');\n  }\n  return Math.max(\n    Array.isArray(input.partialSig) ? input.partialSig.length : 0,\n    Array.isArray(input.tapScriptSig) ? input.tapScriptSig.length : 0,\n    getPsbtInputProprietaryKeyVals(input, {\n      identifier: PSBT_PROPRIETARY_IDENTIFIER,\n      subtype: ProprietaryKeySubtype.MUSIG2_PARTIAL_SIG,\n    }).length\n  );\n}\n\n/**\n * @return true iff PSBT input is finalized\n */\nexport function isPsbtInputFinalized(input: PsbtInput): boolean {\n  return Buffer.isBuffer(input.finalScriptSig) || Buffer.isBuffer(input.finalScriptWitness);\n}\n\n/**\n * @return true iff data starts with magic PSBT byte sequence\n * @param data byte array or hex string\n * */\nexport function isPsbt(data: Buffer | string): boolean {\n  // https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki#specification\n  // 0x70736274 - ASCII for 'psbt'. 0xff - separator\n  if (typeof data === 'string') {\n    if (data.length < 10) {\n      return false;\n    }\n    data = Buffer.from(data.slice(0, 10), 'hex');\n  }\n  return 5 <= data.length && data.readUInt32BE(0) === 0x70736274 && data.readUInt8(4) === 0xff;\n}\n\n/**\n * First checks if the input is already a buffer that starts with the magic PSBT byte sequence.\n * If not, it checks if the input is a base64- or hex-encoded string that starts with PSBT header.\n *\n * This function is useful when reading a file that could be in any of the above formats or when\n * dealing with a request that could contain a hex or base64 encoded PSBT.\n *\n * @param data\n * @return buffer that starts with the magic PSBT byte sequence\n * @throws Error when conversion is not possible\n */\nexport function toPsbtBuffer(data: Buffer | string): Buffer {\n  if (Buffer.isBuffer(data)) {\n    // we are dealing with a buffer that looks like a psbt already\n    if (isPsbt(data)) {\n      return data;\n    }\n\n    // we could be dealing with a buffer that could be a hex or base64 encoded psbt\n    data = data.toString('ascii');\n  }\n\n  if (typeof data === 'string') {\n    const encodings = ['hex', 'base64'] as const;\n    for (const encoding of encodings) {\n      let buffer: Buffer;\n      try {\n        buffer = Buffer.from(data, encoding);\n      } catch (e) {\n        continue;\n      }\n      if (isPsbt(buffer)) {\n        return buffer;\n      }\n    }\n\n    throw new Error(`data is not in any of the following formats: ${encodings.join(', ')}`);\n  }\n\n  throw new Error('data must be a buffer or a string');\n}\n\n/**\n * This function allows signing or validating a psbt with non-segwit inputs those do not contain nonWitnessUtxo.\n */\nexport function withUnsafeNonSegwit<T>(psbt: Psbt, fn: () => T, unsafe = true): T {\n  (psbt as any).__CACHE.__UNSAFE_SIGN_NONSEGWIT = unsafe;\n  (psbt as any).__CACHE.__WARN_UNSAFE_SIGN_NONSEGWIT = !unsafe;\n  try {\n    return fn();\n  } finally {\n    (psbt as any).__CACHE.__UNSAFE_SIGN_NONSEGWIT = false;\n    (psbt as any).__CACHE.__WARN_UNSAFE_SIGN_NONSEGWIT = true;\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b7a1df4c9b9a72099f05d317c6feb4c1ce12ffc7"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1g8p2e4du8=function(){return actualCoverage;};}return actualCoverage;}cov_1g8p2e4du8();cov_1g8p2e4du8().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1g8p2e4du8().s[1]++;exports.ProprietaryKeySubtype=exports.PSBT_PROPRIETARY_IDENTIFIER=void 0;cov_1g8p2e4du8().s[2]++;exports.getPsbtInputProprietaryKeyVals=getPsbtInputProprietaryKeyVals;cov_1g8p2e4du8().s[3]++;exports.getPsbtInputSignatureCount=getPsbtInputSignatureCount;cov_1g8p2e4du8().s[4]++;exports.isPsbtInputFinalized=isPsbtInputFinalized;cov_1g8p2e4du8().s[5]++;exports.isPsbt=isPsbt;cov_1g8p2e4du8().s[6]++;exports.toPsbtBuffer=toPsbtBuffer;cov_1g8p2e4du8().s[7]++;exports.withUnsafeNonSegwit=withUnsafeNonSegwit;const proprietaryKeyVal_1=(cov_1g8p2e4du8().s[8]++,require("bip174/src/lib/proprietaryKeyVal"));/**
 * bitgo proprietary key identifier
 */cov_1g8p2e4du8().s[9]++;exports.PSBT_PROPRIETARY_IDENTIFIER='BITGO';/**
 * subtype for proprietary keys that bitgo uses
 */var ProprietaryKeySubtype;cov_1g8p2e4du8().s[10]++;(function(ProprietaryKeySubtype){cov_1g8p2e4du8().f[0]++;cov_1g8p2e4du8().s[11]++;ProprietaryKeySubtype[ProprietaryKeySubtype["ZEC_CONSENSUS_BRANCH_ID"]=0]="ZEC_CONSENSUS_BRANCH_ID";cov_1g8p2e4du8().s[12]++;ProprietaryKeySubtype[ProprietaryKeySubtype["MUSIG2_PARTICIPANT_PUB_KEYS"]=1]="MUSIG2_PARTICIPANT_PUB_KEYS";cov_1g8p2e4du8().s[13]++;ProprietaryKeySubtype[ProprietaryKeySubtype["MUSIG2_PUB_NONCE"]=2]="MUSIG2_PUB_NONCE";cov_1g8p2e4du8().s[14]++;ProprietaryKeySubtype[ProprietaryKeySubtype["MUSIG2_PARTIAL_SIG"]=3]="MUSIG2_PARTIAL_SIG";})((cov_1g8p2e4du8().b[0][0]++,ProprietaryKeySubtype)||(cov_1g8p2e4du8().b[0][1]++,exports.ProprietaryKeySubtype=ProprietaryKeySubtype={}));/**
 * Search any data from psbt proprietary key value against keydata.
 * Default identifierEncoding is utf-8 for identifier.
 */function getPsbtInputProprietaryKeyVals(input,keySearch){cov_1g8p2e4du8().f[1]++;cov_1g8p2e4du8().s[15]++;if(!input.unknownKeyVals?.length){cov_1g8p2e4du8().b[1][0]++;cov_1g8p2e4du8().s[16]++;return[];}else{cov_1g8p2e4du8().b[1][1]++;}cov_1g8p2e4du8().s[17]++;if((cov_1g8p2e4du8().b[3][0]++,keySearch)&&(cov_1g8p2e4du8().b[3][1]++,keySearch.subtype===undefined)&&(cov_1g8p2e4du8().b[3][2]++,Buffer.isBuffer(keySearch.keydata))){cov_1g8p2e4du8().b[2][0]++;cov_1g8p2e4du8().s[18]++;throw new Error('invalid proprietary key search filter combination. subtype is required');}else{cov_1g8p2e4du8().b[2][1]++;}const keyVals=(cov_1g8p2e4du8().s[19]++,input.unknownKeyVals.map(({key,value},i)=>{cov_1g8p2e4du8().f[2]++;cov_1g8p2e4du8().s[20]++;return{key:(0,proprietaryKeyVal_1.decodeProprietaryKey)(key),value};}));cov_1g8p2e4du8().s[21]++;return keyVals.filter(keyVal=>{cov_1g8p2e4du8().f[3]++;cov_1g8p2e4du8().s[22]++;return(cov_1g8p2e4du8().b[4][0]++,keySearch===undefined)||(cov_1g8p2e4du8().b[4][1]++,keySearch.identifier===keyVal.key.identifier)&&((cov_1g8p2e4du8().b[4][2]++,keySearch.subtype===undefined)||(cov_1g8p2e4du8().b[4][3]++,keySearch.subtype===keyVal.key.subtype)&&((cov_1g8p2e4du8().b[4][4]++,!Buffer.isBuffer(keySearch.keydata))||(cov_1g8p2e4du8().b[4][5]++,keySearch.keydata.equals(keyVal.key.keydata))));});}/**
 * @return partialSig/tapScriptSig/MUSIG2_PARTIAL_SIG count iff input is not finalized
 */function getPsbtInputSignatureCount(input){cov_1g8p2e4du8().f[4]++;cov_1g8p2e4du8().s[23]++;if(isPsbtInputFinalized(input)){cov_1g8p2e4du8().b[5][0]++;cov_1g8p2e4du8().s[24]++;throw new Error('Input is already finalized');}else{cov_1g8p2e4du8().b[5][1]++;}cov_1g8p2e4du8().s[25]++;return Math.max(Array.isArray(input.partialSig)?(cov_1g8p2e4du8().b[6][0]++,input.partialSig.length):(cov_1g8p2e4du8().b[6][1]++,0),Array.isArray(input.tapScriptSig)?(cov_1g8p2e4du8().b[7][0]++,input.tapScriptSig.length):(cov_1g8p2e4du8().b[7][1]++,0),getPsbtInputProprietaryKeyVals(input,{identifier:exports.PSBT_PROPRIETARY_IDENTIFIER,subtype:ProprietaryKeySubtype.MUSIG2_PARTIAL_SIG}).length);}/**
 * @return true iff PSBT input is finalized
 */function isPsbtInputFinalized(input){cov_1g8p2e4du8().f[5]++;cov_1g8p2e4du8().s[26]++;return(cov_1g8p2e4du8().b[8][0]++,Buffer.isBuffer(input.finalScriptSig))||(cov_1g8p2e4du8().b[8][1]++,Buffer.isBuffer(input.finalScriptWitness));}/**
 * @return true iff data starts with magic PSBT byte sequence
 * @param data byte array or hex string
 * */function isPsbt(data){cov_1g8p2e4du8().f[6]++;cov_1g8p2e4du8().s[27]++;// https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki#specification
// 0x70736274 - ASCII for 'psbt'. 0xff - separator
if(typeof data==='string'){cov_1g8p2e4du8().b[9][0]++;cov_1g8p2e4du8().s[28]++;if(data.length<10){cov_1g8p2e4du8().b[10][0]++;cov_1g8p2e4du8().s[29]++;return false;}else{cov_1g8p2e4du8().b[10][1]++;}cov_1g8p2e4du8().s[30]++;data=Buffer.from(data.slice(0,10),'hex');}else{cov_1g8p2e4du8().b[9][1]++;}cov_1g8p2e4du8().s[31]++;return(cov_1g8p2e4du8().b[11][0]++,5<=data.length)&&(cov_1g8p2e4du8().b[11][1]++,data.readUInt32BE(0)===0x70736274)&&(cov_1g8p2e4du8().b[11][2]++,data.readUInt8(4)===0xff);}/**
 * First checks if the input is already a buffer that starts with the magic PSBT byte sequence.
 * If not, it checks if the input is a base64- or hex-encoded string that starts with PSBT header.
 *
 * This function is useful when reading a file that could be in any of the above formats or when
 * dealing with a request that could contain a hex or base64 encoded PSBT.
 *
 * @param data
 * @return buffer that starts with the magic PSBT byte sequence
 * @throws Error when conversion is not possible
 */function toPsbtBuffer(data){cov_1g8p2e4du8().f[7]++;cov_1g8p2e4du8().s[32]++;if(Buffer.isBuffer(data)){cov_1g8p2e4du8().b[12][0]++;cov_1g8p2e4du8().s[33]++;// we are dealing with a buffer that looks like a psbt already
if(isPsbt(data)){cov_1g8p2e4du8().b[13][0]++;cov_1g8p2e4du8().s[34]++;return data;}else{cov_1g8p2e4du8().b[13][1]++;}// we could be dealing with a buffer that could be a hex or base64 encoded psbt
cov_1g8p2e4du8().s[35]++;data=data.toString('ascii');}else{cov_1g8p2e4du8().b[12][1]++;}cov_1g8p2e4du8().s[36]++;if(typeof data==='string'){cov_1g8p2e4du8().b[14][0]++;const encodings=(cov_1g8p2e4du8().s[37]++,['hex','base64']);cov_1g8p2e4du8().s[38]++;for(const encoding of encodings){let buffer;cov_1g8p2e4du8().s[39]++;try{cov_1g8p2e4du8().s[40]++;buffer=Buffer.from(data,encoding);}catch(e){cov_1g8p2e4du8().s[41]++;continue;}cov_1g8p2e4du8().s[42]++;if(isPsbt(buffer)){cov_1g8p2e4du8().b[15][0]++;cov_1g8p2e4du8().s[43]++;return buffer;}else{cov_1g8p2e4du8().b[15][1]++;}}cov_1g8p2e4du8().s[44]++;throw new Error(`data is not in any of the following formats: ${encodings.join(', ')}`);}else{cov_1g8p2e4du8().b[14][1]++;}cov_1g8p2e4du8().s[45]++;throw new Error('data must be a buffer or a string');}/**
 * This function allows signing or validating a psbt with non-segwit inputs those do not contain nonWitnessUtxo.
 */function withUnsafeNonSegwit(psbt,fn,unsafe=(cov_1g8p2e4du8().b[16][0]++,true)){cov_1g8p2e4du8().f[8]++;cov_1g8p2e4du8().s[46]++;psbt.__CACHE.__UNSAFE_SIGN_NONSEGWIT=unsafe;cov_1g8p2e4du8().s[47]++;psbt.__CACHE.__WARN_UNSAFE_SIGN_NONSEGWIT=!unsafe;cov_1g8p2e4du8().s[48]++;try{cov_1g8p2e4du8().s[49]++;return fn();}finally{cov_1g8p2e4du8().s[50]++;psbt.__CACHE.__UNSAFE_SIGN_NONSEGWIT=false;cov_1g8p2e4du8().s[51]++;psbt.__CACHE.__WARN_UNSAFE_SIGN_NONSEGWIT=true;}}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vUHNidFV0aWwudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9xcm9jL0NvZGUvaGFwaS9jaGFpbmRlZnVzZXIvdXR4by1saWIvc3JjL2JpdGdvL1BzYnRVdGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQTRDQSx3RUFzQkM7QUFLRCxnRUFZQztBQUtELG9EQUVDO0FBTUQsd0JBVUM7QUFhRCxvQ0E2QkM7QUFLRCxrREFTQztBQWxLRCx3RUFBd0Y7QUFJeEY7O0dBRUc7QUFDVSxRQUFBLDJCQUEyQixHQUFHLE9BQU8sQ0FBQztBQUVuRDs7R0FFRztBQUNILElBQVkscUJBS1g7QUFMRCxXQUFZLHFCQUFxQjtJQUMvQix1R0FBOEIsQ0FBQTtJQUM5QiwrR0FBa0MsQ0FBQTtJQUNsQyx5RkFBdUIsQ0FBQTtJQUN2Qiw2RkFBeUIsQ0FBQTtBQUMzQixDQUFDLEVBTFcscUJBQXFCLHFDQUFyQixxQkFBcUIsUUFLaEM7QUF1QkQ7OztHQUdHO0FBQ0gsU0FBZ0IsOEJBQThCLENBQzVDLEtBQWdCLEVBQ2hCLFNBQWdDO0lBRWhDLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLE1BQU0sRUFBRSxDQUFDO1FBQ2xDLE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQztJQUNELElBQUksU0FBUyxJQUFJLFNBQVMsQ0FBQyxPQUFPLEtBQUssU0FBUyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDdkYsTUFBTSxJQUFJLEtBQUssQ0FBQyx3RUFBd0UsQ0FBQyxDQUFDO0lBQzVGLENBQUM7SUFDRCxNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzdELE9BQU8sRUFBRSxHQUFHLEVBQUUsSUFB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b3J0IHsgZGVjb2RlUHJvcHJpZXRhcnlLZXksIFByb3ByaWV0YXJ5S2V5IH0gZnJvbSAnYmlwMTc0L3NyYy9saWIvcHJvcHJpZXRhcnlLZXlWYWwnO1xuaW1wb3J0IHsgUHNidElucHV0IH0gZnJvbSAnYmlwMTc0L3NyYy9saWIvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBQc2J0IH0gZnJvbSAnYml0Y29pbmpzLWxpYi9zcmMvcHNidCc7XG5cbi8qKlxuICogYml0Z28gcHJvcHJpZXRhcnkga2V5IGlkZW50aWZpZXJcbiAqL1xuZXhwb3J0IGNvbnN0IFBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUiA9ICdCSVRHTyc7XG5cbi8qKlxuICogc3VidHlwZSBmb3IgcHJvcHJpZXRhcnkga2V5cyB0aGF0IGJpdGdvIHVzZXNcbiAqL1xuZXhwb3J0IGVudW0gUHJvcHJpZXRhcnlLZXlTdWJ0eXBlIHtcbiAgWkVDX0NPTlNFTlNVU19CUkFOQ0hfSUQgPSAweDAwLFxuICBNVVNJRzJfUEFSVElDSVBBTlRfUFVCX0tFWVMgPSAweDAxLFxuICBNVVNJRzJfUFVCX05PTkNFID0gMHgwMixcbiAgTVVTSUcyX1BBUlRJQUxfU0lHID0gMHgwMyxcbn1cblxuLyoqXG4gKiBQc2J0IHByb3ByaWV0YXJ5IGtleWRhdGEgb2JqZWN0LlxuICogPGNvbXBhY3Qgc2l6ZSB1aW50IGlkZW50aWZpZXIgbGVuZ3RoPiA8Ynl0ZXMgaWRlbnRpZmllcj4gPGNvbXBhY3Qgc2l6ZSB1aW50IHN1YnR5cGU+IDxieXRlcyBzdWJrZXlkYXRhPlxuICogPT4gPGJ5dGVzIHZhbHVlZGF0YT5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQcm9wcmlldGFyeUtleVZhbHVlIHtcbiAga2V5OiBQcm9wcmlldGFyeUtleTtcbiAgdmFsdWU6IEJ1ZmZlcjtcbn1cblxuLyoqXG4gKiBQc2J0IHByb3ByaWV0YXJ5IGtleWRhdGEgb2JqZWN0IHNlYXJjaCBmaWVsZHMuXG4gKiA8Y29tcGFjdCBzaXplIHVpbnQgaWRlbnRpZmllciBsZW5ndGg+IDxieXRlcyBpZGVudGlmaWVyPiA8Y29tcGFjdCBzaXplIHVpbnQgc3VidHlwZT4gPGJ5dGVzIHN1YmtleWRhdGE+XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHJpZXRhcnlLZXlTZWFyY2gge1xuICBpZGVudGlmaWVyOiBzdHJpbmc7XG4gIHN1YnR5cGU/OiBudW1iZXI7XG4gIGtleWRhdGE/OiBCdWZmZXI7XG4gIGlkZW50aWZpZXJFbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nO1xufVxuXG4vKipcbiAqIFNlYXJjaCBhbnkgZGF0YSBmcm9tIHBzYnQgcHJvcHJpZXRhcnkga2V5IHZhbHVlIGFnYWluc3Qga2V5ZGF0YS5cbiAqIERlZmF1bHQgaWRlbnRpZmllckVuY29kaW5nIGlzIHV0Zi04IGZvciBpZGVudGlmaWVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHNidElucHV0UHJvcHJpZXRhcnlLZXlWYWxzKFxuICBpbnB1dDogUHNidElucHV0LFxuICBrZXlTZWFyY2g/OiBQcm9wcmlldGFyeUtleVNlYXJjaFxuKTogUHJvcHJpZXRhcnlLZXlWYWx1ZVtdIHtcbiAgaWYgKCFpbnB1dC51bmtub3duS2V5VmFscz8ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGlmIChrZXlTZWFyY2ggJiYga2V5U2VhcmNoLnN1YnR5cGUgPT09IHVuZGVmaW5lZCAmJiBCdWZmZXIuaXNCdWZmZXIoa2V5U2VhcmNoLmtleWRhdGEpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHByb3ByaWV0YXJ5IGtleSBzZWFyY2ggZmlsdGVyIGNvbWJpbmF0aW9uLiBzdWJ0eXBlIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgY29uc3Qga2V5VmFscyA9IGlucHV0LnVua25vd25LZXlWYWxzLm1hcCgoeyBrZXksIHZhbHVlIH0sIGkpID0+IHtcbiAgICByZXR1cm4geyBrZXk6IGRlY29kZVByb3ByaWV0YXJ5S2V5KGtleSksIHZhbHVlIH07XG4gIH0pO1xuICByZXR1cm4ga2V5VmFscy5maWx0ZXIoKGtleVZhbCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICBrZXlTZWFyY2ggPT09IHVuZGVmaW5lZCB8fFxuICAgICAgKGtleVNlYXJjaC5pZGVudGlmaWVyID09PSBrZXlWYWwua2V5LmlkZW50aWZpZXIgJiZcbiAgICAgICAgKGtleVNlYXJjaC5zdWJ0eXBlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAoa2V5U2VhcmNoLnN1YnR5cGUgPT09IGtleVZhbC5rZXkuc3VidHlwZSAmJlxuICAgICAgICAgICAgKCFCdWZmZXIuaXNCdWZmZXIoa2V5U2VhcmNoLmtleWRhdGEpIHx8IGtleVNlYXJjaC5rZXlkYXRhLmVxdWFscyhrZXlWYWwua2V5LmtleWRhdGEpKSkpKVxuICAgICk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEByZXR1cm4gcGFydGlhbFNpZy90YXBTY3JpcHRTaWcvTVVTSUcyX1BBUlRJQUxfU0lHIGNvdW50IGlmZiBpbnB1dCBpcyBub3QgZmluYWxpemVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQc2J0SW5wdXRTaWduYXR1cmVDb3VudChpbnB1dDogUHNidElucHV0KTogbnVtYmVyIHtcbiAgaWYgKGlzUHNidElucHV0RmluYWxpemVkKGlucHV0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgaXMgYWxyZWFkeSBmaW5hbGl6ZWQnKTtcbiAgfVxuICByZXR1cm4gTWF0aC5tYXgoXG4gICAgQXJyYXkuaXNBcnJheShpbnB1dC5wYXJ0aWFsU2lnKSA/IGlucHV0LnBhcnRpYWxTaWcubGVuZ3RoIDogMCxcbiAgICBBcnJheS5pc0FycmF5KGlucHV0LnRhcFNjcmlwdFNpZykgPyBpbnB1dC50YXBTY3JpcHRTaWcubGVuZ3RoIDogMCxcbiAgICBnZXRQc2J0SW5wdXRQcm9wcmlldGFyeUtleVZhbHMoaW5wdXQsIHtcbiAgICAgIGlkZW50aWZpZXI6IFBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUixcbiAgICAgIHN1YnR5cGU6IFByb3ByaWV0YXJ5S2V5U3VidHlwZS5NVVNJRzJfUEFSVElBTF9TSUcsXG4gICAgfSkubGVuZ3RoXG4gICk7XG59XG5cbi8qKlxuICogQHJldHVybiB0cnVlIGlmZiBQU0JUIGlucHV0IGlzIGZpbmFsaXplZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQc2J0SW5wdXRGaW5hbGl6ZWQoaW5wdXQ6IFBzYnRJbnB1dCk6IGJvb2xlYW4ge1xuICByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKGlucHV0LmZpbmFsU2NyaXB0U2lnKSB8fCBCdWZmZXIuaXNCdWZmZXIoaW5wdXQuZmluYWxTY3JpcHRXaXRuZXNzKTtcbn1cblxuLyoqXG4gKiBAcmV0dXJuIHRydWUgaWZmIGRhdGEgc3RhcnRzIHdpdGggbWFnaWMgUFNCVCBieXRlIHNlcXVlbmNlXG4gKiBAcGFyYW0gZGF0YSBieXRlIGFycmF5IG9yIGhleCBzdHJpbmdcbiAqICovXG5leHBvcnQgZnVuY3Rpb24gaXNQc2J0KGRhdGE6IEJ1ZmZlciB8IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXBzL2Jsb2IvbWFzdGVyL2JpcC0wMTc0Lm1lZGlhd2lraSNzcGVjaWZpY2F0aW9uXG4gIC8vIDB4NzA3MzYyNzQgLSBBU0NJSSBmb3IgJ3BzYnQnLiAweGZmIC0gc2VwYXJhdG9yXG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAoZGF0YS5sZW5ndGggPCAxMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBkYXRhID0gQnVmZmVyLmZyb20oZGF0YS5zbGljZSgwLCAxMCksICdoZXgnKTtcbiAgfVxuICByZXR1cm4gNSA8PSBkYXRhLmxlbmd0aCAmJiBkYXRhLnJlYWRVSW50MzJCRSgwKSA9PT0gMHg3MDczNjI3NCAmJiBkYXRhLnJlYWRVSW50OCg0KSA9PT0gMHhmZjtcbn1cblxuLyoqXG4gKiBGaXJzdCBjaGVja3MgaWYgdGhlIGlucHV0IGlzIGFscmVhZHkgYSBidWZmZXIgdGhhdCBzdGFydHMgd2l0aCB0aGUgbWFnaWMgUFNCVCBieXRlIHNlcXVlbmNlLlxuICogSWYgbm90LCBpdCBjaGVja3MgaWYgdGhlIGlucHV0IGlzIGEgYmFzZTY0LSBvciBoZXgtZW5jb2RlZCBzdHJpbmcgdGhhdCBzdGFydHMgd2l0aCBQU0JUIGhlYWRlci5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWZ1bCB3aGVuIHJlYWRpbmcgYSBmaWxlIHRoYXQgY291bGQgYmUgaW4gYW55IG9mIHRoZSBhYm92ZSBmb3JtYXRzIG9yIHdoZW5cbiAqIGRlYWxpbmcgd2l0aCBhIHJlcXVlc3QgdGhhdCBjb3VsZCBjb250YWluIGEgaGV4IG9yIGJhc2U2NCBlbmNvZGVkIFBTQlQuXG4gKlxuICogQHBhcmFtIGRhdGFcbiAqIEByZXR1cm4gYnVmZmVyIHRoYXQgc3RhcnRzIHdpdGggdGhlIG1hZ2ljIFBTQlQgYnl0ZSBzZXF1ZW5jZVxuICogQHRocm93cyBFcnJvciB3aGVuIGNvbnZlcnNpb24gaXMgbm90IHBvc3NpYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1BzYnRCdWZmZXIoZGF0YTogQnVmZmVyIHwgc3RyaW5nKTogQnVmZmVyIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihkYXRhKSkge1xuICAgIC8vIHdlIGFyZSBkZWFsaW5nIHdpdGggYSBidWZmZXIgdGhhdCBsb29rcyBsaWtlIGEgcHNidCBhbHJlYWR5XG4gICAgaWYgKGlzUHNidChkYXRhKSkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgLy8gd2UgY291bGQgYmUgZGVhbGluZyB3aXRoIGEgYnVmZmVyIHRoYXQgY291bGQgYmUgYSBoZXggb3IgYmFzZTY0IGVuY29kZWQgcHNidFxuICAgIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCdhc2NpaScpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IGVuY29kaW5ncyA9IFsnaGV4JywgJ2Jhc2U2NCddIGFzIGNvbnN0O1xuICAgIGZvciAoY29uc3QgZW5jb2Rpbmcgb2YgZW5jb2RpbmdzKSB7XG4gICAgICBsZXQgYnVmZmVyOiBCdWZmZXI7XG4gICAgICB0cnkge1xuICAgICAgICBidWZmZXIgPSBCdWZmZXIuZnJvbShkYXRhLCBlbmNvZGluZyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGlzUHNidChidWZmZXIpKSB7XG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKGBkYXRhIGlzIG5vdCBpbiBhbnkgb2YgdGhlIGZvbGxvd2luZyBmb3JtYXRzOiAke2VuY29kaW5ncy5qb2luKCcsICcpfWApO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIG11c3QgYmUgYSBidWZmZXIgb3IgYSBzdHJpbmcnKTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGFsbG93cyBzaWduaW5nIG9yIHZhbGlkYXRpbmcgYSBwc2J0IHdpdGggbm9uLXNlZ3dpdCBpbnB1dHMgdGhvc2UgZG8gbm90IGNvbnRhaW4gbm9uV2l0bmVzc1V0eG8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoVW5zYWZlTm9uU2Vnd2l0PFQ+KHBzYnQ6IFBzYnQsIGZuOiAoKSA9PiBULCB1bnNhZmUgPSB0cnVlKTogVCB7XG4gIChwc2J0IGFzIGFueSkuX19DQUNIRS5fX1VOU0FGRV9TSUdOX05PTlNFR1dJVCA9IHVuc2FmZTtcbiAgKHBzYnQgYXMgYW55KS5fX0NBQ0hFLl9fV0FSTl9VTlNBRkVfU0lHTl9OT05TRUdXSVQgPSAhdW5zYWZlO1xuICB0cnkge1xuICAgIHJldHVybiBmbigpO1xuICB9IGZpbmFsbHkge1xuICAgIChwc2J0IGFzIGFueSkuX19DQUNIRS5fX1VOU0FGRV9TSUdOX05PTlNFR1dJVCA9IGZhbHNlO1xuICAgIChwc2J0IGFzIGFueSkuX19DQUNIRS5fX1dBUk5fVU5TQUZFX1NJR05fTk9OU0VHV0lUID0gdHJ1ZTtcbiAgfVxufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0UHNidElucHV0UHJvcHJpZXRhcnlLZXlWYWxzIiwiY292XzFnOHAyZTRkdTgiLCJzIiwiZ2V0UHNidElucHV0U2lnbmF0dXJlQ291bnQiLCJpc1BzYnRJbnB1dEZpbmFsaXplZCIsImlzUHNidCIsInRvUHNidEJ1ZmZlciIsIndpdGhVbnNhZmVOb25TZWd3aXQiLCJwcm9wcmlldGFyeUtleVZhbF8xIiwicmVxdWlyZSIsIlBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUiIsIlByb3ByaWV0YXJ5S2V5U3VidHlwZSIsImYiLCJiIiwiaW5wdXQiLCJrZXlTZWFyY2giLCJ1bmtub3duS2V5VmFscyIsImxlbmd0aCIsInN1YnR5cGUiLCJ1bmRlZmluZWQiLCJCdWZmZXIiLCJpc0J1ZmZlciIsImtleWRhdGEiLCJFcnJvciIsImtleVZhbHMiLCJtYXAiLCJrZXkiLCJ2YWx1ZSIsImkiLCJkZWNvZGVQcm9wcmlldGFyeUtleSIsImZpbHRlciIsImtleVZhbCIsImlkZW50aWZpZXIiLCJlcXVhbHMiLCJNYXRoIiwibWF4IiwiQXJyYXkiLCJpc0FycmF5IiwicGFydGlhbFNpZyIsInRhcFNjcmlwdFNpZyIsIk1VU0lHMl9QQVJUSUFMX1NJRyIsImZpbmFsU2NyaXB0U2lnIiwiZmluYWxTY3JpcHRXaXRuZXNzIiwiZGF0YSIsImZyb20iLCJzbGljZSIsInJlYWRVSW50MzJCRSIsInJlYWRVSW50OCIsInRvU3RyaW5nIiwiZW5jb2RpbmdzIiwiZW5jb2RpbmciLCJidWZmZXIiLCJlIiwiam9pbiIsInBzYnQiLCJmbiIsInVuc2FmZSIsIl9fQ0FDSEUiLCJfX1VOU0FGRV9TSUdOX05PTlNFR1dJVCIsIl9fV0FSTl9VTlNBRkVfU0lHTl9OT05TRUdXSVQiXSwic291cmNlcyI6WyIvVXNlcnMvcXJvYy9Db2RlL2hhcGkvY2hhaW5kZWZ1c2VyL3V0eG8tbGliL3NyYy9iaXRnby9Qc2J0VXRpbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWNvZGVQcm9wcmlldGFyeUtleSwgUHJvcHJpZXRhcnlLZXkgfSBmcm9tICdiaXAxNzQvc3JjL2xpYi9wcm9wcmlldGFyeUtleVZhbCc7XG5pbXBvcnQgeyBQc2J0SW5wdXQgfSBmcm9tICdiaXAxNzQvc3JjL2xpYi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IFBzYnQgfSBmcm9tICdiaXRjb2luanMtbGliL3NyYy9wc2J0JztcblxuLyoqXG4gKiBiaXRnbyBwcm9wcmlldGFyeSBrZXkgaWRlbnRpZmllclxuICovXG5leHBvcnQgY29uc3QgUFNCVF9QUk9QUklFVEFSWV9JREVOVElGSUVSID0gJ0JJVEdPJztcblxuLyoqXG4gKiBzdWJ0eXBlIGZvciBwcm9wcmlldGFyeSBrZXlzIHRoYXQgYml0Z28gdXNlc1xuICovXG5leHBvcnQgZW51bSBQcm9wcmlldGFyeUtleVN1YnR5cGUge1xuICBaRUNfQ09OU0VOU1VTX0JSQU5DSF9JRCA9IDB4MDAsXG4gIE1VU0lHMl9QQVJUSUNJUEFOVF9QVUJfS0VZUyA9IDB4MDEsXG4gIE1VU0lHMl9QVUJfTk9OQ0UgPSAweDAyLFxuICBNVVNJRzJfUEFSVElBTF9TSUcgPSAweDAzLFxufVxuXG4vKipcbiAqIFBzYnQgcHJvcHJpZXRhcnkga2V5ZGF0YSBvYmplY3QuXG4gKiA8Y29tcGFjdCBzaXplIHVpbnQgaWRlbnRpZmllciBsZW5ndGg+IDxieXRlcyBpZGVudGlmaWVyPiA8Y29tcGFjdCBzaXplIHVpbnQgc3VidHlwZT4gPGJ5dGVzIHN1YmtleWRhdGE+XG4gKiA9PiA8Ynl0ZXMgdmFsdWVkYXRhPlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFByb3ByaWV0YXJ5S2V5VmFsdWUge1xuICBrZXk6IFByb3ByaWV0YXJ5S2V5O1xuICB2YWx1ZTogQnVmZmVyO1xufVxuXG4vKipcbiAqIFBzYnQgcHJvcHJpZXRhcnkga2V5ZGF0YSBvYmplY3Qgc2VhcmNoIGZpZWxkcy5cbiAqIDxjb21wYWN0IHNpemUgdWludCBpZGVudGlmaWVyIGxlbmd0aD4gPGJ5dGVzIGlkZW50aWZpZXI+IDxjb21wYWN0IHNpemUgdWludCBzdWJ0eXBlPiA8Ynl0ZXMgc3Via2V5ZGF0YT5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQcm9wcmlldGFyeUtleVNlYXJjaCB7XG4gIGlkZW50aWZpZXI6IHN0cmluZztcbiAgc3VidHlwZT86IG51bWJlcjtcbiAga2V5ZGF0YT86IEJ1ZmZlcjtcbiAgaWRlbnRpZmllckVuY29kaW5nPzogQnVmZmVyRW5jb2Rpbmc7XG59XG5cbi8qKlxuICogU2VhcmNoIGFueSBkYXRhIGZyb20gcHNidCBwcm9wcmlldGFyeSBrZXkgdmFsdWUgYWdhaW5zdCBrZXlkYXRhLlxuICogRGVmYXVsdCBpZGVudGlmaWVyRW5jb2RpbmcgaXMgdXRmLTggZm9yIGlkZW50aWZpZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQc2J0SW5wdXRQcm9wcmlldGFyeUtleVZhbHMoXG4gIGlucHV0OiBQc2J0SW5wdXQsXG4gIGtleVNlYXJjaD86IFByb3ByaWV0YXJ5S2V5U2VhcmNoXG4pOiBQcm9wcmlldGFyeUtleVZhbHVlW10ge1xuICBpZiAoIWlucHV0LnVua25vd25LZXlWYWxzPy5sZW5ndGgpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgaWYgKGtleVNlYXJjaCAmJiBrZXlTZWFyY2guc3VidHlwZSA9PT0gdW5kZWZpbmVkICYmIEJ1ZmZlci5pc0J1ZmZlcihrZXlTZWFyY2gua2V5ZGF0YSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcHJvcHJpZXRhcnkga2V5IHNlYXJjaCBmaWx0ZXIgY29tYmluYXRpb24uIHN1YnR5cGUgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBjb25zdCBrZXlWYWxzID0gaW5wdXQudW5rbm93bktleVZhbHMubWFwKCh7IGtleSwgdmFsdWUgfSwgaSkgPT4ge1xuICAgIHJldHVybiB7IGtleTogZGVjb2RlUHJvcHJpZXRhcnlLZXkoa2V5KSwgdmFsdWUgfTtcbiAgfSk7XG4gIHJldHVybiBrZXlWYWxzLmZpbHRlcigoa2V5VmFsKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIGtleVNlYXJjaCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAoa2V5U2VhcmNoLmlkZW50aWZpZXIgPT09IGtleVZhbC5rZXkuaWRlbnRpZmllciAmJlxuICAgICAgICAoa2V5U2VhcmNoLnN1YnR5cGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgIChrZXlTZWFyY2guc3VidHlwZSA9PT0ga2V5VmFsLmtleS5zdWJ0eXBlICYmXG4gICAgICAgICAgICAoIUJ1ZmZlci5pc0J1ZmZlcihrZXlTZWFyY2gua2V5ZGF0YSkgfHwga2V5U2VhcmNoLmtleWRhdGEuZXF1YWxzKGtleVZhbC5rZXkua2V5ZGF0YSkpKSkpXG4gICAgKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQHJldHVybiBwYXJ0aWFsU2lnL3RhcFNjcmlwdFNpZy9NVVNJRzJfUEFSVElBTF9TSUcgY291bnQgaWZmIGlucHV0IGlzIG5vdCBmaW5hbGl6ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBzYnRJbnB1dFNpZ25hdHVyZUNvdW50KGlucHV0OiBQc2J0SW5wdXQpOiBudW1iZXIge1xuICBpZiAoaXNQc2J0SW5wdXRGaW5hbGl6ZWQoaW5wdXQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnB1dCBpcyBhbHJlYWR5IGZpbmFsaXplZCcpO1xuICB9XG4gIHJldHVybiBNYXRoLm1heChcbiAgICBBcnJheS5pc0FycmF5KGlucHV0LnBhcnRpYWxTaWcpID8gaW5wdXQucGFydGlhbFNpZy5sZW5ndGggOiAwLFxuICAgIEFycmF5LmlzQXJyYXkoaW5wdXQudGFwU2NyaXB0U2lnKSA/IGlucHV0LnRhcFNjcmlwdFNpZy5sZW5ndGggOiAwLFxuICAgIGdldFBzYnRJbnB1dFByb3ByaWV0YXJ5S2V5VmFscyhpbnB1dCwge1xuICAgICAgaWRlbnRpZmllcjogUFNCVF9QUk9QUklFVEFSWV9JREVOVElGSUVSLFxuICAgICAgc3VidHlwZTogUHJvcHJpZXRhcnlLZXlTdWJ0eXBlLk1VU0lHMl9QQVJUSUFMX1NJRyxcbiAgICB9KS5sZW5ndGhcbiAgKTtcbn1cblxuLyoqXG4gKiBAcmV0dXJuIHRydWUgaWZmIFBTQlQgaW5wdXQgaXMgZmluYWxpemVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BzYnRJbnB1dEZpbmFsaXplZChpbnB1dDogUHNidElucHV0KTogYm9vbGVhbiB7XG4gIHJldHVybiBCdWZmZXIuaXNCdWZmZXIoaW5wdXQuZmluYWxTY3JpcHRTaWcpIHx8IEJ1ZmZlci5pc0J1ZmZlcihpbnB1dC5maW5hbFNjcmlwdFdpdG5lc3MpO1xufVxuXG4vKipcbiAqIEByZXR1cm4gdHJ1ZSBpZmYgZGF0YSBzdGFydHMgd2l0aCBtYWdpYyBQU0JUIGJ5dGUgc2VxdWVuY2VcbiAqIEBwYXJhbSBkYXRhIGJ5dGUgYXJyYXkgb3IgaGV4IHN0cmluZ1xuICogKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BzYnQoZGF0YTogQnVmZmVyIHwgc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpcHMvYmxvYi9tYXN0ZXIvYmlwLTAxNzQubWVkaWF3aWtpI3NwZWNpZmljYXRpb25cbiAgLy8gMHg3MDczNjI3NCAtIEFTQ0lJIGZvciAncHNidCcuIDB4ZmYgLSBzZXBhcmF0b3JcbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgIGlmIChkYXRhLmxlbmd0aCA8IDEwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGRhdGEgPSBCdWZmZXIuZnJvbShkYXRhLnNsaWNlKDAsIDEwKSwgJ2hleCcpO1xuICB9XG4gIHJldHVybiA1IDw9IGRhdGEubGVuZ3RoICYmIGRhdGEucmVhZFVJbnQzMkJFKDApID09PSAweDcwNzM2Mjc0ICYmIGRhdGEucmVhZFVJbnQ4KDQpID09PSAweGZmO1xufVxuXG4vKipcbiAqIEZpcnN0IGNoZWNrcyBpZiB0aGUgaW5wdXQgaXMgYWxyZWFkeSBhIGJ1ZmZlciB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBtYWdpYyBQU0JUIGJ5dGUgc2VxdWVuY2UuXG4gKiBJZiBub3QsIGl0IGNoZWNrcyBpZiB0aGUgaW5wdXQgaXMgYSBiYXNlNjQtIG9yIGhleC1lbmNvZGVkIHN0cmluZyB0aGF0IHN0YXJ0cyB3aXRoIFBTQlQgaGVhZGVyLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZnVsIHdoZW4gcmVhZGluZyBhIGZpbGUgdGhhdCBjb3VsZCBiZSBpbiBhbnkgb2YgdGhlIGFib3ZlIGZvcm1hdHMgb3Igd2hlblxuICogZGVhbGluZyB3aXRoIGEgcmVxdWVzdCB0aGF0IGNvdWxkIGNvbnRhaW4gYSBoZXggb3IgYmFzZTY0IGVuY29kZWQgUFNCVC5cbiAqXG4gKiBAcGFyYW0gZGF0YVxuICogQHJldHVybiBidWZmZXIgdGhhdCBzdGFydHMgd2l0aCB0aGUgbWFnaWMgUFNCVCBieXRlIHNlcXVlbmNlXG4gKiBAdGhyb3dzIEVycm9yIHdoZW4gY29udmVyc2lvbiBpcyBub3QgcG9zc2libGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUHNidEJ1ZmZlcihkYXRhOiBCdWZmZXIgfCBzdHJpbmcpOiBCdWZmZXIge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKGRhdGEpKSB7XG4gICAgLy8gd2UgYXJlIGRlYWxpbmcgd2l0aCBhIGJ1ZmZlciB0aGF0IGxvb2tzIGxpa2UgYSBwc2J0IGFscmVhZHlcbiAgICBpZiAoaXNQc2J0KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvLyB3ZSBjb3VsZCBiZSBkZWFsaW5nIHdpdGggYSBidWZmZXIgdGhhdCBjb3VsZCBiZSBhIGhleCBvciBiYXNlNjQgZW5jb2RlZCBwc2J0XG4gICAgZGF0YSA9IGRhdGEudG9TdHJpbmcoJ2FzY2lpJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgZW5jb2RpbmdzID0gWydoZXgnLCAnYmFzZTY0J10gYXMgY29uc3Q7XG4gICAgZm9yIChjb25zdCBlbmNvZGluZyBvZiBlbmNvZGluZ3MpIHtcbiAgICAgIGxldCBidWZmZXI6IEJ1ZmZlcjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGRhdGEsIGVuY29kaW5nKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNQc2J0KGJ1ZmZlcikpIHtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoYGRhdGEgaXMgbm90IGluIGFueSBvZiB0aGUgZm9sbG93aW5nIGZvcm1hdHM6ICR7ZW5jb2RpbmdzLmpvaW4oJywgJyl9YCk7XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgbXVzdCBiZSBhIGJ1ZmZlciBvciBhIHN0cmluZycpO1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHNpZ25pbmcgb3IgdmFsaWRhdGluZyBhIHBzYnQgd2l0aCBub24tc2Vnd2l0IGlucHV0cyB0aG9zZSBkbyBub3QgY29udGFpbiBub25XaXRuZXNzVXR4by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhVbnNhZmVOb25TZWd3aXQ8VD4ocHNidDogUHNidCwgZm46ICgpID0+IFQsIHVuc2FmZSA9IHRydWUpOiBUIHtcbiAgKHBzYnQgYXMgYW55KS5fX0NBQ0hFLl9fVU5TQUZFX1NJR05fTk9OU0VHV0lUID0gdW5zYWZlO1xuICAocHNidCBhcyBhbnkpLl9fQ0FDSEUuX19XQVJOX1VOU0FGRV9TSUdOX05PTlNFR1dJVCA9ICF1bnNhZmU7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZuKCk7XG4gIH0gZmluYWxseSB7XG4gICAgKHBzYnQgYXMgYW55KS5fX0NBQ0hFLl9fVU5TQUZFX1NJR05fTk9OU0VHV0lUID0gZmFsc2U7XG4gICAgKHBzYnQgYXMgYW55KS5fX0NBQ0hFLl9fV0FSTl9VTlNBRkVfU0lHTl9OT05TRUdXSVQgPSB0cnVlO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7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