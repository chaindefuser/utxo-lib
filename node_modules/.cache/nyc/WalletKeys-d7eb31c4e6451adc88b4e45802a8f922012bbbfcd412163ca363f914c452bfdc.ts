"use strict";function cov_2hpnelxlhw(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/wallet/WalletKeys.ts";var hash="c75e859b0142f93c536aa948ecf8a3a413f9942c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/wallet/WalletKeys.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:81}},"2":{start:{line:4,column:0},end:{line:4,column:34}},"3":{start:{line:6,column:4},end:{line:6,column:43}},"4":{start:{line:17,column:8},end:{line:17,column:29}},"5":{start:{line:18,column:8},end:{line:24,column:11}},"6":{start:{line:19,column:12},end:{line:23,column:15}},"7":{start:{line:20,column:16},end:{line:22,column:17}},"8":{start:{line:21,column:20},end:{line:21,column:68}},"9":{start:{line:25,column:8},end:{line:25,column:62}},"10":{start:{line:25,column:49},end:{line:25,column:60}},"11":{start:{line:28,column:8},end:{line:28,column:30}},"12":{start:{line:31,column:8},end:{line:31,column:30}},"13":{start:{line:34,column:8},end:{line:34,column:30}},"14":{start:{line:37,column:0},end:{line:37,column:32}},"15":{start:{line:49,column:8},end:{line:49,column:67}},"16":{start:{line:49,column:42},end:{line:49,column:64}},"17":{start:{line:50,column:8},end:{line:50,column:29}},"18":{start:{line:51,column:8},end:{line:51,column:27}},"19":{start:{line:54,column:0},end:{line:54,column:46}},"20":{start:{line:69,column:8},end:{line:69,column:22}},"21":{start:{line:70,column:8},end:{line:70,column:53}},"22":{start:{line:71,column:8},end:{line:75,column:11}},"23":{start:{line:72,column:12},end:{line:74,column:13}},"24":{start:{line:73,column:16},end:{line:73,column:88}},"25":{start:{line:84,column:8},end:{line:86,column:9}},"26":{start:{line:85,column:12},end:{line:85,column:54}},"27":{start:{line:87,column:23},end:{line:87,column:100}},"28":{start:{line:87,column:67},end:{line:87,column:99}},"29":{start:{line:88,column:8},end:{line:90,column:9}},"30":{start:{line:89,column:12},end:{line:89,column:53}},"31":{start:{line:91,column:8},end:{line:91,column:45}},"32":{start:{line:99,column:8},end:{line:99,column:108}},"33":{start:{line:99,column:66},end:{line:99,column:105}},"34":{start:{line:102,column:0},end:{line:102,column:40}},"35":{start:{line:103,column:0},end:{line:103,column:37}}},fnMap:{"0":{name:"eqPublicKey",decl:{start:{line:5,column:9},end:{line:5,column:20}},loc:{start:{line:5,column:27},end:{line:7,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:16,column:4},end:{line:16,column:5}},loc:{start:{line:16,column:24},end:{line:26,column:5}},line:16},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:23},end:{line:18,column:24}},loc:{start:{line:18,column:33},end:{line:24,column:9}},line:18},"3":{name:"(anonymous_3)",decl:{start:{line:19,column:27},end:{line:19,column:28}},loc:{start:{line:19,column:37},end:{line:23,column:13}},line:19},"4":{name:"(anonymous_4)",decl:{start:{line:25,column:42},end:{line:25,column:43}},loc:{start:{line:25,column:49},end:{line:25,column:60}},line:25},"5":{name:"(anonymous_5)",decl:{start:{line:27,column:4},end:{line:27,column:5}},loc:{start:{line:27,column:15},end:{line:29,column:5}},line:27},"6":{name:"(anonymous_6)",decl:{start:{line:30,column:4},end:{line:30,column:5}},loc:{start:{line:30,column:17},end:{line:32,column:5}},line:30},"7":{name:"(anonymous_7)",decl:{start:{line:33,column:4},end:{line:33,column:5}},loc:{start:{line:33,column:16},end:{line:35,column:5}},line:33},"8":{name:"(anonymous_8)",decl:{start:{line:48,column:4},end:{line:48,column:5}},loc:{start:{line:48,column:31},end:{line:52,column:5}},line:48},"9":{name:"(anonymous_9)",decl:{start:{line:49,column:32},end:{line:49,column:33}},loc:{start:{line:49,column:42},end:{line:49,column:64}},line:49},"10":{name:"(anonymous_10)",decl:{start:{line:64,column:4},end:{line:64,column:5}},loc:{start:{line:68,column:7},end:{line:76,column:5}},line:68},"11":{name:"(anonymous_11)",decl:{start:{line:71,column:35},end:{line:71,column:36}},loc:{start:{line:71,column:42},end:{line:75,column:9}},line:71},"12":{name:"(anonymous_12)",decl:{start:{line:83,column:4},end:{line:83,column:5}},loc:{start:{line:83,column:41},end:{line:92,column:5}},line:83},"13":{name:"(anonymous_13)",decl:{start:{line:87,column:52},end:{line:87,column:53}},loc:{start:{line:87,column:67},end:{line:87,column:99}},line:87},"14":{name:"(anonymous_14)",decl:{start:{line:98,column:4},end:{line:98,column:5}},loc:{start:{line:98,column:41},end:{line:100,column:5}},line:98},"15":{name:"(anonymous_15)",decl:{start:{line:99,column:59},end:{line:99,column:60}},loc:{start:{line:99,column:66},end:{line:99,column:105}},line:99}},branchMap:{"0":{loc:{start:{line:20,column:16},end:{line:22,column:17}},type:"if",locations:[{start:{line:20,column:16},end:{line:22,column:17}},{start:{line:20,column:16},end:{line:22,column:17}}],line:20},"1":{loc:{start:{line:20,column:20},end:{line:20,column:48}},type:"binary-expr",locations:[{start:{line:20,column:20},end:{line:20,column:37}},{start:{line:20,column:41},end:{line:20,column:48}}],line:20},"2":{loc:{start:{line:64,column:24},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:64,column:45},end:{line:68,column:5}}],line:64},"3":{loc:{start:{line:72,column:12},end:{line:74,column:13}},type:"if",locations:[{start:{line:72,column:12},end:{line:74,column:13}},{start:{line:72,column:12},end:{line:74,column:13}}],line:72},"4":{loc:{start:{line:72,column:16},end:{line:72,column:52}},type:"binary-expr",locations:[{start:{line:72,column:16},end:{line:72,column:33}},{start:{line:72,column:37},end:{line:72,column:52}}],line:72},"5":{loc:{start:{line:84,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:86,column:9}},{start:{line:84,column:8},end:{line:86,column:9}}],line:84},"6":{loc:{start:{line:88,column:8},end:{line:90,column:9}},type:"if",locations:[{start:{line:88,column:8},end:{line:90,column:9}},{start:{line:88,column:8},end:{line:90,column:9}}],line:88}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},b:{"0":[0,0],"1":[0,0],"2":[0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/wallet/WalletKeys.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/wallet/WalletKeys.ts"],names:[],mappings:"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",sourcesContent:["/**\n * Classes for deriving key triples for wallet addresses.\n *\n * By default, BitGo wallets consist of a triple of bip32 extend keypairs.\n * Every wallet address can be identified by _(chain: number, index: number)_.\n * The key set for a particular address can be obtained by deriving with the path\n * `0/0/${chain}/${index}`. (In rare cases the prefix 0/0 can be different)\n *\n * Since we never use other derivations for utxo address scripts, the classes defined here only\n * allow exactly one level of derivation.\n */\nimport { BIP32Interface } from 'bip32';\n\nimport { Triple } from '../types';\n\nexport type KeyName = 'user' | 'backup' | 'bitgo';\n\nexport function eqPublicKey(a: BIP32Interface, b: BIP32Interface): boolean {\n  return a.publicKey.equals(b.publicKey);\n}\n\n/**\n * Base class for RootWalletKeys and DerivedWalletKeys.\n * Keys can be either public keys or private keys.\n */\nexport class WalletKeys {\n  public readonly publicKeys: Triple<Buffer>;\n\n  /**\n   * @param triple - bip32 key triple\n   */\n  constructor(public readonly triple: Triple<BIP32Interface>) {\n    triple.forEach((a, i) => {\n      triple.forEach((b, j) => {\n        if (eqPublicKey(a, b) && i !== j) {\n          throw new Error(`wallet keys must be distinct`);\n        }\n      });\n    });\n\n    this.publicKeys = this.triple.map((k) => k.publicKey) as Triple<Buffer>;\n  }\n\n  get user(): BIP32Interface {\n    return this.triple[0];\n  }\n\n  get backup(): BIP32Interface {\n    return this.triple[1];\n  }\n\n  get bitgo(): BIP32Interface {\n    return this.triple[2];\n  }\n}\n\n/**\n * Set of WalletKeys derived from RootWalletKeys. Suitable for signing transaction inputs.\n * Contains reference to the RootWalletKeys this was derived from as well as the paths used\n * for derivation.\n */\nexport class DerivedWalletKeys extends WalletKeys {\n  /**\n   * @param parent - wallet keys to derive from\n   * @param paths - paths to derive with\n   */\n  constructor(public parent: RootWalletKeys, public paths: Triple<string>) {\n    super(parent.triple.map((k, i) => k.derivePath(paths[i])) as Triple<BIP32Interface>);\n  }\n}\n\n/**\n * Set of root wallet keys, typically instantiated using the wallet xpub triple.\n */\nexport class RootWalletKeys extends WalletKeys {\n  static readonly defaultPrefix = '0/0';\n\n  /**\n   * @param triple - bip32 key triple\n   * @param derivationPrefixes - Certain v1 wallets or their migrated v2 counterparts\n   *                             can have a nonstandard prefix.\n   */\n  constructor(\n    triple: Triple<BIP32Interface>,\n    public readonly derivationPrefixes: Triple<string> = [\n      RootWalletKeys.defaultPrefix,\n      RootWalletKeys.defaultPrefix,\n      RootWalletKeys.defaultPrefix,\n    ]\n  ) {\n    super(triple);\n\n    derivationPrefixes.forEach((p) => {\n      if (p.startsWith('/') || p.endsWith('/')) {\n        throw new Error(`derivation prefix must not start or end with a slash`);\n      }\n    });\n  }\n\n  /**\n   * @param key\n   * @param chain\n   * @param index\n   * @return full derivation path for key, including key-specific prefix\n   */\n  getDerivationPath(key: BIP32Interface, chain: number, index: number): string {\n    if (!this.derivationPrefixes) {\n      throw new Error(`no derivation prefixes`);\n    }\n    const prefix = this.derivationPrefixes.find((prefix, i) => eqPublicKey(key, this.triple[i]));\n    if (prefix === undefined) {\n      throw new Error(`key not in walletKeys`);\n    }\n    return `${prefix}/${chain}/${index}`;\n  }\n\n  /**\n   * @param chain\n   * @param index\n   * @return walletKeys for a particular address identified by (chain, index)\n   */\n  deriveForChainAndIndex(chain: number, index: number): DerivedWalletKeys {\n    return new DerivedWalletKeys(\n      this,\n      this.triple.map((k) => this.getDerivationPath(k, chain, index)) as Triple<string>\n    );\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c75e859b0142f93c536aa948ecf8a3a413f9942c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2hpnelxlhw=function(){return actualCoverage;};}return actualCoverage;}cov_2hpnelxlhw();cov_2hpnelxlhw().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2hpnelxlhw().s[1]++;exports.RootWalletKeys=exports.DerivedWalletKeys=exports.WalletKeys=void 0;cov_2hpnelxlhw().s[2]++;exports.eqPublicKey=eqPublicKey;function eqPublicKey(a,b){cov_2hpnelxlhw().f[0]++;cov_2hpnelxlhw().s[3]++;return a.publicKey.equals(b.publicKey);}/**
 * Base class for RootWalletKeys and DerivedWalletKeys.
 * Keys can be either public keys or private keys.
 */class WalletKeys{/**
     * @param triple - bip32 key triple
     */constructor(triple){cov_2hpnelxlhw().f[1]++;cov_2hpnelxlhw().s[4]++;this.triple=triple;cov_2hpnelxlhw().s[5]++;triple.forEach((a,i)=>{cov_2hpnelxlhw().f[2]++;cov_2hpnelxlhw().s[6]++;triple.forEach((b,j)=>{cov_2hpnelxlhw().f[3]++;cov_2hpnelxlhw().s[7]++;if((cov_2hpnelxlhw().b[1][0]++,eqPublicKey(a,b))&&(cov_2hpnelxlhw().b[1][1]++,i!==j)){cov_2hpnelxlhw().b[0][0]++;cov_2hpnelxlhw().s[8]++;throw new Error(`wallet keys must be distinct`);}else{cov_2hpnelxlhw().b[0][1]++;}});});cov_2hpnelxlhw().s[9]++;this.publicKeys=this.triple.map(k=>{cov_2hpnelxlhw().f[4]++;cov_2hpnelxlhw().s[10]++;return k.publicKey;});}get user(){cov_2hpnelxlhw().f[5]++;cov_2hpnelxlhw().s[11]++;return this.triple[0];}get backup(){cov_2hpnelxlhw().f[6]++;cov_2hpnelxlhw().s[12]++;return this.triple[1];}get bitgo(){cov_2hpnelxlhw().f[7]++;cov_2hpnelxlhw().s[13]++;return this.triple[2];}}cov_2hpnelxlhw().s[14]++;exports.WalletKeys=WalletKeys;/**
 * Set of WalletKeys derived from RootWalletKeys. Suitable for signing transaction inputs.
 * Contains reference to the RootWalletKeys this was derived from as well as the paths used
 * for derivation.
 */class DerivedWalletKeys extends WalletKeys{/**
     * @param parent - wallet keys to derive from
     * @param paths - paths to derive with
     */constructor(parent,paths){cov_2hpnelxlhw().f[8]++;cov_2hpnelxlhw().s[15]++;super(parent.triple.map((k,i)=>{cov_2hpnelxlhw().f[9]++;cov_2hpnelxlhw().s[16]++;return k.derivePath(paths[i]);}));cov_2hpnelxlhw().s[17]++;this.parent=parent;cov_2hpnelxlhw().s[18]++;this.paths=paths;}}cov_2hpnelxlhw().s[19]++;exports.DerivedWalletKeys=DerivedWalletKeys;/**
 * Set of root wallet keys, typically instantiated using the wallet xpub triple.
 */class RootWalletKeys extends WalletKeys{/**
     * @param triple - bip32 key triple
     * @param derivationPrefixes - Certain v1 wallets or their migrated v2 counterparts
     *                             can have a nonstandard prefix.
     */constructor(triple,derivationPrefixes=(cov_2hpnelxlhw().b[2][0]++,[RootWalletKeys.defaultPrefix,RootWalletKeys.defaultPrefix,RootWalletKeys.defaultPrefix])){cov_2hpnelxlhw().f[10]++;cov_2hpnelxlhw().s[20]++;super(triple);cov_2hpnelxlhw().s[21]++;this.derivationPrefixes=derivationPrefixes;cov_2hpnelxlhw().s[22]++;derivationPrefixes.forEach(p=>{cov_2hpnelxlhw().f[11]++;cov_2hpnelxlhw().s[23]++;if((cov_2hpnelxlhw().b[4][0]++,p.startsWith('/'))||(cov_2hpnelxlhw().b[4][1]++,p.endsWith('/'))){cov_2hpnelxlhw().b[3][0]++;cov_2hpnelxlhw().s[24]++;throw new Error(`derivation prefix must not start or end with a slash`);}else{cov_2hpnelxlhw().b[3][1]++;}});}/**
     * @param key
     * @param chain
     * @param index
     * @return full derivation path for key, including key-specific prefix
     */getDerivationPath(key,chain,index){cov_2hpnelxlhw().f[12]++;cov_2hpnelxlhw().s[25]++;if(!this.derivationPrefixes){cov_2hpnelxlhw().b[5][0]++;cov_2hpnelxlhw().s[26]++;throw new Error(`no derivation prefixes`);}else{cov_2hpnelxlhw().b[5][1]++;}const prefix=(cov_2hpnelxlhw().s[27]++,this.derivationPrefixes.find((prefix,i)=>{cov_2hpnelxlhw().f[13]++;cov_2hpnelxlhw().s[28]++;return eqPublicKey(key,this.triple[i]);}));cov_2hpnelxlhw().s[29]++;if(prefix===undefined){cov_2hpnelxlhw().b[6][0]++;cov_2hpnelxlhw().s[30]++;throw new Error(`key not in walletKeys`);}else{cov_2hpnelxlhw().b[6][1]++;}cov_2hpnelxlhw().s[31]++;return`${prefix}/${chain}/${index}`;}/**
     * @param chain
     * @param index
     * @return walletKeys for a particular address identified by (chain, index)
     */deriveForChainAndIndex(chain,index){cov_2hpnelxlhw().f[14]++;cov_2hpnelxlhw().s[32]++;return new DerivedWalletKeys(this,this.triple.map(k=>{cov_2hpnelxlhw().f[15]++;cov_2hpnelxlhw().s[33]++;return this.getDerivationPath(k,chain,index);}));}}cov_2hpnelxlhw().s[34]++;exports.RootWalletKeys=RootWalletKeys;cov_2hpnelxlhw().s[35]++;RootWalletKeys.defaultPrefix='0/0';//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vd2FsbGV0L1dhbGxldEtleXMudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9xcm9jL0NvZGUvaGFwaS9jaGFpbmRlZnVzZXIvdXR4by1saWIvc3JjL2JpdGdvL3dhbGxldC9XYWxsZXRLZXlzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQWlCQSxrQ0FFQztBQUZELFNBQWdCLFdBQVcsQ0FBQyxDQUFpQixFQUFFLENBQWlCO0lBQzlELE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3pDLENBQUM7QUFFRDs7O0dBR0c7QUFDSCxNQUFhLFVBQVU7SUFHckI7O09BRUc7SUFDSCxZQUE0QixNQUE4QjtRQUE5QixXQUFNLEdBQU4sTUFBTSxDQUF3QjtRQUN4RCxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3RCLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3RCLElBQUksV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7b0JBQ2pDLE1BQU0sSUFBSSxLQUFLLENBQUMsOEJBQThCLENBQUMsQ0FBQztnQkFDbEQsQ0FBQztZQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFtQixDQUFDO0lBQzFFLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDTixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeEIsQ0FBQztJQUVELElBQUksTUFBTTtRQUNSLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4QixDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3hCLENBQUM7Q0FDRjtBQTdCRCxnQ0E2QkM7QUFFRDs7OztHQUlHO0FBQ0gsTUFBYSxpQkFBa0IsU0FBUSxVQUFVO0lBQy9DOzs7T0FHRztJQUNILFlBQW1CLE1BQXNCLEVBQVMsS0FBcUI7UUFDckUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBMkIsQ0FBQyxDQUFDO1FBRHBFLFdBQU0sR0FBTixNQUFNLENBQWdCO1FBQVMsVUFBSyxHQUFMLEtBQUssQ0FBZ0I7SUFFdkUsQ0FBQztDQUNGO0FBUkQsOENBUUM7QUFFRDs7R0FFRztBQUNILE1BQWEsY0FBZSxTQUFRLFVBQVU7SUFHNUM7Ozs7T0FJRztJQUNILFlBQ0UsTUFBOEIsRUFDZCxxQkFBcUM7UUFDbkQsY0FBYyxDQUFDLGFBQWE7UUFDNUIsY0FBYyxDQUFDLGFBQWE7UUFDNUIsY0FBYyxDQUFDLGFBQWE7S0FDN0I7UUFFRCxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7UUFORSx1QkFBa0IsR0FBbEIsa0JBQWtCLENBSWpDO1FBSUQsa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDL0IsSUFBSSxDQUFDLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDekMsTUFBTSxJQUFJLEtBQUssQ0FBQyxzREFBc0QsQ0FBQyxDQUFDO1lBQzFFLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILGlCQUFpQixDQUFDLEdBQW1CLEVBQUUsS0FBYSxFQUFFLEtBQWE7UUFDakUsSUFBSSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQzdCLE1BQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQztRQUM1QyxDQUFDO1FBQ0QsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0YsSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFLENBQUM7WUFDekIsTUFBTSxJQUFJLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1FBQzNDLENBQUM7UUFDRCxPQUFPLEdBQUcsTUFBTSxJQUFJLEtBQUssSUFBSSxLQUFLLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILHNCQUFzQixDQUFDLEtBQWEsRUFBRSxLQUFhO1FBQ2pELE9BQU8sSUFBSSxpQkFBaUIsQ0FDMUIsSUFBSSxFQUNKLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBbUIsQ0FDbEYsQ0FBQztJQUNKLENBQUM7O0FBcERILHdDQXFEQztBQXBEaUIsNEJBQWEsR0FBRyxLQUFLLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENsYXNzZXMgZm9yIGRlcml2aW5nIGtleSB0cmlwbGVzIGZvciB3YWxsZXQgYWRkcmVzc2VzLlxuICpcbiAqIEJ5IGRlZmF1bHQsIEJpdEdvIHdhbGxldHMgY29uc2lzdCBvZiBhIHRyaXBsZSBvZiBiaXAzMiBleHRlbmQga2V5cGFpcnMuXG4gKiBFdmVyeSB3YWxsZXQgYWRkcmVzcyBjYW4gYmUgaWRlbnRpZmllZCBieSBfKGNoYWluOiBudW1iZXIsIGluZGV4OiBudW1iZXIpXy5cbiAqIFRoZSBrZXkgc2V0IGZvciBhIHBhcnRpY3VsYXIgYWRkcmVzcyBjYW4gYmUgb2J0YWluZWQgYnkgZGVyaXZpbmcgd2l0aCB0aGUgcGF0aFxuICogYDAvMC8ke2NoYWlufS8ke2luZGV4fWAuIChJbiByYXJlIGNhc2VzIHRoZSBwcmVmaXggMC8wIGNhbiBiZSBkaWZmZXJlbnQpXG4gKlxuICogU2luY2Ugd2UgbmV2ZXIgdXNlIG90aGVyIGRlcml2YXRpb25zIGZvciB1dHhvIGFkZHJlc3Mgc2NyaXB0cywgdGhlIGNsYXNzZXMgZGVmaW5lZCBoZXJlIG9ubHlcbiAqIGFsbG93IGV4YWN0bHkgb25lIGxldmVsIG9mIGRlcml2YXRpb24uXG4gKi9cbmltcG9ydCB7IEJJUDMySW50ZXJmYWNlIH0gZnJvbSAnYmlwMzInO1xuXG5pbXBvcnQgeyBUcmlwbGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCB0eXBlIEtleU5hbWUgPSAndXNlcicgfCAnYmFja3VwJyB8ICdiaXRnbyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBlcVB1YmxpY0tleShhOiBCSVAzMkludGVyZmFjZSwgYjogQklQMzJJbnRlcmZhY2UpOiBib29sZWFuIHtcbiAgcmV0dXJuIGEucHVibGljS2V5LmVxdWFscyhiLnB1YmxpY0tleSk7XG59XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgUm9vdFdhbGxldEtleXMgYW5kIERlcml2ZWRXYWxsZXRLZXlzLlxuICogS2V5cyBjYW4gYmUgZWl0aGVyIHB1YmxpYyBrZXlzIG9yIHByaXZhdGUga2V5cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFdhbGxldEtleXMge1xuICBwdWJsaWMgcmVhZG9ubHkgcHVibGljS2V5czogVHJpcGxlPEJ1ZmZlcj47XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB0cmlwbGUgLSBiaXAzMiBrZXkgdHJpcGxlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgdHJpcGxlOiBUcmlwbGU8QklQMzJJbnRlcmZhY2U+KSB7XG4gICAgdHJpcGxlLmZvckVhY2goKGEsIGkpID0+IHtcbiAgICAgIHRyaXBsZS5mb3JFYWNoKChiLCBqKSA9PiB7XG4gICAgICAgIGlmIChlcVB1YmxpY0tleShhLCBiKSAmJiBpICE9PSBqKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB3YWxsZXQga2V5cyBtdXN0IGJlIGRpc3RpbmN0YCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5wdWJsaWNLZXlzID0gdGhpcy50cmlwbGUubWFwKChrKSA9PiBrLnB1YmxpY0tleSkgYXMgVHJpcGxlPEJ1ZmZlcj47XG4gIH1cblxuICBnZXQgdXNlcigpOiBCSVAzMkludGVyZmFjZSB7XG4gICAgcmV0dXJuIHRoaXMudHJpcGxlWzBdO1xuICB9XG5cbiAgZ2V0IGJhY2t1cCgpOiBCSVAzMkludGVyZmFjZSB7XG4gICAgcmV0dXJuIHRoaXMudHJpcGxlWzFdO1xuICB9XG5cbiAgZ2V0IGJpdGdvKCk6IEJJUDMySW50ZXJmYWNlIHtcbiAgICByZXR1cm4gdGhpcy50cmlwbGVbMl07XG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgb2YgV2FsbGV0S2V5cyBkZXJpdmVkIGZyb20gUm9vdFdhbGxldEtleXMuIFN1aXRhYmxlIGZvciBzaWduaW5nIHRyYW5zYWN0aW9uIGlucHV0cy5cbiAqIENvbnRhaW5zIHJlZmVyZW5jZSB0byB0aGUgUm9vdFdhbGxldEtleXMgdGhpcyB3YXMgZGVyaXZlZCBmcm9tIGFzIHdlbGwgYXMgdGhlIHBhdGhzIHVzZWRcbiAqIGZvciBkZXJpdmF0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgRGVyaXZlZFdhbGxldEtleXMgZXh0ZW5kcyBXYWxsZXRLZXlzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSBwYXJlbnQgLSB3YWxsZXQga2V5cyB0byBkZXJpdmUgZnJvbVxuICAgKiBAcGFyYW0gcGF0aHMgLSBwYXRocyB0byBkZXJpdmUgd2l0aFxuICAgKi9cbiAgY29uc3RydWN0b3IocHVibGljIHBhcmVudDogUm9vdFdhbGxldEtleXMsIHB1YmxpYyBwYXRoczogVHJpcGxlPHN0cmluZz4pIHtcbiAgICBzdXBlcihwYXJlbnQudHJpcGxlLm1hcCgoaywgaSkgPT4gay5kZXJpdmVQYXRoKHBhdGhzW2ldKSkgYXMgVHJpcGxlPEJJUDMySW50ZXJmYWNlPik7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgb2Ygcm9vdCB3YWxsZXQga2V5cywgdHlwaWNhbGx5IGluc3RhbnRpYXRlZCB1c2luZyB0aGUgd2FsbGV0IHhwdWIgdHJpcGxlLlxuICovXG5leHBvcnQgY2xhc3MgUm9vdFdhbGxldEtleXMgZXh0ZW5kcyBXYWxsZXRLZXlzIHtcbiAgc3RhdGljIHJlYWRvbmx5IGRlZmF1bHRQcmVmaXggPSAnMC8wJztcblxuICAvKipcbiAgICogQHBhcmFtIHRyaXBsZSAtIGJpcDMyIGtleSB0cmlwbGVcbiAgICogQHBhcmFtIGRlcml2YXRpb25QcmVmaXhlcyAtIENlcnRhaW4gdjEgd2FsbGV0cyBvciB0aGVpciBtaWdyYXRlZCB2MiBjb3VudGVycGFydHNcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbiBoYXZlIGEgbm9uc3RhbmRhcmQgcHJlZml4LlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgdHJpcGxlOiBUcmlwbGU8QklQMzJJbnRlcmZhY2U+LFxuICAgIHB1YmxpYyByZWFkb25seSBkZXJpdmF0aW9uUHJlZml4ZXM6IFRyaXBsZTxzdHJpbmc+ID0gW1xuICAgICAgUm9vdFdhbGxldEtleXMuZGVmYXVsdFByZWZpeCxcbiAgICAgIFJvb3RXYWxsZXRLZXlzLmRlZmF1bHRQcmVmaXgsXG4gICAgICBSb290V2FsbGV0S2V5cy5kZWZhdWx0UHJlZml4LFxuICAgIF1cbiAgKSB7XG4gICAgc3VwZXIodHJpcGxlKTtcblxuICAgIGRlcml2YXRpb25QcmVmaXhlcy5mb3JFYWNoKChwKSA9PiB7XG4gICAgICBpZiAocC5zdGFydHNXaXRoKCcvJykgfHwgcC5lbmRzV2l0aCgnLycpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZGVyaXZhdGlvbiBwcmVmaXggbXVzdCBub3Qgc3RhcnQgb3IgZW5kIHdpdGggYSBzbGFzaGApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHBhcmFtIGNoYWluXG4gICAqIEBwYXJhbSBpbmRleFxuICAgKiBAcmV0dXJuIGZ1bGwgZGVyaXZhdGlvbiBwYXRoIGZvciBrZXksIGluY2x1ZGluZyBrZXktc3BlY2lmaWMgcHJlZml4XG4gICAqL1xuICBnZXREZXJpdmF0aW9uUGF0aChrZXk6IEJJUDMySW50ZXJmYWNlLCBjaGFpbjogbnVtYmVyLCBpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMuZGVyaXZhdGlvblByZWZpeGVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYG5vIGRlcml2YXRpb24gcHJlZml4ZXNgKTtcbiAgICB9XG4gICAgY29uc3QgcHJlZml4ID0gdGhpcy5kZXJpdmF0aW9uUHJlZml4ZXMuZmluZCgocHJlZml4LCBpKSA9PiBlcVB1YmxpY0tleShrZXksIHRoaXMudHJpcGxlW2ldKSk7XG4gICAgaWYgKHByZWZpeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGtleSBub3QgaW4gd2FsbGV0S2V5c2ApO1xuICAgIH1cbiAgICByZXR1cm4gYCR7cHJlZml4fS8ke2NoYWlufS8ke2luZGV4fWA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIGNoYWluXG4gICAqIEBwYXJhbSBpbmRleFxuICAgKiBAcmV0dXJuIHdhbGxldEtleXMgZm9yIGEgcGFydGljdWxhciBhZGRyZXNzIGlkZW50aWZpZWQgYnkgKGNoYWluLCBpbmRleClcbiAgICovXG4gIGRlcml2ZUZvckNoYWluQW5kSW5kZXgoY2hhaW46IG51bWJlciwgaW5kZXg6IG51bWJlcik6IERlcml2ZWRXYWxsZXRLZXlzIHtcbiAgICByZXR1cm4gbmV3IERlcml2ZWRXYWxsZXRLZXlzKFxuICAgICAgdGhpcyxcbiAgICAgIHRoaXMudHJpcGxlLm1hcCgoaykgPT4gdGhpcy5nZXREZXJpdmF0aW9uUGF0aChrLCBjaGFpbiwgaW5kZXgpKSBhcyBUcmlwbGU8c3RyaW5nPlxuICAgICk7XG4gIH1cbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmhwbmVseGxodyIsImFjdHVhbENvdmVyYWdlIiwicyIsImV4cG9ydHMiLCJlcVB1YmxpY0tleSIsImEiLCJiIiwiZiIsInB1YmxpY0tleSIsImVxdWFscyIsIldhbGxldEtleXMiLCJjb25zdHJ1Y3RvciIsInRyaXBsZSIsImZvckVhY2giLCJpIiwiaiIsIkVycm9yIiwicHVibGljS2V5cyIsIm1hcCIsImsiLCJ1c2VyIiwiYmFja3VwIiwiYml0Z28iLCJEZXJpdmVkV2FsbGV0S2V5cyIsInBhcmVudCIsInBhdGhzIiwiZGVyaXZlUGF0aCIsIlJvb3RXYWxsZXRLZXlzIiwiZGVyaXZhdGlvblByZWZpeGVzIiwiZGVmYXVsdFByZWZpeCIsInAiLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJnZXREZXJpdmF0aW9uUGF0aCIsImtleSIsImNoYWluIiwiaW5kZXgiLCJwcmVmaXgiLCJmaW5kIiwidW5kZWZpbmVkIiwiZGVyaXZlRm9yQ2hhaW5BbmRJbmRleCJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9xcm9jL0NvZGUvaGFwaS9jaGFpbmRlZnVzZXIvdXR4by1saWIvc3JjL2JpdGdvL3dhbGxldC9XYWxsZXRLZXlzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2xhc3NlcyBmb3IgZGVyaXZpbmcga2V5IHRyaXBsZXMgZm9yIHdhbGxldCBhZGRyZXNzZXMuXG4gKlxuICogQnkgZGVmYXVsdCwgQml0R28gd2FsbGV0cyBjb25zaXN0IG9mIGEgdHJpcGxlIG9mIGJpcDMyIGV4dGVuZCBrZXlwYWlycy5cbiAqIEV2ZXJ5IHdhbGxldCBhZGRyZXNzIGNhbiBiZSBpZGVudGlmaWVkIGJ5IF8oY2hhaW46IG51bWJlciwgaW5kZXg6IG51bWJlcilfLlxuICogVGhlIGtleSBzZXQgZm9yIGEgcGFydGljdWxhciBhZGRyZXNzIGNhbiBiZSBvYnRhaW5lZCBieSBkZXJpdmluZyB3aXRoIHRoZSBwYXRoXG4gKiBgMC8wLyR7Y2hhaW59LyR7aW5kZXh9YC4gKEluIHJhcmUgY2FzZXMgdGhlIHByZWZpeCAwLzAgY2FuIGJlIGRpZmZlcmVudClcbiAqXG4gKiBTaW5jZSB3ZSBuZXZlciB1c2Ugb3RoZXIgZGVyaXZhdGlvbnMgZm9yIHV0eG8gYWRkcmVzcyBzY3JpcHRzLCB0aGUgY2xhc3NlcyBkZWZpbmVkIGhlcmUgb25seVxuICogYWxsb3cgZXhhY3RseSBvbmUgbGV2ZWwgb2YgZGVyaXZhdGlvbi5cbiAqL1xuaW1wb3J0IHsgQklQMzJJbnRlcmZhY2UgfSBmcm9tICdiaXAzMic7XG5cbmltcG9ydCB7IFRyaXBsZSB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IHR5cGUgS2V5TmFtZSA9ICd1c2VyJyB8ICdiYWNrdXAnIHwgJ2JpdGdvJztcblxuZXhwb3J0IGZ1bmN0aW9uIGVxUHVibGljS2V5KGE6IEJJUDMySW50ZXJmYWNlLCBiOiBCSVAzMkludGVyZmFjZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gYS5wdWJsaWNLZXkuZXF1YWxzKGIucHVibGljS2V5KTtcbn1cblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBSb290V2FsbGV0S2V5cyBhbmQgRGVyaXZlZFdhbGxldEtleXMuXG4gKiBLZXlzIGNhbiBiZSBlaXRoZXIgcHVibGljIGtleXMgb3IgcHJpdmF0ZSBrZXlzLlxuICovXG5leHBvcnQgY2xhc3MgV2FsbGV0S2V5cyB7XG4gIHB1YmxpYyByZWFkb25seSBwdWJsaWNLZXlzOiBUcmlwbGU8QnVmZmVyPjtcblxuICAvKipcbiAgICogQHBhcmFtIHRyaXBsZSAtIGJpcDMyIGtleSB0cmlwbGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSB0cmlwbGU6IFRyaXBsZTxCSVAzMkludGVyZmFjZT4pIHtcbiAgICB0cmlwbGUuZm9yRWFjaCgoYSwgaSkgPT4ge1xuICAgICAgdHJpcGxlLmZvckVhY2goKGIsIGopID0+IHtcbiAgICAgICAgaWYgKGVxUHVibGljS2V5KGEsIGIpICYmIGkgIT09IGopIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHdhbGxldCBrZXlzIG11c3QgYmUgZGlzdGluY3RgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnB1YmxpY0tleXMgPSB0aGlzLnRyaXBsZS5tYXAoKGspID0+IGsucHVibGljS2V5KSBhcyBUcmlwbGU8QnVmZmVyPjtcbiAgfVxuXG4gIGdldCB1c2VyKCk6IEJJUDMySW50ZXJmYWNlIHtcbiAgICByZXR1cm4gdGhpcy50cmlwbGVbMF07XG4gIH1cblxuICBnZXQgYmFja3VwKCk6IEJJUDMySW50ZXJmYWNlIHtcbiAgICByZXR1cm4gdGhpcy50cmlwbGVbMV07XG4gIH1cblxuICBnZXQgYml0Z28oKTogQklQMzJJbnRlcmZhY2Uge1xuICAgIHJldHVybiB0aGlzLnRyaXBsZVsyXTtcbiAgfVxufVxuXG4vKipcbiAqIFNldCBvZiBXYWxsZXRLZXlzIGRlcml2ZWQgZnJvbSBSb290V2FsbGV0S2V5cy4gU3VpdGFibGUgZm9yIHNpZ25pbmcgdHJhbnNhY3Rpb24gaW5wdXRzLlxuICogQ29udGFpbnMgcmVmZXJlbmNlIHRvIHRoZSBSb290V2FsbGV0S2V5cyB0aGlzIHdhcyBkZXJpdmVkIGZyb20gYXMgd2VsbCBhcyB0aGUgcGF0aHMgdXNlZFxuICogZm9yIGRlcml2YXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBEZXJpdmVkV2FsbGV0S2V5cyBleHRlbmRzIFdhbGxldEtleXMge1xuICAvKipcbiAgICogQHBhcmFtIHBhcmVudCAtIHdhbGxldCBrZXlzIHRvIGRlcml2ZSBmcm9tXG4gICAqIEBwYXJhbSBwYXRocyAtIHBhdGhzIHRvIGRlcml2ZSB3aXRoXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcGFyZW50OiBSb290V2FsbGV0S2V5cywgcHVibGljIHBhdGhzOiBUcmlwbGU8c3RyaW5nPikge1xuICAgIHN1cGVyKHBhcmVudC50cmlwbGUubWFwKChrLCBpKSA9PiBrLmRlcml2ZVBhdGgocGF0aHNbaV0pKSBhcyBUcmlwbGU8QklQMzJJbnRlcmZhY2U+KTtcbiAgfVxufVxuXG4vKipcbiAqIFNldCBvZiByb290IHdhbGxldCBrZXlzLCB0eXBpY2FsbHkgaW5zdGFudGlhdGVkIHVzaW5nIHRoZSB3YWxsZXQgeHB1YiB0cmlwbGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSb290V2FsbGV0S2V5cyBleHRlbmRzIFdhbGxldEtleXMge1xuICBzdGF0aWMgcmVhZG9ubHkgZGVmYXVsdFByZWZpeCA9ICcwLzAnO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gdHJpcGxlIC0gYmlwMzIga2V5IHRyaXBsZVxuICAgKiBAcGFyYW0gZGVyaXZhdGlvblByZWZpeGVzIC0gQ2VydGFpbiB2MSB3YWxsZXRzIG9yIHRoZWlyIG1pZ3JhdGVkIHYyIGNvdW50ZXJwYXJ0c1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuIGhhdmUgYSBub25zdGFuZGFyZCBwcmVmaXguXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICB0cmlwbGU6IFRyaXBsZTxCSVAzMkludGVyZmFjZT4sXG4gICAgcHVibGljIHJlYWRvbmx5IGRlcml2YXRpb25QcmVmaXhlczogVHJpcGxlPHN0cmluZz4gPSBbXG4gICAgICBSb290V2FsbGV0S2V5cy5kZWZhdWx0UHJlZml4LFxuICAgICAgUm9vdFdhbGxldEtleXMuZGVmYXVsdFByZWZpeCxcbiAgICAgIFJvb3RXYWxsZXRLZXlzLmRlZmF1bHRQcmVmaXgsXG4gICAgXVxuICApIHtcbiAgICBzdXBlcih0cmlwbGUpO1xuXG4gICAgZGVyaXZhdGlvblByZWZpeGVzLmZvckVhY2goKHApID0+IHtcbiAgICAgIGlmIChwLnN0YXJ0c1dpdGgoJy8nKSB8fCBwLmVuZHNXaXRoKCcvJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBkZXJpdmF0aW9uIHByZWZpeCBtdXN0IG5vdCBzdGFydCBvciBlbmQgd2l0aCBhIHNsYXNoYCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIGtleVxuICAgKiBAcGFyYW0gY2hhaW5cbiAgICogQHBhcmFtIGluZGV4XG4gICAqIEByZXR1cm4gZnVsbCBkZXJpdmF0aW9uIHBhdGggZm9yIGtleSwgaW5jbHVkaW5nIGtleS1zcGVjaWZpYyBwcmVmaXhcbiAgICovXG4gIGdldERlcml2YXRpb25QYXRoKGtleTogQklQMzJJbnRlcmZhY2UsIGNoYWluOiBudW1iZXIsIGluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy5kZXJpdmF0aW9uUHJlZml4ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgbm8gZGVyaXZhdGlvbiBwcmVmaXhlc2ApO1xuICAgIH1cbiAgICBjb25zdCBwcmVmaXggPSB0aGlzLmRlcml2YXRpb25QcmVmaXhlcy5maW5kKChwcmVmaXgsIGkpID0+IGVxUHVibGljS2V5KGtleSwgdGhpcy50cmlwbGVbaV0pKTtcbiAgICBpZiAocHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihga2V5IG5vdCBpbiB3YWxsZXRLZXlzYCk7XG4gICAgfVxuICAgIHJldHVybiBgJHtwcmVmaXh9LyR7Y2hhaW59LyR7aW5kZXh9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gY2hhaW5cbiAgICogQHBhcmFtIGluZGV4XG4gICAqIEByZXR1cm4gd2FsbGV0S2V5cyBmb3IgYSBwYXJ0aWN1bGFyIGFkZHJlc3MgaWRlbnRpZmllZCBieSAoY2hhaW4sIGluZGV4KVxuICAgKi9cbiAgZGVyaXZlRm9yQ2hhaW5BbmRJbmRleChjaGFpbjogbnVtYmVyLCBpbmRleDogbnVtYmVyKTogRGVyaXZlZFdhbGxldEtleXMge1xuICAgIHJldHVybiBuZXcgRGVyaXZlZFdhbGxldEtleXMoXG4gICAgICB0aGlzLFxuICAgICAgdGhpcy50cmlwbGUubWFwKChrKSA9PiB0aGlzLmdldERlcml2YXRpb25QYXRoKGssIGNoYWluLCBpbmRleCkpIGFzIFRyaXBsZTxzdHJpbmc+XG4gICAgKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoi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