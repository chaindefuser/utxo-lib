{"version":3,"file":"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/address.ts","sources":["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/address.ts"],"names":[],"mappings":";;;;AAOA,4CAeC;AAED,wCAKC;AAED,sCAKC;AAED,0CAKC;AA3CD,2CAA2C;AAG3C,2DAA2D;AAC3D,yCAA8D;AAC9D,mCAAuC;AAEvC,SAAgB,gBAAgB,CAAC,YAAoB,EAAE,OAAgB;IACrE,IAAI,IAAA,yBAAc,EAAC,OAAO,CAAC,IAAI,IAAA,kBAAO,EAAC,OAAO,CAAC,EAAE,CAAC;QAChD,OAAO,YAAY,CAAC,gBAAgB,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;IAC9D,CAAC;IAED,mHAAmH;IACnH,iHAAiH;IACjH,qCAAqC;IACrC,IAAI,CAAC;QACH,OAAO,oBAAY,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,YAAY,EAAE,OAAO,EAAE,CAAC,CAAC,OAAiB,CAAC;IAChF,CAAC;IAAC,OAAO,CAAC,EAAE,CAAC;QACX,iCAAiC;IACnC,CAAC;IAED,OAAO,SAAS,CAAC,OAAO,CAAC,gBAAgB,CAAC,YAAY,EAAE,OAA4B,CAAC,CAAC;AACxF,CAAC;AAED,SAAgB,cAAc,CAAC,OAAe,EAAE,OAAgB;IAC9D,IAAI,IAAA,yBAAc,EAAC,OAAO,CAAC,IAAI,IAAA,kBAAO,EAAC,OAAO,CAAC,EAAE,CAAC;QAChD,OAAO,YAAY,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IACvD,CAAC;IACD,OAAO,SAAS,CAAC,OAAO,CAAC,cAAc,CAAC,OAAO,EAAE,OAA4B,CAAC,CAAC;AACjF,CAAC;AAED,SAAgB,aAAa,CAAC,IAAY,EAAE,OAAe,EAAE,OAAgB;IAC3E,IAAI,IAAA,yBAAc,EAAC,OAAO,CAAC,IAAI,IAAA,kBAAO,EAAC,OAAO,CAAC,EAAE,CAAC;QAChD,OAAO,YAAY,CAAC,aAAa,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IACnD,CAAC;IACD,OAAO,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;AACxD,CAAC;AAED,SAAgB,eAAe,CAAC,OAAe,EAAE,OAAgB;IAC/D,IAAI,IAAA,yBAAc,EAAC,OAAO,CAAC,IAAI,IAAA,kBAAO,EAAC,OAAO,CAAC,EAAE,CAAC;QAChD,OAAO,YAAY,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;IAC/C,CAAC;IACD,OAAO,SAAS,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;AACpD,CAAC;AAEY,KAA2B,SAAS,CAAC,OAAO,EAA1C,kBAAU,kBAAE,gBAAQ,eAAuB","sourcesContent":["import * as bitcoinjs from 'bitcoinjs-lib';\nimport { Base58CheckResult, Bech32Result } from 'bitcoinjs-lib/src/address';\n\nimport * as zcashAddress from '../src/bitgo/zcash/address';\nimport { isValidNetwork, isZcash, Network } from './networks';\nimport { p2trPayments } from './index';\n\nexport function fromOutputScript(outputScript: Buffer, network: Network): string {\n  if (isValidNetwork(network) && isZcash(network)) {\n    return zcashAddress.fromOutputScript(outputScript, network);\n  }\n\n  // We added p2tr payments from our forked bitcoinjs-lib to utxo-lib instead. Our bitcoinjs fork will no longer have\n  // p2tr support so utxo-lib should take care of retrieving a p2tr address from outputScript and bitcoinjs-lib can\n  // handle the other type of payments.\n  try {\n    return p2trPayments.p2tr({ output: outputScript, network }).address as string;\n  } catch (e) {\n    // noop. try the bitcoinjs method\n  }\n\n  return bitcoinjs.address.fromOutputScript(outputScript, network as bitcoinjs.Network);\n}\n\nexport function toOutputScript(address: string, network: Network): Buffer {\n  if (isValidNetwork(network) && isZcash(network)) {\n    return zcashAddress.toOutputScript(address, network);\n  }\n  return bitcoinjs.address.toOutputScript(address, network as bitcoinjs.Network);\n}\n\nexport function toBase58Check(hash: Buffer, version: number, network: Network): string {\n  if (isValidNetwork(network) && isZcash(network)) {\n    return zcashAddress.toBase58Check(hash, version);\n  }\n  return bitcoinjs.address.toBase58Check(hash, version);\n}\n\nexport function fromBase58Check(address: string, network: Network): Base58CheckResult {\n  if (isValidNetwork(network) && isZcash(network)) {\n    return zcashAddress.fromBase58Check(address);\n  }\n  return bitcoinjs.address.fromBase58Check(address);\n}\n\nexport const { fromBech32, toBech32 } = bitcoinjs.address;\n\nexport { Base58CheckResult, Bech32Result };\n"]}