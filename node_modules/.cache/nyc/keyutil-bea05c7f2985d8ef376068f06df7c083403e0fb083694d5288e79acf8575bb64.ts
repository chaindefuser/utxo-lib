"use strict";function cov_2lohry79fw(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/keyutil.ts";var hash="37010674dd68785f33fa0b83472e26aae22e6873";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/keyutil.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:60}},"2":{start:{line:4,column:0},end:{line:4,column:64}},"3":{start:{line:5,column:0},end:{line:5,column:62}},"4":{start:{line:6,column:18},end:{line:6,column:38}},"5":{start:{line:7,column:20},end:{line:7,column:43}},"6":{start:{line:15,column:4},end:{line:17,column:5}},"7":{start:{line:16,column:8},end:{line:16,column:54}},"8":{start:{line:18,column:4},end:{line:18,column:53}},"9":{start:{line:26,column:4},end:{line:28,column:5}},"10":{start:{line:27,column:8},end:{line:27,column:55}},"11":{start:{line:29,column:20},end:{line:29,column:37}},"12":{start:{line:30,column:4},end:{line:32,column:5}},"13":{start:{line:31,column:8},end:{line:31,column:51}},"14":{start:{line:33,column:4},end:{line:35,column:5}},"15":{start:{line:34,column:8},end:{line:34,column:53}},"16":{start:{line:36,column:4},end:{line:36,column:19}},"17":{start:{line:47,column:4},end:{line:49,column:5}},"18":{start:{line:48,column:8},end:{line:48,column:27}},"19":{start:{line:50,column:24},end:{line:50,column:53}},"20":{start:{line:51,column:19},end:{line:51,column:73}},"21":{start:{line:52,column:31},end:{line:52,column:109}},"22":{start:{line:53,column:26},end:{line:53,column:41}},"23":{start:{line:54,column:4},end:{line:54,column:55}},"24":{start:{line:55,column:4},end:{line:55,column:45}},"25":{start:{line:56,column:4},end:{line:56,column:41}}},fnMap:{"0":{name:"privateKeyBufferToECPair",decl:{start:{line:14,column:9},end:{line:14,column:33}},loc:{start:{line:14,column:51},end:{line:19,column:1}},line:14},"1":{name:"privateKeyBufferFromECPair",decl:{start:{line:25,column:9},end:{line:25,column:35}},loc:{start:{line:25,column:44},end:{line:37,column:1}},line:25},"2":{name:"convertExtendedKeyNetwork",decl:{start:{line:46,column:9},end:{line:46,column:34}},loc:{start:{line:46,column:76},end:{line:57,column:1}},line:46}},branchMap:{"0":{loc:{start:{line:15,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:17,column:5}},{start:{line:15,column:4},end:{line:17,column:5}}],line:15},"1":{loc:{start:{line:15,column:8},end:{line:15,column:56}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:32}},{start:{line:15,column:36},end:{line:15,column:56}}],line:15},"2":{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:26,column:4},end:{line:28,column:5}}],line:26},"3":{loc:{start:{line:30,column:4},end:{line:32,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:32,column:5}},{start:{line:30,column:4},end:{line:32,column:5}}],line:30},"4":{loc:{start:{line:33,column:4},end:{line:35,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:35,column:5}},{start:{line:33,column:4},end:{line:35,column:5}}],line:33},"5":{loc:{start:{line:47,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:49,column:5}},{start:{line:47,column:4},end:{line:49,column:5}}],line:47},"6":{loc:{start:{line:52,column:31},end:{line:52,column:109}},type:"cond-expr",locations:[{start:{line:52,column:53},end:{line:52,column:79}},{start:{line:52,column:82},end:{line:52,column:109}}],line:52}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/keyutil.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/keyutil.ts"],names:[],mappings:";;AAWA,4DAMC;AAOD,gEAcC;AAUD,8DAWC;AA1DD,uCAAuC;AAEvC,4CAA6C;AAE7C;;;;;GAKG;AACH,SAAgB,wBAAwB,CAAC,MAAc,EAAE,OAAiB;IACxE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,KAAK,EAAE,EAAE,CAAC;QACrD,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAChD,CAAC;IAED,OAAO,kBAAM,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;AACvC,CAAC;AAED;;;;GAIG;AACH,SAAgB,0BAA0B,CAAC,MAAuB;IAChE,IAAI,MAAM,CAAC,WAAW,CAAC,IAAI,KAAK,QAAQ,EAAE,CAAC;QACzC,MAAM,IAAI,SAAS,CAAC,yBAAyB,CAAC,CAAC;IACjD,CAAC;IAED,MAAM,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC;IAClC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC;QAC9B,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC7C,CAAC;IACD,IAAI,OAAO,CAAC,MAAM,KAAK,EAAE,EAAE,CAAC;QAC1B,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;IAC/C,CAAC;IAED,OAAO,OAAO,CAAC;AACjB,CAAC;AAED;;;;;;;GAOG;AACH,SAAgB,yBAAyB,CAAC,WAAmB,EAAE,WAAoB,EAAE,aAAsB;IACzG,IAAI,WAAW,KAAK,aAAa,EAAE,CAAC;QAClC,OAAO,WAAW,CAAC;IACrB,CAAC;IACD,MAAM,WAAW,GAAG,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;IAClD,MAAM,MAAM,GAAG,iBAAK,CAAC,UAAU,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;IAC1D,MAAM,kBAAkB,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,CAAC;IAC1G,MAAM,aAAa,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACtC,aAAa,CAAC,aAAa,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IACnD,aAAa,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACzC,OAAO,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;AACvC,CAAC",sourcesContent:["import { ECPairInterface } from 'ecpair';\nimport * as bs58check from 'bs58check';\nimport { Network } from '../networks';\nimport { bip32, ECPair } from '../noble_ecc';\n\n/**\n * Create an ECPair from the raw private key bytes\n * @param {Buffer} buffer - Private key for the ECPair. Must be exactly 32 bytes.\n * @param {Object} [network] - Network for the ECPair. Defaults to bitcoin.\n * @return {ECPair}\n */\nexport function privateKeyBufferToECPair(buffer: Buffer, network?: Network): ECPairInterface {\n  if (!Buffer.isBuffer(buffer) || buffer.length !== 32) {\n    throw new Error('invalid private key buffer');\n  }\n\n  return ECPair.fromPrivateKey(buffer);\n}\n\n/**\n * Get the private key as a 32 bytes buffer. If it is smaller than 32 bytes, pad it with zeros\n * @param {ECPair} ecPair\n * @return Buffer 32 bytes\n */\nexport function privateKeyBufferFromECPair(ecPair: ECPairInterface): Buffer {\n  if (ecPair.constructor.name !== 'ECPair') {\n    throw new TypeError(`invalid argument ecpair`);\n  }\n\n  const privkey = ecPair.privateKey;\n  if (!Buffer.isBuffer(privkey)) {\n    throw new Error(`unexpected privkey type`);\n  }\n  if (privkey.length !== 32) {\n    throw new Error(`unexpected privkey length`);\n  }\n\n  return privkey;\n}\n\n/**\n * Converts an extended key from one network to another by updating its version bytes.\n *\n * Handles both public and private keys, allowing conversion between networks like\n * Bitcoin Mainnet and Testnet.\n *\n * @returns The extended key with the updated network version.\n */\nexport function convertExtendedKeyNetwork(extendedKey: string, fromNetwork: Network, targetNetwork: Network): string {\n  if (fromNetwork === targetNetwork) {\n    return extendedKey;\n  }\n  const decodedData = bs58check.decode(extendedKey);\n  const hdNode = bip32.fromBase58(extendedKey, fromNetwork);\n  const targetVersionBytes = hdNode.isNeutered() ? targetNetwork.bip32.public : targetNetwork.bip32.private;\n  const versionBuffer = Buffer.alloc(4);\n  versionBuffer.writeUInt32BE(targetVersionBytes, 0);\n  versionBuffer.copy(decodedData, 0, 0, 4);\n  return bs58check.encode(decodedData);\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37010674dd68785f33fa0b83472e26aae22e6873"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2lohry79fw=function(){return actualCoverage;};}return actualCoverage;}cov_2lohry79fw();cov_2lohry79fw().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2lohry79fw().s[1]++;exports.privateKeyBufferToECPair=privateKeyBufferToECPair;cov_2lohry79fw().s[2]++;exports.privateKeyBufferFromECPair=privateKeyBufferFromECPair;cov_2lohry79fw().s[3]++;exports.convertExtendedKeyNetwork=convertExtendedKeyNetwork;const bs58check=(cov_2lohry79fw().s[4]++,require("bs58check"));const noble_ecc_1=(cov_2lohry79fw().s[5]++,require("../noble_ecc"));/**
 * Create an ECPair from the raw private key bytes
 * @param {Buffer} buffer - Private key for the ECPair. Must be exactly 32 bytes.
 * @param {Object} [network] - Network for the ECPair. Defaults to bitcoin.
 * @return {ECPair}
 */function privateKeyBufferToECPair(buffer,network){cov_2lohry79fw().f[0]++;cov_2lohry79fw().s[6]++;if((cov_2lohry79fw().b[1][0]++,!Buffer.isBuffer(buffer))||(cov_2lohry79fw().b[1][1]++,buffer.length!==32)){cov_2lohry79fw().b[0][0]++;cov_2lohry79fw().s[7]++;throw new Error('invalid private key buffer');}else{cov_2lohry79fw().b[0][1]++;}cov_2lohry79fw().s[8]++;return noble_ecc_1.ECPair.fromPrivateKey(buffer);}/**
 * Get the private key as a 32 bytes buffer. If it is smaller than 32 bytes, pad it with zeros
 * @param {ECPair} ecPair
 * @return Buffer 32 bytes
 */function privateKeyBufferFromECPair(ecPair){cov_2lohry79fw().f[1]++;cov_2lohry79fw().s[9]++;if(ecPair.constructor.name!=='ECPair'){cov_2lohry79fw().b[2][0]++;cov_2lohry79fw().s[10]++;throw new TypeError(`invalid argument ecpair`);}else{cov_2lohry79fw().b[2][1]++;}const privkey=(cov_2lohry79fw().s[11]++,ecPair.privateKey);cov_2lohry79fw().s[12]++;if(!Buffer.isBuffer(privkey)){cov_2lohry79fw().b[3][0]++;cov_2lohry79fw().s[13]++;throw new Error(`unexpected privkey type`);}else{cov_2lohry79fw().b[3][1]++;}cov_2lohry79fw().s[14]++;if(privkey.length!==32){cov_2lohry79fw().b[4][0]++;cov_2lohry79fw().s[15]++;throw new Error(`unexpected privkey length`);}else{cov_2lohry79fw().b[4][1]++;}cov_2lohry79fw().s[16]++;return privkey;}/**
 * Converts an extended key from one network to another by updating its version bytes.
 *
 * Handles both public and private keys, allowing conversion between networks like
 * Bitcoin Mainnet and Testnet.
 *
 * @returns The extended key with the updated network version.
 */function convertExtendedKeyNetwork(extendedKey,fromNetwork,targetNetwork){cov_2lohry79fw().f[2]++;cov_2lohry79fw().s[17]++;if(fromNetwork===targetNetwork){cov_2lohry79fw().b[5][0]++;cov_2lohry79fw().s[18]++;return extendedKey;}else{cov_2lohry79fw().b[5][1]++;}const decodedData=(cov_2lohry79fw().s[19]++,bs58check.decode(extendedKey));const hdNode=(cov_2lohry79fw().s[20]++,noble_ecc_1.bip32.fromBase58(extendedKey,fromNetwork));const targetVersionBytes=(cov_2lohry79fw().s[21]++,hdNode.isNeutered()?(cov_2lohry79fw().b[6][0]++,targetNetwork.bip32.public):(cov_2lohry79fw().b[6][1]++,targetNetwork.bip32.private));const versionBuffer=(cov_2lohry79fw().s[22]++,Buffer.alloc(4));cov_2lohry79fw().s[23]++;versionBuffer.writeUInt32BE(targetVersionBytes,0);cov_2lohry79fw().s[24]++;versionBuffer.copy(decodedData,0,0,4);cov_2lohry79fw().s[25]++;return bs58check.encode(decodedData);}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28va2V5dXRpbC50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28va2V5dXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQVdBLDREQU1DO0FBT0QsZ0VBY0M7QUFVRCw4REFXQztBQTFERCx1Q0FBdUM7QUFFdkMsNENBQTZDO0FBRTdDOzs7OztHQUtHO0FBQ0gsU0FBZ0Isd0JBQXdCLENBQUMsTUFBYyxFQUFFLE9BQWlCO0lBQ3hFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEtBQUssRUFBRSxFQUFFLENBQUM7UUFDckQsTUFBTSxJQUFJLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFRCxPQUFPLGtCQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3ZDLENBQUM7QUFFRDs7OztHQUlHO0FBQ0gsU0FBZ0IsMEJBQTBCLENBQUMsTUFBdUI7SUFDaEUsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksS0FBSyxRQUFRLEVBQUUsQ0FBQztRQUN6QyxNQUFNLElBQUksU0FBUyxDQUFDLHlCQUF5QixDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVELE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7SUFDbEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUM5QixNQUFNLElBQUksS0FBSyxDQUFDLHlCQUF5QixDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUNELElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxFQUFFLEVBQUUsQ0FBQztRQUMxQixNQUFNLElBQUksS0FBSyxDQUFDLDJCQUEyQixDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVELE9BQU8sT0FBTyxDQUFDO0FBQ2pCLENBQUM7QUFFRDs7Ozs7OztHQU9HO0FBQ0gsU0FBZ0IseUJBQXlCLENBQUMsV0FBbUIsRUFBRSxXQUFvQixFQUFFLGFBQXNCO0lBQ3pHLElBQUksV0FBVyxLQUFLLGFBQWEsRUFBRSxDQUFDO1FBQ2xDLE9BQU8sV0FBVyxDQUFDO0lBQ3JCLENBQUM7SUFDRCxNQUFNLFdBQVcsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ2xELE1BQU0sTUFBTSxHQUFHLGlCQUFLLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUMxRCxNQUFNLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQzFHLE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdEMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNuRCxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLE9BQU8sU0FBUyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUN2QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRUNQYWlySW50ZXJmYWNlIH0gZnJvbSAnZWNwYWlyJztcbmltcG9ydCAqIGFzIGJzNThjaGVjayBmcm9tICdiczU4Y2hlY2snO1xuaW1wb3J0IHsgTmV0d29yayB9IGZyb20gJy4uL25ldHdvcmtzJztcbmltcG9ydCB7IGJpcDMyLCBFQ1BhaXIgfSBmcm9tICcuLi9ub2JsZV9lY2MnO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFQ1BhaXIgZnJvbSB0aGUgcmF3IHByaXZhdGUga2V5IGJ5dGVzXG4gKiBAcGFyYW0ge0J1ZmZlcn0gYnVmZmVyIC0gUHJpdmF0ZSBrZXkgZm9yIHRoZSBFQ1BhaXIuIE11c3QgYmUgZXhhY3RseSAzMiBieXRlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbbmV0d29ya10gLSBOZXR3b3JrIGZvciB0aGUgRUNQYWlyLiBEZWZhdWx0cyB0byBiaXRjb2luLlxuICogQHJldHVybiB7RUNQYWlyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJpdmF0ZUtleUJ1ZmZlclRvRUNQYWlyKGJ1ZmZlcjogQnVmZmVyLCBuZXR3b3JrPzogTmV0d29yayk6IEVDUGFpckludGVyZmFjZSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZmZlcikgfHwgYnVmZmVyLmxlbmd0aCAhPT0gMzIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcHJpdmF0ZSBrZXkgYnVmZmVyJyk7XG4gIH1cblxuICByZXR1cm4gRUNQYWlyLmZyb21Qcml2YXRlS2V5KGJ1ZmZlcik7XG59XG5cbi8qKlxuICogR2V0IHRoZSBwcml2YXRlIGtleSBhcyBhIDMyIGJ5dGVzIGJ1ZmZlci4gSWYgaXQgaXMgc21hbGxlciB0aGFuIDMyIGJ5dGVzLCBwYWQgaXQgd2l0aCB6ZXJvc1xuICogQHBhcmFtIHtFQ1BhaXJ9IGVjUGFpclxuICogQHJldHVybiBCdWZmZXIgMzIgYnl0ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByaXZhdGVLZXlCdWZmZXJGcm9tRUNQYWlyKGVjUGFpcjogRUNQYWlySW50ZXJmYWNlKTogQnVmZmVyIHtcbiAgaWYgKGVjUGFpci5jb25zdHJ1Y3Rvci5uYW1lICE9PSAnRUNQYWlyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGludmFsaWQgYXJndW1lbnQgZWNwYWlyYCk7XG4gIH1cblxuICBjb25zdCBwcml2a2V5ID0gZWNQYWlyLnByaXZhdGVLZXk7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKHByaXZrZXkpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGB1bmV4cGVjdGVkIHByaXZrZXkgdHlwZWApO1xuICB9XG4gIGlmIChwcml2a2V5Lmxlbmd0aCAhPT0gMzIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYHVuZXhwZWN0ZWQgcHJpdmtleSBsZW5ndGhgKTtcbiAgfVxuXG4gIHJldHVybiBwcml2a2V5O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGV4dGVuZGVkIGtleSBmcm9tIG9uZSBuZXR3b3JrIHRvIGFub3RoZXIgYnkgdXBkYXRpbmcgaXRzIHZlcnNpb24gYnl0ZXMuXG4gKlxuICogSGFuZGxlcyBib3RoIHB1YmxpYyBhbmQgcHJpdmF0ZSBrZXlzLCBhbGxvd2luZyBjb252ZXJzaW9uIGJldHdlZW4gbmV0d29ya3MgbGlrZVxuICogQml0Y29pbiBNYWlubmV0IGFuZCBUZXN0bmV0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBleHRlbmRlZCBrZXkgd2l0aCB0aGUgdXBkYXRlZCBuZXR3b3JrIHZlcnNpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0RXh0ZW5kZWRLZXlOZXR3b3JrKGV4dGVuZGVkS2V5OiBzdHJpbmcsIGZyb21OZXR3b3JrOiBOZXR3b3JrLCB0YXJnZXROZXR3b3JrOiBOZXR3b3JrKTogc3RyaW5nIHtcbiAgaWYgKGZyb21OZXR3b3JrID09PSB0YXJnZXROZXR3b3JrKSB7XG4gICAgcmV0dXJuIGV4dGVuZGVkS2V5O1xuICB9XG4gIGNvbnN0IGRlY29kZWREYXRhID0gYnM1OGNoZWNrLmRlY29kZShleHRlbmRlZEtleSk7XG4gIGNvbnN0IGhkTm9kZSA9IGJpcDMyLmZyb21CYXNlNTgoZXh0ZW5kZWRLZXksIGZyb21OZXR3b3JrKTtcbiAgY29uc3QgdGFyZ2V0VmVyc2lvbkJ5dGVzID0gaGROb2RlLmlzTmV1dGVyZWQoKSA/IHRhcmdldE5ldHdvcmsuYmlwMzIucHVibGljIDogdGFyZ2V0TmV0d29yay5iaXAzMi5wcml2YXRlO1xuICBjb25zdCB2ZXJzaW9uQnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICB2ZXJzaW9uQnVmZmVyLndyaXRlVUludDMyQkUodGFyZ2V0VmVyc2lvbkJ5dGVzLCAwKTtcbiAgdmVyc2lvbkJ1ZmZlci5jb3B5KGRlY29kZWREYXRhLCAwLCAwLCA0KTtcbiAgcmV0dXJuIGJzNThjaGVjay5lbmNvZGUoZGVjb2RlZERhdGEpO1xufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmxvaHJ5NzlmdyIsImFjdHVhbENvdmVyYWdlIiwicyIsImV4cG9ydHMiLCJwcml2YXRlS2V5QnVmZmVyVG9FQ1BhaXIiLCJwcml2YXRlS2V5QnVmZmVyRnJvbUVDUGFpciIsImNvbnZlcnRFeHRlbmRlZEtleU5ldHdvcmsiLCJiczU4Y2hlY2siLCJyZXF1aXJlIiwibm9ibGVfZWNjXzEiLCJidWZmZXIiLCJuZXR3b3JrIiwiZiIsImIiLCJCdWZmZXIiLCJpc0J1ZmZlciIsImxlbmd0aCIsIkVycm9yIiwiRUNQYWlyIiwiZnJvbVByaXZhdGVLZXkiLCJlY1BhaXIiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJUeXBlRXJyb3IiLCJwcml2a2V5IiwicHJpdmF0ZUtleSIsImV4dGVuZGVkS2V5IiwiZnJvbU5ldHdvcmsiLCJ0YXJnZXROZXR3b3JrIiwiZGVjb2RlZERhdGEiLCJkZWNvZGUiLCJoZE5vZGUiLCJiaXAzMiIsImZyb21CYXNlNTgiLCJ0YXJnZXRWZXJzaW9uQnl0ZXMiLCJpc05ldXRlcmVkIiwicHVibGljIiwicHJpdmF0ZSIsInZlcnNpb25CdWZmZXIiLCJhbGxvYyIsIndyaXRlVUludDMyQkUiLCJjb3B5IiwiZW5jb2RlIl0sInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28va2V5dXRpbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFQ1BhaXJJbnRlcmZhY2UgfSBmcm9tICdlY3BhaXInO1xuaW1wb3J0ICogYXMgYnM1OGNoZWNrIGZyb20gJ2JzNThjaGVjayc7XG5pbXBvcnQgeyBOZXR3b3JrIH0gZnJvbSAnLi4vbmV0d29ya3MnO1xuaW1wb3J0IHsgYmlwMzIsIEVDUGFpciB9IGZyb20gJy4uL25vYmxlX2VjYyc7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVDUGFpciBmcm9tIHRoZSByYXcgcHJpdmF0ZSBrZXkgYnl0ZXNcbiAqIEBwYXJhbSB7QnVmZmVyfSBidWZmZXIgLSBQcml2YXRlIGtleSBmb3IgdGhlIEVDUGFpci4gTXVzdCBiZSBleGFjdGx5IDMyIGJ5dGVzLlxuICogQHBhcmFtIHtPYmplY3R9IFtuZXR3b3JrXSAtIE5ldHdvcmsgZm9yIHRoZSBFQ1BhaXIuIERlZmF1bHRzIHRvIGJpdGNvaW4uXG4gKiBAcmV0dXJuIHtFQ1BhaXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcml2YXRlS2V5QnVmZmVyVG9FQ1BhaXIoYnVmZmVyOiBCdWZmZXIsIG5ldHdvcms/OiBOZXR3b3JrKTogRUNQYWlySW50ZXJmYWNlIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSB8fCBidWZmZXIubGVuZ3RoICE9PSAzMikge1xuICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBwcml2YXRlIGtleSBidWZmZXInKTtcbiAgfVxuXG4gIHJldHVybiBFQ1BhaXIuZnJvbVByaXZhdGVLZXkoYnVmZmVyKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHByaXZhdGUga2V5IGFzIGEgMzIgYnl0ZXMgYnVmZmVyLiBJZiBpdCBpcyBzbWFsbGVyIHRoYW4gMzIgYnl0ZXMsIHBhZCBpdCB3aXRoIHplcm9zXG4gKiBAcGFyYW0ge0VDUGFpcn0gZWNQYWlyXG4gKiBAcmV0dXJuIEJ1ZmZlciAzMiBieXRlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcHJpdmF0ZUtleUJ1ZmZlckZyb21FQ1BhaXIoZWNQYWlyOiBFQ1BhaXJJbnRlcmZhY2UpOiBCdWZmZXIge1xuICBpZiAoZWNQYWlyLmNvbnN0cnVjdG9yLm5hbWUgIT09ICdFQ1BhaXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgaW52YWxpZCBhcmd1bWVudCBlY3BhaXJgKTtcbiAgfVxuXG4gIGNvbnN0IHByaXZrZXkgPSBlY1BhaXIucHJpdmF0ZUtleTtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIocHJpdmtleSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYHVuZXhwZWN0ZWQgcHJpdmtleSB0eXBlYCk7XG4gIH1cbiAgaWYgKHByaXZrZXkubGVuZ3RoICE9PSAzMikge1xuICAgIHRocm93IG5ldyBFcnJvcihgdW5leHBlY3RlZCBwcml2a2V5IGxlbmd0aGApO1xuICB9XG5cbiAgcmV0dXJuIHByaXZrZXk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gZXh0ZW5kZWQga2V5IGZyb20gb25lIG5ldHdvcmsgdG8gYW5vdGhlciBieSB1cGRhdGluZyBpdHMgdmVyc2lvbiBieXRlcy5cbiAqXG4gKiBIYW5kbGVzIGJvdGggcHVibGljIGFuZCBwcml2YXRlIGtleXMsIGFsbG93aW5nIGNvbnZlcnNpb24gYmV0d2VlbiBuZXR3b3JrcyBsaWtlXG4gKiBCaXRjb2luIE1haW5uZXQgYW5kIFRlc3RuZXQuXG4gKlxuICogQHJldHVybnMgVGhlIGV4dGVuZGVkIGtleSB3aXRoIHRoZSB1cGRhdGVkIG5ldHdvcmsgdmVyc2lvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRFeHRlbmRlZEtleU5ldHdvcmsoZXh0ZW5kZWRLZXk6IHN0cmluZywgZnJvbU5ldHdvcms6IE5ldHdvcmssIHRhcmdldE5ldHdvcms6IE5ldHdvcmspOiBzdHJpbmcge1xuICBpZiAoZnJvbU5ldHdvcmsgPT09IHRhcmdldE5ldHdvcmspIHtcbiAgICByZXR1cm4gZXh0ZW5kZWRLZXk7XG4gIH1cbiAgY29uc3QgZGVjb2RlZERhdGEgPSBiczU4Y2hlY2suZGVjb2RlKGV4dGVuZGVkS2V5KTtcbiAgY29uc3QgaGROb2RlID0gYmlwMzIuZnJvbUJhc2U1OChleHRlbmRlZEtleSwgZnJvbU5ldHdvcmspO1xuICBjb25zdCB0YXJnZXRWZXJzaW9uQnl0ZXMgPSBoZE5vZGUuaXNOZXV0ZXJlZCgpID8gdGFyZ2V0TmV0d29yay5iaXAzMi5wdWJsaWMgOiB0YXJnZXROZXR3b3JrLmJpcDMyLnByaXZhdGU7XG4gIGNvbnN0IHZlcnNpb25CdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gIHZlcnNpb25CdWZmZXIud3JpdGVVSW50MzJCRSh0YXJnZXRWZXJzaW9uQnl0ZXMsIDApO1xuICB2ZXJzaW9uQnVmZmVyLmNvcHkoZGVjb2RlZERhdGEsIDAsIDAsIDQpO1xuICByZXR1cm4gYnM1OGNoZWNrLmVuY29kZShkZWNvZGVkRGF0YSk7XG59XG4iXSwibWFwcGluZ3MiOiJ3dFBBYUk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBQUFBLGNBQUEsR0FBQUUsQ0FBQSxNLGlGQUZKQyxPQUFBLENBQUFDLHdCQUFBLENBQUFBLHdCQUFBLENBTUNKLGNBQUEsR0FBQUUsQ0FBQSxNQU9EQyxPQUFBLENBQUFFLDBCQUFBLENBQUFBLDBCQUFBLENBY0NMLGNBQUEsR0FBQUUsQ0FBQSxNQVVEQyxPQUFBLENBQUFHLHlCQUFBLENBQUFBLHlCQUFBLENBL0NBLE1BQUFDLFNBQUEsRUFBQVAsY0FBQSxHQUFBRSxDQUFBLE1BQUFNLE9BQUEsZUFFQSxNQUFBQyxXQUFBLEVBQUFULGNBQUEsR0FBQUUsQ0FBQSxNQUFBTSxPQUFBLGtCQUVBOzs7OztHQU1BLFFBQWdCLENBQUFKLHdCQUF3QkEsQ0FBQ00sTUFBYyxDQUFFQyxPQUFpQixFQUFBWCxjQUFBLEdBQUFZLENBQUEsTUFBQVosY0FBQSxHQUFBRSxDQUFBLE1BQ3hFLEdBQUksQ0FBQUYsY0FBQSxHQUFBYSxDQUFBLFVBQUNDLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDTCxNQUFNLENBQUMsSUFBQVYsY0FBQSxHQUFBYSxDQUFBLFNBQUlILE1BQU0sQ0FBQ00sTUFBTSxHQUFLLEVBQUUsRUFBRSxDQUFBaEIsY0FBQSxHQUFBYSxDQUFBLFNBQUFiLGNBQUEsR0FBQUUsQ0FBQSxNQUNwRCxLQUFNLElBQUksQ0FBQWUsS0FBSyxDQUFDLDRCQUE0QixDQUFDLENBQy9DLENBQUMsS0FBQWpCLGNBQUEsR0FBQWEsQ0FBQSxVQUFBYixjQUFBLEdBQUFFLENBQUEsTUFFRCxNQUFPLENBQUFPLFdBQUEsQ0FBQVMsTUFBTSxDQUFDQyxjQUFjLENBQUNULE1BQU0sQ0FBQyxDQUN0QyxDQUVB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