{"version":3,"file":"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/templates/witnesscommitment/output.ts","sources":["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/templates/witnesscommitment/output.ts"],"names":[],"mappings":";AAAA,oCAAoC;;AAUpC,sBAMC;AAMD,wBAQC;AAED,wBAIC;AAlCD,8BAA2C;AAC3C,8BAAiC;AACjC,iDAAiD;AAEjD,MAAM,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AAEvC,MAAM,MAAM,GAAW,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;AAEtD,SAAgB,KAAK,CAAC,MAAuC;IAC3D,MAAM,MAAM,GAAG,UAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IAEvC,OAAO,CACL,MAAM,CAAC,MAAM,GAAG,EAAE,IAAI,MAAM,CAAC,CAAC,CAAC,KAAK,WAAO,CAAC,SAAS,IAAI,MAAM,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CACjH,CAAC;AACJ,CAAC;AAED,KAAK,CAAC,MAAM,GAAG,GAAW,EAAE;IAC1B,OAAO,2BAA2B,CAAC;AACrC,CAAC,CAAC;AAEF,SAAgB,MAAM,CAAC,UAAkB;IACvC,SAAS,CAAC,KAAK,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;IAExC,MAAM,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IACtC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IACvB,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IAE3B,OAAO,UAAO,CAAC,OAAO,CAAC,CAAC,WAAO,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC,CAAC;AACtD,CAAC;AAED,SAAgB,MAAM,CAAC,MAAc;IACnC,SAAS,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IAEzB,OAAQ,UAAO,CAAC,SAAS,CAAC,MAAM,CAAE,CAAC,CAAC,CAAY,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AAChE,CAAC","sourcesContent":["// OP_RETURN {aa21a9ed} {commitment}\n\nimport { script as bscript } from '../../';\nimport { opcodes } from '../../';\nimport * as types from 'bitcoinjs-lib/src/types';\n\nconst typeforce = require('typeforce');\n\nconst HEADER: Buffer = Buffer.from('aa21a9ed', 'hex');\n\nexport function check(script: Buffer | Array<number | Buffer>): boolean {\n  const buffer = bscript.compile(script);\n\n  return (\n    buffer.length > 37 && buffer[0] === opcodes.OP_RETURN && buffer[1] === 0x24 && buffer.slice(2, 6).equals(HEADER)\n  );\n}\n\ncheck.toJSON = (): string => {\n  return 'Witness commitment output';\n};\n\nexport function encode(commitment: Buffer): Buffer {\n  typeforce(types.Hash256bit, commitment);\n\n  const buffer = Buffer.allocUnsafe(36);\n  HEADER.copy(buffer, 0);\n  commitment.copy(buffer, 4);\n\n  return bscript.compile([opcodes.OP_RETURN, buffer]);\n}\n\nexport function decode(buffer: Buffer): Buffer {\n  typeforce(check, buffer);\n\n  return (bscript.decompile(buffer)![1] as Buffer).slice(4, 36);\n}\n"]}