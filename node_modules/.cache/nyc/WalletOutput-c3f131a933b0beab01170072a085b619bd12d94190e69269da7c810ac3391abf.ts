"use strict";function cov_2kegovtjka(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/wallet/WalletOutput.ts";var hash="a2195ed60ac705a515abc87ffb89509b85a3b77c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/wallet/WalletOutput.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:54}},"2":{start:{line:4,column:0},end:{line:4,column:62}},"3":{start:{line:5,column:24},end:{line:5,column:48}},"4":{start:{line:6,column:17},end:{line:6,column:36}},"5":{start:{line:7,column:24},end:{line:7,column:51}},"6":{start:{line:22,column:23},end:{line:22,column:74}},"7":{start:{line:23,column:23},end:{line:23,column:62}},"8":{start:{line:24,column:4},end:{line:31,column:5}},"9":{start:{line:25,column:24},end:{line:25,column:179}},"10":{start:{line:26,column:8},end:{line:26,column:58}},"11":{start:{line:29,column:41},end:{line:29,column:119}},"12":{start:{line:30,column:8},end:{line:30,column:42}},"13":{start:{line:32,column:4},end:{line:32,column:96}},"14":{start:{line:50,column:4},end:{line:52,column:5}},"15":{start:{line:51,column:8},end:{line:51,column:125}},"16":{start:{line:53,column:25},end:{line:53,column:58}},"17":{start:{line:54,column:23},end:{line:54,column:74}},"18":{start:{line:55,column:23},end:{line:55,column:62}},"19":{start:{line:56,column:19},end:{line:56,column:49}},"20":{start:{line:57,column:19},end:{line:57,column:21}},"21":{start:{line:58,column:4},end:{line:106,column:5}},"22":{start:{line:59,column:24},end:{line:59,column:179}},"23":{start:{line:60,column:8},end:{line:62,column:9}},"24":{start:{line:61,column:12},end:{line:61,column:101}},"25":{start:{line:63,column:30},end:{line:63,column:103}},"26":{start:{line:63,column:57},end:{line:63,column:102}},"27":{start:{line:64,column:8},end:{line:66,column:9}},"28":{start:{line:65,column:12},end:{line:65,column:45}},"29":{start:{line:67,column:8},end:{line:69,column:9}},"30":{start:{line:68,column:12},end:{line:68,column:59}},"31":{start:{line:70,column:8},end:{line:86,column:9}},"32":{start:{line:71,column:12},end:{line:85,column:15}},"33":{start:{line:72,column:31},end:{line:72,column:102}},"34":{start:{line:73,column:35},end:{line:73,column:37}},"35":{start:{line:74,column:16},end:{line:78,column:19}},"36":{start:{line:75,column:20},end:{line:77,column:21}},"37":{start:{line:75,column:47},end:{line:75,column:64}},"38":{start:{line:76,column:24},end:{line:76,column:60}},"39":{start:{line:79,column:16},end:{line:84,column:18}},"40":{start:{line:89,column:62},end:{line:89,column:140}},"41":{start:{line:90,column:8},end:{line:92,column:9}},"42":{start:{line:91,column:12},end:{line:91,column:97}},"43":{start:{line:93,column:8},end:{line:99,column:9}},"44":{start:{line:94,column:12},end:{line:98,column:16}},"45":{start:{line:94,column:61},end:{line:98,column:13}},"46":{start:{line:100,column:8},end:{line:102,column:9}},"47":{start:{line:101,column:12},end:{line:101,column:49}},"48":{start:{line:103,column:8},end:{line:105,column:9}},"49":{start:{line:104,column:12},end:{line:104,column:47}},"50":{start:{line:107,column:4},end:{line:107,column:43}}},fnMap:{"0":{name:"addWalletOutputToPsbt",decl:{start:{line:21,column:9},end:{line:21,column:30}},loc:{start:{line:21,column:74},end:{line:33,column:1}},line:21},"1":{name:"updateWalletOutputForPsbt",decl:{start:{line:49,column:9},end:{line:49,column:34}},loc:{start:{line:49,column:84},end:{line:108,column:1}},line:49},"2":{name:"(anonymous_2)",decl:{start:{line:63,column:50},end:{line:63,column:51}},loc:{start:{line:63,column:57},end:{line:63,column:102}},line:63},"3":{name:"(anonymous_3)",decl:{start:{line:71,column:54},end:{line:71,column:55}},loc:{start:{line:71,column:63},end:{line:85,column:13}},line:71},"4":{name:"(anonymous_4)",decl:{start:{line:74,column:40},end:{line:74,column:41}},loc:{start:{line:74,column:52},end:{line:78,column:17}},line:74},"5":{name:"(anonymous_5)",decl:{start:{line:75,column:39},end:{line:75,column:40}},loc:{start:{line:75,column:47},end:{line:75,column:64}},line:75},"6":{name:"(anonymous_6)",decl:{start:{line:94,column:51},end:{line:94,column:52}},loc:{start:{line:94,column:61},end:{line:98,column:13}},line:94}},branchMap:{"0":{loc:{start:{line:24,column:4},end:{line:31,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:31,column:5}},{start:{line:24,column:4},end:{line:31,column:5}}],line:24},"1":{loc:{start:{line:24,column:8},end:{line:24,column:60}},type:"binary-expr",locations:[{start:{line:24,column:8},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:60}}],line:24},"2":{loc:{start:{line:25,column:24},end:{line:25,column:179}},type:"cond-expr",locations:[{start:{line:25,column:48},end:{line:25,column:109}},{start:{line:25,column:112},end:{line:25,column:179}}],line:25},"3":{loc:{start:{line:50,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:52,column:5}},{start:{line:50,column:4},end:{line:52,column:5}}],line:50},"4":{loc:{start:{line:58,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:58,column:4},end:{line:106,column:5}},{start:{line:58,column:4},end:{line:106,column:5}}],line:58},"5":{loc:{start:{line:58,column:8},end:{line:58,column:60}},type:"binary-expr",locations:[{start:{line:58,column:8},end:{line:58,column:29}},{start:{line:58,column:33},end:{line:58,column:60}}],line:58},"6":{loc:{start:{line:59,column:24},end:{line:59,column:179}},type:"cond-expr",locations:[{start:{line:59,column:48},end:{line:59,column:109}},{start:{line:59,column:112},end:{line:59,column:179}}],line:59},"7":{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:60,column:8},end:{line:62,column:9}}],line:60},"8":{loc:{start:{line:60,column:12},end:{line:60,column:67}},type:"binary-expr",locations:[{start:{line:60,column:12},end:{line:60,column:27}},{start:{line:60,column:31},end:{line:60,column:67}}],line:60},"9":{loc:{start:{line:64,column:8},end:{line:66,column:9}},type:"if",locations:[{start:{line:64,column:8},end:{line:66,column:9}},{start:{line:64,column:8},end:{line:66,column:9}}],line:64},"10":{loc:{start:{line:67,column:8},end:{line:69,column:9}},type:"if",locations:[{start:{line:67,column:8},end:{line:69,column:9}},{start:{line:67,column:8},end:{line:69,column:9}}],line:67},"11":{loc:{start:{line:70,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:70,column:8},end:{line:86,column:9}},{start:{line:70,column:8},end:{line:86,column:9}}],line:70},"12":{loc:{start:{line:75,column:20},end:{line:77,column:21}},type:"if",locations:[{start:{line:75,column:20},end:{line:77,column:21}},{start:{line:75,column:20},end:{line:77,column:21}}],line:75},"13":{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:90,column:8},end:{line:92,column:9}}],line:90},"14":{loc:{start:{line:93,column:8},end:{line:99,column:9}},type:"if",locations:[{start:{line:93,column:8},end:{line:99,column:9}},{start:{line:93,column:8},end:{line:99,column:9}}],line:93},"15":{loc:{start:{line:100,column:8},end:{line:102,column:9}},type:"if",locations:[{start:{line:100,column:8},end:{line:102,column:9}},{start:{line:100,column:8},end:{line:102,column:9}}],line:100},"16":{loc:{start:{line:100,column:12},end:{line:100,column:50}},type:"binary-expr",locations:[{start:{line:100,column:12},end:{line:100,column:33}},{start:{line:100,column:37},end:{line:100,column:50}}],line:100},"17":{loc:{start:{line:103,column:8},end:{line:105,column:9}},type:"if",locations:[{start:{line:103,column:8},end:{line:105,column:9}},{start:{line:103,column:8},end:{line:105,column:9}}],line:103},"18":{loc:{start:{line:103,column:12},end:{line:103,column:48}},type:"binary-expr",locations:[{start:{line:103,column:12},end:{line:103,column:32}},{start:{line:103,column:36},end:{line:103,column:48}}],line:103}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/wallet/WalletOutput.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/wallet/WalletOutput.ts"],names:[],mappings:"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",sourcesContent:["import { taproot } from 'bitcoinjs-lib';\nimport { PsbtOutputUpdate } from 'bip174/src/lib/interfaces';\nimport { UtxoPsbt } from '../UtxoPsbt';\nimport { RootWalletKeys } from './WalletKeys';\nimport { ChainCode, scriptTypeForChain } from './chains';\nimport { createOutputScript2of3, createPaymentP2tr, createPaymentP2trMusig2, toXOnlyPublicKey } from '../outputScripts';\n\n/**\n * Add a verifiable wallet output to the PSBT. The output and all data\n * needed to verify it from public keys only are added to the PSBT.\n * Typically these are change outputs.\n *\n * @param psbt the PSBT to add change output to\n * @param rootWalletKeys keys that will be able to spend the output\n * @param chain chain code to use for deriving scripts (and to determine script\n *              type) chain is an API parameter in the BitGo API, and may be\n *              any valid ChainCode\n * @param index derivation index for the change address\n * @param value value of the change output\n */\nexport function addWalletOutputToPsbt(\n  psbt: UtxoPsbt,\n  rootWalletKeys: RootWalletKeys,\n  chain: ChainCode,\n  index: number,\n  value: bigint\n): void {\n  const walletKeys = rootWalletKeys.deriveForChainAndIndex(chain, index);\n  const scriptType = scriptTypeForChain(chain);\n  if (scriptType === 'p2tr' || scriptType === 'p2trMusig2') {\n    const payment =\n      scriptType === 'p2tr' ? createPaymentP2tr(walletKeys.publicKeys) : createPaymentP2trMusig2(walletKeys.publicKeys);\n    psbt.addOutput({ script: payment.output!, value });\n  } else {\n    const { scriptPubKey: script } = createOutputScript2of3(walletKeys.publicKeys, scriptType);\n    psbt.addOutput({ script, value });\n  }\n  updateWalletOutputForPsbt(psbt, rootWalletKeys, psbt.data.outputs.length - 1, chain, index);\n}\n\n/**\n * Update the wallet output with the required information when necessary. If the\n * information is there already, it will skip over it.\n *\n * This function assumes that the output script and value have already been set.\n *\n * @param psbt the PSBT to update change output at\n * @param rootWalletKeys keys that will be able to spend the output\n * @param outputIndex output index where to update the output\n * @param chain chain code to use for deriving scripts (and to determine script\n *              type) chain is an API parameter in the BitGo API, and may be\n *              any valid ChainCode\n * @param index derivation index for the change address\n * @param value value of the change output\n */\nexport function updateWalletOutputForPsbt(\n  psbt: UtxoPsbt,\n  rootWalletKeys: RootWalletKeys,\n  outputIndex: number,\n  chain: ChainCode,\n  index: number\n): void {\n  if (psbt.data.outputs.length <= outputIndex) {\n    throw new Error(\n      `outputIndex (${outputIndex}) is too large for the number of outputs (${psbt.data.outputs.length})`\n    );\n  }\n\n  const outputScript = psbt.getOutputScript(outputIndex);\n\n  const walletKeys = rootWalletKeys.deriveForChainAndIndex(chain, index);\n  const scriptType = scriptTypeForChain(chain);\n  const output = psbt.data.outputs[outputIndex];\n  const update: PsbtOutputUpdate = {};\n  if (scriptType === 'p2tr' || scriptType === 'p2trMusig2') {\n    const payment =\n      scriptType === 'p2tr' ? createPaymentP2tr(walletKeys.publicKeys) : createPaymentP2trMusig2(walletKeys.publicKeys);\n    if (!payment.output || !payment.output.equals(outputScript)) {\n      throw new Error(`cannot update a p2tr output where the scripts do not match - Failing.`);\n    }\n    const allLeafHashes = payment.redeems!.map((r) => taproot.hashTapLeaf(r.output!));\n\n    if (!output.tapTree) {\n      update.tapTree = payment.tapTree;\n    }\n    if (!output.tapInternalKey) {\n      update.tapInternalKey = payment.internalPubkey;\n    }\n    if (!output.tapBip32Derivation) {\n      update.tapBip32Derivation = [0, 1, 2].map((idx) => {\n        const pubkey = toXOnlyPublicKey(walletKeys.triple[idx].publicKey);\n        const leafHashes: Buffer[] = [];\n        payment.redeems!.forEach((r, idx) => {\n          if (r.pubkeys!.find((pk) => pk.equals(pubkey))) {\n            leafHashes.push(allLeafHashes[idx]);\n          }\n        });\n        return {\n          leafHashes,\n          pubkey,\n          path: walletKeys.paths[idx],\n          masterFingerprint: rootWalletKeys.triple[idx].fingerprint,\n        };\n      });\n    }\n  } else {\n    const { scriptPubKey, witnessScript, redeemScript } = createOutputScript2of3(walletKeys.publicKeys, scriptType);\n    if (!scriptPubKey.equals(outputScript)) {\n      throw new Error(`cannot update an output where the scripts do not match - Failing.`);\n    }\n    if (!output.bip32Derivation) {\n      update.bip32Derivation = [0, 1, 2].map((idx) => ({\n        pubkey: walletKeys.triple[idx].publicKey,\n        path: walletKeys.paths[idx],\n        masterFingerprint: rootWalletKeys.triple[idx].fingerprint,\n      }));\n    }\n    if (!output.witnessScript && witnessScript) {\n      update.witnessScript = witnessScript;\n    }\n    if (!output.redeemScript && redeemScript) {\n      update.redeemScript = redeemScript;\n    }\n  }\n  psbt.updateOutput(outputIndex, update);\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a2195ed60ac705a515abc87ffb89509b85a3b77c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2kegovtjka=function(){return actualCoverage;};}return actualCoverage;}cov_2kegovtjka();cov_2kegovtjka().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2kegovtjka().s[1]++;exports.addWalletOutputToPsbt=addWalletOutputToPsbt;cov_2kegovtjka().s[2]++;exports.updateWalletOutputForPsbt=updateWalletOutputForPsbt;const bitcoinjs_lib_1=(cov_2kegovtjka().s[3]++,require("bitcoinjs-lib"));const chains_1=(cov_2kegovtjka().s[4]++,require("./chains"));const outputScripts_1=(cov_2kegovtjka().s[5]++,require("../outputScripts"));/**
 * Add a verifiable wallet output to the PSBT. The output and all data
 * needed to verify it from public keys only are added to the PSBT.
 * Typically these are change outputs.
 *
 * @param psbt the PSBT to add change output to
 * @param rootWalletKeys keys that will be able to spend the output
 * @param chain chain code to use for deriving scripts (and to determine script
 *              type) chain is an API parameter in the BitGo API, and may be
 *              any valid ChainCode
 * @param index derivation index for the change address
 * @param value value of the change output
 */function addWalletOutputToPsbt(psbt,rootWalletKeys,chain,index,value){cov_2kegovtjka().f[0]++;const walletKeys=(cov_2kegovtjka().s[6]++,rootWalletKeys.deriveForChainAndIndex(chain,index));const scriptType=(cov_2kegovtjka().s[7]++,(0,chains_1.scriptTypeForChain)(chain));cov_2kegovtjka().s[8]++;if((cov_2kegovtjka().b[1][0]++,scriptType==='p2tr')||(cov_2kegovtjka().b[1][1]++,scriptType==='p2trMusig2')){cov_2kegovtjka().b[0][0]++;const payment=(cov_2kegovtjka().s[9]++,scriptType==='p2tr'?(cov_2kegovtjka().b[2][0]++,(0,outputScripts_1.createPaymentP2tr)(walletKeys.publicKeys)):(cov_2kegovtjka().b[2][1]++,(0,outputScripts_1.createPaymentP2trMusig2)(walletKeys.publicKeys)));cov_2kegovtjka().s[10]++;psbt.addOutput({script:payment.output,value});}else{cov_2kegovtjka().b[0][1]++;const{scriptPubKey:script}=(cov_2kegovtjka().s[11]++,(0,outputScripts_1.createOutputScript2of3)(walletKeys.publicKeys,scriptType));cov_2kegovtjka().s[12]++;psbt.addOutput({script,value});}cov_2kegovtjka().s[13]++;updateWalletOutputForPsbt(psbt,rootWalletKeys,psbt.data.outputs.length-1,chain,index);}/**
 * Update the wallet output with the required information when necessary. If the
 * information is there already, it will skip over it.
 *
 * This function assumes that the output script and value have already been set.
 *
 * @param psbt the PSBT to update change output at
 * @param rootWalletKeys keys that will be able to spend the output
 * @param outputIndex output index where to update the output
 * @param chain chain code to use for deriving scripts (and to determine script
 *              type) chain is an API parameter in the BitGo API, and may be
 *              any valid ChainCode
 * @param index derivation index for the change address
 * @param value value of the change output
 */function updateWalletOutputForPsbt(psbt,rootWalletKeys,outputIndex,chain,index){cov_2kegovtjka().f[1]++;cov_2kegovtjka().s[14]++;if(psbt.data.outputs.length<=outputIndex){cov_2kegovtjka().b[3][0]++;cov_2kegovtjka().s[15]++;throw new Error(`outputIndex (${outputIndex}) is too large for the number of outputs (${psbt.data.outputs.length})`);}else{cov_2kegovtjka().b[3][1]++;}const outputScript=(cov_2kegovtjka().s[16]++,psbt.getOutputScript(outputIndex));const walletKeys=(cov_2kegovtjka().s[17]++,rootWalletKeys.deriveForChainAndIndex(chain,index));const scriptType=(cov_2kegovtjka().s[18]++,(0,chains_1.scriptTypeForChain)(chain));const output=(cov_2kegovtjka().s[19]++,psbt.data.outputs[outputIndex]);const update=(cov_2kegovtjka().s[20]++,{});cov_2kegovtjka().s[21]++;if((cov_2kegovtjka().b[5][0]++,scriptType==='p2tr')||(cov_2kegovtjka().b[5][1]++,scriptType==='p2trMusig2')){cov_2kegovtjka().b[4][0]++;const payment=(cov_2kegovtjka().s[22]++,scriptType==='p2tr'?(cov_2kegovtjka().b[6][0]++,(0,outputScripts_1.createPaymentP2tr)(walletKeys.publicKeys)):(cov_2kegovtjka().b[6][1]++,(0,outputScripts_1.createPaymentP2trMusig2)(walletKeys.publicKeys)));cov_2kegovtjka().s[23]++;if((cov_2kegovtjka().b[8][0]++,!payment.output)||(cov_2kegovtjka().b[8][1]++,!payment.output.equals(outputScript))){cov_2kegovtjka().b[7][0]++;cov_2kegovtjka().s[24]++;throw new Error(`cannot update a p2tr output where the scripts do not match - Failing.`);}else{cov_2kegovtjka().b[7][1]++;}const allLeafHashes=(cov_2kegovtjka().s[25]++,payment.redeems.map(r=>{cov_2kegovtjka().f[2]++;cov_2kegovtjka().s[26]++;return bitcoinjs_lib_1.taproot.hashTapLeaf(r.output);}));cov_2kegovtjka().s[27]++;if(!output.tapTree){cov_2kegovtjka().b[9][0]++;cov_2kegovtjka().s[28]++;update.tapTree=payment.tapTree;}else{cov_2kegovtjka().b[9][1]++;}cov_2kegovtjka().s[29]++;if(!output.tapInternalKey){cov_2kegovtjka().b[10][0]++;cov_2kegovtjka().s[30]++;update.tapInternalKey=payment.internalPubkey;}else{cov_2kegovtjka().b[10][1]++;}cov_2kegovtjka().s[31]++;if(!output.tapBip32Derivation){cov_2kegovtjka().b[11][0]++;cov_2kegovtjka().s[32]++;update.tapBip32Derivation=[0,1,2].map(idx=>{cov_2kegovtjka().f[3]++;const pubkey=(cov_2kegovtjka().s[33]++,(0,outputScripts_1.toXOnlyPublicKey)(walletKeys.triple[idx].publicKey));const leafHashes=(cov_2kegovtjka().s[34]++,[]);cov_2kegovtjka().s[35]++;payment.redeems.forEach((r,idx)=>{cov_2kegovtjka().f[4]++;cov_2kegovtjka().s[36]++;if(r.pubkeys.find(pk=>{cov_2kegovtjka().f[5]++;cov_2kegovtjka().s[37]++;return pk.equals(pubkey);})){cov_2kegovtjka().b[12][0]++;cov_2kegovtjka().s[38]++;leafHashes.push(allLeafHashes[idx]);}else{cov_2kegovtjka().b[12][1]++;}});cov_2kegovtjka().s[39]++;return{leafHashes,pubkey,path:walletKeys.paths[idx],masterFingerprint:rootWalletKeys.triple[idx].fingerprint};});}else{cov_2kegovtjka().b[11][1]++;}}else{cov_2kegovtjka().b[4][1]++;const{scriptPubKey,witnessScript,redeemScript}=(cov_2kegovtjka().s[40]++,(0,outputScripts_1.createOutputScript2of3)(walletKeys.publicKeys,scriptType));cov_2kegovtjka().s[41]++;if(!scriptPubKey.equals(outputScript)){cov_2kegovtjka().b[13][0]++;cov_2kegovtjka().s[42]++;throw new Error(`cannot update an output where the scripts do not match - Failing.`);}else{cov_2kegovtjka().b[13][1]++;}cov_2kegovtjka().s[43]++;if(!output.bip32Derivation){cov_2kegovtjka().b[14][0]++;cov_2kegovtjka().s[44]++;update.bip32Derivation=[0,1,2].map(idx=>{cov_2kegovtjka().f[6]++;cov_2kegovtjka().s[45]++;return{pubkey:walletKeys.triple[idx].publicKey,path:walletKeys.paths[idx],masterFingerprint:rootWalletKeys.triple[idx].fingerprint};});}else{cov_2kegovtjka().b[14][1]++;}cov_2kegovtjka().s[46]++;if((cov_2kegovtjka().b[16][0]++,!output.witnessScript)&&(cov_2kegovtjka().b[16][1]++,witnessScript)){cov_2kegovtjka().b[15][0]++;cov_2kegovtjka().s[47]++;update.witnessScript=witnessScript;}else{cov_2kegovtjka().b[15][1]++;}cov_2kegovtjka().s[48]++;if((cov_2kegovtjka().b[18][0]++,!output.redeemScript)&&(cov_2kegovtjka().b[18][1]++,redeemScript)){cov_2kegovtjka().b[17][0]++;cov_2kegovtjka().s[49]++;update.redeemScript=redeemScript;}else{cov_2kegovtjka().b[17][1]++;}}cov_2kegovtjka().s[50]++;psbt.updateOutput(outputIndex,update);}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vd2FsbGV0L1dhbGxldE91dHB1dC50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vd2FsbGV0L1dhbGxldE91dHB1dC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQW9CQSxzREFrQkM7QUFpQkQsOERBc0VDO0FBN0hELGlEQUF3QztBQUl4QyxxQ0FBeUQ7QUFDekQsb0RBQXdIO0FBRXhIOzs7Ozs7Ozs7Ozs7R0FZRztBQUNILFNBQWdCLHFCQUFxQixDQUNuQyxJQUFjLEVBQ2QsY0FBOEIsRUFDOUIsS0FBZ0IsRUFDaEIsS0FBYSxFQUNiLEtBQWE7SUFFYixNQUFNLFVBQVUsR0FBRyxjQUFjLENBQUMsc0JBQXNCLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3ZFLE1BQU0sVUFBVSxHQUFHLElBQUEsMkJBQWtCLEVBQUMsS0FBSyxDQUFDLENBQUM7SUFDN0MsSUFBSSxVQUFVLEtBQUssTUFBTSxJQUFJLFVBQVUsS0FBSyxZQUFZLEVBQUUsQ0FBQztRQUN6RCxNQUFNLE9BQU8sR0FDWCxVQUFVLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFBLGlDQUFpQixFQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBQSx1Q0FBdUIsRUFBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDcEgsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsTUFBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDckQsQ0FBQztTQUFNLENBQUM7UUFDTixNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUEsc0NBQXNCLEVBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUMzRixJQUFJ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QyxhQUFhLElBQUksYUFBYSxFQUFFLENBQUM7WUFDM0MsTUFBTSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7UUFDdkMsQ0FBQztRQUNELElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxJQUFJLFlBQVksRUFBRSxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO1FBQ3JDLENBQUM7SUFDSCxDQUFDO0lBQ0QsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDekMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRhcHJvb3QgfSBmcm9tICdiaXRjb2luanMtbGliJztcbmltcG9ydCB7IFBzYnRPdXRwdXRVcGRhdGUgfSBmcm9tICdiaXAxNzQvc3JjL2xpYi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IFV0eG9Qc2J0IH0gZnJvbSAnLi4vVXR4b1BzYnQnO1xuaW1wb3J0IHsgUm9vdFdhbGxldEtleXMgfSBmcm9tICcuL1dhbGxldEtleXMnO1xuaW1wb3J0IHsgQ2hhaW5Db2RlLCBzY3JpcHRUeXBlRm9yQ2hhaW4gfSBmcm9tICcuL2NoYWlucyc7XG5pbXBvcnQgeyBjcmVhdGVPdXRwdXRTY3JpcHQyb2YzLCBjcmVhdGVQYXltZW50UDJ0ciwgY3JlYXRlUGF5bWVudFAydHJNdXNpZzIsIHRvWE9ubHlQdWJsaWNLZXkgfSBmcm9tICcuLi9vdXRwdXRTY3JpcHRzJztcblxuLyoqXG4gKiBBZGQgYSB2ZXJpZmlhYmxlIHdhbGxldCBvdXRwdXQgdG8gdGhlIFBTQlQuIFRoZSBvdXRwdXQgYW5kIGFsbCBkYXRhXG4gKiBuZWVkZWQgdG8gdmVyaWZ5IGl0IGZyb20gcHVibGljIGtleXMgb25seSBhcmUgYWRkZWQgdG8gdGhlIFBTQlQuXG4gKiBUeXBpY2FsbHkgdGhlc2UgYXJlIGNoYW5nZSBvdXRwdXRzLlxuICpcbiAqIEBwYXJhbSBwc2J0IHRoZSBQU0JUIHRvIGFkZCBjaGFuZ2Ugb3V0cHV0IHRvXG4gKiBAcGFyYW0gcm9vdFdhbGxldEtleXMga2V5cyB0aGF0IHdpbGwgYmUgYWJsZSB0byBzcGVuZCB0aGUgb3V0cHV0XG4gKiBAcGFyYW0gY2hhaW4gY2hhaW4gY29kZSB0byB1c2UgZm9yIGRlcml2aW5nIHNjcmlwdHMgKGFuZCB0byBkZXRlcm1pbmUgc2NyaXB0XG4gKiAgICAgICAgICAgICAgdHlwZSkgY2hhaW4gaXMgYW4gQVBJIHBhcmFtZXRlciBpbiB0aGUgQml0R28gQVBJLCBhbmQgbWF5IGJlXG4gKiAgICAgICAgICAgICAgYW55IHZhbGlkIENoYWluQ29kZVxuICogQHBhcmFtIGluZGV4IGRlcml2YXRpb24gaW5kZXggZm9yIHRoZSBjaGFuZ2UgYWRkcmVzc1xuICogQHBhcmFtIHZhbHVlIHZhbHVlIG9mIHRoZSBjaGFuZ2Ugb3V0cHV0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRXYWxsZXRPdXRwdXRUb1BzYnQoXG4gIHBzYnQ6IFV0eG9Qc2J0LFxuICByb290V2FsbGV0S2V5czogUm9vdFdhbGxldEtleXMsXG4gIGNoYWluOiBDaGFpbkNvZGUsXG4gIGluZGV4OiBudW1iZXIsXG4gIHZhbHVlOiBiaWdpbnRcbik6IHZvaWQge1xuICBjb25zdCB3YWxsZXRLZXlzID0gcm9vdFdhbGxldEtleXMuZGVyaXZlRm9yQ2hhaW5BbmRJbmRleChjaGFpbiwgaW5kZXgpO1xuICBjb25zdCBzY3JpcHRUeXBlID0gc2NyaXB0VHlwZUZvckNoYWluKGNoYWluKTtcbiAgaWYgKHNjcmlwdFR5cGUgPT09ICdwMnRyJyB8fCBzY3JpcHRUeXBlID09PSAncDJ0ck11c2lnMicpIHtcbiAgICBjb25zdCBwYXltZW50ID1cbiAgICAgIHNjcmlwdFR5cGUgPT09ICdwMnRyJyA/IGNyZWF0ZVBheW1lbnRQMnRyKHdhbGxldEtleXMucHVibGljS2V5cykgOiBjcmVhdGVQYXltZW50UDJ0ck11c2lnMih3YWxsZXRLZXlzLnB1YmxpY0tleXMpO1xuICAgIHBzYnQuYWRkT3V0cHV0KHsgc2NyaXB0OiBwYXltZW50Lm91dHB1dCEsIHZhbHVlIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHsgc2NyaXB0UHViS2V5OiBzY3JpcHQgfSA9IGNyZWF0ZU91dHB1dFNjcmlwdDJvZjMod2FsbGV0S2V5cy5wdWJsaWNLZXlzLCBzY3JpcHRUeXBlKTtcbiAgICBwc2J0LmFkZE91dHB1dCh7IHNjcmlwdCwgdmFsdWUgfSk7XG4gIH1cbiAgdXBkYXRlV2FsbGV0T3V0cHV0Rm9yUHNidChwc2J0LCByb290V2FsbGV0S2V5cywgcHNidC5kYXRhLm91dHB1dHMubGVuZ3RoIC0gMSwgY2hhaW4sIGluZGV4KTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgdGhlIHdhbGxldCBvdXRwdXQgd2l0aCB0aGUgcmVxdWlyZWQgaW5mb3JtYXRpb24gd2hlbiBuZWNlc3NhcnkuIElmIHRoZVxuICogaW5mb3JtYXRpb24gaXMgdGhlcmUgYWxyZWFkeSwgaXQgd2lsbCBza2lwIG92ZXIgaXQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgdGhlIG91dHB1dCBzY3JpcHQgYW5kIHZhbHVlIGhhdmUgYWxyZWFkeSBiZWVuIHNldC5cbiAqXG4gKiBAcGFyYW0gcHNidCB0aGUgUFNCVCB0byB1cGRhdGUgY2hhbmdlIG91dHB1dCBhdFxuICogQHBhcmFtIHJvb3RXYWxsZXRLZXlzIGtleXMgdGhhdCB3aWxsIGJlIGFibGUgdG8gc3BlbmQgdGhlIG91dHB1dFxuICogQHBhcmFtIG91dHB1dEluZGV4IG91dHB1dCBpbmRleCB3aGVyZSB0byB1cGRhdGUgdGhlIG91dHB1dFxuICogQHBhcmFtIGNoYWluIGNoYWluIGNvZGUgdG8gdXNlIGZvciBkZXJpdmluZyBzY3JpcHRzIChhbmQgdG8gZGV0ZXJtaW5lIHNjcmlwdFxuICogICAgICAgICAgICAgIHR5cGUpIGNoYWluIGlzIGFuIEFQSSBwYXJhbWV0ZXIgaW4gdGhlIEJpdEdvIEFQSSwgYW5kIG1heSBiZVxuICogICAgICAgICAgICAgIGFueSB2YWxpZCBDaGFpbkNvZGVcbiAqIEBwYXJhbSBpbmRleCBkZXJpdmF0aW9uIGluZGV4IGZvciB0aGUgY2hhbmdlIGFkZHJlc3NcbiAqIEBwYXJhbSB2YWx1ZSB2YWx1ZSBvZiB0aGUgY2hhbmdlIG91dHB1dFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlV2FsbGV0T3V0cHV0Rm9yUHNidChcbiAgcHNidDogVXR4b1BzYnQsXG4gIHJvb3RXYWxsZXRLZXlzOiBSb290V2FsbGV0S2V5cyxcbiAgb3V0cHV0SW5kZXg6IG51bWJlcixcbiAgY2hhaW46IENoYWluQ29kZSxcbiAgaW5kZXg6IG51bWJlclxuKTogdm9pZCB7XG4gIGlmIChwc2J0LmRhdGEub3V0cHV0cy5sZW5ndGggPD0gb3V0cHV0SW5kZXgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgb3V0cHV0SW5kZXggKCR7b3V0cHV0SW5kZXh9KSBpcyB0b28gbGFyZ2UgZm9yIHRoZSBudW1iZXIgb2Ygb3V0cHV0cyAoJHtwc2J0LmRhdGEub3V0cHV0cy5sZW5ndGh9KWBcbiAgICApO1xuICB9XG5cbiAgY29uc3Qgb3V0cHV0U2NyaXB0ID0gcHNidC5nZXRPdXRwdXRTY3JpcHQob3V0cHV0SW5kZXgpO1xuXG4gIGNvbnN0IHdhbGxldEtleXMgPSByb290V2FsbGV0S2V5cy5kZXJpdmVGb3JDaGFpbkFuZEluZGV4KGNoYWluLCBpbmRleCk7XG4gIGNvbnN0IHNjcmlwdFR5cGUgPSBzY3JpcHRUeXBlRm9yQ2hhaW4oY2hhaW4pO1xuICBjb25zdCBvdXRwdXQgPSBwc2J0LmRhdGEub3V0cHV0c1tvdXRwdXRJbmRleF07XG4gIGNvbnN0IHVwZGF0ZTogUHNidE91dHB1dFVwZGF0ZSA9IHt9O1xuICBpZiAoc2NyaXB0VHlwZSA9PT0gJ3AydHInIHx8IHNjcmlwdFR5cGUgPT09ICdwMnRyTXVzaWcyJykge1xuICAgIGNvbnN0IHBheW1lbnQgPVxuICAgICAgc2NyaXB0VHlwZSA9PT0gJ3AydHInID8gY3JlYXRlUGF5bWVudFAydHIod2FsbGV0S2V5cy5wdWJsaWNLZXlzKSA6IGNyZWF0ZVBheW1lbnRQMnRyTXVzaWcyKHdhbGxldEtleXMucHVibGljS2V5cyk7XG4gICAgaWYgKCFwYXltZW50Lm91dHB1dCB8fCAhcGF5bWVudC5vdXRwdXQuZXF1YWxzKG91dHB1dFNjcmlwdCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgY2Fubm90IHVwZGF0ZSBhIHAydHIgb3V0cHV0IHdoZXJlIHRoZSBzY3JpcHRzIGRvIG5vdCBtYXRjaCAtIEZhaWxpbmcuYCk7XG4gICAgfVxuICAgIGNvbnN0IGFsbExlYWZIYXNoZXMgPSBwYXltZW50LnJlZGVlbXMhLm1hcCgocikgPT4gdGFwcm9vdC5oYXNoVGFwTGVhZihyLm91dHB1dCEpKTtcblxuICAgIGlmICghb3V0cHV0LnRhcFRyZWUpIHtcbiAgICAgIHVwZGF0ZS50YXBUcmVlID0gcGF5bWVudC50YXBUcmVlO1xuICAgIH1cbiAgICBpZiAoIW91dHB1dC50YXBJbnRlcm5hbEtleSkge1xuICAgICAgdXBkYXRlLnRhcEludGVybmFsS2V5ID0gcGF5bWVudC5pbnRlcm5hbFB1YmtleTtcbiAgICB9XG4gICAgaWYgKCFvdXRwdXQudGFwQmlwMzJEZXJpdmF0aW9uKSB7XG4gICAgICB1cGRhdGUudGFwQmlwMzJEZXJpdmF0aW9uID0gWzAsIDEsIDJdLm1hcCgoaWR4KSA9PiB7XG4gICAgICAgIGNvbnN0IHB1YmtleSA9IHRvWE9ubHlQdWJsaWNLZXkod2FsbGV0S2V5cy50cmlwbGVbaWR4XS5wdWJsaWNLZXkpO1xuICAgICAgICBjb25zdCBsZWFmSGFzaGVzOiBCdWZmZXJbXSA9IFtdO1xuICAgICAgICBwYXltZW50LnJlZGVlbXMhLmZvckVhY2goKHIsIGlkeCkgPT4ge1xuICAgICAgICAgIGlmIChyLnB1YmtleXMhLmZpbmQoKHBrKSA9PiBway5lcXVhbHMocHVia2V5KSkpIHtcbiAgICAgICAgICAgIGxlYWZIYXNoZXMucHVzaChhbGxMZWFmSGFzaGVzW2lkeF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGVhZkhhc2hlcyxcbiAgICAgICAgICBwdWJrZXksXG4gICAgICAgICAgcGF0aDogd2FsbGV0S2V5cy5wYXRoc1tpZHhdLFxuICAgICAgICAgIG1hc3RlckZpbmdlcnByaW50OiByb290V2FsbGV0S2V5cy50cmlwbGVbaWR4XS5maW5nZXJwcmludCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCB7IHNjcmlwdFB1YktleSwgd2l0bmVzc1NjcmlwdCwgcmVkZWVtU2NyaXB0IH0gPSBjcmVhdGVPdXRwdXRTY3JpcHQyb2YzKHdhbGxldEtleXMucHVibGljS2V5cywgc2NyaXB0VHlwZSk7XG4gICAgaWYgKCFzY3JpcHRQdWJLZXkuZXF1YWxzKG91dHB1dFNjcmlwdCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgY2Fubm90IHVwZGF0ZSBhbiBvdXRwdXQgd2hlcmUgdGhlIHNjcmlwdHMgZG8gbm90IG1hdGNoIC0gRmFpbGluZy5gKTtcbiAgICB9XG4gICAgaWYgKCFvdXRwdXQuYmlwMzJEZXJpdmF0aW9uKSB7XG4gICAgICB1cGRhdGUuYmlwMzJEZXJpdmF0aW9uID0gWzAsIDEsIDJdLm1hcCgoaWR4KSA9PiAoe1xuICAgICAgICBwdWJrZXk6IHdhbGxldEtleXMudHJpcGxlW2lkeF0ucHVibGljS2V5LFxuICAgICAgICBwYXRoOiB3YWxsZXRLZXlzLnBhdGhzW2lkeF0sXG4gICAgICAgIG1hc3RlckZpbmdlcnByaW50OiByb290V2FsbGV0S2V5cy50cmlwbGVbaWR4XS5maW5nZXJwcmludCxcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgaWYgKCFvdXRwdXQud2l0bmVzc1NjcmlwdCAmJiB3aXRuZXNzU2NyaXB0KSB7XG4gICAgICB1cGRhdGUud2l0bmVzc1NjcmlwdCA9IHdpdG5lc3NTY3JpcHQ7XG4gICAgfVxuICAgIGlmICghb3V0cHV0LnJlZGVlbVNjcmlwdCAmJiByZWRlZW1TY3JpcHQpIHtcbiAgICAgIHVwZGF0ZS5yZWRlZW1TY3JpcHQgPSByZWRlZW1TY3JpcHQ7XG4gICAgfVxuICB9XG4gIHBzYnQudXBkYXRlT3V0cHV0KG91dHB1dEluZGV4LCB1cGRhdGUpO1xufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiYWRkV2FsbGV0T3V0cHV0VG9Qc2J0IiwiY292XzJrZWdvdnRqa2EiLCJzIiwidXBkYXRlV2FsbGV0T3V0cHV0Rm9yUHNidCIsImJpdGNvaW5qc19saWJfMSIsInJlcXVpcmUiLCJjaGFpbnNfMSIsIm91dHB1dFNjcmlwdHNfMSIsInBzYnQiLCJyb290V2FsbGV0S2V5cyIsImNoYWluIiwiaW5kZXgiLCJ2YWx1ZSIsImYiLCJ3YWxsZXRLZXlzIiwiZGVyaXZlRm9yQ2hhaW5BbmRJbmRleCIsInNjcmlwdFR5cGUiLCJzY3JpcHRUeXBlRm9yQ2hhaW4iLCJiIiwicGF5bWVudCIsImNyZWF0ZVBheW1lbnRQMnRyIiwicHVibGljS2V5cyIsImNyZWF0ZVBheW1lbnRQMnRyTXVzaWcyIiwiYWRkT3V0cHV0Iiwic2NyaXB0Iiwib3V0cHV0Iiwic2NyaXB0UHViS2V5IiwiY3JlYXRlT3V0cHV0U2NyaXB0Mm9mMyIsImRhdGEiLCJvdXRwdXRzIiwibGVuZ3RoIiwib3V0cHV0SW5kZXgiLCJFcnJvciIsIm91dHB1dFNjcmlwdCIsImdldE91dHB1dFNjcmlwdCIsInVwZGF0ZSIsImVxdWFscyIsImFsbExlYWZIYXNoZXMiLCJyZWRlZW1zIiwibWFwIiwiciIsInRhcHJvb3QiLCJoYXNoVGFwTGVhZiIsInRhcFRyZWUiLCJ0YXBJbnRlcm5hbEtleSIsImludGVybmFsUHVia2V5IiwidGFwQmlwMzJEZXJpdmF0aW9uIiwiaWR4IiwicHVia2V5IiwidG9YT25seVB1YmxpY0tleSIsInRyaXBsZSIsInB1YmxpY0tleSIsImxlYWZIYXNoZXMiLCJmb3JFYWNoIiwicHVia2V5cyIsImZpbmQiLCJwayIsInB1c2giLCJwYXRoIiwicGF0aHMiLCJtYXN0ZXJGaW5nZXJwcmludCIsImZpbmdlcnByaW50Iiwid2l0bmVzc1NjcmlwdCIsInJlZGVlbVNjcmlwdCIsImJpcDMyRGVyaXZhdGlvbiIsInVwZGF0ZU91dHB1dCJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9xcm9jL0NvZGUvaGFwaS9jaGFpbmRlZnVzZXIvdXR4by1saWIvc3JjL2JpdGdvL3dhbGxldC9XYWxsZXRPdXRwdXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdGFwcm9vdCB9IGZyb20gJ2JpdGNvaW5qcy1saWInO1xuaW1wb3J0IHsgUHNidE91dHB1dFVwZGF0ZSB9IGZyb20gJ2JpcDE3NC9zcmMvbGliL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgVXR4b1BzYnQgfSBmcm9tICcuLi9VdHhvUHNidCc7XG5pbXBvcnQgeyBSb290V2FsbGV0S2V5cyB9IGZyb20gJy4vV2FsbGV0S2V5cyc7XG5pbXBvcnQgeyBDaGFpbkNvZGUsIHNjcmlwdFR5cGVGb3JDaGFpbiB9IGZyb20gJy4vY2hhaW5zJztcbmltcG9ydCB7IGNyZWF0ZU91dHB1dFNjcmlwdDJvZjMsIGNyZWF0ZVBheW1lbnRQMnRyLCBjcmVhdGVQYXltZW50UDJ0ck11c2lnMiwgdG9YT25seVB1YmxpY0tleSB9IGZyb20gJy4uL291dHB1dFNjcmlwdHMnO1xuXG4vKipcbiAqIEFkZCBhIHZlcmlmaWFibGUgd2FsbGV0IG91dHB1dCB0byB0aGUgUFNCVC4gVGhlIG91dHB1dCBhbmQgYWxsIGRhdGFcbiAqIG5lZWRlZCB0byB2ZXJpZnkgaXQgZnJvbSBwdWJsaWMga2V5cyBvbmx5IGFyZSBhZGRlZCB0byB0aGUgUFNCVC5cbiAqIFR5cGljYWxseSB0aGVzZSBhcmUgY2hhbmdlIG91dHB1dHMuXG4gKlxuICogQHBhcmFtIHBzYnQgdGhlIFBTQlQgdG8gYWRkIGNoYW5nZSBvdXRwdXQgdG9cbiAqIEBwYXJhbSByb290V2FsbGV0S2V5cyBrZXlzIHRoYXQgd2lsbCBiZSBhYmxlIHRvIHNwZW5kIHRoZSBvdXRwdXRcbiAqIEBwYXJhbSBjaGFpbiBjaGFpbiBjb2RlIHRvIHVzZSBmb3IgZGVyaXZpbmcgc2NyaXB0cyAoYW5kIHRvIGRldGVybWluZSBzY3JpcHRcbiAqICAgICAgICAgICAgICB0eXBlKSBjaGFpbiBpcyBhbiBBUEkgcGFyYW1ldGVyIGluIHRoZSBCaXRHbyBBUEksIGFuZCBtYXkgYmVcbiAqICAgICAgICAgICAgICBhbnkgdmFsaWQgQ2hhaW5Db2RlXG4gKiBAcGFyYW0gaW5kZXggZGVyaXZhdGlvbiBpbmRleCBmb3IgdGhlIGNoYW5nZSBhZGRyZXNzXG4gKiBAcGFyYW0gdmFsdWUgdmFsdWUgb2YgdGhlIGNoYW5nZSBvdXRwdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFdhbGxldE91dHB1dFRvUHNidChcbiAgcHNidDogVXR4b1BzYnQsXG4gIHJvb3RXYWxsZXRLZXlzOiBSb290V2FsbGV0S2V5cyxcbiAgY2hhaW46IENoYWluQ29kZSxcbiAgaW5kZXg6IG51bWJlcixcbiAgdmFsdWU6IGJpZ2ludFxuKTogdm9pZCB7XG4gIGNvbnN0IHdhbGxldEtleXMgPSByb290V2FsbGV0S2V5cy5kZXJpdmVGb3JDaGFpbkFuZEluZGV4KGNoYWluLCBpbmRleCk7XG4gIGNvbnN0IHNjcmlwdFR5cGUgPSBzY3JpcHRUeXBlRm9yQ2hhaW4oY2hhaW4pO1xuICBpZiAoc2NyaXB0VHlwZSA9PT0gJ3AydHInIHx8IHNjcmlwdFR5cGUgPT09ICdwMnRyTXVzaWcyJykge1xuICAgIGNvbnN0IHBheW1lbnQgPVxuICAgICAgc2NyaXB0VHlwZSA9PT0gJ3AydHInID8gY3JlYXRlUGF5bWVudFAydHIod2FsbGV0S2V5cy5wdWJsaWNLZXlzKSA6IGNyZWF0ZVBheW1lbnRQMnRyTXVzaWcyKHdhbGxldEtleXMucHVibGljS2V5cyk7XG4gICAgcHNidC5hZGRPdXRwdXQoeyBzY3JpcHQ6IHBheW1lbnQub3V0cHV0ISwgdmFsdWUgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgeyBzY3JpcHRQdWJLZXk6IHNjcmlwdCB9ID0gY3JlYXRlT3V0cHV0U2NyaXB0Mm9mMyh3YWxsZXRLZXlzLnB1YmxpY0tleXMsIHNjcmlwdFR5cGUpO1xuICAgIHBzYnQuYWRkT3V0cHV0KHsgc2NyaXB0LCB2YWx1ZSB9KTtcbiAgfVxuICB1cGRhdGVXYWxsZXRPdXRwdXRGb3JQc2J0KHBzYnQsIHJvb3RXYWxsZXRLZXlzLCBwc2J0LmRhdGEub3V0cHV0cy5sZW5ndGggLSAxLCBjaGFpbiwgaW5kZXgpO1xufVxuXG4vKipcbiAqIFVwZGF0ZSB0aGUgd2FsbGV0IG91dHB1dCB3aXRoIHRoZSByZXF1aXJlZCBpbmZvcm1hdGlvbiB3aGVuIG5lY2Vzc2FyeS4gSWYgdGhlXG4gKiBpbmZvcm1hdGlvbiBpcyB0aGVyZSBhbHJlYWR5LCBpdCB3aWxsIHNraXAgb3ZlciBpdC5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGFzc3VtZXMgdGhhdCB0aGUgb3V0cHV0IHNjcmlwdCBhbmQgdmFsdWUgaGF2ZSBhbHJlYWR5IGJlZW4gc2V0LlxuICpcbiAqIEBwYXJhbSBwc2J0IHRoZSBQU0JUIHRvIHVwZGF0ZSBjaGFuZ2Ugb3V0cHV0IGF0XG4gKiBAcGFyYW0gcm9vdFdhbGxldEtleXMga2V5cyB0aGF0IHdpbGwgYmUgYWJsZSB0byBzcGVuZCB0aGUgb3V0cHV0XG4gKiBAcGFyYW0gb3V0cHV0SW5kZXggb3V0cHV0IGluZGV4IHdoZXJlIHRvIHVwZGF0ZSB0aGUgb3V0cHV0XG4gKiBAcGFyYW0gY2hhaW4gY2hhaW4gY29kZSB0byB1c2UgZm9yIGRlcml2aW5nIHNjcmlwdHMgKGFuZCB0byBkZXRlcm1pbmUgc2NyaXB0XG4gKiAgICAgICAgICAgICAgdHlwZSkgY2hhaW4gaXMgYW4gQVBJIHBhcmFtZXRlciBpbiB0aGUgQml0R28gQVBJLCBhbmQgbWF5IGJlXG4gKiAgICAgICAgICAgICAgYW55IHZhbGlkIENoYWluQ29kZVxuICogQHBhcmFtIGluZGV4IGRlcml2YXRpb24gaW5kZXggZm9yIHRoZSBjaGFuZ2UgYWRkcmVzc1xuICogQHBhcmFtIHZhbHVlIHZhbHVlIG9mIHRoZSBjaGFuZ2Ugb3V0cHV0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVXYWxsZXRPdXRwdXRGb3JQc2J0KFxuICBwc2J0OiBVdHhvUHNidCxcbiAgcm9vdFdhbGxldEtleXM6IFJvb3RXYWxsZXRLZXlzLFxuICBvdXRwdXRJbmRleDogbnVtYmVyLFxuICBjaGFpbjogQ2hhaW5Db2RlLFxuICBpbmRleDogbnVtYmVyXG4pOiB2b2lkIHtcbiAgaWYgKHBzYnQuZGF0YS5vdXRwdXRzLmxlbmd0aCA8PSBvdXRwdXRJbmRleCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBvdXRwdXRJbmRleCAoJHtvdXRwdXRJbmRleH0pIGlzIHRvbyBsYXJnZSBmb3IgdGhlIG51bWJlciBvZiBvdXRwdXRzICgke3BzYnQuZGF0YS5vdXRwdXRzLmxlbmd0aH0pYFxuICAgICk7XG4gIH1cblxuICBjb25zdCBvdXRwdXRTY3JpcHQgPSBwc2J0LmdldE91dHB1dFNjcmlwdChvdXRwdXRJbmRleCk7XG5cbiAgY29uc3Qgd2FsbGV0S2V5cyA9IHJvb3RXYWxsZXRLZXlzLmRlcml2ZUZvckNoYWluQW5kSW5kZXgoY2hhaW4sIGluZGV4KTtcbiAgY29uc3Qgc2NyaXB0VHlwZSA9IHNjcmlwdFR5cGVGb3JDaGFpbihjaGFpbik7XG4gIGNvbnN0IG91dHB1dCA9IHBzYnQuZGF0YS5vdXRwdXRzW291dHB1dEluZGV4XTtcbiAgY29uc3QgdXBkYXRlOiBQc2J0T3V0cHV0VXBkYXRlID0ge307XG4gIGlmIChzY3JpcHRUeXBlID09PSAncDJ0cicgfHwgc2NyaXB0VHlwZSA9PT0gJ3AydHJNdXNpZzInKSB7XG4gICAgY29uc3QgcGF5bWVudCA9XG4gICAgICBzY3JpcHRUeXBlID09PSAncDJ0cicgPyBjcmVhdGVQYXltZW50UDJ0cih3YWxsZXRLZXlzLnB1YmxpY0tleXMpIDogY3JlYXRlUGF5bWVudFAydHJNdXNpZzIod2FsbGV0S2V5cy5wdWJsaWNLZXlzKTtcbiAgICBpZiAoIXBheW1lbnQub3V0cHV0IHx8ICFwYXltZW50Lm91dHB1dC5lcXVhbHMob3V0cHV0U2NyaXB0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBjYW5ub3QgdXBkYXRlIGEgcDJ0ciBvdXRwdXQgd2hlcmUgdGhlIHNjcmlwdHMgZG8gbm90IG1hdGNoIC0gRmFpbGluZy5gKTtcbiAgICB9XG4gICAgY29uc3QgYWxsTGVhZkhhc2hlcyA9IHBheW1lbnQucmVkZWVtcyEubWFwKChyKSA9PiB0YXByb290Lmhhc2hUYXBMZWFmKHIub3V0cHV0ISkpO1xuXG4gICAgaWYgKCFvdXRwdXQudGFwVHJlZSkge1xuICAgICAgdXBkYXRlLnRhcFRyZWUgPSBwYXltZW50LnRhcFRyZWU7XG4gICAgfVxuICAgIGlmICghb3V0cHV0LnRhcEludGVybmFsS2V5KSB7XG4gICAgICB1cGRhdGUudGFwSW50ZXJuYWxLZXkgPSBwYXltZW50LmludGVybmFsUHVia2V5O1xuICAgIH1cbiAgICBpZiAoIW91dHB1dC50YXBCaXAzMkRlcml2YXRpb24pIHtcbiAgICAgIHVwZGF0ZS50YXBCaXAzMkRlcml2YXRpb24gPSBbMCwgMSwgMl0ubWFwKChpZHgpID0+IHtcbiAgICAgICAgY29uc3QgcHVia2V5ID0gdG9YT25seVB1YmxpY0tleSh3YWxsZXRLZXlzLnRyaXBsZVtpZHhdLnB1YmxpY0tleSk7XG4gICAgICAgIGNvbnN0IGxlYWZIYXNoZXM6IEJ1ZmZlcltdID0gW107XG4gICAgICAgIHBheW1lbnQucmVkZWVtcyEuZm9yRWFjaCgociwgaWR4KSA9PiB7XG4gICAgICAgICAgaWYgKHIucHVia2V5cyEuZmluZCgocGspID0+IHBrLmVxdWFscyhwdWJrZXkpKSkge1xuICAgICAgICAgICAgbGVhZkhhc2hlcy5wdXNoKGFsbExlYWZIYXNoZXNbaWR4XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsZWFmSGFzaGVzLFxuICAgICAgICAgIHB1YmtleSxcbiAgICAgICAgICBwYXRoOiB3YWxsZXRLZXlzLnBhdGhzW2lkeF0sXG4gICAgICAgICAgbWFzdGVyRmluZ2VycHJpbnQ6IHJvb3RXYWxsZXRLZXlzLnRyaXBsZVtpZHhdLmZpbmdlcnByaW50LFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHsgc2NyaXB0UHViS2V5LCB3aXRuZXNzU2NyaXB0LCByZWRlZW1TY3JpcHQgfSA9IGNyZWF0ZU91dHB1dFNjcmlwdDJvZjMod2FsbGV0S2V5cy5wdWJsaWNLZXlzLCBzY3JpcHRUeXBlKTtcbiAgICBpZiAoIXNjcmlwdFB1YktleS5lcXVhbHMob3V0cHV0U2NyaXB0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBjYW5ub3QgdXBkYXRlIGFuIG91dHB1dCB3aGVyZSB0aGUgc2NyaXB0cyBkbyBub3QgbWF0Y2ggLSBGYWlsaW5nLmApO1xuICAgIH1cbiAgICBpZiAoIW91dHB1dC5iaXAzMkRlcml2YXRpb24pIHtcbiAgICAgIHVwZGF0ZS5iaXAzMkRlcml2YXRpb24gPSBbMCwgMSwgMl0ubWFwKChpZHgpID0+ICh7XG4gICAgICAgIHB1YmtleTogd2FsbGV0S2V5cy50cmlwbGVbaWR4XS5wdWJsaWNLZXksXG4gICAgICAgIHBhdGg6IHdhbGxldEtleXMucGF0aHNbaWR4XSxcbiAgICAgICAgbWFzdGVyRmluZ2VycHJpbnQ6IHJvb3RXYWxsZXRLZXlzLnRyaXBsZVtpZHhdLmZpbmdlcnByaW50LFxuICAgICAgfSkpO1xuICAgIH1cbiAgICBpZiAoIW91dHB1dC53aXRuZXNzU2NyaXB0ICYmIHdpdG5lc3NTY3JpcHQpIHtcbiAgICAgIHVwZGF0ZS53aXRuZXNzU2NyaXB0ID0gd2l0bmVzc1NjcmlwdDtcbiAgICB9XG4gICAgaWYgKCFvdXRwdXQucmVkZWVtU2NyaXB0ICYmIHJlZGVlbVNjcmlwdCkge1xuICAgICAgdXBkYXRlLnJlZGVlbVNjcmlwdCA9IHJlZGVlbVNjcmlwdDtcbiAgICB9XG4gIH1cbiAgcHNidC51cGRhdGVPdXRwdXQob3V0cHV0SW5kZXgsIHVwZGF0ZSk7XG59XG4iXSwibWFwcGluZ3MiOiI7b01Bb0JBQSxPQUFBLENBQUFDLHFCQUFBLENBQUFBLHFCQUFBLENBa0JDQyxjQUFBLEdBQUFDLENBQUEsTUFpQkRILE9BQUEsQ0FBQUkseUJBQUEsQ0FBQUEseUJBQUEsQ0F2REEsTUFBQUMs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