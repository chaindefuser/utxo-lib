{"version":3,"file":"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/templates/multisig/input.ts","sources":["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/templates/multisig/input.ts"],"names":[],"mappings":";AAAA,wBAAwB;;AAUxB,sBAUC;AAjBD,8BAA2C;AAC3C,8BAAiC;AAEjC,SAAS,gBAAgB,CAAC,KAAsB;IAC9C,OAAO,KAAK,KAAK,WAAO,CAAC,IAAI,IAAI,UAAO,CAAC,0BAA0B,CAAC,KAAe,CAAC,CAAC;AACvF,CAAC;AAED,SAAgB,KAAK,CAAC,MAAsB,EAAE,eAAyB;IACrE,MAAM,MAAM,GAAG,UAAO,CAAC,SAAS,CAAC,MAAM,CAAU,CAAC;IAClD,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC;QAAE,OAAO,KAAK,CAAC;IACpC,IAAI,MAAM,CAAC,CAAC,CAAC,KAAK,WAAO,CAAC,IAAI;QAAE,OAAO,KAAK,CAAC;IAE7C,IAAI,eAAe,EAAE,CAAC;QACpB,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;IACjD,CAAC;IAED,OAAQ,MAAM,CAAC,KAAK,CAAC,CAAC,CAAc,CAAC,KAAK,CAAC,UAAO,CAAC,0BAA0B,CAAC,CAAC;AACjF,CAAC;AACD,KAAK,CAAC,MAAM,GAAG,GAAW,EAAE;IAC1B,OAAO,gBAAgB,CAAC;AAC1B,CAAC,CAAC","sourcesContent":["// OP_0 [signatures ...]\n\nimport { Stack } from '../../';\nimport { script as bscript } from '../../';\nimport { opcodes } from '../../';\n\nfunction partialSignature(value: number | Buffer): boolean {\n  return value === opcodes.OP_0 || bscript.isCanonicalScriptSignature(value as Buffer);\n}\n\nexport function check(script: Buffer | Stack, allowIncomplete?: boolean): boolean {\n  const chunks = bscript.decompile(script) as Stack;\n  if (chunks.length < 2) return false;\n  if (chunks[0] !== opcodes.OP_0) return false;\n\n  if (allowIncomplete) {\n    return chunks.slice(1).every(partialSignature);\n  }\n\n  return (chunks.slice(1) as Buffer[]).every(bscript.isCanonicalScriptSignature);\n}\ncheck.toJSON = (): string => {\n  return 'multisig input';\n};\n"]}