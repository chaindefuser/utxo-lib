"use strict";function cov_bf0j09lql(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/bitcoincash/address.ts";var hash="af9bdbcff97a00be207a0c9ebd5b694057272c20";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/bitcoincash/address.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:30}},"2":{start:{line:4,column:0},end:{line:4,column:70}},"3":{start:{line:5,column:0},end:{line:5,column:70}},"4":{start:{line:6,column:0},end:{line:6,column:64}},"5":{start:{line:7,column:0},end:{line:7,column:60}},"6":{start:{line:21,column:20},end:{line:21,column:42}},"7":{start:{line:22,column:18},end:{line:22,column:42}},"8":{start:{line:23,column:19},end:{line:23,column:44}},"9":{start:{line:30,column:17},end:{line:30,column:41}},"10":{start:{line:31,column:4},end:{line:33,column:5}},"11":{start:{line:32,column:8},end:{line:32,column:56}},"12":{start:{line:34,column:4},end:{line:39,column:5}},"13":{start:{line:35,column:8},end:{line:35,column:37}},"14":{start:{line:38,column:8},end:{line:38,column:25}},"15":{start:{line:46,column:4},end:{line:57,column:5}},"16":{start:{line:48,column:12},end:{line:48,column:33}},"17":{start:{line:50,column:12},end:{line:50,column:29}},"18":{start:{line:52,column:12},end:{line:52,column:27}},"19":{start:{line:54,column:12},end:{line:54,column:28}},"20":{start:{line:56,column:12},end:{line:56,column:97}},"21":{start:{line:65,column:4},end:{line:67,column:5}},"22":{start:{line:66,column:8},end:{line:66,column:43}},"23":{start:{line:68,column:4},end:{line:76,column:5}},"24":{start:{line:72,column:21},end:{line:72,column:71}},"25":{start:{line:73,column:8},end:{line:75,column:9}},"26":{start:{line:74,column:12},end:{line:74,column:76}},"27":{start:{line:77,column:4},end:{line:77,column:65}},"28":{start:{line:85,column:4},end:{line:87,column:5}},"29":{start:{line:86,column:8},end:{line:86,column:43}},"30":{start:{line:88,column:4},end:{line:90,column:5}},"31":{start:{line:89,column:8},end:{line:89,column:40}},"32":{start:{line:91,column:4},end:{line:93,column:5}},"33":{start:{line:92,column:8},end:{line:92,column:60}},"34":{start:{line:94,column:4},end:{line:96,column:5}},"35":{start:{line:95,column:8},end:{line:95,column:53}},"36":{start:{line:97,column:20},end:{line:97,column:47}},"37":{start:{line:99,column:4},end:{line:108,column:5}},"38":{start:{line:101,column:12},end:{line:101,column:82}},"39":{start:{line:102,column:12},end:{line:102,column:18}},"40":{start:{line:104,column:12},end:{line:104,column:83}},"41":{start:{line:105,column:12},end:{line:105,column:18}},"42":{start:{line:107,column:12},end:{line:107,column:66}},"43":{start:{line:109,column:4},end:{line:111,column:5}},"44":{start:{line:110,column:8},end:{line:110,column:61}},"45":{start:{line:112,column:4},end:{line:112,column:24}},"46":{start:{line:121,column:4},end:{line:123,column:5}},"47":{start:{line:122,column:8},end:{line:122,column:43}},"48":{start:{line:124,column:4},end:{line:126,column:5}},"49":{start:{line:125,column:8},end:{line:125,column:68}},"50":{start:{line:127,column:4},end:{line:129,column:5}},"51":{start:{line:128,column:8},end:{line:128,column:73}},"52":{start:{line:130,column:4},end:{line:130,column:38}},"53":{start:{line:139,column:4},end:{line:141,column:5}},"54":{start:{line:140,column:8},end:{line:140,column:43}},"55":{start:{line:142,column:4},end:{line:144,column:5}},"56":{start:{line:143,column:8},end:{line:143,column:63}},"57":{start:{line:145,column:4},end:{line:147,column:5}},"58":{start:{line:146,column:8},end:{line:146,column:66}},"59":{start:{line:148,column:4},end:{line:148,column:38}}},fnMap:{"0":{name:"getHashFromOutputScript",decl:{start:{line:29,column:9},end:{line:29,column:32}},loc:{start:{line:29,column:47},end:{line:40,column:1}},line:29},"1":{name:"getPrefix",decl:{start:{line:45,column:9},end:{line:45,column:18}},loc:{start:{line:45,column:28},end:{line:58,column:1}},line:45},"2":{name:"fromOutputScriptToCashAddress",decl:{start:{line:64,column:9},end:{line:64,column:38}},loc:{start:{line:64,column:62},end:{line:78,column:1}},line:64},"3":{name:"toOutputScriptFromCashAddress",decl:{start:{line:84,column:9},end:{line:84,column:38}},loc:{start:{line:84,column:57},end:{line:113,column:1}},line:84},"4":{name:"fromOutputScriptWithFormat",decl:{start:{line:120,column:9},end:{line:120,column:35}},loc:{start:{line:120,column:67},end:{line:131,column:1}},line:120},"5":{name:"toOutputScriptWithFormat",decl:{start:{line:138,column:9},end:{line:138,column:33}},loc:{start:{line:138,column:60},end:{line:149,column:1}},line:138}},branchMap:{"0":{loc:{start:{line:31,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:31,column:4},end:{line:33,column:5}},{start:{line:31,column:4},end:{line:33,column:5}}],line:31},"1":{loc:{start:{line:46,column:4},end:{line:57,column:5}},type:"switch",locations:[{start:{line:47,column:8},end:{line:48,column:33}},{start:{line:49,column:8},end:{line:50,column:29}},{start:{line:51,column:8},end:{line:52,column:27}},{start:{line:53,column:8},end:{line:54,column:28}},{start:{line:55,column:8},end:{line:56,column:97}}],line:46},"2":{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:65,column:4},end:{line:67,column:5}}],line:65},"3":{loc:{start:{line:65,column:8},end:{line:65,column:84}},type:"binary-expr",locations:[{start:{line:65,column:8},end:{line:65,column:47}},{start:{line:65,column:51},end:{line:65,column:84}}],line:65},"4":{loc:{start:{line:73,column:8},end:{line:75,column:9}},type:"if",locations:[{start:{line:73,column:8},end:{line:75,column:9}},{start:{line:73,column:8},end:{line:75,column:9}}],line:73},"5":{loc:{start:{line:85,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:85,column:4},end:{line:87,column:5}},{start:{line:85,column:4},end:{line:87,column:5}}],line:85},"6":{loc:{start:{line:85,column:8},end:{line:85,column:84}},type:"binary-expr",locations:[{start:{line:85,column:8},end:{line:85,column:47}},{start:{line:85,column:51},end:{line:85,column:84}}],line:85},"7":{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:88,column:4},end:{line:90,column:5}}],line:88},"8":{loc:{start:{line:91,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:93,column:5}},{start:{line:91,column:4},end:{line:93,column:5}}],line:91},"9":{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:94,column:4},end:{line:96,column:5}}],line:94},"10":{loc:{start:{line:99,column:4},end:{line:108,column:5}},type:"switch",locations:[{start:{line:100,column:8},end:{line:102,column:18}},{start:{line:103,column:8},end:{line:105,column:18}},{start:{line:106,column:8},end:{line:107,column:66}}],line:99},"11":{loc:{start:{line:109,column:4},end:{line:111,column:5}},type:"if",locations:[{start:{line:109,column:4},end:{line:111,column:5}},{start:{line:109,column:4},end:{line:111,column:5}}],line:109},"12":{loc:{start:{line:121,column:4},end:{line:123,column:5}},type:"if",locations:[{start:{line:121,column:4},end:{line:123,column:5}},{start:{line:121,column:4},end:{line:123,column:5}}],line:121},"13":{loc:{start:{line:121,column:8},end:{line:121,column:84}},type:"binary-expr",locations:[{start:{line:121,column:8},end:{line:121,column:47}},{start:{line:121,column:51},end:{line:121,column:84}}],line:121},"14":{loc:{start:{line:124,column:4},end:{line:126,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:126,column:5}},{start:{line:124,column:4},end:{line:126,column:5}}],line:124},"15":{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:127,column:4},end:{line:129,column:5}}],line:127},"16":{loc:{start:{line:139,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:139,column:4},end:{line:141,column:5}},{start:{line:139,column:4},end:{line:141,column:5}}],line:139},"17":{loc:{start:{line:139,column:8},end:{line:139,column:84}},type:"binary-expr",locations:[{start:{line:139,column:8},end:{line:139,column:47}},{start:{line:139,column:51},end:{line:139,column:84}}],line:139},"18":{loc:{start:{line:142,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:142,column:4},end:{line:144,column:5}},{start:{line:142,column:4},end:{line:144,column:5}}],line:142},"19":{loc:{start:{line:145,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:145,column:4},end:{line:147,column:5}},{start:{line:145,column:4},end:{line:147,column:5}}],line:145}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0,0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/bitcoincash/address.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/bitcoincash/address.ts"],names:[],mappings:"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",sourcesContent:["/**\n * Wrapper around `cashaddress` library.\n *\n * Performs some address sanitation:\n * - add prefix if missing\n * - normalize to lower-case\n * - reject mixed-case\n *\n * Based on these documents\n *\n * - https://github.com/bitcoincashorg/bitcoincash.org/blob/master/spec/cashaddr.md\n * - https://www.bitcoinabc.org/cashaddr/\n */\nimport * as cashaddress from 'cashaddress';\nimport * as bitcoinjs from 'bitcoinjs-lib';\nimport { getNetworkName, isBitcoinCash, isECash, Network, networks } from '../../networks';\nimport { AddressFormat } from '../../addressFormat';\n\n/**\n * @param name\n * @param output\n * @return the encoded pubkeyhash or scripthash\n */\nfunction getHashFromOutputScript(name: string, output: Buffer): Buffer | undefined {\n  type PaymentFunc = ({ output }: { output: Buffer }) => bitcoinjs.Payment;\n  const func = (bitcoinjs.payments as unknown as Record<string, PaymentFunc>)[name];\n  if (!func) {\n    throw new Error(`no payment with name ${name}`);\n  }\n  try {\n    return func({ output }).hash;\n  } catch (e) {\n    return undefined;\n  }\n}\n\n/**\n * @param network\n * @return network-specific cashaddr prefix\n */\nexport function getPrefix(network: Network): string {\n  switch (network) {\n    case networks.bitcoincash:\n      return 'bitcoincash';\n    case networks.bitcoincashTestnet:\n      return 'bchtest';\n    case networks.ecash:\n      return 'ecash';\n    case networks.ecashTest:\n      return 'ectest';\n    default:\n      throw new Error(`unsupported prefix for ${getNetworkName(network)}`);\n  }\n}\n\n/**\n * @param outputScript\n * @param network\n * @return outputScript encoded as cashaddr (prefixed, lowercase)\n */\nexport function fromOutputScriptToCashAddress(outputScript: Buffer, network: Network): string {\n  if (!isBitcoinCash(network) && !isECash(network)) {\n    throw new Error(`invalid network`);\n  }\n  for (const [paymentName, scriptType] of [\n    ['p2pkh', 'pubkeyhash'],\n    ['p2sh', 'scripthash'],\n  ]) {\n    const hash = getHashFromOutputScript(paymentName, outputScript);\n    if (hash) {\n      return cashaddress.encode(getPrefix(network), scriptType as cashaddress.ScriptType, hash);\n    }\n  }\n  throw new Error(`could not determine hash for outputScript`);\n}\n\n/**\n * @param address - Accepts addresses with and without prefix. Accepts all-lowercase and all-uppercase addresses. Rejects mixed-case addresses.\n * @param network\n * @return decoded output script\n */\nexport function toOutputScriptFromCashAddress(address: string, network: Network): Buffer {\n  if (!isBitcoinCash(network) && !isECash(network)) {\n    throw new Error(`invalid network`);\n  }\n  if (address === address.toUpperCase()) {\n    address = address.toLowerCase();\n  }\n  if (address !== address.toLowerCase()) {\n    throw new Error(`mixed-case addresses not allowed`);\n  }\n  if (!address.startsWith(getPrefix(network) + ':')) {\n    address = `${getPrefix(network)}:${address}`;\n  }\n  const decoded = cashaddress.decode(address);\n  let outputScript: Buffer | undefined;\n  switch (decoded.version) {\n    case 'scripthash':\n      outputScript = bitcoinjs.payments.p2sh({ hash: decoded.hash }).output;\n      break;\n    case 'pubkeyhash':\n      outputScript = bitcoinjs.payments.p2pkh({ hash: decoded.hash }).output;\n      break;\n    default:\n      throw new Error(`unknown version ${decoded.version}`);\n  }\n  if (!outputScript) {\n    throw new Error(`could not determine output script`);\n  }\n  return outputScript;\n}\n\n/**\n * @param outputScript\n * @param format\n * @param network\n * @return address in specified format\n */\nexport function fromOutputScriptWithFormat(outputScript: Buffer, format: AddressFormat, network: Network): string {\n  if (!isBitcoinCash(network) && !isECash(network)) {\n    throw new Error(`invalid network`);\n  }\n\n  if (format === 'cashaddr') {\n    return fromOutputScriptToCashAddress(outputScript, network);\n  }\n\n  if (format === 'default') {\n    return bitcoinjs.address.fromOutputScript(outputScript, network as bitcoinjs.Network);\n  }\n\n  throw new Error(`invalid format`);\n}\n\n/**\n * @param address\n * @param format\n * @param network\n * @return output script from address in specified format\n */\nexport function toOutputScriptWithFormat(address: string, format: AddressFormat, network: Network): Buffer {\n  if (!isBitcoinCash(network) && !isECash(network)) {\n    throw new Error(`invalid network`);\n  }\n\n  if (format === 'cashaddr') {\n    return toOutputScriptFromCashAddress(address, network);\n  }\n\n  if (format === 'default') {\n    return bitcoinjs.address.toOutputScript(address, network as bitcoinjs.Network);\n  }\n\n  throw new Error(`invalid format`);\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"af9bdbcff97a00be207a0c9ebd5b694057272c20"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_bf0j09lql=function(){return actualCoverage;};}return actualCoverage;}cov_bf0j09lql();cov_bf0j09lql().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_bf0j09lql().s[1]++;exports.getPrefix=getPrefix;cov_bf0j09lql().s[2]++;exports.fromOutputScriptToCashAddress=fromOutputScriptToCashAddress;cov_bf0j09lql().s[3]++;exports.toOutputScriptFromCashAddress=toOutputScriptFromCashAddress;cov_bf0j09lql().s[4]++;exports.fromOutputScriptWithFormat=fromOutputScriptWithFormat;cov_bf0j09lql().s[5]++;exports.toOutputScriptWithFormat=toOutputScriptWithFormat;/**
 * Wrapper around `cashaddress` library.
 *
 * Performs some address sanitation:
 * - add prefix if missing
 * - normalize to lower-case
 * - reject mixed-case
 *
 * Based on these documents
 *
 * - https://github.com/bitcoincashorg/bitcoincash.org/blob/master/spec/cashaddr.md
 * - https://www.bitcoinabc.org/cashaddr/
 */const cashaddress=(cov_bf0j09lql().s[6]++,require("cashaddress"));const bitcoinjs=(cov_bf0j09lql().s[7]++,require("bitcoinjs-lib"));const networks_1=(cov_bf0j09lql().s[8]++,require("../../networks"));/**
 * @param name
 * @param output
 * @return the encoded pubkeyhash or scripthash
 */function getHashFromOutputScript(name,output){cov_bf0j09lql().f[0]++;const func=(cov_bf0j09lql().s[9]++,bitcoinjs.payments[name]);cov_bf0j09lql().s[10]++;if(!func){cov_bf0j09lql().b[0][0]++;cov_bf0j09lql().s[11]++;throw new Error(`no payment with name ${name}`);}else{cov_bf0j09lql().b[0][1]++;}cov_bf0j09lql().s[12]++;try{cov_bf0j09lql().s[13]++;return func({output}).hash;}catch(e){cov_bf0j09lql().s[14]++;return undefined;}}/**
 * @param network
 * @return network-specific cashaddr prefix
 */function getPrefix(network){cov_bf0j09lql().f[1]++;cov_bf0j09lql().s[15]++;switch(network){case networks_1.networks.bitcoincash:cov_bf0j09lql().b[1][0]++;cov_bf0j09lql().s[16]++;return'bitcoincash';case networks_1.networks.bitcoincashTestnet:cov_bf0j09lql().b[1][1]++;cov_bf0j09lql().s[17]++;return'bchtest';case networks_1.networks.ecash:cov_bf0j09lql().b[1][2]++;cov_bf0j09lql().s[18]++;return'ecash';case networks_1.networks.ecashTest:cov_bf0j09lql().b[1][3]++;cov_bf0j09lql().s[19]++;return'ectest';default:cov_bf0j09lql().b[1][4]++;cov_bf0j09lql().s[20]++;throw new Error(`unsupported prefix for ${(0,networks_1.getNetworkName)(network)}`);}}/**
 * @param outputScript
 * @param network
 * @return outputScript encoded as cashaddr (prefixed, lowercase)
 */function fromOutputScriptToCashAddress(outputScript,network){cov_bf0j09lql().f[2]++;cov_bf0j09lql().s[21]++;if((cov_bf0j09lql().b[3][0]++,!(0,networks_1.isBitcoinCash)(network))&&(cov_bf0j09lql().b[3][1]++,!(0,networks_1.isECash)(network))){cov_bf0j09lql().b[2][0]++;cov_bf0j09lql().s[22]++;throw new Error(`invalid network`);}else{cov_bf0j09lql().b[2][1]++;}cov_bf0j09lql().s[23]++;for(const[paymentName,scriptType]of[['p2pkh','pubkeyhash'],['p2sh','scripthash']]){const hash=(cov_bf0j09lql().s[24]++,getHashFromOutputScript(paymentName,outputScript));cov_bf0j09lql().s[25]++;if(hash){cov_bf0j09lql().b[4][0]++;cov_bf0j09lql().s[26]++;return cashaddress.encode(getPrefix(network),scriptType,hash);}else{cov_bf0j09lql().b[4][1]++;}}cov_bf0j09lql().s[27]++;throw new Error(`could not determine hash for outputScript`);}/**
 * @param address - Accepts addresses with and without prefix. Accepts all-lowercase and all-uppercase addresses. Rejects mixed-case addresses.
 * @param network
 * @return decoded output script
 */function toOutputScriptFromCashAddress(address,network){cov_bf0j09lql().f[3]++;cov_bf0j09lql().s[28]++;if((cov_bf0j09lql().b[6][0]++,!(0,networks_1.isBitcoinCash)(network))&&(cov_bf0j09lql().b[6][1]++,!(0,networks_1.isECash)(network))){cov_bf0j09lql().b[5][0]++;cov_bf0j09lql().s[29]++;throw new Error(`invalid network`);}else{cov_bf0j09lql().b[5][1]++;}cov_bf0j09lql().s[30]++;if(address===address.toUpperCase()){cov_bf0j09lql().b[7][0]++;cov_bf0j09lql().s[31]++;address=address.toLowerCase();}else{cov_bf0j09lql().b[7][1]++;}cov_bf0j09lql().s[32]++;if(address!==address.toLowerCase()){cov_bf0j09lql().b[8][0]++;cov_bf0j09lql().s[33]++;throw new Error(`mixed-case addresses not allowed`);}else{cov_bf0j09lql().b[8][1]++;}cov_bf0j09lql().s[34]++;if(!address.startsWith(getPrefix(network)+':')){cov_bf0j09lql().b[9][0]++;cov_bf0j09lql().s[35]++;address=`${getPrefix(network)}:${address}`;}else{cov_bf0j09lql().b[9][1]++;}const decoded=(cov_bf0j09lql().s[36]++,cashaddress.decode(address));let outputScript;cov_bf0j09lql().s[37]++;switch(decoded.version){case'scripthash':cov_bf0j09lql().b[10][0]++;cov_bf0j09lql().s[38]++;outputScript=bitcoinjs.payments.p2sh({hash:decoded.hash}).output;cov_bf0j09lql().s[39]++;break;case'pubkeyhash':cov_bf0j09lql().b[10][1]++;cov_bf0j09lql().s[40]++;outputScript=bitcoinjs.payments.p2pkh({hash:decoded.hash}).output;cov_bf0j09lql().s[41]++;break;default:cov_bf0j09lql().b[10][2]++;cov_bf0j09lql().s[42]++;throw new Error(`unknown version ${decoded.version}`);}cov_bf0j09lql().s[43]++;if(!outputScript){cov_bf0j09lql().b[11][0]++;cov_bf0j09lql().s[44]++;throw new Error(`could not determine output script`);}else{cov_bf0j09lql().b[11][1]++;}cov_bf0j09lql().s[45]++;return outputScript;}/**
 * @param outputScript
 * @param format
 * @param network
 * @return address in specified format
 */function fromOutputScriptWithFormat(outputScript,format,network){cov_bf0j09lql().f[4]++;cov_bf0j09lql().s[46]++;if((cov_bf0j09lql().b[13][0]++,!(0,networks_1.isBitcoinCash)(network))&&(cov_bf0j09lql().b[13][1]++,!(0,networks_1.isECash)(network))){cov_bf0j09lql().b[12][0]++;cov_bf0j09lql().s[47]++;throw new Error(`invalid network`);}else{cov_bf0j09lql().b[12][1]++;}cov_bf0j09lql().s[48]++;if(format==='cashaddr'){cov_bf0j09lql().b[14][0]++;cov_bf0j09lql().s[49]++;return fromOutputScriptToCashAddress(outputScript,network);}else{cov_bf0j09lql().b[14][1]++;}cov_bf0j09lql().s[50]++;if(format==='default'){cov_bf0j09lql().b[15][0]++;cov_bf0j09lql().s[51]++;return bitcoinjs.address.fromOutputScript(outputScript,network);}else{cov_bf0j09lql().b[15][1]++;}cov_bf0j09lql().s[52]++;throw new Error(`invalid format`);}/**
 * @param address
 * @param format
 * @param network
 * @return output script from address in specified format
 */function toOutputScriptWithFormat(address,format,network){cov_bf0j09lql().f[5]++;cov_bf0j09lql().s[53]++;if((cov_bf0j09lql().b[17][0]++,!(0,networks_1.isBitcoinCash)(network))&&(cov_bf0j09lql().b[17][1]++,!(0,networks_1.isECash)(network))){cov_bf0j09lql().b[16][0]++;cov_bf0j09lql().s[54]++;throw new Error(`invalid network`);}else{cov_bf0j09lql().b[16][1]++;}cov_bf0j09lql().s[55]++;if(format==='cashaddr'){cov_bf0j09lql().b[18][0]++;cov_bf0j09lql().s[56]++;return toOutputScriptFromCashAddress(address,network);}else{cov_bf0j09lql().b[18][1]++;}cov_bf0j09lql().s[57]++;if(format==='default'){cov_bf0j09lql().b[19][0]++;cov_bf0j09lql().s[58]++;return bitcoinjs.address.toOutputScript(address,network);}else{cov_bf0j09lql().b[19][1]++;}cov_bf0j09lql().s[59]++;throw new Error(`invalid format`);}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vYml0Y29pbmNhc2gvYWRkcmVzcy50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vYml0Y29pbmNhc2gvYWRkcmVzcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQXdDQSw4QkFhQztBQU9ELHNFQWNDO0FBT0Qsc0VBNkJDO0FBUUQsZ0VBY0M7QUFRRCw0REFjQztBQTFKRDs7Ozs7Ozs7Ozs7O0dBWUc7QUFDSCwyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDZDQUEyRjtBQUczRjs7OztHQUlHO0FBQ0gsU0FBUyx1QkFBdUIsQ0FBQyxJQUFZLEVBQUUsTUFBYztJQUUzRCxNQUFNLElBQUksR0FBSSxTQUFTLENBQUMsUUFBbUQsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsRixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDVixNQUFNLElBQUksS0FBSyxDQUFDLHdCQUF3QixJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFDRCxJQUFJLENBQUM7UUFDSCxPQUFPLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQy9CLENBQUM7SUFBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ1gsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQztBQUNILENBQUM7QUFFRDs7O0dBR0c7QUFDSCxTQUFnQixTQUFTLENBQUMsT0FBZ0I7SUFDeEMsUUFBUSxPQUFPLEVBQUUsQ0FBQztRQUNoQixLQUFLLG1CQUFRLENBQUMsV0FBVztZQUN2QixPQUFPLGFBQWEsQ0FBQztRQUN2QixLQUFLLG1CQUFRLENBQUMsa0JBQWtCO1lBQzlCLE9BQU8sU0FBUyxDQUFDO1FBQ25CLEtBQUssbUJBQVEsQ0FBQyxLQUFLO1lBQ2pCLE9BQU8sT0FBTyxDQUFDO1FBQ2pCLEtB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QUFJLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3BDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFdyYXBwZXIgYXJvdW5kIGBjYXNoYWRkcmVzc2AgbGlicmFyeS5cbiAqXG4gKiBQZXJmb3JtcyBzb21lIGFkZHJlc3Mgc2FuaXRhdGlvbjpcbiAqIC0gYWRkIHByZWZpeCBpZiBtaXNzaW5nXG4gKiAtIG5vcm1hbGl6ZSB0byBsb3dlci1jYXNlXG4gKiAtIHJlamVjdCBtaXhlZC1jYXNlXG4gKlxuICogQmFzZWQgb24gdGhlc2UgZG9jdW1lbnRzXG4gKlxuICogLSBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbmNhc2hvcmcvYml0Y29pbmNhc2gub3JnL2Jsb2IvbWFzdGVyL3NwZWMvY2FzaGFkZHIubWRcbiAqIC0gaHR0cHM6Ly93d3cuYml0Y29pbmFiYy5vcmcvY2FzaGFkZHIvXG4gKi9cbmltcG9ydCAqIGFzIGNhc2hhZGRyZXNzIGZyb20gJ2Nhc2hhZGRyZXNzJztcbmltcG9ydCAqIGFzIGJpdGNvaW5qcyBmcm9tICdiaXRjb2luanMtbGliJztcbmltcG9ydCB7IGdldE5ldHdvcmtOYW1lLCBpc0JpdGNvaW5DYXNoLCBpc0VDYXNoLCBOZXR3b3JrLCBuZXR3b3JrcyB9IGZyb20gJy4uLy4uL25ldHdvcmtzJztcbmltcG9ydCB7IEFkZHJlc3NGb3JtYXQgfSBmcm9tICcuLi8uLi9hZGRyZXNzRm9ybWF0JztcblxuLyoqXG4gKiBAcGFyYW0gbmFtZVxuICogQHBhcmFtIG91dHB1dFxuICogQHJldHVybiB0aGUgZW5jb2RlZCBwdWJrZXloYXNoIG9yIHNjcmlwdGhhc2hcbiAqL1xuZnVuY3Rpb24gZ2V0SGFzaEZyb21PdXRwdXRTY3JpcHQobmFtZTogc3RyaW5nLCBvdXRwdXQ6IEJ1ZmZlcik6IEJ1ZmZlciB8IHVuZGVmaW5lZCB7XG4gIHR5cGUgUGF5bWVudEZ1bmMgPSAoeyBvdXRwdXQgfTogeyBvdXRwdXQ6IEJ1ZmZlciB9KSA9PiBiaXRjb2luanMuUGF5bWVudDtcbiAgY29uc3QgZnVuYyA9IChiaXRjb2luanMucGF5bWVudHMgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCBQYXltZW50RnVuYz4pW25hbWVdO1xuICBpZiAoIWZ1bmMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYG5vIHBheW1lbnQgd2l0aCBuYW1lICR7bmFtZX1gKTtcbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBmdW5jKHsgb3V0cHV0IH0pLmhhc2g7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIG5ldHdvcmtcbiAqIEByZXR1cm4gbmV0d29yay1zcGVjaWZpYyBjYXNoYWRkciBwcmVmaXhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByZWZpeChuZXR3b3JrOiBOZXR3b3JrKTogc3RyaW5nIHtcbiAgc3dpdGNoIChuZXR3b3JrKSB7XG4gICAgY2FzZSBuZXR3b3Jrcy5iaXRjb2luY2FzaDpcbiAgICAgIHJldHVybiAnYml0Y29pbmNhc2gnO1xuICAgIGNhc2UgbmV0d29ya3MuYml0Y29pbmNhc2hUZXN0bmV0OlxuICAgICAgcmV0dXJuICdiY2h0ZXN0JztcbiAgICBjYXNlIG5ldHdvcmtzLmVjYXNoOlxuICAgICAgcmV0dXJuICdlY2FzaCc7XG4gICAgY2FzZSBuZXR3b3Jrcy5lY2FzaFRlc3Q6XG4gICAgICByZXR1cm4gJ2VjdGVzdCc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5zdXBwb3J0ZWQgcHJlZml4IGZvciAke2dldE5ldHdvcmtOYW1lKG5ldHdvcmspfWApO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIG91dHB1dFNjcmlwdFxuICogQHBhcmFtIG5ldHdvcmtcbiAqIEByZXR1cm4gb3V0cHV0U2NyaXB0IGVuY29kZWQgYXMgY2FzaGFkZHIgKHByZWZpeGVkLCBsb3dlcmNhc2UpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tT3V0cHV0U2NyaXB0VG9DYXNoQWRkcmVzcyhvdXRwdXRTY3JpcHQ6IEJ1ZmZlciwgbmV0d29yazogTmV0d29yayk6IHN0cmluZyB7XG4gIGlmICghaXNCaXRjb2luQ2FzaChuZXR3b3JrKSAmJiAhaXNFQ2FzaChuZXR3b3JrKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBuZXR3b3JrYCk7XG4gIH1cbiAgZm9yIChjb25zdCBbcGF5bWVudE5hbWUsIHNjcmlwdFR5cGVdIG9mIFtcbiAgICBbJ3AycGtoJywgJ3B1YmtleWhhc2gnXSxcbiAgICBbJ3Ayc2gnLCAnc2NyaXB0aGFzaCddLFxuICBdKSB7XG4gICAgY29uc3QgaGFzaCA9IGdldEhhc2hGcm9tT3V0cHV0U2NyaXB0KHBheW1lbnROYW1lLCBvdXRwdXRTY3JpcHQpO1xuICAgIGlmIChoYXNoKSB7XG4gICAgICByZXR1cm4gY2FzaGFkZHJlc3MuZW5jb2RlKGdldFByZWZpeChuZXR3b3JrKSwgc2NyaXB0VHlwZSBhcyBjYXNoYWRkcmVzcy5TY3JpcHRUeXBlLCBoYXNoKTtcbiAgICB9XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBjb3VsZCBub3QgZGV0ZXJtaW5lIGhhc2ggZm9yIG91dHB1dFNjcmlwdGApO1xufVxuXG4vKipcbiAqIEBwYXJhbSBhZGRyZXNzIC0gQWNjZXB0cyBhZGRyZXNzZXMgd2l0aCBhbmQgd2l0aG91dCBwcmVmaXguIEFjY2VwdHMgYWxsLWxvd2VyY2FzZSBhbmQgYWxsLXVwcGVyY2FzZSBhZGRyZXNzZXMuIFJlamVjdHMgbWl4ZWQtY2FzZSBhZGRyZXNzZXMuXG4gKiBAcGFyYW0gbmV0d29ya1xuICogQHJldHVybiBkZWNvZGVkIG91dHB1dCBzY3JpcHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvT3V0cHV0U2NyaXB0RnJvbUNhc2hBZGRyZXNzKGFkZHJlc3M6IHN0cmluZywgbmV0d29yazogTmV0d29yayk6IEJ1ZmZlciB7XG4gIGlmICghaXNCaXRjb2luQ2FzaChuZXR3b3JrKSAmJiAhaXNFQ2FzaChuZXR3b3JrKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBuZXR3b3JrYCk7XG4gIH1cbiAgaWYgKGFkZHJlc3MgPT09IGFkZHJlc3MudG9VcHBlckNhc2UoKSkge1xuICAgIGFkZHJlc3MgPSBhZGRyZXNzLnRvTG93ZXJDYXNlKCk7XG4gIH1cbiAgaWYgKGFkZHJlc3MgIT09IGFkZHJlc3MudG9Mb3dlckNhc2UoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgbWl4ZWQtY2FzZSBhZGRyZXNzZXMgbm90IGFsbG93ZWRgKTtcbiAgfVxuICBpZiAoIWFkZHJlc3Muc3RhcnRzV2l0aChnZXRQcmVmaXgobmV0d29yaykgKyAnOicpKSB7XG4gICAgYWRkcmVzcyA9IGAke2dldFByZWZpeChuZXR3b3JrKX06JHthZGRyZXNzfWA7XG4gIH1cbiAgY29uc3QgZGVjb2RlZCA9IGNhc2hhZGRyZXNzLmRlY29kZShhZGRyZXNzKTtcbiAgbGV0IG91dHB1dFNjcmlwdDogQnVmZmVyIHwgdW5kZWZpbmVkO1xuICBzd2l0Y2ggKGRlY29kZWQudmVyc2lvbikge1xuICAgIGNhc2UgJ3NjcmlwdGhhc2gnOlxuICAgICAgb3V0cHV0U2NyaXB0ID0gYml0Y29pbmpzLnBheW1lbnRzLnAyc2goeyBoYXNoOiBkZWNvZGVkLmhhc2ggfSkub3V0cHV0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAncHVia2V5aGFzaCc6XG4gICAgICBvdXRwdXRTY3JpcHQgPSBiaXRjb2luanMucGF5bWVudHMucDJwa2goeyBoYXNoOiBkZWNvZGVkLmhhc2ggfSkub3V0cHV0O1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biB2ZXJzaW9uICR7ZGVjb2RlZC52ZXJzaW9ufWApO1xuICB9XG4gIGlmICghb3V0cHV0U2NyaXB0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBjb3VsZCBub3QgZGV0ZXJtaW5lIG91dHB1dCBzY3JpcHRgKTtcbiAgfVxuICByZXR1cm4gb3V0cHV0U2NyaXB0O1xufVxuXG4vKipcbiAqIEBwYXJhbSBvdXRwdXRTY3JpcHRcbiAqIEBwYXJhbSBmb3JtYXRcbiAqIEBwYXJhbSBuZXR3b3JrXG4gKiBAcmV0dXJuIGFkZHJlc3MgaW4gc3BlY2lmaWVkIGZvcm1hdFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbU91dHB1dFNjcmlwdFdpdGhGb3JtYXQob3V0cHV0U2NyaXB0OiBCdWZmZXIsIGZvcm1hdDogQWRkcmVzc0Zvcm1hdCwgbmV0d29yazogTmV0d29yayk6IHN0cmluZyB7XG4gIGlmICghaXNCaXRjb2luQ2FzaChuZXR3b3JrKSAmJiAhaXNFQ2FzaChuZXR3b3JrKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBuZXR3b3JrYCk7XG4gIH1cblxuICBpZiAoZm9ybWF0ID09PSAnY2FzaGFkZHInKSB7XG4gICAgcmV0dXJuIGZyb21PdXRwdXRTY3JpcHRUb0Nhc2hBZGRyZXNzKG91dHB1dFNjcmlwdCwgbmV0d29yayk7XG4gIH1cblxuICBpZiAoZm9ybWF0ID09PSAnZGVmYXVsdCcpIHtcbiAgICByZXR1cm4gYml0Y29pbmpzLmFkZHJlc3MuZnJvbU91dHB1dFNjcmlwdChvdXRwdXRTY3JpcHQsIG5ldHdvcmsgYXMgYml0Y29pbmpzLk5ldHdvcmspO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGZvcm1hdGApO1xufVxuXG4vKipcbiAqIEBwYXJhbSBhZGRyZXNzXG4gKiBAcGFyYW0gZm9ybWF0XG4gKiBAcGFyYW0gbmV0d29ya1xuICogQHJldHVybiBvdXRwdXQgc2NyaXB0IGZyb20gYWRkcmVzcyBpbiBzcGVjaWZpZWQgZm9ybWF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b091dHB1dFNjcmlwdFdpdGhGb3JtYXQoYWRkcmVzczogc3RyaW5nLCBmb3JtYXQ6IEFkZHJlc3NGb3JtYXQsIG5ldHdvcms6IE5ldHdvcmspOiBCdWZmZXIge1xuICBpZiAoIWlzQml0Y29pbkNhc2gobmV0d29yaykgJiYgIWlzRUNhc2gobmV0d29yaykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgbmV0d29ya2ApO1xuICB9XG5cbiAgaWYgKGZvcm1hdCA9PT0gJ2Nhc2hhZGRyJykge1xuICAgIHJldHVybiB0b091dHB1dFNjcmlwdEZyb21DYXNoQWRkcmVzcyhhZGRyZXNzLCBuZXR3b3JrKTtcbiAgfVxuXG4gIGlmIChmb3JtYXQgPT09ICdkZWZhdWx0Jykge1xuICAgIHJldHVybiBiaXRjb2luanMuYWRkcmVzcy50b091dHB1dFNjcmlwdChhZGRyZXNzLCBuZXR3b3JrIGFzIGJpdGNvaW5qcy5OZXR3b3JrKTtcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBmb3JtYXRgKTtcbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0UHJlZml4IiwiY292X2JmMGowOWxxbCIsInMiLCJmcm9tT3V0cHV0U2NyaXB0VG9DYXNoQWRkcmVzcyIsInRvT3V0cHV0U2NyaXB0RnJvbUNhc2hBZGRyZXNzIiwiZnJvbU91dHB1dFNjcmlwdFdpdGhGb3JtYXQiLCJ0b091dHB1dFNjcmlwdFdpdGhGb3JtYXQiLCJjYXNoYWRkcmVzcyIsInJlcXVpcmUiLCJiaXRjb2luanMiLCJuZXR3b3Jrc18xIiwiZ2V0SGFzaEZyb21PdXRwdXRTY3JpcHQiLCJuYW1lIiwib3V0cHV0IiwiZiIsImZ1bmMiLCJwYXltZW50cyIsImIiLCJFcnJvciIsImhhc2giLCJlIiwidW5kZWZpbmVkIiwibmV0d29yayIsIm5ldHdvcmtzIiwiYml0Y29pbmNhc2giLCJiaXRjb2luY2FzaFRlc3RuZXQiLCJlY2FzaCIsImVjYXNoVGVzdCIsImdldE5ldHdvcmtOYW1lIiwib3V0cHV0U2NyaXB0IiwiaXNCaXRjb2luQ2FzaCIsImlzRUNhc2giLCJwYXltZW50TmFtZSIsInNjcmlwdFR5cGUiLCJlbmNvZGUiLCJhZGRyZXNzIiwidG9VcHBlckNhc2UiLCJ0b0xvd2VyQ2FzZSIsInN0YXJ0c1dpdGgiLCJkZWNvZGVkIiwiZGVjb2RlIiwidmVyc2lvbiIsInAyc2giLCJwMnBraCIsImZvcm1hdCIsImZyb21PdXRwdXRTY3JpcHQiLCJ0b091dHB1dFNjcmlwdCJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9xcm9jL0NvZGUvaGFwaS9jaGFpbmRlZnVzZXIvdXR4by1saWIvc3JjL2JpdGdvL2JpdGNvaW5jYXNoL2FkZHJlc3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBgY2FzaGFkZHJlc3NgIGxpYnJhcnkuXG4gKlxuICogUGVyZm9ybXMgc29tZSBhZGRyZXNzIHNhbml0YXRpb246XG4gKiAtIGFkZCBwcmVmaXggaWYgbWlzc2luZ1xuICogLSBub3JtYWxpemUgdG8gbG93ZXItY2FzZVxuICogLSByZWplY3QgbWl4ZWQtY2FzZVxuICpcbiAqIEJhc2VkIG9uIHRoZXNlIGRvY3VtZW50c1xuICpcbiAqIC0gaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW5jYXNob3JnL2JpdGNvaW5jYXNoLm9yZy9ibG9iL21hc3Rlci9zcGVjL2Nhc2hhZGRyLm1kXG4gKiAtIGh0dHBzOi8vd3d3LmJpdGNvaW5hYmMub3JnL2Nhc2hhZGRyL1xuICovXG5pbXBvcnQgKiBhcyBjYXNoYWRkcmVzcyBmcm9tICdjYXNoYWRkcmVzcyc7XG5pbXBvcnQgKiBhcyBiaXRjb2luanMgZnJvbSAnYml0Y29pbmpzLWxpYic7XG5pbXBvcnQgeyBnZXROZXR3b3JrTmFtZSwgaXNCaXRjb2luQ2FzaCwgaXNFQ2FzaCwgTmV0d29yaywgbmV0d29ya3MgfSBmcm9tICcuLi8uLi9uZXR3b3Jrcyc7XG5pbXBvcnQgeyBBZGRyZXNzRm9ybWF0IH0gZnJvbSAnLi4vLi4vYWRkcmVzc0Zvcm1hdCc7XG5cbi8qKlxuICogQHBhcmFtIG5hbWVcbiAqIEBwYXJhbSBvdXRwdXRcbiAqIEByZXR1cm4gdGhlIGVuY29kZWQgcHVia2V5aGFzaCBvciBzY3JpcHRoYXNoXG4gKi9cbmZ1bmN0aW9uIGdldEhhc2hGcm9tT3V0cHV0U2NyaXB0KG5hbWU6IHN0cmluZywgb3V0cHV0OiBCdWZmZXIpOiBCdWZmZXIgfCB1bmRlZmluZWQge1xuICB0eXBlIFBheW1lbnRGdW5jID0gKHsgb3V0cHV0IH06IHsgb3V0cHV0OiBCdWZmZXIgfSkgPT4gYml0Y29pbmpzLlBheW1lbnQ7XG4gIGNvbnN0IGZ1bmMgPSAoYml0Y29pbmpzLnBheW1lbnRzIGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgUGF5bWVudEZ1bmM+KVtuYW1lXTtcbiAgaWYgKCFmdW5jKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBubyBwYXltZW50IHdpdGggbmFtZSAke25hbWV9YCk7XG4gIH1cbiAgdHJ5IHtcbiAgICByZXR1cm4gZnVuYyh7IG91dHB1dCB9KS5oYXNoO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSBuZXR3b3JrXG4gKiBAcmV0dXJuIG5ldHdvcmstc3BlY2lmaWMgY2FzaGFkZHIgcHJlZml4XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmVmaXgobmV0d29yazogTmV0d29yayk6IHN0cmluZyB7XG4gIHN3aXRjaCAobmV0d29yaykge1xuICAgIGNhc2UgbmV0d29ya3MuYml0Y29pbmNhc2g6XG4gICAgICByZXR1cm4gJ2JpdGNvaW5jYXNoJztcbiAgICBjYXNlIG5ldHdvcmtzLmJpdGNvaW5jYXNoVGVzdG5ldDpcbiAgICAgIHJldHVybiAnYmNodGVzdCc7XG4gICAgY2FzZSBuZXR3b3Jrcy5lY2FzaDpcbiAgICAgIHJldHVybiAnZWNhc2gnO1xuICAgIGNhc2UgbmV0d29ya3MuZWNhc2hUZXN0OlxuICAgICAgcmV0dXJuICdlY3Rlc3QnO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHVuc3VwcG9ydGVkIHByZWZpeCBmb3IgJHtnZXROZXR3b3JrTmFtZShuZXR3b3JrKX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSBvdXRwdXRTY3JpcHRcbiAqIEBwYXJhbSBuZXR3b3JrXG4gKiBAcmV0dXJuIG91dHB1dFNjcmlwdCBlbmNvZGVkIGFzIGNhc2hhZGRyIChwcmVmaXhlZCwgbG93ZXJjYXNlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbU91dHB1dFNjcmlwdFRvQ2FzaEFkZHJlc3Mob3V0cHV0U2NyaXB0OiBCdWZmZXIsIG5ldHdvcms6IE5ldHdvcmspOiBzdHJpbmcge1xuICBpZiAoIWlzQml0Y29pbkNhc2gobmV0d29yaykgJiYgIWlzRUNhc2gobmV0d29yaykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgbmV0d29ya2ApO1xuICB9XG4gIGZvciAoY29uc3QgW3BheW1lbnROYW1lLCBzY3JpcHRUeXBlXSBvZiBbXG4gICAgWydwMnBraCcsICdwdWJrZXloYXNoJ10sXG4gICAgWydwMnNoJywgJ3NjcmlwdGhhc2gnXSxcbiAgXSkge1xuICAgIGNvbnN0IGhhc2ggPSBnZXRIYXNoRnJvbU91dHB1dFNjcmlwdChwYXltZW50TmFtZSwgb3V0cHV0U2NyaXB0KTtcbiAgICBpZiAoaGFzaCkge1xuICAgICAgcmV0dXJuIGNhc2hhZGRyZXNzLmVuY29kZShnZXRQcmVmaXgobmV0d29yayksIHNjcmlwdFR5cGUgYXMgY2FzaGFkZHJlc3MuU2NyaXB0VHlwZSwgaGFzaCk7XG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBFcnJvcihgY291bGQgbm90IGRldGVybWluZSBoYXNoIGZvciBvdXRwdXRTY3JpcHRgKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gYWRkcmVzcyAtIEFjY2VwdHMgYWRkcmVzc2VzIHdpdGggYW5kIHdpdGhvdXQgcHJlZml4LiBBY2NlcHRzIGFsbC1sb3dlcmNhc2UgYW5kIGFsbC11cHBlcmNhc2UgYWRkcmVzc2VzLiBSZWplY3RzIG1peGVkLWNhc2UgYWRkcmVzc2VzLlxuICogQHBhcmFtIG5ldHdvcmtcbiAqIEByZXR1cm4gZGVjb2RlZCBvdXRwdXQgc2NyaXB0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b091dHB1dFNjcmlwdEZyb21DYXNoQWRkcmVzcyhhZGRyZXNzOiBzdHJpbmcsIG5ldHdvcms6IE5ldHdvcmspOiBCdWZmZXIge1xuICBpZiAoIWlzQml0Y29pbkNhc2gobmV0d29yaykgJiYgIWlzRUNhc2gobmV0d29yaykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgbmV0d29ya2ApO1xuICB9XG4gIGlmIChhZGRyZXNzID09PSBhZGRyZXNzLnRvVXBwZXJDYXNlKCkpIHtcbiAgICBhZGRyZXNzID0gYWRkcmVzcy50b0xvd2VyQ2FzZSgpO1xuICB9XG4gIGlmIChhZGRyZXNzICE9PSBhZGRyZXNzLnRvTG93ZXJDYXNlKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYG1peGVkLWNhc2UgYWRkcmVzc2VzIG5vdCBhbGxvd2VkYCk7XG4gIH1cbiAgaWYgKCFhZGRyZXNzLnN0YXJ0c1dpdGgoZ2V0UHJlZml4KG5ldHdvcmspICsgJzonKSkge1xuICAgIGFkZHJlc3MgPSBgJHtnZXRQcmVmaXgobmV0d29yayl9OiR7YWRkcmVzc31gO1xuICB9XG4gIGNvbnN0IGRlY29kZWQgPSBjYXNoYWRkcmVzcy5kZWNvZGUoYWRkcmVzcyk7XG4gIGxldCBvdXRwdXRTY3JpcHQ6IEJ1ZmZlciB8IHVuZGVmaW5lZDtcbiAgc3dpdGNoIChkZWNvZGVkLnZlcnNpb24pIHtcbiAgICBjYXNlICdzY3JpcHRoYXNoJzpcbiAgICAgIG91dHB1dFNjcmlwdCA9IGJpdGNvaW5qcy5wYXltZW50cy5wMnNoKHsgaGFzaDogZGVjb2RlZC5oYXNoIH0pLm91dHB1dDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3B1YmtleWhhc2gnOlxuICAgICAgb3V0cHV0U2NyaXB0ID0gYml0Y29pbmpzLnBheW1lbnRzLnAycGtoKHsgaGFzaDogZGVjb2RlZC5oYXNoIH0pLm91dHB1dDtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gdmVyc2lvbiAke2RlY29kZWQudmVyc2lvbn1gKTtcbiAgfVxuICBpZiAoIW91dHB1dFNjcmlwdCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgY291bGQgbm90IGRldGVybWluZSBvdXRwdXQgc2NyaXB0YCk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dFNjcmlwdDtcbn1cblxuLyoqXG4gKiBAcGFyYW0gb3V0cHV0U2NyaXB0XG4gKiBAcGFyYW0gZm9ybWF0XG4gKiBAcGFyYW0gbmV0d29ya1xuICogQHJldHVybiBhZGRyZXNzIGluIHNwZWNpZmllZCBmb3JtYXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21PdXRwdXRTY3JpcHRXaXRoRm9ybWF0KG91dHB1dFNjcmlwdDogQnVmZmVyLCBmb3JtYXQ6IEFkZHJlc3NGb3JtYXQsIG5ldHdvcms6IE5ldHdvcmspOiBzdHJpbmcge1xuICBpZiAoIWlzQml0Y29pbkNhc2gobmV0d29yaykgJiYgIWlzRUNhc2gobmV0d29yaykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgbmV0d29ya2ApO1xuICB9XG5cbiAgaWYgKGZvcm1hdCA9PT0gJ2Nhc2hhZGRyJykge1xuICAgIHJldHVybiBmcm9tT3V0cHV0U2NyaXB0VG9DYXNoQWRkcmVzcyhvdXRwdXRTY3JpcHQsIG5ldHdvcmspO1xuICB9XG5cbiAgaWYgKGZvcm1hdCA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgcmV0dXJuIGJpdGNvaW5qcy5hZGRyZXNzLmZyb21PdXRwdXRTY3JpcHQob3V0cHV0U2NyaXB0LCBuZXR3b3JrIGFzIGJpdGNvaW5qcy5OZXR3b3JrKTtcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBmb3JtYXRgKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gYWRkcmVzc1xuICogQHBhcmFtIGZvcm1hdFxuICogQHBhcmFtIG5ldHdvcmtcbiAqIEByZXR1cm4gb3V0cHV0IHNjcmlwdCBmcm9tIGFkZHJlc3MgaW4gc3BlY2lmaWVkIGZvcm1hdFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9PdXRwdXRTY3JpcHRXaXRoRm9ybWF0KGFkZHJlc3M6IHN0cmluZywgZm9ybWF0OiBBZGRyZXNzRm9ybWF0LCBuZXR3b3JrOiBOZXR3b3JrKTogQnVmZmVyIHtcbiAgaWYgKCFpc0JpdGNvaW5DYXNoKG5ldHdvcmspICYmICFpc0VDYXNoKG5ldHdvcmspKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIG5ldHdvcmtgKTtcbiAgfVxuXG4gIGlmIChmb3JtYXQgPT09ICdjYXNoYWRkcicpIHtcbiAgICByZXR1cm4gdG9PdXRwdXRTY3JpcHRGcm9tQ2FzaEFkZHJlc3MoYWRkcmVzcywgbmV0d29yayk7XG4gIH1cblxuICBpZiAoZm9ybWF0ID09PSAnZGVmYXVsdCcpIHtcbiAgICByZXR1cm4gYml0Y29pbmpzLmFkZHJlc3MudG9PdXRwdXRTY3JpcHQoYWRkcmVzcywgbmV0d29yayBhcyBiaXRjb2luanMuTmV0d29yayk7XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgZm9ybWF0YCk7XG59XG4iXSwibWFwcGluZ3MiOiI7Z01Bd0NBQSxPQUFBLENBQUFDLFNBQUEsQ0FBQUEsU0FBQSxDQWFDQyxhQUFBLEdBQUFDLENBQUEsTUFPREgsT0FBQSxDQUFBSSw2QkFBQSxDQUFBQSw2QkFBQSxDQWNDRixhQUFBLEdBQUFDLENBQUEsTUFPREgsT0FBQSxDQUFBSyw2QkFBQSxDQUFBQSw2QkFBQSxDQTZCQ0gsYUFBQSxHQUFBQyxDQUFBLE1BUURILE9BQUEsQ0FBQU0sMEJBQUEsQ0FBQUEsMEJBQUEsQ0FjQ0osYUFBQSxHQUFBQyxDQUFBLE1BUURILE9BQUEsQ0FBQU8sd0JBQUEsQ0FBQUEsd0JBQUEsQ0E1SUE7Ozs7Ozs7Ozs7OztHQWFBLE1BQUFDLFdBQUEsRUFBQU4sYUFBQSxHQUFBQyxDQUFBLE1BQUFNLE9BQUEsaUJBQ0EsTUFBQUMsU0FBQSxFQUFBUixhQUFBLEdBQUFDLENBQUEsTUFBQU0sT0FBQSxtQkFDQSxNQUFBRSxVQUFBLEVBQUFULGFBQUEsR0FBQUMsQ0FBQSxNQUFBTSxPQUFBLG9CQUdBOzs7O0dBS0EsUUFBUyxDQUFBRyx1QkFBdUJBLENBQUNDLElBQVksQ0FBRUMsTUFBYyxFQUFBWixhQUFBLEdBQUFhLENBQUEsTUFFM0QsS0FBTSxDQUFBQyxJQUFJLEVBQUFkLGFBQUEsR0FBQUMsQ0FBQSxNQUFJTyxTQUFTLENBQUNPLFFBQW1ELENBQUNKLElBQUksQ0FBQyxFQUFDWCxhQUFBLEdBQUFDLENBQUEsT0FDbEYsR0FBSSxDQUFDYSxJQUFJLENBQUUsQ0FBQWQsYUFBQSxHQUFBZ0IsQ0FBQSxTQUFBaEIsYUFBQSxHQUFBQyxDQUFBLE9BQ1QsS0FBTSxJQUFJLENBQUFnQixLQUFLLENBQUMsd0JBQXdCTixJQUFJLEVBQUUsQ0FBQyxDQUNqRCxDQUFDLEtBQUFYLGFBQUEsR0FBQWdCLENBQUEsVUFBQWhCLGFBQUEsR0FBQUMsQ0FB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