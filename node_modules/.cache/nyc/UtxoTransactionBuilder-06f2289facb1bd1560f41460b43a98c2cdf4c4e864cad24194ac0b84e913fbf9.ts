"use strict";function cov_286w8zb2j9(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/UtxoTransactionBuilder.ts";var hash="7f90cefb0f310f67398595940cb2c67369878d15";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/UtxoTransactionBuilder.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:40}},"2":{start:{line:4,column:30},end:{line:4,column:63}},"3":{start:{line:5,column:26},end:{line:5,column:54}},"4":{start:{line:8,column:8},end:{line:8,column:16}},"5":{start:{line:9,column:8},end:{line:9,column:31}},"6":{start:{line:10,column:8},end:{line:10,column:63}},"7":{start:{line:13,column:8},end:{line:13,column:55}},"8":{start:{line:16,column:8},end:{line:16,column:66}},"9":{start:{line:19,column:20},end:{line:19,column:102}},"10":{start:{line:20,column:21},end:{line:20,column:63}},"11":{start:{line:21,column:8},end:{line:21,column:37}},"12":{start:{line:22,column:8},end:{line:31,column:9}},"13":{start:{line:23,column:30},end:{line:23,column:43}},"14":{start:{line:24,column:12},end:{line:26,column:13}},"15":{start:{line:25,column:16},end:{line:25,column:71}},"16":{start:{line:27,column:12},end:{line:30,column:15}},"17":{start:{line:28,column:16},end:{line:28,column:45}},"18":{start:{line:29,column:16},end:{line:29,column:54}},"19":{start:{line:32,column:8},end:{line:32,column:20}},"20":{start:{line:35,column:8},end:{line:35,column:25}},"21":{start:{line:38,column:8},end:{line:38,column:29}},"22":{start:{line:41,column:8},end:{line:41,column:39}},"23":{start:{line:49,column:8},end:{line:54,column:9}},"24":{start:{line:50,column:12},end:{line:52,column:13}},"25":{start:{line:51,column:16},end:{line:51,column:61}},"26":{start:{line:53,column:12},end:{line:53,column:104}},"27":{start:{line:55,column:8},end:{line:57,column:9}},"28":{start:{line:56,column:12},end:{line:56,column:72}},"29":{start:{line:60,column:8},end:{line:62,column:9}},"30":{start:{line:61,column:12},end:{line:61,column:43}},"31":{start:{line:63,column:8},end:{line:63,column:38}},"32":{start:{line:66,column:0},end:{line:66,column:56}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:7,column:29},end:{line:11,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:4},end:{line:12,column:5}},loc:{start:{line:12,column:46},end:{line:14,column:5}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:15,column:4},end:{line:15,column:5}},loc:{start:{line:15,column:42},end:{line:17,column:5}},line:15},"3":{name:"(anonymous_3)",decl:{start:{line:18,column:4},end:{line:18,column:5}},loc:{start:{line:18,column:53},end:{line:33,column:5}},line:18},"4":{name:"(anonymous_4)",decl:{start:{line:27,column:32},end:{line:27,column:33}},loc:{start:{line:27,column:42},end:{line:30,column:13}},line:27},"5":{name:"(anonymous_5)",decl:{start:{line:34,column:4},end:{line:34,column:5}},loc:{start:{line:34,column:13},end:{line:36,column:5}},line:34},"6":{name:"(anonymous_6)",decl:{start:{line:37,column:4},end:{line:37,column:5}},loc:{start:{line:37,column:12},end:{line:39,column:5}},line:37},"7":{name:"(anonymous_7)",decl:{start:{line:40,column:4},end:{line:40,column:5}},loc:{start:{line:40,column:22},end:{line:42,column:5}},line:40},"8":{name:"(anonymous_8)",decl:{start:{line:43,column:4},end:{line:43,column:5}},loc:{start:{line:43,column:83},end:{line:64,column:5}},line:43}},branchMap:{"0":{loc:{start:{line:22,column:8},end:{line:31,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:31,column:9}},{start:{line:22,column:8},end:{line:31,column:9}}],line:22},"1":{loc:{start:{line:24,column:12},end:{line:26,column:13}},type:"if",locations:[{start:{line:24,column:12},end:{line:26,column:13}},{start:{line:24,column:12},end:{line:26,column:13}}],line:24},"2":{loc:{start:{line:49,column:8},end:{line:54,column:9}},type:"if",locations:[{start:{line:49,column:8},end:{line:54,column:9}},{start:{line:49,column:8},end:{line:54,column:9}}],line:49},"3":{loc:{start:{line:50,column:12},end:{line:52,column:13}},type:"if",locations:[{start:{line:50,column:12},end:{line:52,column:13}},{start:{line:50,column:12},end:{line:52,column:13}}],line:50},"4":{loc:{start:{line:50,column:16},end:{line:50,column:84}},type:"binary-expr",locations:[{start:{line:50,column:16},end:{line:50,column:48}},{start:{line:50,column:52},end:{line:50,column:84}}],line:50},"5":{loc:{start:{line:55,column:8},end:{line:57,column:9}},type:"if",locations:[{start:{line:55,column:8},end:{line:57,column:9}},{start:{line:55,column:8},end:{line:57,column:9}}],line:55},"6":{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:60,column:8},end:{line:62,column:9}}],line:60}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/UtxoTransactionBuilder.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/UtxoTransactionBuilder.ts"],names:[],mappings:"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",sourcesContent:["import { TxOutput, Transaction } from 'bitcoinjs-lib';\n// eslint-disable-next-line\nimport * as bitcoinjs from 'bitcoinjs-lib';\nimport { Network } from '..';\nimport { Signer, TransactionBuilder } from '../transaction_builder';\nimport { UtxoTransaction } from './UtxoTransaction';\n\nexport interface TxbSignArg<TNumber extends number | bigint = number> {\n  prevOutScriptType: string;\n  vin: number;\n  keyPair: Signer;\n  redeemScript?: Buffer;\n  hashType?: number;\n  witnessValue?: TNumber;\n  witnessScript?: Buffer;\n  controlBlock?: Buffer;\n}\n\nexport class UtxoTransactionBuilder<\n  TNumber extends number | bigint = number,\n  T extends UtxoTransaction<TNumber> = UtxoTransaction<TNumber>\n> extends TransactionBuilder<TNumber> {\n  constructor(network: Network, tx?: UtxoTransaction<TNumber>) {\n    super();\n    this.network = network;\n    (this as any).__TX = this.createInitialTransaction(network, tx);\n  }\n\n  protected static newTransactionBuilder<TNumber extends number | bigint>(\n    network: Network,\n    tx: UtxoTransaction<TNumber>\n  ): UtxoTransactionBuilder<TNumber> {\n    return new UtxoTransactionBuilder<TNumber>(network, tx);\n  }\n\n  protected createInitialTransaction(network: Network, tx?: Transaction<TNumber>): UtxoTransaction<TNumber> {\n    return new UtxoTransaction<TNumber>(network, tx);\n  }\n\n  static fromTransaction<TNumber extends number | bigint = number>(\n    tx: UtxoTransaction<TNumber>,\n    network?: Network,\n    prevOutputs?: TxOutput<TNumber>[]\n  ): UtxoTransactionBuilder<TNumber> {\n    const txb = TransactionBuilder.fromTransaction<TNumber>(tx, network, prevOutputs);\n    const utxb = this.newTransactionBuilder<TNumber>(tx.network, tx);\n\n    (utxb as any).__INPUTS = (txb as any).__INPUTS;\n\n    if (prevOutputs) {\n      const txbInputs = (utxb as any).__INPUTS;\n      if (prevOutputs.length !== txbInputs.length) {\n        throw new Error(`prevOuts must match txbInput length`);\n      }\n      prevOutputs.forEach((o, i) => {\n        txbInputs[i].value = o.value;\n        txbInputs[i].prevOutScript = o.script;\n      });\n    }\n    return utxb;\n  }\n\n  get tx(): T {\n    return (this as any).__TX;\n  }\n\n  build(): T {\n    return super.build() as T;\n  }\n\n  buildIncomplete(): T {\n    return super.buildIncomplete() as T;\n  }\n\n  sign(\n    signParams: number | TxbSignArg<TNumber>,\n    keyPair?: Signer,\n    redeemScript?: Buffer,\n    hashType?: number,\n    witnessValue?: TNumber,\n    witnessScript?: Buffer\n  ): void {\n    // Regular bitcoin p2sh-p2ms inputs do not include the input amount (value) in the signature and\n    // thus do not require the parameter `value` to be set.\n    // For bitcoincash and bitcoinsv p2sh-p2ms inputs, the value parameter *is* required however.\n    // Since the `value` parameter is not passed to the legacy hashing method, we must store it\n    // on the transaction input object.\n\n    if (typeof signParams === 'number') {\n      if (typeof witnessValue === 'number' || typeof witnessValue === 'bigint') {\n        (this.tx.ins[signParams] as any).value = witnessValue;\n      }\n\n      return super.sign(signParams, keyPair, redeemScript, hashType, witnessValue, witnessScript);\n    }\n\n    if (signParams.witnessValue !== undefined) {\n      (this.tx.ins[signParams.vin] as any).value = signParams.witnessValue;\n    }\n    // When calling the sign method via TxbSignArg, the `value` parameter is actually not permitted\n    // to be set for p2sh-p2ms transactions.\n    if (signParams.prevOutScriptType === 'p2sh-p2ms') {\n      delete signParams.witnessValue;\n    }\n    return super.sign(signParams);\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7f90cefb0f310f67398595940cb2c67369878d15"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_286w8zb2j9=function(){return actualCoverage;};}return actualCoverage;}cov_286w8zb2j9();cov_286w8zb2j9().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_286w8zb2j9().s[1]++;exports.UtxoTransactionBuilder=void 0;const transaction_builder_1=(cov_286w8zb2j9().s[2]++,require("../transaction_builder"));const UtxoTransaction_1=(cov_286w8zb2j9().s[3]++,require("./UtxoTransaction"));class UtxoTransactionBuilder extends(transaction_builder_1.TransactionBuilder){constructor(network,tx){cov_286w8zb2j9().f[0]++;cov_286w8zb2j9().s[4]++;super();cov_286w8zb2j9().s[5]++;this.network=network;cov_286w8zb2j9().s[6]++;this.__TX=this.createInitialTransaction(network,tx);}static newTransactionBuilder(network,tx){cov_286w8zb2j9().f[1]++;cov_286w8zb2j9().s[7]++;return new UtxoTransactionBuilder(network,tx);}createInitialTransaction(network,tx){cov_286w8zb2j9().f[2]++;cov_286w8zb2j9().s[8]++;return new UtxoTransaction_1.UtxoTransaction(network,tx);}static fromTransaction(tx,network,prevOutputs){cov_286w8zb2j9().f[3]++;const txb=(cov_286w8zb2j9().s[9]++,transaction_builder_1.TransactionBuilder.fromTransaction(tx,network,prevOutputs));const utxb=(cov_286w8zb2j9().s[10]++,this.newTransactionBuilder(tx.network,tx));cov_286w8zb2j9().s[11]++;utxb.__INPUTS=txb.__INPUTS;cov_286w8zb2j9().s[12]++;if(prevOutputs){cov_286w8zb2j9().b[0][0]++;const txbInputs=(cov_286w8zb2j9().s[13]++,utxb.__INPUTS);cov_286w8zb2j9().s[14]++;if(prevOutputs.length!==txbInputs.length){cov_286w8zb2j9().b[1][0]++;cov_286w8zb2j9().s[15]++;throw new Error(`prevOuts must match txbInput length`);}else{cov_286w8zb2j9().b[1][1]++;}cov_286w8zb2j9().s[16]++;prevOutputs.forEach((o,i)=>{cov_286w8zb2j9().f[4]++;cov_286w8zb2j9().s[17]++;txbInputs[i].value=o.value;cov_286w8zb2j9().s[18]++;txbInputs[i].prevOutScript=o.script;});}else{cov_286w8zb2j9().b[0][1]++;}cov_286w8zb2j9().s[19]++;return utxb;}get tx(){cov_286w8zb2j9().f[5]++;cov_286w8zb2j9().s[20]++;return this.__TX;}build(){cov_286w8zb2j9().f[6]++;cov_286w8zb2j9().s[21]++;return super.build();}buildIncomplete(){cov_286w8zb2j9().f[7]++;cov_286w8zb2j9().s[22]++;return super.buildIncomplete();}sign(signParams,keyPair,redeemScript,hashType,witnessValue,witnessScript){cov_286w8zb2j9().f[8]++;cov_286w8zb2j9().s[23]++;// Regular bitcoin p2sh-p2ms inputs do not include the input amount (value) in the signature and
// thus do not require the parameter `value` to be set.
// For bitcoincash and bitcoinsv p2sh-p2ms inputs, the value parameter *is* required however.
// Since the `value` parameter is not passed to the legacy hashing method, we must store it
// on the transaction input object.
if(typeof signParams==='number'){cov_286w8zb2j9().b[2][0]++;cov_286w8zb2j9().s[24]++;if((cov_286w8zb2j9().b[4][0]++,typeof witnessValue==='number')||(cov_286w8zb2j9().b[4][1]++,typeof witnessValue==='bigint')){cov_286w8zb2j9().b[3][0]++;cov_286w8zb2j9().s[25]++;this.tx.ins[signParams].value=witnessValue;}else{cov_286w8zb2j9().b[3][1]++;}cov_286w8zb2j9().s[26]++;return super.sign(signParams,keyPair,redeemScript,hashType,witnessValue,witnessScript);}else{cov_286w8zb2j9().b[2][1]++;}cov_286w8zb2j9().s[27]++;if(signParams.witnessValue!==undefined){cov_286w8zb2j9().b[5][0]++;cov_286w8zb2j9().s[28]++;this.tx.ins[signParams.vin].value=signParams.witnessValue;}else{cov_286w8zb2j9().b[5][1]++;}// When calling the sign method via TxbSignArg, the `value` parameter is actually not permitted
// to be set for p2sh-p2ms transactions.
cov_286w8zb2j9().s[29]++;if(signParams.prevOutScriptType==='p2sh-p2ms'){cov_286w8zb2j9().b[6][0]++;cov_286w8zb2j9().s[30]++;delete signParams.witnessValue;}else{cov_286w8zb2j9().b[6][1]++;}cov_286w8zb2j9().s[31]++;return super.sign(signParams);}}cov_286w8zb2j9().s[32]++;exports.UtxoTransactionBuilder=UtxoTransactionBuilder;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vVXR4b1RyYW5zYWN0aW9uQnVpbGRlci50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vVXR4b1RyYW5zYWN0aW9uQnVpbGRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFJQSxnRUFBb0U7QUFDcEUsdURBQW9EO0FBYXBELE1BQWEsc0JBR1gsU0FBUSx3Q0FBMkI7SUFDbkMsWUFBWSxPQUFnQixFQUFFLEVBQTZCO1FBQ3pELEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDdEIsSUFBWSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ2xFLENBQUM7SUFFUyxNQUFNLENBQUMscUJBQXFCLENBQ3BDLE9BQWdCLEVBQ2hCLEVBQTRCO1FBRTVCLE9BQU8sSUFBSSxzQkFBc0IsQ0FBVSxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVTLHdCQUF3QixDQUFDLE9BQWdCLEVBQUUsRUFBeUI7UUFDNUUsT0FBTyxJQUFJLGlDQUFlLENBQVUsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFRCxNQUFNLENBQUMsZUFBZSxDQUNwQixFQUE0QixFQUM1QixPQUFpQixFQUNqQixXQUFpQztRQUVqQyxNQUFNLEdBQUcsR0FBRyx3Q0FBa0IsQ0FBQyxlQUFlLENBQVUsRUFBRSxFQUFFLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztRQUNsRixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQVUsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVoRSxJQUFZLENBQUMsUUFBUSxHQUFJLEdBQVcsQ0FBQyxRQUFRLENBQUM7UUFFL0MsSUFBSSxXQUFXLEVBQUUsQ0FBQztZQUNoQixNQUFNLFNBQVMsR0FBSSxJQUFZLENBQUMsUUFBUSxDQUFDO1lBQ3pDLElBQUksV0FBVyxDQUFDLE1BQU0sS0FBSyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQzVDLE1BQU0sSUFBSSxLQUFLLENBQUMscUNBQXFDLENBQUMsQ0FBQztZQUN6RCxDQUFDO1lBQ0QsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDM0IsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDO2dCQUM3QixTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUM7WUFDeEMsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsSUFBSSxFQUFFO1FBQ0osT0FBUSxJQUFZLENBQUMsSUFBSSxDQUFDO0lBQzVCLENBQUM7SUFFRCxLQUFLO1FBQ0gsT0FBTyxLQUFLLENBQUMsS0FBSyxFQUFPLENBQUM7SUFDNUIsQ0FBQztJQUVELGVBQWU7UUFDYixPQUFPLEtBQUssQ0FBQyxlQUFlLEVBQU8sQ0FBQztJQUN0QyxDQUFDO0lBRUQsSUFBSSxDQUNGLFVBQXdDLEVBQ3hDLE9BQWdCLEVBQ2hCLFlBQXFCLEVBQ3JCLFFBQWlCLEVBQ2pCLFlBQXNCLEVBQ3RCLGFBQXNCO1FBRXRCLGdHQUFnRztRQUNoRyx1REFBdUQ7UUFDdkQsNkZBQTZGO1FBQzdGLDJGQUEyRjtRQUMzRixtQ0FBbUM7UUFFbkMsSUFBSSxPQUFPLFVBQVUsS0FBSyxRQUFRLEVBQUUsQ0FBQztZQUNuQyxJQUFJLE9BQU8sWUFBWSxLQUFLLFFBQVEsSUFBSSxPQUFPLFlBQVksS0FBSyxRQUFRLEVBQUUsQ0FBQztnQkFDeEUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFTLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQztZQUN4RCxDQUFDO1lBRUQsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDOUYsQ0FBQztRQUVELElBQUksVUFBVSxDQUFDLFlBQVksS0FBSyxTQUFTLEVBQUUsQ0FBQztZQUN6QyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFTLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxZQUFZLENBQUM7UUFDdkUsQ0FBQztRQUNELCtGQUErRjtRQUMvRix3Q0FBd0M7UUFDeEMsSUFBSSxVQUFVLENBQUMsaUJBQWlCLEtBQUssV0FBVyxFQUFFLENBQUM7WUFDakQsT0FBTyxVQUFVLENBQUMsWUFBWSxDQUFDO1FBQ2pDLENBQUM7UUFDRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDaEMsQ0FBQztDQUNGO0FBeEZELHdEQXdGQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFR4T3V0cHV0LCBUcmFuc2FjdGlvbiB9IGZyb20gJ2JpdGNvaW5qcy1saWInO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5pbXBvcnQgKiBhcyBiaXRjb2luanMgZnJvbSAnYml0Y29pbmpzLWxpYic7XG5pbXBvcnQgeyBOZXR3b3JrIH0gZnJvbSAnLi4nO1xuaW1wb3J0IHsgU2lnbmVyLCBUcmFuc2FjdGlvbkJ1aWxkZXIgfSBmcm9tICcuLi90cmFuc2FjdGlvbl9idWlsZGVyJztcbmltcG9ydCB7IFV0eG9UcmFuc2FjdGlvbiB9IGZyb20gJy4vVXR4b1RyYW5zYWN0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBUeGJTaWduQXJnPFROdW1iZXIgZXh0ZW5kcyBudW1iZXIgfCBiaWdpbnQgPSBudW1iZXI+IHtcbiAgcHJldk91dFNjcmlwdFR5cGU6IHN0cmluZztcbiAgdmluOiBudW1iZXI7XG4gIGtleVBhaXI6IFNpZ25lcjtcbiAgcmVkZWVtU2NyaXB0PzogQnVmZmVyO1xuICBoYXNoVHlwZT86IG51bWJlcjtcbiAgd2l0bmVzc1ZhbHVlPzogVE51bWJlcjtcbiAgd2l0bmVzc1NjcmlwdD86IEJ1ZmZlcjtcbiAgY29udHJvbEJsb2NrPzogQnVmZmVyO1xufVxuXG5leHBvcnQgY2xhc3MgVXR4b1RyYW5zYWN0aW9uQnVpbGRlcjxcbiAgVE51bWJlciBleHRlbmRzIG51bWJlciB8IGJpZ2ludCA9IG51bWJlcixcbiAgVCBleHRlbmRzIFV0eG9UcmFuc2FjdGlvbjxUTnVtYmVyPiA9IFV0eG9UcmFuc2FjdGlvbjxUTnVtYmVyPlxuPiBleHRlbmRzIFRyYW5zYWN0aW9uQnVpbGRlcjxUTnVtYmVyPiB7XG4gIGNvbnN0cnVjdG9yKG5ldHdvcms6IE5ldHdvcmssIHR4PzogVXR4b1RyYW5zYWN0aW9uPFROdW1iZXI+KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm5ldHdvcmsgPSBuZXR3b3JrO1xuICAgICh0aGlzIGFzIGFueSkuX19UWCA9IHRoaXMuY3JlYXRlSW5pdGlhbFRyYW5zYWN0aW9uKG5ldHdvcmssIHR4KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzdGF0aWMgbmV3VHJhbnNhY3Rpb25CdWlsZGVyPFROdW1iZXIgZXh0ZW5kcyBudW1iZXIgfCBiaWdpbnQ+KFxuICAgIG5ldHdvcms6IE5ldHdvcmssXG4gICAgdHg6IFV0eG9UcmFuc2FjdGlvbjxUTnVtYmVyPlxuICApOiBVdHhvVHJhbnNhY3Rpb25CdWlsZGVyPFROdW1iZXI+IHtcbiAgICByZXR1cm4gbmV3IFV0eG9UcmFuc2FjdGlvbkJ1aWxkZXI8VE51bWJlcj4obmV0d29yaywgdHgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGNyZWF0ZUluaXRpYWxUcmFuc2FjdGlvbihuZXR3b3JrOiBOZXR3b3JrLCB0eD86IFRyYW5zYWN0aW9uPFROdW1iZXI+KTogVXR4b1RyYW5zYWN0aW9uPFROdW1iZXI+IHtcbiAgICByZXR1cm4gbmV3IFV0eG9UcmFuc2FjdGlvbjxUTnVtYmVyPihuZXR3b3JrLCB0eCk7XG4gIH1cblxuICBzdGF0aWMgZnJvbVRyYW5zYWN0aW9uPFROdW1iZXIgZXh0ZW5kcyBudW1iZXIgfCBiaWdpbnQgPSBudW1iZXI+KFxuICAgIHR4OiBVdHhvVHJhbnNhY3Rpb248VE51bWJlcj4sXG4gICAgbmV0d29yaz86IE5ldHdvcmssXG4gICAgcHJldk91dHB1dHM/OiBUeE91dHB1dDxUTnVtYmVyPltdXG4gICk6IFV0eG9UcmFuc2FjdGlvbkJ1aWxkZXI8VE51bWJlcj4ge1xuICAgIGNvbnN0IHR4YiA9IFRyYW5zYWN0aW9uQnVpbGRlci5mcm9tVHJhbnNhY3Rpb248VE51bWJlcj4odHgsIG5ldHdvcmssIHByZXZPdXRwdXRzKTtcbiAgICBjb25zdCB1dHhiID0gdGhpcy5uZXdUcmFuc2FjdGlvbkJ1aWxkZXI8VE51bWJlcj4odHgubmV0d29yaywgdHgpO1xuXG4gICAgKHV0eGIgYXMgYW55KS5fX0lOUFVUUyA9ICh0eGIgYXMgYW55KS5fX0lOUFVUUztcblxuICAgIGlmIChwcmV2T3V0cHV0cykge1xuICAgICAgY29uc3QgdHhiSW5wdXRzID0gKHV0eGIgYXMgYW55KS5fX0lOUFVUUztcbiAgICAgIGlmIChwcmV2T3V0cHV0cy5sZW5ndGggIT09IHR4YklucHV0cy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBwcmV2T3V0cyBtdXN0IG1hdGNoIHR4YklucHV0IGxlbmd0aGApO1xuICAgICAgfVxuICAgICAgcHJldk91dHB1dHMuZm9yRWFjaCgobywgaSkgPT4ge1xuICAgICAgICB0eGJJbnB1dHNbaV0udmFsdWUgPSBvLnZhbHVlO1xuICAgICAgICB0eGJJbnB1dHNbaV0ucHJldk91dFNjcmlwdCA9IG8uc2NyaXB0O1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB1dHhiO1xuICB9XG5cbiAgZ2V0IHR4KCk6IFQge1xuICAgIHJldHVybiAodGhpcyBhcyBhbnkpLl9fVFg7XG4gIH1cblxuICBidWlsZCgpOiBUIHtcbiAgICByZXR1cm4gc3VwZXIuYnVpbGQoKSBhcyBUO1xuICB9XG5cbiAgYnVpbGRJbmNvbXBsZXRlKCk6IFQge1xuICAgIHJldHVybiBzdXBlci5idWlsZEluY29tcGxldGUoKSBhcyBUO1xuICB9XG5cbiAgc2lnbihcbiAgICBzaWduUGFyYW1zOiBudW1iZXIgfCBUeGJTaWduQXJnPFROdW1iZXI+LFxuICAgIGtleVBhaXI/OiBTaWduZXIsXG4gICAgcmVkZWVtU2NyaXB0PzogQnVmZmVyLFxuICAgIGhhc2hUeXBlPzogbnVtYmVyLFxuICAgIHdpdG5lc3NWYWx1ZT86IFROdW1iZXIsXG4gICAgd2l0bmVzc1NjcmlwdD86IEJ1ZmZlclxuICApOiB2b2lkIHtcbiAgICAvLyBSZWd1bGFyIGJpdGNvaW4gcDJzaC1wMm1zIGlucHV0cyBkbyBub3QgaW5jbHVkZSB0aGUgaW5wdXQgYW1vdW50ICh2YWx1ZSkgaW4gdGhlIHNpZ25hdHVyZSBhbmRcbiAgICAvLyB0aHVzIGRvIG5vdCByZXF1aXJlIHRoZSBwYXJhbWV0ZXIgYHZhbHVlYCB0byBiZSBzZXQuXG4gICAgLy8gRm9yIGJpdGNvaW5jYXNoIGFuZCBiaXRjb2luc3YgcDJzaC1wMm1zIGlucHV0cywgdGhlIHZhbHVlIHBhcmFtZXRlciAqaXMqIHJlcXVpcmVkIGhvd2V2ZXIuXG4gICAgLy8gU2luY2UgdGhlIGB2YWx1ZWAgcGFyYW1ldGVyIGlzIG5vdCBwYXNzZWQgdG8gdGhlIGxlZ2FjeSBoYXNoaW5nIG1ldGhvZCwgd2UgbXVzdCBzdG9yZSBpdFxuICAgIC8vIG9uIHRoZSB0cmFuc2FjdGlvbiBpbnB1dCBvYmplY3QuXG5cbiAgICBpZiAodHlwZW9mIHNpZ25QYXJhbXMgPT09ICdudW1iZXInKSB7XG4gICAgICBpZiAodHlwZW9mIHdpdG5lc3NWYWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHdpdG5lc3NWYWx1ZSA9PT0gJ2JpZ2ludCcpIHtcbiAgICAgICAgKHRoaXMudHguaW5zW3NpZ25QYXJhbXNdIGFzIGFueSkudmFsdWUgPSB3aXRuZXNzVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzdXBlci5zaWduKHNpZ25QYXJhbXMsIGtleVBhaXIsIHJlZGVlbVNjcmlwdCwgaGFzaFR5cGUsIHdpdG5lc3NWYWx1ZSwgd2l0bmVzc1NjcmlwdCk7XG4gICAgfVxuXG4gICAgaWYgKHNpZ25QYXJhbXMud2l0bmVzc1ZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICh0aGlzLnR4Lmluc1tzaWduUGFyYW1zLnZpbl0gYXMgYW55KS52YWx1ZSA9IHNpZ25QYXJhbXMud2l0bmVzc1ZhbHVlO1xuICAgIH1cbiAgICAvLyBXaGVuIGNhbGxpbmcgdGhlIHNpZ24gbWV0aG9kIHZpYSBUeGJTaWduQXJnLCB0aGUgYHZhbHVlYCBwYXJhbWV0ZXIgaXMgYWN0dWFsbHkgbm90IHBlcm1pdHRlZFxuICAgIC8vIHRvIGJlIHNldCBmb3IgcDJzaC1wMm1zIHRyYW5zYWN0aW9ucy5cbiAgICBpZiAoc2lnblBhcmFtcy5wcmV2T3V0U2NyaXB0VHlwZSA9PT0gJ3Ayc2gtcDJtcycpIHtcbiAgICAgIGRlbGV0ZSBzaWduUGFyYW1zLndpdG5lc3NWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLnNpZ24oc2lnblBhcmFtcyk7XG4gIH1cbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjg2dzh6YjJqOSIsImFjdHVhbENvdmVyYWdlIiwicyIsInRyYW5zYWN0aW9uX2J1aWxkZXJfMSIsInJlcXVpcmUiLCJVdHhvVHJhbnNhY3Rpb25fMSIsIlV0eG9UcmFuc2FjdGlvbkJ1aWxkZXIiLCJUcmFuc2FjdGlvbkJ1aWxkZXIiLCJjb25zdHJ1Y3RvciIsIm5ldHdvcmsiLCJ0eCIsImYiLCJfX1RYIiwiY3JlYXRlSW5pdGlhbFRyYW5zYWN0aW9uIiwibmV3VHJhbnNhY3Rpb25CdWlsZGVyIiwiVXR4b1RyYW5zYWN0aW9uIiwiZnJvbVRyYW5zYWN0aW9uIiwicHJldk91dHB1dHMiLCJ0eGIiLCJ1dHhiIiwiX19JTlBVVFMiLCJiIiwidHhiSW5wdXRzIiwibGVuZ3RoIiwiRXJyb3IiLCJmb3JFYWNoIiwibyIsImkiLCJ2YWx1ZSIsInByZXZPdXRTY3JpcHQiLCJzY3JpcHQiLCJidWlsZCIsImJ1aWxkSW5jb21wbGV0ZSIsInNpZ24iLCJzaWduUGFyYW1zIiwia2V5UGFpciIsInJlZGVlbVNjcmlwdCIsImhhc2hUeXBlIiwid2l0bmVzc1ZhbHVlIiwid2l0bmVzc1NjcmlwdCIsImlucyIsInVuZGVmaW5lZCIsInZpbiIsInByZXZPdXRTY3JpcHRUeXBlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9xcm9jL0NvZGUvaGFwaS9jaGFpbmRlZnVzZXIvdXR4by1saWIvc3JjL2JpdGdvL1V0eG9UcmFuc2FjdGlvbkJ1aWxkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHhPdXRwdXQsIFRyYW5zYWN0aW9uIH0gZnJvbSAnYml0Y29pbmpzLWxpYic7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmltcG9ydCAqIGFzIGJpdGNvaW5qcyBmcm9tICdiaXRjb2luanMtbGliJztcbmltcG9ydCB7IE5ldHdvcmsgfSBmcm9tICcuLic7XG5pbXBvcnQgeyBTaWduZXIsIFRyYW5zYWN0aW9uQnVpbGRlciB9IGZyb20gJy4uL3RyYW5zYWN0aW9uX2J1aWxkZXInO1xuaW1wb3J0IHsgVXR4b1RyYW5zYWN0aW9uIH0gZnJvbSAnLi9VdHhvVHJhbnNhY3Rpb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFR4YlNpZ25Bcmc8VE51bWJlciBleHRlbmRzIG51bWJlciB8IGJpZ2ludCA9IG51bWJlcj4ge1xuICBwcmV2T3V0U2NyaXB0VHlwZTogc3RyaW5nO1xuICB2aW46IG51bWJlcjtcbiAga2V5UGFpcjogU2lnbmVyO1xuICByZWRlZW1TY3JpcHQ/OiBCdWZmZXI7XG4gIGhhc2hUeXBlPzogbnVtYmVyO1xuICB3aXRuZXNzVmFsdWU/OiBUTnVtYmVyO1xuICB3aXRuZXNzU2NyaXB0PzogQnVmZmVyO1xuICBjb250cm9sQmxvY2s/OiBCdWZmZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBVdHhvVHJhbnNhY3Rpb25CdWlsZGVyPFxuICBUTnVtYmVyIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50ID0gbnVtYmVyLFxuICBUIGV4dGVuZHMgVXR4b1RyYW5zYWN0aW9uPFROdW1iZXI+ID0gVXR4b1RyYW5zYWN0aW9uPFROdW1iZXI+XG4+IGV4dGVuZHMgVHJhbnNhY3Rpb25CdWlsZGVyPFROdW1iZXI+IHtcbiAgY29uc3RydWN0b3IobmV0d29yazogTmV0d29yaywgdHg/OiBVdHhvVHJhbnNhY3Rpb248VE51bWJlcj4pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubmV0d29yayA9IG5ldHdvcms7XG4gICAgKHRoaXMgYXMgYW55KS5fX1RYID0gdGhpcy5jcmVhdGVJbml0aWFsVHJhbnNhY3Rpb24obmV0d29yaywgdHgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN0YXRpYyBuZXdUcmFuc2FjdGlvbkJ1aWxkZXI8VE51bWJlciBleHRlbmRzIG51bWJlciB8IGJpZ2ludD4oXG4gICAgbmV0d29yazogTmV0d29yayxcbiAgICB0eDogVXR4b1RyYW5zYWN0aW9uPFROdW1iZXI+XG4gICk6IFV0eG9UcmFuc2FjdGlvbkJ1aWxkZXI8VE51bWJlcj4ge1xuICAgIHJldHVybiBuZXcgVXR4b1RyYW5zYWN0aW9uQnVpbGRlcjxUTnVtYmVyPihuZXR3b3JrLCB0eCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgY3JlYXRlSW5pdGlhbFRyYW5zYWN0aW9uKG5ldHdvcms6IE5ldHdvcmssIHR4PzogVHJhbnNhY3Rpb248VE51bWJlcj4pOiBVdHhvVHJhbnNhY3Rpb248VE51bWJlcj4ge1xuICAgIHJldHVybiBuZXcgVXR4b1RyYW5zYWN0aW9uPFROdW1iZXI+KG5ldHdvcmssIHR4KTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tVHJhbnNhY3Rpb248VE51bWJlciBleHRlbmRzIG51bWJlciB8IGJpZ2ludCA9IG51bWJlcj4oXG4gICAgdHg6IFV0eG9UcmFuc2FjdGlvbjxUTnVtYmVyPixcbiAgICBuZXR3b3JrPzogTmV0d29yayxcbiAgICBwcmV2T3V0cHV0cz86IFR4T3V0cHV0PFROdW1iZXI+W11cbiAgKTogVXR4b1RyYW5zYWN0aW9uQnVpbGRlcjxUTnVtYmVyPiB7XG4gICAgY29uc3QgdHhiID0gVHJhbnNhY3Rpb25CdWlsZGVyLmZyb21UcmFuc2FjdGlvbjxUTnVtYmVyPih0eCwgbmV0d29yaywgcHJldk91dHB1dHMpO1xuICAgIGNvbnN0IHV0eGIgPSB0aGlzLm5ld1RyYW5zYWN0aW9uQnVpbGRlcjxUTnVtYmVyPih0eC5uZXR3b3JrLCB0eCk7XG5cbiAgICAodXR4YiBhcyBhbnkpLl9fSU5QVVRTID0gKHR4YiBhcyBhbnkpLl9fSU5QVVRTO1xuXG4gICAgaWYgKHByZXZPdXRwdXRzKSB7XG4gICAgICBjb25zdCB0eGJJbnB1dHMgPSAodXR4YiBhcyBhbnkpLl9fSU5QVVRTO1xuICAgICAgaWYgKHByZXZPdXRwdXRzLmxlbmd0aCAhPT0gdHhiSW5wdXRzLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHByZXZPdXRzIG11c3QgbWF0Y2ggdHhiSW5wdXQgbGVuZ3RoYCk7XG4gICAgICB9XG4gICAgICBwcmV2T3V0cHV0cy5mb3JFYWNoKChvLCBpKSA9PiB7XG4gICAgICAgIHR4YklucHV0c1tpXS52YWx1ZSA9IG8udmFsdWU7XG4gICAgICAgIHR4YklucHV0c1tpXS5wcmV2T3V0U2NyaXB0ID0gby5zY3JpcHQ7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHV0eGI7XG4gIH1cblxuICBnZXQgdHgoKTogVCB7XG4gICAgcmV0dXJuICh0aGlzIGFzIGFueSkuX19UWDtcbiAgfVxuXG4gIGJ1aWxkKCk6IFQge1xuICAgIHJldHVybiBzdXBlci5idWlsZCgpIGFzIFQ7XG4gIH1cblxuICBidWlsZEluY29tcGxldGUoKTogVCB7XG4gICAgcmV0dXJuIHN1cGVyLmJ1aWxkSW5jb21wbGV0ZSgpIGFzIFQ7XG4gIH1cblxuICBzaWduKFxuICAgIHNpZ25QYXJhbXM6IG51bWJlciB8IFR4YlNpZ25Bcmc8VE51bWJlcj4sXG4gICAga2V5UGFpcj86IFNpZ25lcixcbiAgICByZWRlZW1TY3JpcHQ/OiBCdWZmZXIsXG4gICAgaGFzaFR5cGU/OiBudW1iZXIsXG4gICAgd2l0bmVzc1ZhbHVlPzogVE51bWJlcixcbiAgICB3aXRuZXNzU2NyaXB0PzogQnVmZmVyXG4gICk6IHZvaWQge1xuICAgIC8vIFJlZ3VsYXIgYml0Y29pbiBwMnNoLXAybXMgaW5wdXRzIGRvIG5vdCBpbmNsdWRlIHRoZSBpbnB1dCBhbW91bnQgKHZhbHVlKSBpbiB0aGUgc2lnbmF0dXJlIGFuZFxuICAgIC8vIHRodXMgZG8gbm90IHJlcXVpcmUgdGhlIHBhcmFtZXRlciBgdmFsdWVgIHRvIGJlIHNldC5cbiAgICAvLyBGb3IgYml0Y29pbmNhc2ggYW5kIGJpdGNvaW5zdiBwMnNoLXAybXMgaW5wdXRzLCB0aGUgdmFsdWUgcGFyYW1ldGVyICppcyogcmVxdWlyZWQgaG93ZXZlci5cbiAgICAvLyBTaW5jZSB0aGUgYHZhbHVlYCBwYXJhbWV0ZXIgaXMgbm90IHBhc3NlZCB0byB0aGUgbGVnYWN5IGhhc2hpbmcgbWV0aG9kLCB3ZSBtdXN0IHN0b3JlIGl0XG4gICAgLy8gb24gdGhlIHRyYW5zYWN0aW9uIGlucHV0IG9iamVjdC5cblxuICAgIGlmICh0eXBlb2Ygc2lnblBhcmFtcyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGlmICh0eXBlb2Ygd2l0bmVzc1ZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygd2l0bmVzc1ZhbHVlID09PSAnYmlnaW50Jykge1xuICAgICAgICAodGhpcy50eC5pbnNbc2lnblBhcmFtc10gYXMgYW55KS52YWx1ZSA9IHdpdG5lc3NWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN1cGVyLnNpZ24oc2lnblBhcmFtcywga2V5UGFpciwgcmVkZWVtU2NyaXB0LCBoYXNoVHlwZSwgd2l0bmVzc1ZhbHVlLCB3aXRuZXNzU2NyaXB0KTtcbiAgICB9XG5cbiAgICBpZiAoc2lnblBhcmFtcy53aXRuZXNzVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgKHRoaXMudHguaW5zW3NpZ25QYXJhbXMudmluXSBhcyBhbnkpLnZhbHVlID0gc2lnblBhcmFtcy53aXRuZXNzVmFsdWU7XG4gICAgfVxuICAgIC8vIFdoZW4gY2FsbGluZyB0aGUgc2lnbiBtZXRob2QgdmlhIFR4YlNpZ25BcmcsIHRoZSBgdmFsdWVgIHBhcmFtZXRlciBpcyBhY3R1YWxseSBub3QgcGVybWl0dGVkXG4gICAgLy8gdG8gYmUgc2V0IGZvciBwMnNoLXAybXMgdHJhbnNhY3Rpb25zLlxuICAgIGlmIChzaWduUGFyYW1zLnByZXZPdXRTY3JpcHRUeXBlID09PSAncDJzaC1wMm1zJykge1xuICAgICAgZGVsZXRlIHNpZ25QYXJhbXMud2l0bmVzc1ZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuc2lnbihzaWduUGFyYW1zKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoibXRXQW9DSTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FBQUEsY0FBQSxHQUFBRSxDQUFBLE0sdUhBaENKLE1BQUFDLHFCQUFBLEVBQUFILGNBQUEsR0FBQUUsQ0FB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