"use strict";function cov_1357br5d9p(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/litecoin/LitecoinTransaction.ts";var hash="a6952e5ed54121153f8be16cceb1cde2f309832c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/litecoin/LitecoinTransaction.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:37}},"2":{start:{line:4,column:22},end:{line:4,column:62}},"3":{start:{line:5,column:26},end:{line:5,column:55}},"4":{start:{line:6,column:19},end:{line:6,column:44}},"5":{start:{line:13,column:8},end:{line:13,column:39}},"6":{start:{line:14,column:8},end:{line:16,column:9}},"7":{start:{line:15,column:12},end:{line:15,column:47}},"8":{start:{line:19,column:8},end:{line:19,column:73}},"9":{start:{line:22,column:8},end:{line:22,column:71}},"10":{start:{line:25,column:8},end:{line:27,column:9}},"11":{start:{line:26,column:12},end:{line:26,column:52}},"12":{start:{line:28,column:29},end:{line:28,column:67}},"13":{start:{line:29,column:26},end:{line:29,column:50}},"14":{start:{line:30,column:23},end:{line:30,column:47}},"15":{start:{line:31,column:21},end:{line:31,column:45}},"16":{start:{line:32,column:8},end:{line:40,column:9}},"17":{start:{line:35,column:33},end:{line:35,column:102}},"18":{start:{line:36,column:12},end:{line:36,column:48}},"19":{start:{line:37,column:12},end:{line:37,column:72}},"20":{start:{line:38,column:12},end:{line:38,column:84}},"21":{start:{line:39,column:12},end:{line:39,column:88}},"22":{start:{line:41,column:8},end:{line:41,column:71}},"23":{start:{line:44,column:0},end:{line:44,column:50}},"24":{start:{line:45,column:0},end:{line:45,column:47}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:4},end:{line:12,column:5}},loc:{start:{line:12,column:41},end:{line:17,column:5}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:4},end:{line:18,column:5}},loc:{start:{line:18,column:60},end:{line:20,column:5}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:4},end:{line:21,column:5}},loc:{start:{line:21,column:22},end:{line:23,column:5}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:24,column:4},end:{line:24,column:5}},loc:{start:{line:24,column:72},end:{line:42,column:5}},line:24}},branchMap:{"0":{loc:{start:{line:14,column:8},end:{line:16,column:9}},type:"if",locations:[{start:{line:14,column:8},end:{line:16,column:9}},{start:{line:14,column:8},end:{line:16,column:9}}],line:14},"1":{loc:{start:{line:24,column:40},end:{line:24,column:61}},type:"default-arg",locations:[{start:{line:24,column:53},end:{line:24,column:61}}],line:24},"2":{loc:{start:{line:25,column:8},end:{line:27,column:9}},type:"if",locations:[{start:{line:25,column:8},end:{line:27,column:9}},{start:{line:25,column:8},end:{line:27,column:9}}],line:25},"3":{loc:{start:{line:32,column:8},end:{line:40,column:9}},type:"if",locations:[{start:{line:32,column:8},end:{line:40,column:9}},{start:{line:32,column:8},end:{line:40,column:9}}],line:32},"4":{loc:{start:{line:32,column:12},end:{line:33,column:60}},type:"binary-expr",locations:[{start:{line:32,column:12},end:{line:32,column:70}},{start:{line:33,column:12},end:{line:33,column:60}}],line:32}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0],"2":[0,0],"3":[0,0],"4":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/litecoin/LitecoinTransaction.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/litecoin/LitecoinTransaction.ts"],names:[],mappings:";;;AAAA,+DAA2E;AAE3E,wDAAqD;AACrD,6CAA+D;AAI/D;;;GAGG;AACH,MAAa,mBAA8D,SAAQ,iCAAwB;IAGzG,YAAY,OAAgB,EAAE,EAAyC,EAAE,UAAgC;QACvG,KAAK,CAAC,OAAO,EAAE,EAAE,EAAE,UAAU,CAAC,CAAC;QAE/B,IAAI,CAAC,IAAA,qBAAU,EAAC,OAAO,CAAC,EAAE,CAAC;YACzB,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;QACrC,CAAC;IACH,CAAC;IAES,MAAM,CAAC,cAAc,CAC7B,OAAgB,EAChB,WAAkD,EAClD,UAAgC;QAEhC,OAAO,IAAI,mBAAmB,CAAU,OAAO,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC;IAC5E,CAAC;IAED,KAAK,CAAwC,UAAgC;QAC3E,OAAO,IAAI,mBAAmB,CAAM,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC;IACtE,CAAC;IAED,MAAM,CAAC,UAAU,CACf,MAAc,EACd,QAAiB,EACjB,aAAkC,QAAQ,EAC1C,OAAyB;QAEzB,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;QAC1C,CAAC;QAED,MAAM,YAAY,GAAG,IAAI,0BAAY,CAAC,MAAM,CAAC,CAAC;QAC9C,MAAM,SAAS,GAAG,YAAY,CAAC,SAAS,EAAE,CAAC;QAC3C,MAAM,MAAM,GAAG,YAAY,CAAC,SAAS,EAAE,CAAC;QACxC,MAAM,IAAI,GAAG,YAAY,CAAC,SAAS,EAAE,CAAC;QAEtC,IACE,MAAM,KAAK,mBAAmB,CAAC,2BAA2B;YAC1D,IAAI,KAAK,mBAAmB,CAAC,mBAAmB,EAChD,CAAC;YACD,kIAAkI;YAClI,MAAM,YAAY,GAAG,IAAI,0BAAY,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC7E,YAAY,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;YACpC,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5D,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YACxE,OAAO,KAAK,CAAC,UAAU,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC;QAC9E,CAAC;QACD,OAAO,KAAK,CAAC,UAAU,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC;IACjE,CAAC;;AAlDH,kDAmDC;AAlDQ,uCAAmB,GAAG,IAAI,CAAC",sourcesContent:["import { BufferReader, BufferWriter } from 'bitcoinjs-lib/src/bufferutils';\n\nimport { UtxoTransaction } from '../UtxoTransaction';\nimport { isLitecoin, Network, networks } from '../../networks';\n\nexport type LitecoinNetwork = typeof networks.litecoin | typeof networks.litecoinTest;\n\n/**\n * We only care about reading a transaction that can have a potentially different advanced transaction flag,\n * but we dont need to write one.\n */\nexport class LitecoinTransaction<TNumber extends number | bigint = number> extends UtxoTransaction<TNumber> {\n  static MWEB_PEGOUT_TX_FLAG = 0x08;\n\n  constructor(network: Network, tx?: LitecoinTransaction<bigint | number>, amountType?: 'bigint' | 'number') {\n    super(network, tx, amountType);\n\n    if (!isLitecoin(network)) {\n      throw new Error(`invalid network`);\n    }\n  }\n\n  protected static newTransaction<TNumber extends number | bigint = number>(\n    network: Network,\n    transaction?: LitecoinTransaction<number | bigint>,\n    amountType?: 'number' | 'bigint'\n  ): LitecoinTransaction<TNumber> {\n    return new LitecoinTransaction<TNumber>(network, transaction, amountType);\n  }\n\n  clone<TN2 extends bigint | number = TNumber>(amountType?: 'number' | 'bigint'): LitecoinTransaction<TN2> {\n    return new LitecoinTransaction<TN2>(this.network, this, amountType);\n  }\n\n  static fromBuffer<TNumber extends number | bigint = number>(\n    buffer: Buffer,\n    noStrict: boolean,\n    amountType: 'number' | 'bigint' = 'number',\n    network?: LitecoinNetwork\n  ): LitecoinTransaction<TNumber> {\n    if (!network) {\n      throw new Error(`must provide network`);\n    }\n\n    const bufferReader = new BufferReader(buffer);\n    const txVersion = bufferReader.readInt32();\n    const marker = bufferReader.readUInt8();\n    const flag = bufferReader.readUInt8();\n\n    if (\n      marker === LitecoinTransaction.ADVANCED_TRANSACTION_MARKER &&\n      flag === LitecoinTransaction.MWEB_PEGOUT_TX_FLAG\n    ) {\n      // Litecoin has an MWEB advanced transaction marker. Slice out the marker and 5th to last byte  and read like a normal transaction\n      const bufferWriter = new BufferWriter(Buffer.allocUnsafe(buffer.length - 3));\n      bufferWriter.writeUInt32(txVersion);\n      bufferWriter.writeSlice(buffer.slice(6, buffer.length - 5));\n      bufferWriter.writeSlice(buffer.slice(buffer.length - 4, buffer.length));\n      return super.fromBuffer(bufferWriter.buffer, noStrict, amountType, network);\n    }\n    return super.fromBuffer(buffer, noStrict, amountType, network);\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a6952e5ed54121153f8be16cceb1cde2f309832c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1357br5d9p=function(){return actualCoverage;};}return actualCoverage;}cov_1357br5d9p();cov_1357br5d9p().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1357br5d9p().s[1]++;exports.LitecoinTransaction=void 0;const bufferutils_1=(cov_1357br5d9p().s[2]++,require("bitcoinjs-lib/src/bufferutils"));const UtxoTransaction_1=(cov_1357br5d9p().s[3]++,require("../UtxoTransaction"));const networks_1=(cov_1357br5d9p().s[4]++,require("../../networks"));/**
 * We only care about reading a transaction that can have a potentially different advanced transaction flag,
 * but we dont need to write one.
 */class LitecoinTransaction extends(UtxoTransaction_1.UtxoTransaction){constructor(network,tx,amountType){cov_1357br5d9p().f[0]++;cov_1357br5d9p().s[5]++;super(network,tx,amountType);cov_1357br5d9p().s[6]++;if(!(0,networks_1.isLitecoin)(network)){cov_1357br5d9p().b[0][0]++;cov_1357br5d9p().s[7]++;throw new Error(`invalid network`);}else{cov_1357br5d9p().b[0][1]++;}}static newTransaction(network,transaction,amountType){cov_1357br5d9p().f[1]++;cov_1357br5d9p().s[8]++;return new LitecoinTransaction(network,transaction,amountType);}clone(amountType){cov_1357br5d9p().f[2]++;cov_1357br5d9p().s[9]++;return new LitecoinTransaction(this.network,this,amountType);}static fromBuffer(buffer,noStrict,amountType=(cov_1357br5d9p().b[1][0]++,'number'),network){cov_1357br5d9p().f[3]++;cov_1357br5d9p().s[10]++;if(!network){cov_1357br5d9p().b[2][0]++;cov_1357br5d9p().s[11]++;throw new Error(`must provide network`);}else{cov_1357br5d9p().b[2][1]++;}const bufferReader=(cov_1357br5d9p().s[12]++,new bufferutils_1.BufferReader(buffer));const txVersion=(cov_1357br5d9p().s[13]++,bufferReader.readInt32());const marker=(cov_1357br5d9p().s[14]++,bufferReader.readUInt8());const flag=(cov_1357br5d9p().s[15]++,bufferReader.readUInt8());cov_1357br5d9p().s[16]++;if((cov_1357br5d9p().b[4][0]++,marker===LitecoinTransaction.ADVANCED_TRANSACTION_MARKER)&&(cov_1357br5d9p().b[4][1]++,flag===LitecoinTransaction.MWEB_PEGOUT_TX_FLAG)){cov_1357br5d9p().b[3][0]++;// Litecoin has an MWEB advanced transaction marker. Slice out the marker and 5th to last byte  and read like a normal transaction
const bufferWriter=(cov_1357br5d9p().s[17]++,new bufferutils_1.BufferWriter(Buffer.allocUnsafe(buffer.length-3)));cov_1357br5d9p().s[18]++;bufferWriter.writeUInt32(txVersion);cov_1357br5d9p().s[19]++;bufferWriter.writeSlice(buffer.slice(6,buffer.length-5));cov_1357br5d9p().s[20]++;bufferWriter.writeSlice(buffer.slice(buffer.length-4,buffer.length));cov_1357br5d9p().s[21]++;return super.fromBuffer(bufferWriter.buffer,noStrict,amountType,network);}else{cov_1357br5d9p().b[3][1]++;}cov_1357br5d9p().s[22]++;return super.fromBuffer(buffer,noStrict,amountType,network);}}cov_1357br5d9p().s[23]++;exports.LitecoinTransaction=LitecoinTransaction;cov_1357br5d9p().s[24]++;LitecoinTransaction.MWEB_PEGOUT_TX_FLAG=0x08;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vbGl0ZWNvaW4vTGl0ZWNvaW5UcmFuc2FjdGlvbi50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vbGl0ZWNvaW4vTGl0ZWNvaW5UcmFuc2FjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwrREFBMkU7QUFFM0Usd0RBQXFEO0FBQ3JELDZDQUErRDtBQUkvRDs7O0dBR0c7QUFDSCxNQUFhLG1CQUE4RCxTQUFRLGlDQUF3QjtJQUd6RyxZQUFZLE9BQWdCLEVBQUUsRUFBeUMsRUFBRSxVQUFnQztRQUN2RyxLQUFLLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUUvQixJQUFJLENBQUMsSUFBQSxxQkFBVSxFQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7WUFDekIsTUFBTSxJQUFJLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3JDLENBQUM7SUFDSCxDQUFDO0lBRVMsTUFBTSxDQUFDLGNBQWMsQ0FDN0IsT0FBZ0IsRUFDaEIsV0FBa0QsRUFDbEQsVUFBZ0M7UUFFaEMsT0FBTyxJQUFJLG1CQUFtQixDQUFVLE9BQU8sRUFBRSxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDNUUsQ0FBQztJQUVELEtBQUssQ0FBd0MsVUFBZ0M7UUFDM0UsT0FBTyxJQUFJLG1CQUFtQixDQUFNLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFRCxNQUFNLENBQUMsVUFBVSxDQUNmLE1BQWMsRUFDZCxRQUFpQixFQUNqQixhQUFrQyxRQUFRLEVBQzFDLE9BQXlCO1FBRXpCLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNiLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUMxQyxDQUFDO1FBRUQsTUFBTSxZQUFZLEdBQUcsSUFBSSwwQkFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlDLE1BQU0sU0FBUyxHQUFHLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUMzQyxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDeEMsTUFBTSxJQUFJLEdBQUcsWUFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBRXRDLElBQ0UsTUFBTSxLQUFLLG1CQUFtQixDQUFDLDJCQUEyQjtZQUMxRCxJQUFJLEtBQUssbUJBQW1CLENBQUMsbUJBQW1CLEVBQ2hELENBQUM7WUFDRCxrSUFBa0k7WUFDbEksTUFBTSxZQUFZLEdBQUcsSUFBSSwwQkFBWSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdFLFlBQVksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDcEMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUQsWUFBWSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3hFLE9BQU8sS0FBSyxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDOUUsQ0FBQztRQUNELE9BQU8sS0FBSyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNqRSxDQUFDOztBQWxESCxrREFtREM7QUFsRFEsdUNBQW1CLEdBQUcsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnVmZmVyUmVhZGVyLCBCdWZmZXJXcml0ZXIgfSBmcm9tICdiaXRjb2luanMtbGliL3NyYy9idWZmZXJ1dGlscyc7XG5cbmltcG9ydCB7IFV0eG9UcmFuc2FjdGlvbiB9IGZyb20gJy4uL1V0eG9UcmFuc2FjdGlvbic7XG5pbXBvcnQgeyBpc0xpdGVjb2luLCBOZXR3b3JrLCBuZXR3b3JrcyB9IGZyb20gJy4uLy4uL25ldHdvcmtzJztcblxuZXhwb3J0IHR5cGUgTGl0ZWNvaW5OZXR3b3JrID0gdHlwZW9mIG5ldHdvcmtzLmxpdGVjb2luIHwgdHlwZW9mIG5ldHdvcmtzLmxpdGVjb2luVGVzdDtcblxuLyoqXG4gKiBXZSBvbmx5IGNhcmUgYWJvdXQgcmVhZGluZyBhIHRyYW5zYWN0aW9uIHRoYXQgY2FuIGhhdmUgYSBwb3RlbnRpYWxseSBkaWZmZXJlbnQgYWR2YW5jZWQgdHJhbnNhY3Rpb24gZmxhZyxcbiAqIGJ1dCB3ZSBkb250IG5lZWQgdG8gd3JpdGUgb25lLlxuICovXG5leHBvcnQgY2xhc3MgTGl0ZWNvaW5UcmFuc2FjdGlvbjxUTnVtYmVyIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50ID0gbnVtYmVyPiBleHRlbmRzIFV0eG9UcmFuc2FjdGlvbjxUTnVtYmVyPiB7XG4gIHN0YXRpYyBNV0VCX1BFR09VVF9UWF9GTEFHID0gMHgwODtcblxuICBjb25zdHJ1Y3RvcihuZXR3b3JrOiBOZXR3b3JrLCB0eD86IExpdGVjb2luVHJhbnNhY3Rpb248YmlnaW50IHwgbnVtYmVyPiwgYW1vdW50VHlwZT86ICdiaWdpbnQnIHwgJ251bWJlcicpIHtcbiAgICBzdXBlcihuZXR3b3JrLCB0eCwgYW1vdW50VHlwZSk7XG5cbiAgICBpZiAoIWlzTGl0ZWNvaW4obmV0d29yaykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBuZXR3b3JrYCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHN0YXRpYyBuZXdUcmFuc2FjdGlvbjxUTnVtYmVyIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50ID0gbnVtYmVyPihcbiAgICBuZXR3b3JrOiBOZXR3b3JrLFxuICAgIHRyYW5zYWN0aW9uPzogTGl0ZWNvaW5UcmFuc2FjdGlvbjxudW1iZXIgfCBiaWdpbnQ+LFxuICAgIGFtb3VudFR5cGU/OiAnbnVtYmVyJyB8ICdiaWdpbnQnXG4gICk6IExpdGVjb2luVHJhbnNhY3Rpb248VE51bWJlcj4ge1xuICAgIHJldHVybiBuZXcgTGl0ZWNvaW5UcmFuc2FjdGlvbjxUTnVtYmVyPihuZXR3b3JrLCB0cmFuc2FjdGlvbiwgYW1vdW50VHlwZSk7XG4gIH1cblxuICBjbG9uZTxUTjIgZXh0ZW5kcyBiaWdpbnQgfCBudW1iZXIgPSBUTnVtYmVyPihhbW91bnRUeXBlPzogJ251bWJlcicgfCAnYmlnaW50Jyk6IExpdGVjb2luVHJhbnNhY3Rpb248VE4yPiB7XG4gICAgcmV0dXJuIG5ldyBMaXRlY29pblRyYW5zYWN0aW9uPFROMj4odGhpcy5uZXR3b3JrLCB0aGlzLCBhbW91bnRUeXBlKTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tQnVmZmVyPFROdW1iZXIgZXh0ZW5kcyBudW1iZXIgfCBiaWdpbnQgPSBudW1iZXI+KFxuICAgIGJ1ZmZlcjogQnVmZmVyLFxuICAgIG5vU3RyaWN0OiBib29sZWFuLFxuICAgIGFtb3VudFR5cGU6ICdudW1iZXInIHwgJ2JpZ2ludCcgPSAnbnVtYmVyJyxcbiAgICBuZXR3b3JrPzogTGl0ZWNvaW5OZXR3b3JrXG4gICk6IExpdGVjb2luVHJhbnNhY3Rpb248VE51bWJlcj4ge1xuICAgIGlmICghbmV0d29yaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBtdXN0IHByb3ZpZGUgbmV0d29ya2ApO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZmZlclJlYWRlciA9IG5ldyBCdWZmZXJSZWFkZXIoYnVmZmVyKTtcbiAgICBjb25zdCB0eFZlcnNpb24gPSBidWZmZXJSZWFkZXIucmVhZEludDMyKCk7XG4gICAgY29uc3QgbWFya2VyID0gYnVmZmVyUmVhZGVyLnJlYWRVSW50OCgpO1xuICAgIGNvbnN0IGZsYWcgPSBidWZmZXJSZWFkZXIucmVhZFVJbnQ4KCk7XG5cbiAgICBpZiAoXG4gICAgICBtYXJrZXIgPT09IExpdGVjb2luVHJhbnNhY3Rpb24uQURWQU5DRURfVFJBTlNBQ1RJT05fTUFSS0VSICYmXG4gICAgICBmbGFnID09PSBMaXRlY29pblRyYW5zYWN0aW9uLk1XRUJfUEVHT1VUX1RYX0ZMQUdcbiAgICApIHtcbiAgICAgIC8vIExpdGVjb2luIGhhcyBhbiBNV0VCIGFkdmFuY2VkIHRyYW5zYWN0aW9uIG1hcmtlci4gU2xpY2Ugb3V0IHRoZSBtYXJrZXIgYW5kIDV0aCB0byBsYXN0IGJ5dGUgIGFuZCByZWFkIGxpa2UgYSBub3JtYWwgdHJhbnNhY3Rpb25cbiAgICAgIGNvbnN0IGJ1ZmZlcldyaXRlciA9IG5ldyBCdWZmZXJXcml0ZXIoQnVmZmVyLmFsbG9jVW5zYWZlKGJ1ZmZlci5sZW5ndGggLSAzKSk7XG4gICAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIodHhWZXJzaW9uKTtcbiAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKGJ1ZmZlci5zbGljZSg2LCBidWZmZXIubGVuZ3RoIC0gNSkpO1xuICAgICAgYnVmZmVyV3JpdGVyLndyaXRlU2xpY2UoYnVmZmVyLnNsaWNlKGJ1ZmZlci5sZW5ndGggLSA0LCBidWZmZXIubGVuZ3RoKSk7XG4gICAgICByZXR1cm4gc3VwZXIuZnJvbUJ1ZmZlcihidWZmZXJXcml0ZXIuYnVmZmVyLCBub1N0cmljdCwgYW1vdW50VHlwZSwgbmV0d29yayk7XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5mcm9tQnVmZmVyKGJ1ZmZlciwgbm9TdHJpY3QsIGFtb3VudFR5cGUsIG5ldHdvcmspO1xuICB9XG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTM1N2JyNWQ5cCIsImFjdHVhbENvdmVyYWdlIiwicyIsImJ1ZmZlcnV0aWxzXzEiLCJyZXF1aXJlIiwiVXR4b1RyYW5zYWN0aW9uXzEiLCJuZXR3b3Jrc18xIiwiTGl0ZWNvaW5UcmFuc2FjdGlvbiIsIlV0eG9UcmFuc2FjdGlvbiIsImNvbnN0cnVjdG9yIiwibmV0d29yayIsInR4IiwiYW1vdW50VHlwZSIsImYiLCJpc0xpdGVjb2luIiwiYiIsIkVycm9yIiwibmV3VHJhbnNhY3Rpb24iLCJ0cmFuc2FjdGlvbiIsImNsb25lIiwiZnJvbUJ1ZmZlciIsImJ1ZmZlciIsIm5vU3RyaWN0IiwiYnVmZmVyUmVhZGVyIiwiQnVmZmVyUmVhZGVyIiwidHhWZXJzaW9uIiwicmVhZEludDMyIiwibWFya2VyIiwicmVhZFVJbnQ4IiwiZmxhZyIsIkFEVkFOQ0VEX1RSQU5TQUNUSU9OX01BUktFUiIsIk1XRUJfUEVHT1VUX1RYX0ZMQUciLCJidWZmZXJXcml0ZXIiLCJCdWZmZXJXcml0ZXIiLCJCdWZmZXIiLCJhbGxvY1Vuc2FmZSIsImxlbmd0aCIsIndyaXRlVUludDMyIiwid3JpdGVTbGljZSIsInNsaWNlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9xcm9jL0NvZGUvaGFwaS9jaGFpbmRlZnVzZXIvdXR4by1saWIvc3JjL2JpdGdvL2xpdGVjb2luL0xpdGVjb2luVHJhbnNhY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnVmZmVyUmVhZGVyLCBCdWZmZXJXcml0ZXIgfSBmcm9tICdiaXRjb2luanMtbGliL3NyYy9idWZmZXJ1dGlscyc7XG5cbmltcG9ydCB7IFV0eG9UcmFuc2FjdGlvbiB9IGZyb20gJy4uL1V0eG9UcmFuc2FjdGlvbic7XG5pbXBvcnQgeyBpc0xpdGVjb2luLCBOZXR3b3JrLCBuZXR3b3JrcyB9IGZyb20gJy4uLy4uL25ldHdvcmtzJztcblxuZXhwb3J0IHR5cGUgTGl0ZWNvaW5OZXR3b3JrID0gdHlwZW9mIG5ldHdvcmtzLmxpdGVjb2luIHwgdHlwZW9mIG5ldHdvcmtzLmxpdGVjb2luVGVzdDtcblxuLyoqXG4gKiBXZSBvbmx5IGNhcmUgYWJvdXQgcmVhZGluZyBhIHRyYW5zYWN0aW9uIHRoYXQgY2FuIGhhdmUgYSBwb3RlbnRpYWxseSBkaWZmZXJlbnQgYWR2YW5jZWQgdHJhbnNhY3Rpb24gZmxhZyxcbiAqIGJ1dCB3ZSBkb250IG5lZWQgdG8gd3JpdGUgb25lLlxuICovXG5leHBvcnQgY2xhc3MgTGl0ZWNvaW5UcmFuc2FjdGlvbjxUTnVtYmVyIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50ID0gbnVtYmVyPiBleHRlbmRzIFV0eG9UcmFuc2FjdGlvbjxUTnVtYmVyPiB7XG4gIHN0YXRpYyBNV0VCX1BFR09VVF9UWF9GTEFHID0gMHgwODtcblxuICBjb25zdHJ1Y3RvcihuZXR3b3JrOiBOZXR3b3JrLCB0eD86IExpdGVjb2luVHJhbnNhY3Rpb248YmlnaW50IHwgbnVtYmVyPiwgYW1vdW50VHlwZT86ICdiaWdpbnQnIHwgJ251bWJlcicpIHtcbiAgICBzdXBlcihuZXR3b3JrLCB0eCwgYW1vdW50VHlwZSk7XG5cbiAgICBpZiAoIWlzTGl0ZWNvaW4obmV0d29yaykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBuZXR3b3JrYCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHN0YXRpYyBuZXdUcmFuc2FjdGlvbjxUTnVtYmVyIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50ID0gbnVtYmVyPihcbiAgICBuZXR3b3JrOiBOZXR3b3JrLFxuICAgIHRyYW5zYWN0aW9uPzogTGl0ZWNvaW5UcmFuc2FjdGlvbjxudW1iZXIgfCBiaWdpbnQ+LFxuICAgIGFtb3VudFR5cGU/OiAnbnVtYmVyJyB8ICdiaWdpbnQnXG4gICk6IExpdGVjb2luVHJhbnNhY3Rpb248VE51bWJlcj4ge1xuICAgIHJldHVybiBuZXcgTGl0ZWNvaW5UcmFuc2FjdGlvbjxUTnVtYmVyPihuZXR3b3JrLCB0cmFuc2FjdGlvbiwgYW1vdW50VHlwZSk7XG4gIH1cblxuICBjbG9uZTxUTjIgZXh0ZW5kcyBiaWdpbnQgfCBudW1iZXIgPSBUTnVtYmVyPihhbW91bnRUeXBlPzogJ251bWJlcicgfCAnYmlnaW50Jyk6IExpdGVjb2luVHJhbnNhY3Rpb248VE4yPiB7XG4gICAgcmV0dXJuIG5ldyBMaXRlY29pblRyYW5zYWN0aW9uPFROMj4odGhpcy5uZXR3b3JrLCB0aGlzLCBhbW91bnRUeXBlKTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tQnVmZmVyPFROdW1iZXIgZXh0ZW5kcyBudW1iZXIgfCBiaWdpbnQgPSBudW1iZXI+KFxuICAgIGJ1ZmZlcjogQnVmZmVyLFxuICAgIG5vU3RyaWN0OiBib29sZWFuLFxuICAgIGFtb3VudFR5cGU6ICdudW1iZXInIHwgJ2JpZ2ludCcgPSAnbnVtYmVyJyxcbiAgICBuZXR3b3JrPzogTGl0ZWNvaW5OZXR3b3JrXG4gICk6IExpdGVjb2luVHJhbnNhY3Rpb248VE51bWJlcj4ge1xuICAgIGlmICghbmV0d29yaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBtdXN0IHByb3ZpZGUgbmV0d29ya2ApO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZmZlclJlYWRlciA9IG5ldyBCdWZmZXJSZWFkZXIoYnVmZmVyKTtcbiAgICBjb25zdCB0eFZlcnNpb24gPSBidWZmZXJSZWFkZXIucmVhZEludDMyKCk7XG4gICAgY29uc3QgbWFya2VyID0gYnVmZmVyUmVhZGVyLnJlYWRVSW50OCgpO1xuICAgIGNvbnN0IGZsYWcgPSBidWZmZXJSZWFkZXIucmVhZFVJbnQ4KCk7XG5cbiAgICBpZiAoXG4gICAgICBtYXJrZXIgPT09IExpdGVjb2luVHJhbnNhY3Rpb24uQURWQU5DRURfVFJBTlNBQ1RJT05fTUFSS0VSICYmXG4gICAgICBmbGFnID09PSBMaXRlY29pblRyYW5zYWN0aW9uLk1XRUJfUEVHT1VUX1RYX0ZMQUdcbiAgICApIHtcbiAgICAgIC8vIExpdGVjb2luIGhhcyBhbiBNV0VCIGFkdmFuY2VkIHRyYW5zYWN0aW9uIG1hcmtlci4gU2xpY2Ugb3V0IHRoZSBtYXJrZXIgYW5kIDV0aCB0byBsYXN0IGJ5dGUgIGFuZCByZWFkIGxpa2UgYSBub3JtYWwgdHJhbnNhY3Rpb25cbiAgICAgIGNvbnN0IGJ1ZmZlcldyaXRlciA9IG5ldyBCdWZmZXJXcml0ZXIoQnVmZmVyLmFsbG9jVW5zYWZlKGJ1ZmZlci5sZW5ndGggLSAzKSk7XG4gICAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIodHhWZXJzaW9uKTtcbiAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKGJ1ZmZlci5zbGljZSg2LCBidWZmZXIubGVuZ3RoIC0gNSkpO1xuICAgICAgYnVmZmVyV3JpdGVyLndyaXRlU2xpY2UoYnVmZmVyLnNsaWNlKGJ1ZmZlci5sZW5ndGggLSA0LCBidWZmZXIubGVuZ3RoKSk7XG4gICAgICByZXR1cm4gc3VwZXIuZnJvbUJ1ZmZlcihidWZmZXJXcml0ZXIuYnVmZmVyLCBub1N0cmljdCwgYW1vdW50VHlwZSwgbmV0d29yayk7XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5mcm9tQnVmZmVyKGJ1ZmZlciwgbm9TdHJpY3QsIGFtb3VudFR5cGUsIG5ldHdvcmspO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI0K1BBbUJLO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQUFBQSxjQUFBLEdBQUFFLENBQUEsTSxvSEFuQkwsTUFBQUMsYUFBQSxFQUFBSCxjQUFBLEdBQUFFLENBQUEsTUFBQUUsT0FBQSxtQ0FFQSxNQUFBQyxpQkFBQSxFQUFBTCxjQUFBLEdBQUFFLENBQUEsTUFBQUUsT0FBQSx3QkFDQSxNQUFBRSxVQUFBLEVBQUFOLGNBQUEsR0FBQUUsQ0FBQSxNQUFBRSxPQUFBLG9CQUlBOzs7R0FJQSxLQUFhLENBQUFHLG1CQUE4RCxTQUFRRixpQkFBQSxDQUFBRyxlQUF3QixFQUd6R0MsWUFBWUMsT0FBZ0IsQ0FBRUMsRUFBeUMsQ0FBRUMsVUFBZ0MsRUFBQVosY0FBQSxH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