"use strict";function cov_j5970cy0k(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/keys.ts";var hash="dd56540aa75ee18e7e919ceee296c0a33067a3d3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/keys.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:24}},"2":{start:{line:4,column:0},end:{line:4,column:36}},"3":{start:{line:5,column:0},end:{line:5,column:60}},"4":{start:{line:6,column:0},end:{line:6,column:32}},"5":{start:{line:7,column:0},end:{line:7,column:48}},"6":{start:{line:8,column:0},end:{line:8,column:52}},"7":{start:{line:9,column:16},end:{line:9,column:32}},"8":{start:{line:10,column:15},end:{line:10,column:32}},"9":{start:{line:11,column:16},end:{line:11,column:35}},"10":{start:{line:12,column:20},end:{line:12,column:43}},"11":{start:{line:13,column:19},end:{line:13,column:41}},"12":{start:{line:14,column:14},end:{line:14,column:56}},"13":{start:{line:16,column:4},end:{line:16,column:77}},"14":{start:{line:19,column:4},end:{line:19,column:75}},"15":{start:{line:23,column:4},end:{line:29,column:7}},"16":{start:{line:27,column:12},end:{line:27,column:43}},"17":{start:{line:32,column:4},end:{line:32,column:105}},"18":{start:{line:35,column:4},end:{line:35,column:58}},"19":{start:{line:38,column:15},end:{line:38,column:93}},"20":{start:{line:38,column:25},end:{line:38,column:93}},"21":{start:{line:39,column:34},end:{line:39,column:40}},"22":{start:{line:40,column:4},end:{line:42,column:5}},"23":{start:{line:41,column:8},end:{line:41,column:21}},"24":{start:{line:43,column:4},end:{line:45,column:5}},"25":{start:{line:44,column:8},end:{line:44,column:21}},"26":{start:{line:46,column:4},end:{line:48,column:5}},"27":{start:{line:47,column:8},end:{line:47,column:20}},"28":{start:{line:49,column:4},end:{line:49,column:45}},"29":{start:{line:52,column:4},end:{line:52,column:63}}},fnMap:{"0":{name:"getKey",decl:{start:{line:15,column:9},end:{line:15,column:15}},loc:{start:{line:15,column:22},end:{line:17,column:1}},line:15},"1":{name:"getKeyTriple",decl:{start:{line:18,column:9},end:{line:18,column:21}},loc:{start:{line:18,column:28},end:{line:20,column:1}},line:18},"2":{name:"getUncompressedKey",decl:{start:{line:21,column:9},end:{line:21,column:27}},loc:{start:{line:21,column:35},end:{line:30,column:1}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:26,column:13},end:{line:26,column:14}},loc:{start:{line:26,column:19},end:{line:28,column:9}},line:26},"4":{name:"getUncompressedKeyTriple",decl:{start:{line:31,column:9},end:{line:31,column:33}},loc:{start:{line:31,column:42},end:{line:33,column:1}},line:31},"5":{name:"getKeyName",decl:{start:{line:34,column:9},end:{line:34,column:19}},loc:{start:{line:34,column:31},end:{line:36,column:1}},line:34},"6":{name:"getDefaultCosigner",decl:{start:{line:37,column:9},end:{line:37,column:27}},loc:{start:{line:37,column:44},end:{line:50,column:1}},line:37},"7":{name:"(anonymous_7)",decl:{start:{line:38,column:15},end:{line:38,column:16}},loc:{start:{line:38,column:25},end:{line:38,column:93}},line:38},"8":{name:"getDefaultWalletKeys",decl:{start:{line:51,column:9},end:{line:51,column:29}},loc:{start:{line:51,column:32},end:{line:53,column:1}},line:51}},branchMap:{"0":{loc:{start:{line:38,column:25},end:{line:38,column:93}},type:"binary-expr",locations:[{start:{line:38,column:25},end:{line:38,column:32}},{start:{line:38,column:37},end:{line:38,column:55}},{start:{line:38,column:59},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:92}}],line:38},"1":{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:40,column:4},end:{line:42,column:5}}],line:40},"2":{loc:{start:{line:43,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:43,column:4},end:{line:45,column:5}},{start:{line:43,column:4},end:{line:45,column:5}}],line:43},"3":{loc:{start:{line:46,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:48,column:5}},{start:{line:46,column:4},end:{line:48,column:5}}],line:46}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0,0,0],"1":[0,0],"2":[0,0],"3":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/keys.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/keys.ts"],names:[],mappings:";;AAaA,wBAEC;AAED,oCAEC;AAaD,4DAEC;AAED,gCAEC;AAED,gDAaC;AAED,oDAEC;AAzDD,iCAA+D;AAC/D,iCAAiC;AAGjC,oCAA0C;AAC1C,4CAA4D;AAC5D,0CAAuC;AAEvC,MAAM,KAAK,GAAa,IAAA,oBAAY,EAAC,eAAG,CAAC,CAAC;AAK1C,SAAgB,MAAM,CAAC,IAAY;IACjC,OAAO,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC;AAC3E,CAAC;AAED,SAAgB,YAAY,CAAC,IAAY;IACvC,OAAO,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,EAAE,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,EAAE,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC;AACzE,CAAC;AAED,SAAS,kBAAkB,CAAC,KAAK;IAC/B,2CAA2C;IAC3C,OAAO,kBAAM,CAAC,UAAU,CAAC;QACvB,UAAU,EAAE,KAAK;QACjB,OAAO,EAAE,mBAAQ,CAAC,OAAO;QACzB,GAAG,EAAE,GAAW,EAAE;YAChB,OAAO,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;QACjC,CAAC;KACF,CAAC,CAAC;AACL,CAAC;AAED,SAAgB,wBAAwB,CAAC,MAAsB;IAC7D,OAAO,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvG,CAAC;AAED,SAAgB,UAAU,CAAC,MAA8B,EAAE,CAAiB;IAC1E,OAAO,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AACxD,CAAC;AAED,SAAgB,kBAAkB,CAAI,MAAiB,EAAE,MAAS;IAChE,MAAM,EAAE,GAAG,CAAC,CAAI,EAAE,CAAI,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAChG,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,GAAG,MAAM,CAAC;IACrC,IAAI,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC;QACrB,OAAO,KAAK,CAAC;IACf,CAAC;IACD,IAAI,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,CAAC;QACvB,OAAO,KAAK,CAAC;IACf,CAAC;IACD,IAAI,EAAE,CAAC,MAAM,EAAE,KAAK,CAAC,EAAE,CAAC;QACtB,OAAO,IAAI,CAAC;IACd,CAAC;IACD,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC;AAC3C,CAAC;AAED,SAAgB,oBAAoB;IAClC,OAAO,IAAI,sBAAc,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;AACrD,CAAC",sourcesContent:["import { BIP32API, BIP32Factory, BIP32Interface } from 'bip32';\nimport * as crypto from 'crypto';\n\nimport { Triple } from '../bitgo';\nimport { RootWalletKeys } from '../bitgo';\nimport { ecc, ECPair, ECPairInterface } from '../noble_ecc';\nimport { networks } from '../networks';\n\nconst bip32: BIP32API = BIP32Factory(ecc);\n\nexport type KeyTriple = Triple<BIP32Interface>;\nexport type UncompressedKeyTriple = Triple<ECPairInterface>;\n\nexport function getKey(seed: string): BIP32Interface {\n  return bip32.fromSeed(crypto.createHash('sha256').update(seed).digest());\n}\n\nexport function getKeyTriple(seed: string): KeyTriple {\n  return [getKey(seed + '.0'), getKey(seed + '.1'), getKey(seed + '.2')];\n}\n\nfunction getUncompressedKey(input) {\n  // Using input for deterministic randomness\n  return ECPair.makeRandom({\n    compressed: false,\n    network: networks.testnet,\n    rng: (): Buffer => {\n      return Buffer.alloc(32, input);\n    },\n  });\n}\n\nexport function getUncompressedKeyTriple(inputs: Triple<number>): UncompressedKeyTriple {\n  return [getUncompressedKey(inputs[0]), getUncompressedKey(inputs[1]), getUncompressedKey(inputs[2])];\n}\n\nexport function getKeyName(triple: Triple<BIP32Interface>, k: BIP32Interface): string | undefined {\n  return ['user', 'backup', 'bitgo'][triple.indexOf(k)];\n}\n\nexport function getDefaultCosigner<T>(keyset: Triple<T>, signer: T): T {\n  const eq = (a: T, b: T) => a === b || (Buffer.isBuffer(a) && Buffer.isBuffer(b) && a.equals(b));\n  const [user, backup, bitgo] = keyset;\n  if (eq(signer, user)) {\n    return bitgo;\n  }\n  if (eq(signer, backup)) {\n    return bitgo;\n  }\n  if (eq(signer, bitgo)) {\n    return user;\n  }\n  throw new Error(`signer not in pubkeys`);\n}\n\nexport function getDefaultWalletKeys(): RootWalletKeys {\n  return new RootWalletKeys(getKeyTriple('default'));\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dd56540aa75ee18e7e919ceee296c0a33067a3d3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_j5970cy0k=function(){return actualCoverage;};}return actualCoverage;}cov_j5970cy0k();cov_j5970cy0k().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_j5970cy0k().s[1]++;exports.getKey=getKey;cov_j5970cy0k().s[2]++;exports.getKeyTriple=getKeyTriple;cov_j5970cy0k().s[3]++;exports.getUncompressedKeyTriple=getUncompressedKeyTriple;cov_j5970cy0k().s[4]++;exports.getKeyName=getKeyName;cov_j5970cy0k().s[5]++;exports.getDefaultCosigner=getDefaultCosigner;cov_j5970cy0k().s[6]++;exports.getDefaultWalletKeys=getDefaultWalletKeys;const bip32_1=(cov_j5970cy0k().s[7]++,require("bip32"));const crypto=(cov_j5970cy0k().s[8]++,require("crypto"));const bitgo_1=(cov_j5970cy0k().s[9]++,require("../bitgo"));const noble_ecc_1=(cov_j5970cy0k().s[10]++,require("../noble_ecc"));const networks_1=(cov_j5970cy0k().s[11]++,require("../networks"));const bip32=(cov_j5970cy0k().s[12]++,(0,bip32_1.BIP32Factory)(noble_ecc_1.ecc));function getKey(seed){cov_j5970cy0k().f[0]++;cov_j5970cy0k().s[13]++;return bip32.fromSeed(crypto.createHash('sha256').update(seed).digest());}function getKeyTriple(seed){cov_j5970cy0k().f[1]++;cov_j5970cy0k().s[14]++;return[getKey(seed+'.0'),getKey(seed+'.1'),getKey(seed+'.2')];}function getUncompressedKey(input){cov_j5970cy0k().f[2]++;cov_j5970cy0k().s[15]++;// Using input for deterministic randomness
return noble_ecc_1.ECPair.makeRandom({compressed:false,network:networks_1.networks.testnet,rng:()=>{cov_j5970cy0k().f[3]++;cov_j5970cy0k().s[16]++;return Buffer.alloc(32,input);}});}function getUncompressedKeyTriple(inputs){cov_j5970cy0k().f[4]++;cov_j5970cy0k().s[17]++;return[getUncompressedKey(inputs[0]),getUncompressedKey(inputs[1]),getUncompressedKey(inputs[2])];}function getKeyName(triple,k){cov_j5970cy0k().f[5]++;cov_j5970cy0k().s[18]++;return['user','backup','bitgo'][triple.indexOf(k)];}function getDefaultCosigner(keyset,signer){cov_j5970cy0k().f[6]++;cov_j5970cy0k().s[19]++;const eq=(a,b)=>{cov_j5970cy0k().f[7]++;cov_j5970cy0k().s[20]++;return(cov_j5970cy0k().b[0][0]++,a===b)||(cov_j5970cy0k().b[0][1]++,Buffer.isBuffer(a))&&(cov_j5970cy0k().b[0][2]++,Buffer.isBuffer(b))&&(cov_j5970cy0k().b[0][3]++,a.equals(b));};const[user,backup,bitgo]=(cov_j5970cy0k().s[21]++,keyset);cov_j5970cy0k().s[22]++;if(eq(signer,user)){cov_j5970cy0k().b[1][0]++;cov_j5970cy0k().s[23]++;return bitgo;}else{cov_j5970cy0k().b[1][1]++;}cov_j5970cy0k().s[24]++;if(eq(signer,backup)){cov_j5970cy0k().b[2][0]++;cov_j5970cy0k().s[25]++;return bitgo;}else{cov_j5970cy0k().b[2][1]++;}cov_j5970cy0k().s[26]++;if(eq(signer,bitgo)){cov_j5970cy0k().b[3][0]++;cov_j5970cy0k().s[27]++;return user;}else{cov_j5970cy0k().b[3][1]++;}cov_j5970cy0k().s[28]++;throw new Error(`signer not in pubkeys`);}function getDefaultWalletKeys(){cov_j5970cy0k().f[8]++;cov_j5970cy0k().s[29]++;return new bitgo_1.RootWalletKeys(getKeyTriple('default'));}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvdGVzdHV0aWwva2V5cy50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvdGVzdHV0aWwva2V5cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQWFBLHdCQUVDO0FBRUQsb0NBRUM7QUFhRCw0REFFQztBQUVELGdDQUVDO0FBRUQsZ0RBYUM7QUFFRCxvREFFQztBQXpERCxpQ0FBK0Q7QUFDL0QsaUNBQWlDO0FBR2pDLG9DQUEwQztBQUMxQyw0Q0FBNEQ7QUFDNUQsMENBQXVDO0FBRXZDLE1BQU0sS0FBSyxHQUFhLElBQUEsb0JBQVksRUFBQyxlQUFHLENBQUMsQ0FBQztBQUsxQyxTQUFnQixNQUFNLENBQUMsSUFBWTtJQUNqQyxPQUFPLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztBQUMzRSxDQUFDO0FBRUQsU0FBZ0IsWUFBWSxDQUFDLElBQVk7SUFDdkMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDekUsQ0FBQztBQUVELFNBQVMsa0JBQWtCLENBQUMsS0FBSztJQUMvQiwyQ0FBMkM7SUFDM0MsT0FBTyxrQkFBTSxDQUFDLFVBQVUsQ0FBQztRQUN2QixVQUFVLEVBQUUsS0FBSztRQUNqQixPQUFPLEVBQUUsbUJBQVEsQ0FBQyxPQUFPO1FBQ3pCLEdBQUcsRUFBRSxHQUFXLEVBQUU7WUFDaEIsT0FBTyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNqQyxDQUFDO0tBQ0YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQWdCLHdCQUF3QixDQUFDLE1BQXNCO0lBQzdELE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZHLENBQUM7QUFFRCxTQUFnQixVQUFVLENBQUMsTUFBOEIsRUFBRSxDQUFpQjtJQUMxRSxPQUFPLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEQsQ0FBQztBQUVELFNBQWdCLGtCQUFrQixDQUFJLE1BQWlCLEVBQUUsTUFBUztJQUNoRSxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUksRUFBRSxDQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hHLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxHQUFHLE1BQU0sQ0FBQztJQUNyQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUNyQixPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFDRCxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUN2QixPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFDRCxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUN0QixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUM7QUFDM0MsQ0FBQztBQUVELFNBQWdCLG9CQUFvQjtJQUNsQyxPQUFPLElBQUksc0JBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztBQUNyRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQklQMzJBUEksIEJJUDMyRmFjdG9yeSwgQklQMzJJbnRlcmZhY2UgfSBmcm9tICdiaXAzMic7XG5pbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuaW1wb3J0IHsgVHJpcGxlIH0gZnJvbSAnLi4vYml0Z28nO1xuaW1wb3J0IHsgUm9vdFdhbGxldEtleXMgfSBmcm9tICcuLi9iaXRnbyc7XG5pbXBvcnQgeyBlY2MsIEVDUGFpciwgRUNQYWlySW50ZXJmYWNlIH0gZnJvbSAnLi4vbm9ibGVfZWNjJztcbmltcG9ydCB7IG5ldHdvcmtzIH0gZnJvbSAnLi4vbmV0d29ya3MnO1xuXG5jb25zdCBiaXAzMjogQklQMzJBUEkgPSBCSVAzMkZhY3RvcnkoZWNjKTtcblxuZXhwb3J0IHR5cGUgS2V5VHJpcGxlID0gVHJpcGxlPEJJUDMySW50ZXJmYWNlPjtcbmV4cG9ydCB0eXBlIFVuY29tcHJlc3NlZEtleVRyaXBsZSA9IFRyaXBsZTxFQ1BhaXJJbnRlcmZhY2U+O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5KHNlZWQ6IHN0cmluZyk6IEJJUDMySW50ZXJmYWNlIHtcbiAgcmV0dXJuIGJpcDMyLmZyb21TZWVkKGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUoc2VlZCkuZGlnZXN0KCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5VHJpcGxlKHNlZWQ6IHN0cmluZyk6IEtleVRyaXBsZSB7XG4gIHJldHVybiBbZ2V0S2V5KHNlZWQgKyAnLjAnKSwgZ2V0S2V5KHNlZWQgKyAnLjEnKSwgZ2V0S2V5KHNlZWQgKyAnLjInKV07XG59XG5cbmZ1bmN0aW9uIGdldFVuY29tcHJlc3NlZEtleShpbnB1dCkge1xuICAvLyBVc2luZyBpbnB1dCBmb3IgZGV0ZXJtaW5pc3RpYyByYW5kb21uZXNzXG4gIHJldHVybiBFQ1BhaXIubWFrZVJhbmRvbSh7XG4gICAgY29tcHJlc3NlZDogZmFsc2UsXG4gICAgbmV0d29yazogbmV0d29ya3MudGVzdG5ldCxcbiAgICBybmc6ICgpOiBCdWZmZXIgPT4ge1xuICAgICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygzMiwgaW5wdXQpO1xuICAgIH0sXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VW5jb21wcmVzc2VkS2V5VHJpcGxlKGlucHV0czogVHJpcGxlPG51bWJlcj4pOiBVbmNvbXByZXNzZWRLZXlUcmlwbGUge1xuICByZXR1cm4gW2dldFVuY29tcHJlc3NlZEtleShpbnB1dHNbMF0pLCBnZXRVbmNvbXByZXNzZWRLZXkoaW5wdXRzWzFdKSwgZ2V0VW5jb21wcmVzc2VkS2V5KGlucHV0c1syXSldO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5TmFtZSh0cmlwbGU6IFRyaXBsZTxCSVAzMkludGVyZmFjZT4sIGs6IEJJUDMySW50ZXJmYWNlKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIFsndXNlcicsICdiYWNrdXAnLCAnYml0Z28nXVt0cmlwbGUuaW5kZXhPZihrKV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0Q29zaWduZXI8VD4oa2V5c2V0OiBUcmlwbGU8VD4sIHNpZ25lcjogVCk6IFQge1xuICBjb25zdCBlcSA9IChhOiBULCBiOiBUKSA9PiBhID09PSBiIHx8IChCdWZmZXIuaXNCdWZmZXIoYSkgJiYgQnVmZmVyLmlzQnVmZmVyKGIpICYmIGEuZXF1YWxzKGIpKTtcbiAgY29uc3QgW3VzZXIsIGJhY2t1cCwgYml0Z29dID0ga2V5c2V0O1xuICBpZiAoZXEoc2lnbmVyLCB1c2VyKSkge1xuICAgIHJldHVybiBiaXRnbztcbiAgfVxuICBpZiAoZXEoc2lnbmVyLCBiYWNrdXApKSB7XG4gICAgcmV0dXJuIGJpdGdvO1xuICB9XG4gIGlmIChlcShzaWduZXIsIGJpdGdvKSkge1xuICAgIHJldHVybiB1c2VyO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgc2lnbmVyIG5vdCBpbiBwdWJrZXlzYCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0V2FsbGV0S2V5cygpOiBSb290V2FsbGV0S2V5cyB7XG4gIHJldHVybiBuZXcgUm9vdFdhbGxldEtleXMoZ2V0S2V5VHJpcGxlKCdkZWZhdWx0JykpO1xufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfajU5NzBjeTBrIiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwiZXhwb3J0cyIsImdldEtleSIsImdldEtleVRyaXBsZSIsImdldFVuY29tcHJlc3NlZEtleVRyaXBsZSIsImdldEtleU5hbWUiLCJnZXREZWZhdWx0Q29zaWduZXIiLCJnZXREZWZhdWx0V2FsbGV0S2V5cyIsImJpcDMyXzEiLCJyZXF1aXJlIiwiY3J5cHRvIiwiYml0Z29fMSIsIm5vYmxlX2VjY18xIiwibmV0d29ya3NfMSIsImJpcDMyIiwiQklQMzJGYWN0b3J5IiwiZWNjIiwic2VlZCIsImYiLCJmcm9tU2VlZCIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJnZXRVbmNvbXByZXNzZWRLZXkiLCJpbnB1dCIsIkVDUGFpciIsIm1ha2VSYW5kb20iLCJjb21wcmVzc2VkIiwibmV0d29yayIsIm5ldHdvcmtzIiwidGVzdG5ldCIsInJuZyIsIkJ1ZmZlciIsImFsbG9jIiwiaW5wdXRzIiwidHJpcGxlIiwiayIsImluZGV4T2YiLCJrZXlzZXQiLCJzaWduZXIiLCJlcSIsImEiLCJiIiwiaXNCdWZmZXIiLCJlcXVhbHMiLCJ1c2VyIiwiYmFja3VwIiwiYml0Z28iLCJFcnJvciIsIlJvb3RXYWxsZXRLZXlzIl0sInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvdGVzdHV0aWwva2V5cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCSVAzMkFQSSwgQklQMzJGYWN0b3J5LCBCSVAzMkludGVyZmFjZSB9IGZyb20gJ2JpcDMyJztcbmltcG9ydCAqIGFzIGNyeXB0byBmcm9tICdjcnlwdG8nO1xuXG5pbXBvcnQgeyBUcmlwbGUgfSBmcm9tICcuLi9iaXRnbyc7XG5pbXBvcnQgeyBSb290V2FsbGV0S2V5cyB9IGZyb20gJy4uL2JpdGdvJztcbmltcG9ydCB7IGVjYywgRUNQYWlyLCBFQ1BhaXJJbnRlcmZhY2UgfSBmcm9tICcuLi9ub2JsZV9lY2MnO1xuaW1wb3J0IHsgbmV0d29ya3MgfSBmcm9tICcuLi9uZXR3b3Jrcyc7XG5cbmNvbnN0IGJpcDMyOiBCSVAzMkFQSSA9IEJJUDMyRmFjdG9yeShlY2MpO1xuXG5leHBvcnQgdHlwZSBLZXlUcmlwbGUgPSBUcmlwbGU8QklQMzJJbnRlcmZhY2U+O1xuZXhwb3J0IHR5cGUgVW5jb21wcmVzc2VkS2V5VHJpcGxlID0gVHJpcGxlPEVDUGFpckludGVyZmFjZT47XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXkoc2VlZDogc3RyaW5nKTogQklQMzJJbnRlcmZhY2Uge1xuICByZXR1cm4gYmlwMzIuZnJvbVNlZWQoY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShzZWVkKS5kaWdlc3QoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXlUcmlwbGUoc2VlZDogc3RyaW5nKTogS2V5VHJpcGxlIHtcbiAgcmV0dXJuIFtnZXRLZXkoc2VlZCArICcuMCcpLCBnZXRLZXkoc2VlZCArICcuMScpLCBnZXRLZXkoc2VlZCArICcuMicpXTtcbn1cblxuZnVuY3Rpb24gZ2V0VW5jb21wcmVzc2VkS2V5KGlucHV0KSB7XG4gIC8vIFVzaW5nIGlucHV0IGZvciBkZXRlcm1pbmlzdGljIHJhbmRvbW5lc3NcbiAgcmV0dXJuIEVDUGFpci5tYWtlUmFuZG9tKHtcbiAgICBjb21wcmVzc2VkOiBmYWxzZSxcbiAgICBuZXR3b3JrOiBuZXR3b3Jrcy50ZXN0bmV0LFxuICAgIHJuZzogKCk6IEJ1ZmZlciA9PiB7XG4gICAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDMyLCBpbnB1dCk7XG4gICAgfSxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVbmNvbXByZXNzZWRLZXlUcmlwbGUoaW5wdXRzOiBUcmlwbGU8bnVtYmVyPik6IFVuY29tcHJlc3NlZEtleVRyaXBsZSB7XG4gIHJldHVybiBbZ2V0VW5jb21wcmVzc2VkS2V5KGlucHV0c1swXSksIGdldFVuY29tcHJlc3NlZEtleShpbnB1dHNbMV0pLCBnZXRVbmNvbXByZXNzZWRLZXkoaW5wdXRzWzJdKV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXlOYW1lKHRyaXBsZTogVHJpcGxlPEJJUDMySW50ZXJmYWNlPiwgazogQklQMzJJbnRlcmZhY2UpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICByZXR1cm4gWyd1c2VyJywgJ2JhY2t1cCcsICdiaXRnbyddW3RyaXBsZS5pbmRleE9mKGspXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRDb3NpZ25lcjxUPihrZXlzZXQ6IFRyaXBsZTxUPiwgc2lnbmVyOiBUKTogVCB7XG4gIGNvbnN0IGVxID0gKGE6IFQsIGI6IFQpID0+IGEgPT09IGIgfHwgKEJ1ZmZlci5pc0J1ZmZlcihhKSAmJiBCdWZmZXIuaXNCdWZmZXIoYikgJiYgYS5lcXVhbHMoYikpO1xuICBjb25zdCBbdXNlciwgYmFja3VwLCBiaXRnb10gPSBrZXlzZXQ7XG4gIGlmIChlcShzaWduZXIsIHVzZXIpKSB7XG4gICAgcmV0dXJuIGJpdGdvO1xuICB9XG4gIGlmIChlcShzaWduZXIsIGJhY2t1cCkpIHtcbiAgICByZXR1cm4gYml0Z287XG4gIH1cbiAgaWYgKGVxKHNpZ25lciwgYml0Z28pKSB7XG4gICAgcmV0dXJuIHVzZXI7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBzaWduZXIgbm90IGluIHB1YmtleXNgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRXYWxsZXRLZXlzKCk6IFJvb3RXYWxsZXRLZXlzIHtcbiAgcmV0dXJuIG5ldyBSb290V2FsbGV0S2V5cyhnZXRLZXlUcmlwbGUoJ2RlZmF1bHQnKSk7XG59XG4iXSwibWFwcGluZ3MiOiI2N1FBY1M7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBQUFBLGFBQUEsR0FBQUUsQ0FBQSxNLGdGQURUQyxPQUFBLENBQUFDLE1BQUEsQ0FBQUEsTUFBQSxDQUVDSixhQUFBLEdB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