"use strict";function cov_eq9kqpp2f(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/nonStandardHalfSigned.ts";var hash="2e351fd4ef8f8ae5bf85bd939f3829bfdba52ce4";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/nonStandardHalfSigned.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:40}},"2":{start:{line:4,column:15},end:{line:4,column:32}},"3":{start:{line:5,column:16},end:{line:5,column:38}},"4":{start:{line:6,column:12},end:{line:6,column:26}},"5":{start:{line:12,column:4},end:{line:15,column:5}},"6":{start:{line:17,column:4},end:{line:22,column:5}},"7":{start:{line:18,column:8},end:{line:18,column:44}},"8":{start:{line:21,column:8},end:{line:21,column:65}},"9":{start:{line:25,column:4},end:{line:28,column:5}},"10":{start:{line:29,column:46},end:{line:29,column:65}},"11":{start:{line:30,column:4},end:{line:33,column:5}},"12":{start:{line:34,column:4},end:{line:37,column:5}},"13":{start:{line:38,column:4},end:{line:41,column:5}},"14":{start:{line:42,column:28},end:{line:46,column:5}},"15":{start:{line:44,column:33},end:{line:44,column:89}},"16":{start:{line:47,column:4},end:{line:53,column:5}},"17":{start:{line:48,column:8},end:{line:48,column:67}},"18":{start:{line:48,column:39},end:{line:48,column:65}},"19":{start:{line:49,column:8},end:{line:49,column:40}},"20":{start:{line:52,column:8},end:{line:52,column:59}}},fnMap:{"0":{name:"padInputScript",decl:{start:{line:11,column:9},end:{line:11,column:23}},loc:{start:{line:11,column:47},end:{line:54,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:44,column:25},end:{line:44,column:26}},loc:{start:{line:44,column:33},end:{line:44,column:89}},line:44},"2":{name:"(anonymous_2)",decl:{start:{line:48,column:32},end:{line:48,column:33}},loc:{start:{line:48,column:39},end:{line:48,column:65}},line:48}},branchMap:{"0":{loc:{start:{line:12,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:12,column:4},end:{line:15,column:5}},{start:{line:12,column:4},end:{line:15,column:5}}],line:12},"1":{loc:{start:{line:17,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:22,column:5}},{start:{line:17,column:4},end:{line:22,column:5}}],line:17},"2":{loc:{start:{line:17,column:8},end:{line:17,column:49}},type:"binary-expr",locations:[{start:{line:17,column:8},end:{line:17,column:21}},{start:{line:17,column:25},end:{line:17,column:49}}],line:17},"3":{loc:{start:{line:25,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:28,column:5}},{start:{line:25,column:4},end:{line:28,column:5}}],line:25},"4":{loc:{start:{line:25,column:8},end:{line:25,column:64}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:28}},{start:{line:25,column:32},end:{line:25,column:64}}],line:25},"5":{loc:{start:{line:30,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:33,column:5}},{start:{line:30,column:4},end:{line:33,column:5}}],line:30},"6":{loc:{start:{line:30,column:8},end:{line:30,column:75}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:28}},{start:{line:30,column:32},end:{line:30,column:75}}],line:30},"7":{loc:{start:{line:30,column:34},end:{line:30,column:74}},type:"binary-expr",locations:[{start:{line:30,column:34},end:{line:30,column:54}},{start:{line:30,column:58},end:{line:30,column:74}}],line:30},"8":{loc:{start:{line:34,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:37,column:5}},{start:{line:34,column:4},end:{line:37,column:5}}],line:34},"9":{loc:{start:{line:38,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:41,column:5}},{start:{line:38,column:4},end:{line:41,column:5}}],line:38},"10":{loc:{start:{line:44,column:33},end:{line:44,column:89}},type:"cond-expr",locations:[{start:{line:44,column:56},end:{line:44,column:71}},{start:{line:44,column:74},end:{line:44,column:89}}],line:44},"11":{loc:{start:{line:47,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:53,column:5}},{start:{line:47,column:4},end:{line:53,column:5}}],line:47}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/nonStandardHalfSigned.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/nonStandardHalfSigned.ts"],names:[],mappings:";;AAQA,wCAgDC;AAxDD,iCAAiC;AACjC,uCAAuC;AACvC,2BAA2D;AAE3D;;;GAGG;AACH,SAAgB,cAAc,CAAC,KAAc,EAAE,cAAsB;IACnE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC;QACxC,0BAA0B;QAC1B,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAC;IACvE,CAAC;IAED,IAAI,mBAAmB,CAAC;IACxB,IAAI,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAC9C,mBAAmB,GAAG,KAAK,CAAC,OAAO,CAAC;IACtC,CAAC;SAAM,CAAC;QACN,mBAAmB,GAAG,UAAO,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACxD,CAAC;IAED,mDAAmD;IACnD,4BAA4B;IAC5B,IAAI,CAAC,mBAAmB,IAAI,mBAAmB,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;QAC7D,0BAA0B;QAC1B,OAAO;IACT,CAAC;IAED,MAAM,CAAC,GAAG,EAAE,eAAe,EAAE,SAAS,CAAC,GAAG,mBAAmB,CAAC;IAC9D,IAAI,GAAG,KAAK,OAAO,CAAC,IAAI,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC,CAAC,EAAE,CAAC;QACxE,0BAA0B;QAC1B,OAAO;IACT,CAAC;IAED,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC;QAChC,0BAA0B;QAC1B,OAAO;IACT,CAAC;IAED,IAAI,YAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,YAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QACvD,0BAA0B;QAC1B,OAAO;IACT,CAAC;IAED,MAAM,eAAe,GAAG;QACtB,GAAG;QACH,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,cAAc,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;QACnF,SAAS;KACV,CAAC;IAEF,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;QACzB,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3D,KAAK,CAAC,OAAO,GAAG,eAA2B,CAAC;IAC9C,CAAC;SAAM,CAAC;QACN,KAAK,CAAC,MAAM,GAAG,UAAO,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;IAClD,CAAC;AACH,CAAC",sourcesContent:["import * as assert from 'assert';\nimport * as opcodes from 'bitcoin-ops';\nimport { classify, script as bscript, TxInput } from '../';\n\n/**\n * @param input - Input of non-standard half-signed transaction created with `tx.build()` instead of `tx.buildIncomplete()`.\n * @param signatureIndex - Position to map the existing signatures to. Other signatures will be padded with OP_0.\n */\nexport function padInputScript(input: TxInput, signatureIndex: number): void {\n  if (![0, 1, 2].includes(signatureIndex)) {\n    /* istanbul ignore next */\n    throw new Error(`invalid signature index: must be one of [0, 1, 2]`);\n  }\n\n  let decompiledSigScript;\n  if (input.witness && input.witness.length > 0) {\n    decompiledSigScript = input.witness;\n  } else {\n    decompiledSigScript = bscript.decompile(input.script);\n  }\n\n  // The shape of a non-standard half-signed input is\n  //   OP_0 <signature> <p2ms>\n  if (!decompiledSigScript || decompiledSigScript.length !== 3) {\n    /* istanbul ignore next */\n    return;\n  }\n\n  const [op0, signatureBuffer, sigScript] = decompiledSigScript;\n  if (op0 !== opcodes.OP_0 && !(Buffer.isBuffer(op0) && op0.length === 0)) {\n    /* istanbul ignore next */\n    return;\n  }\n\n  if (!Buffer.isBuffer(sigScript)) {\n    /* istanbul ignore next */\n    return;\n  }\n\n  if (classify.output(sigScript) !== classify.types.P2MS) {\n    /* istanbul ignore next */\n    return;\n  }\n\n  const paddedSigScript = [\n    op0,\n    ...[0, 1, 2].map((i) => (i === signatureIndex ? signatureBuffer : Buffer.from([]))),\n    sigScript,\n  ];\n\n  if (input.witness.length) {\n    paddedSigScript.forEach((b) => assert(Buffer.isBuffer(b)));\n    input.witness = paddedSigScript as Buffer[];\n  } else {\n    input.script = bscript.compile(paddedSigScript);\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2e351fd4ef8f8ae5bf85bd939f3829bfdba52ce4"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_eq9kqpp2f=function(){return actualCoverage;};}return actualCoverage;}cov_eq9kqpp2f();cov_eq9kqpp2f().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_eq9kqpp2f().s[1]++;exports.padInputScript=padInputScript;const assert=(cov_eq9kqpp2f().s[2]++,require("assert"));const opcodes=(cov_eq9kqpp2f().s[3]++,require("bitcoin-ops"));const __1=(cov_eq9kqpp2f().s[4]++,require("../"));/**
 * @param input - Input of non-standard half-signed transaction created with `tx.build()` instead of `tx.buildIncomplete()`.
 * @param signatureIndex - Position to map the existing signatures to. Other signatures will be padded with OP_0.
 */function padInputScript(input,signatureIndex){cov_eq9kqpp2f().f[0]++;cov_eq9kqpp2f().s[5]++;if(![0,1,2].includes(signatureIndex)){cov_eq9kqpp2f().b[0][0]++;/* istanbul ignore next */throw new Error(`invalid signature index: must be one of [0, 1, 2]`);}else{cov_eq9kqpp2f().b[0][1]++;}let decompiledSigScript;cov_eq9kqpp2f().s[6]++;if((cov_eq9kqpp2f().b[2][0]++,input.witness)&&(cov_eq9kqpp2f().b[2][1]++,input.witness.length>0)){cov_eq9kqpp2f().b[1][0]++;cov_eq9kqpp2f().s[7]++;decompiledSigScript=input.witness;}else{cov_eq9kqpp2f().b[1][1]++;cov_eq9kqpp2f().s[8]++;decompiledSigScript=__1.script.decompile(input.script);}// The shape of a non-standard half-signed input is
//   OP_0 <signature> <p2ms>
cov_eq9kqpp2f().s[9]++;if((cov_eq9kqpp2f().b[4][0]++,!decompiledSigScript)||(cov_eq9kqpp2f().b[4][1]++,decompiledSigScript.length!==3)){cov_eq9kqpp2f().b[3][0]++;/* istanbul ignore next */return;}else{cov_eq9kqpp2f().b[3][1]++;}const[op0,signatureBuffer,sigScript]=(cov_eq9kqpp2f().s[10]++,decompiledSigScript);cov_eq9kqpp2f().s[11]++;if((cov_eq9kqpp2f().b[6][0]++,op0!==opcodes.OP_0)&&(cov_eq9kqpp2f().b[6][1]++,!((cov_eq9kqpp2f().b[7][0]++,Buffer.isBuffer(op0))&&(cov_eq9kqpp2f().b[7][1]++,op0.length===0)))){cov_eq9kqpp2f().b[5][0]++;/* istanbul ignore next */return;}else{cov_eq9kqpp2f().b[5][1]++;}cov_eq9kqpp2f().s[12]++;if(!Buffer.isBuffer(sigScript)){cov_eq9kqpp2f().b[8][0]++;/* istanbul ignore next */return;}else{cov_eq9kqpp2f().b[8][1]++;}cov_eq9kqpp2f().s[13]++;if(__1.classify.output(sigScript)!==__1.classify.types.P2MS){cov_eq9kqpp2f().b[9][0]++;/* istanbul ignore next */return;}else{cov_eq9kqpp2f().b[9][1]++;}const paddedSigScript=(cov_eq9kqpp2f().s[14]++,[op0,...[0,1,2].map(i=>{cov_eq9kqpp2f().f[1]++;cov_eq9kqpp2f().s[15]++;return i===signatureIndex?(cov_eq9kqpp2f().b[10][0]++,signatureBuffer):(cov_eq9kqpp2f().b[10][1]++,Buffer.from([]));}),sigScript]);cov_eq9kqpp2f().s[16]++;if(input.witness.length){cov_eq9kqpp2f().b[11][0]++;cov_eq9kqpp2f().s[17]++;paddedSigScript.forEach(b=>{cov_eq9kqpp2f().f[2]++;cov_eq9kqpp2f().s[18]++;return assert(Buffer.isBuffer(b));});cov_eq9kqpp2f().s[19]++;input.witness=paddedSigScript;}else{cov_eq9kqpp2f().b[11][1]++;cov_eq9kqpp2f().s[20]++;input.script=__1.script.compile(paddedSigScript);}}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vbm9uU3RhbmRhcmRIYWxmU2lnbmVkLnRzIiwic291cmNlcyI6WyIvVXNlcnMvcXJvYy9Db2RlL2hhcGkvY2hhaW5kZWZ1c2VyL3V0eG8tbGliL3NyYy9iaXRnby9ub25TdGFuZGFyZEhhbGZTaWduZWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFRQSx3Q0FnREM7QUF4REQsaUNBQWlDO0FBQ2pDLHVDQUF1QztBQUN2QywyQkFBMkQ7QUFFM0Q7OztHQUdHO0FBQ0gsU0FBZ0IsY0FBYyxDQUFDLEtBQWMsRUFBRSxjQUFzQjtJQUNuRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDO1FBQ3hDLDBCQUEwQjtRQUMxQixNQUFNLElBQUksS0FBSyxDQUFDLG1EQUFtRCxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUVELElBQUksbUJBQW1CLENBQUM7SUFDeEIsSUFBSSxLQUFLLENBQUMsT0FBTyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQzlDLG1CQUFtQixHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUM7SUFDdEMsQ0FBQztTQUFNLENBQUM7UUFDTixtQkFBbUIsR0FBRyxVQUFPLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBRUQsbURBQW1EO0lBQ25ELDRCQUE0QjtJQUM1QixJQUFJLENBQUMsbUJBQW1CLElBQUksbUJBQW1CLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQzdELDBCQUEwQjtRQUMxQixPQUFPO0lBQ1QsQ0FBQztJQUVELE1BQU0sQ0FBQyxHQUFHLEVBQUUsZUFBZSxFQUFFLFNBQVMsQ0FBQyxHQUFHLG1CQUFtQixDQUFDO0lBQzlELElBQUksR0FBRyxLQUFLLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3hFLDBCQUEwQjtRQUMxQixPQUFPO0lBQ1QsQ0FBQztJQUVELElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUM7UUFDaEMsMEJBQTBCO1FBQzFCLE9BQU87SUFDVCxDQUFDO0lBRUQsSUFBSSxZQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLFlBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDdkQsMEJBQTBCO1FBQzFCLE9BQU87SUFDVCxDQUFDO0lBRUQsTUFBTSxlQUFlLEdBQUc7UUFDdEIsR0FBRztRQUNILEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssY0FBYyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuRixTQUFTO0tBQ1YsQ0FBQztJQUVGLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUN6QixlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0QsS0FBSyxDQUFDLE9BQU8sR0FBRyxlQUEyQixDQUFDO0lBQzlDLENBQUM7U0FBTSxDQUFDO1FBQ04sS0FBSyxDQUFDLE1BQU0sR0FBRyxVQUFPLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ2xELENBQUM7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYXNzZXJ0IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgKiBhcyBvcGNvZGVzIGZyb20gJ2JpdGNvaW4tb3BzJztcbmltcG9ydCB7IGNsYXNzaWZ5LCBzY3JpcHQgYXMgYnNjcmlwdCwgVHhJbnB1dCB9IGZyb20gJy4uLyc7XG5cbi8qKlxuICogQHBhcmFtIGlucHV0IC0gSW5wdXQgb2Ygbm9uLXN0YW5kYXJkIGhhbGYtc2lnbmVkIHRyYW5zYWN0aW9uIGNyZWF0ZWQgd2l0aCBgdHguYnVpbGQoKWAgaW5zdGVhZCBvZiBgdHguYnVpbGRJbmNvbXBsZXRlKClgLlxuICogQHBhcmFtIHNpZ25hdHVyZUluZGV4IC0gUG9zaXRpb24gdG8gbWFwIHRoZSBleGlzdGluZyBzaWduYXR1cmVzIHRvLiBPdGhlciBzaWduYXR1cmVzIHdpbGwgYmUgcGFkZGVkIHdpdGggT1BfMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhZElucHV0U2NyaXB0KGlucHV0OiBUeElucHV0LCBzaWduYXR1cmVJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gIGlmICghWzAsIDEsIDJdLmluY2x1ZGVzKHNpZ25hdHVyZUluZGV4KSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHNpZ25hdHVyZSBpbmRleDogbXVzdCBiZSBvbmUgb2YgWzAsIDEsIDJdYCk7XG4gIH1cblxuICBsZXQgZGVjb21waWxlZFNpZ1NjcmlwdDtcbiAgaWYgKGlucHV0LndpdG5lc3MgJiYgaW5wdXQud2l0bmVzcy5sZW5ndGggPiAwKSB7XG4gICAgZGVjb21waWxlZFNpZ1NjcmlwdCA9IGlucHV0LndpdG5lc3M7XG4gIH0gZWxzZSB7XG4gICAgZGVjb21waWxlZFNpZ1NjcmlwdCA9IGJzY3JpcHQuZGVjb21waWxlKGlucHV0LnNjcmlwdCk7XG4gIH1cblxuICAvLyBUaGUgc2hhcGUgb2YgYSBub24tc3RhbmRhcmQgaGFsZi1zaWduZWQgaW5wdXQgaXNcbiAgLy8gICBPUF8wIDxzaWduYXR1cmU+IDxwMm1zPlxuICBpZiAoIWRlY29tcGlsZWRTaWdTY3JpcHQgfHwgZGVjb21waWxlZFNpZ1NjcmlwdC5sZW5ndGggIT09IDMpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IFtvcDAsIHNpZ25hdHVyZUJ1ZmZlciwgc2lnU2NyaXB0XSA9IGRlY29tcGlsZWRTaWdTY3JpcHQ7XG4gIGlmIChvcDAgIT09IG9wY29kZXMuT1BfMCAmJiAhKEJ1ZmZlci5pc0J1ZmZlcihvcDApICYmIG9wMC5sZW5ndGggPT09IDApKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihzaWdTY3JpcHQpKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY2xhc3NpZnkub3V0cHV0KHNpZ1NjcmlwdCkgIT09IGNsYXNzaWZ5LnR5cGVzLlAyTVMpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHBhZGRlZFNpZ1NjcmlwdCA9IFtcbiAgICBvcDAsXG4gICAgLi4uWzAsIDEsIDJdLm1hcCgoaSkgPT4gKGkgPT09IHNpZ25hdHVyZUluZGV4ID8gc2lnbmF0dXJlQnVmZmVyIDogQnVmZmVyLmZyb20oW10pKSksXG4gICAgc2lnU2NyaXB0LFxuICBdO1xuXG4gIGlmIChpbnB1dC53aXRuZXNzLmxlbmd0aCkge1xuICAgIHBhZGRlZFNpZ1NjcmlwdC5mb3JFYWNoKChiKSA9PiBhc3NlcnQoQnVmZmVyLmlzQnVmZmVyKGIpKSk7XG4gICAgaW5wdXQud2l0bmVzcyA9IHBhZGRlZFNpZ1NjcmlwdCBhcyBCdWZmZXJbXTtcbiAgfSBlbHNlIHtcbiAgICBpbnB1dC5zY3JpcHQgPSBic2NyaXB0LmNvbXBpbGUocGFkZGVkU2lnU2NyaXB0KTtcbiAgfVxufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfZXE5a3FwcDJmIiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwiZXhwb3J0cyIsInBhZElucHV0U2NyaXB0IiwiYXNzZXJ0IiwicmVxdWlyZSIsIm9wY29kZXMiLCJfXzEiLCJpbnB1dCIsInNpZ25hdHVyZUluZGV4IiwiZiIsImluY2x1ZGVzIiwiYiIsIkVycm9yIiwiZGVjb21waWxlZFNpZ1NjcmlwdCIsIndpdG5lc3MiLCJsZW5ndGgiLCJzY3JpcHQiLCJkZWNvbXBpbGUiLCJvcDAiLCJzaWduYXR1cmVCdWZmZXIiLCJzaWdTY3JpcHQiLCJPUF8wIiwiQnVmZmVyIiwiaXNCdWZmZXIiLCJjbGFzc2lmeSIsIm91dHB1dCIsInR5cGVzIiwiUDJNUyIsInBhZGRlZFNpZ1NjcmlwdCIsIm1hcCIsImkiLCJmcm9tIiwiZm9yRWFjaCIsImNvbXBpbGUiXSwic291cmNlcyI6WyIvVXNlcnMvcXJvYy9Db2RlL2hhcGkvY2hhaW5kZWZ1c2VyL3V0eG8tbGliL3NyYy9iaXRnby9ub25TdGFuZGFyZEhhbGZTaWduZWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYXNzZXJ0IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgKiBhcyBvcGNvZGVzIGZyb20gJ2JpdGNvaW4tb3BzJztcbmltcG9ydCB7IGNsYXNzaWZ5LCBzY3JpcHQgYXMgYnNjcmlwdCwgVHhJbnB1dCB9IGZyb20gJy4uLyc7XG5cbi8qKlxuICogQHBhcmFtIGlucHV0IC0gSW5wdXQgb2Ygbm9uLXN0YW5kYXJkIGhhbGYtc2lnbmVkIHRyYW5zYWN0aW9uIGNyZWF0ZWQgd2l0aCBgdHguYnVpbGQoKWAgaW5zdGVhZCBvZiBgdHguYnVpbGRJbmNvbXBsZXRlKClgLlxuICogQHBhcmFtIHNpZ25hdHVyZUluZGV4IC0gUG9zaXRpb24gdG8gbWFwIHRoZSBleGlzdGluZyBzaWduYXR1cmVzIHRvLiBPdGhlciBzaWduYXR1cmVzIHdpbGwgYmUgcGFkZGVkIHdpdGggT1BfMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhZElucHV0U2NyaXB0KGlucHV0OiBUeElucHV0LCBzaWduYXR1cmVJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gIGlmICghWzAsIDEsIDJdLmluY2x1ZGVzKHNpZ25hdHVyZUluZGV4KSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHNpZ25hdHVyZSBpbmRleDogbXVzdCBiZSBvbmUgb2YgWzAsIDEsIDJdYCk7XG4gIH1cblxuICBsZXQgZGVjb21waWxlZFNpZ1NjcmlwdDtcbiAgaWYgKGlucHV0LndpdG5lc3MgJiYgaW5wdXQud2l0bmVzcy5sZW5ndGggPiAwKSB7XG4gICAgZGVjb21waWxlZFNpZ1NjcmlwdCA9IGlucHV0LndpdG5lc3M7XG4gIH0gZWxzZSB7XG4gICAgZGVjb21waWxlZFNpZ1NjcmlwdCA9IGJzY3JpcHQuZGVjb21waWxlKGlucHV0LnNjcmlwdCk7XG4gIH1cblxuICAvLyBUaGUgc2hhcGUgb2YgYSBub24tc3RhbmRhcmQgaGFsZi1zaWduZWQgaW5wdXQgaXNcbiAgLy8gICBPUF8wIDxzaWduYXR1cmU+IDxwMm1zPlxuICBpZiAoIWRlY29tcGlsZWRTaWdTY3JpcHQgfHwgZGVjb21waWxlZFNpZ1NjcmlwdC5sZW5ndGggIT09IDMpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IFtvcDAsIHNpZ25hdHVyZUJ1ZmZlciwgc2lnU2NyaXB0XSA9IGRlY29tcGlsZWRTaWdTY3JpcHQ7XG4gIGlmIChvcDAgIT09IG9wY29kZXMuT1BfMCAmJiAhKEJ1ZmZlci5pc0J1ZmZlcihvcDApICYmIG9wMC5sZW5ndGggPT09IDApKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihzaWdTY3JpcHQpKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY2xhc3NpZnkub3V0cHV0KHNpZ1NjcmlwdCkgIT09IGNsYXNzaWZ5LnR5cGVzLlAyTVMpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHBhZGRlZFNpZ1NjcmlwdCA9IFtcbiAgICBvcDAsXG4gICAgLi4uWzAsIDEsIDJdLm1hcCgoaSkgPT4gKGkgPT09IHNpZ25hdHVyZUluZGV4ID8gc2lnbmF0dXJlQnVmZmVyIDogQnVmZmVyLmZyb20oW10pKSksXG4gICAgc2lnU2NyaXB0LFxuICBdO1xuXG4gIGlmIChpbnB1dC53aXRuZXNzLmxlbmd0aCkge1xuICAgIHBhZGRlZFNpZ1NjcmlwdC5mb3JFYWNoKChiKSA9PiBhc3NlcnQoQnVmZmVyLmlzQnVmZmVyKGIpKSk7XG4gICAgaW5wdXQud2l0bmVzcyA9IHBhZGRlZFNpZ1NjcmlwdCBhcyBCdWZmZXJbXTtcbiAgfSBlbHNlIHtcbiAgICBpbnB1dC5zY3JpcHQgPSBic2NyaXB0LmNvbXBpbGUocGFkZGVkU2lnU2NyaXB0KTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiNHlRQWNNO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQUFBQSxhQUFBLEdBQUFFLENBQUEsTSxnRkFOTkMsT0FBQSxDQUFBQyxjQUFBLENBQUFBLGNBQUEsQ0FSQSxNQUFBQyxNQUFBLEVBQUFMLGFBQUEsR0FBQUUsQ0FBQSxNQUFBSSxPQUFBLFlBQ0EsTUFBQUMsT0FBQSxFQUFBUCxhQUFBLEdBQUFFLENBQUEsTUFBQUksT0FBQSxpQkFDQSxNQUFBRSxHQUFBLEVBQUFSLGFBQUEsR0FBQUUsQ0FBQSxNQUFBSSxPQUFBLFNBRUE7OztHQUlBLFFBQWdCLENBQUFGLGNBQWNBLENBQUNLLEtBQWMsQ0FBRUMsY0FBc0IsRUFBQVYsYUFBQSxHQUFBVyxDQUFBLE1BQUFYLGFBQUEsR0FBQUUsQ0FBQSxNQUNuRSxHQUFJ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