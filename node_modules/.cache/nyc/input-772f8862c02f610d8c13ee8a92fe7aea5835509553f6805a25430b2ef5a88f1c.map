{"version":3,"file":"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/templates/taprootnofn/input.ts","sources":["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/templates/taprootnofn/input.ts"],"names":[],"mappings":";AAAA,mBAAmB;;AAUnB,sBAUC;AAjBD,8BAA2C;AAC3C,8BAAiC;AAEjC,SAAS,kBAAkB,CAAC,KAAsB;IAChD,OAAO,KAAK,KAAK,WAAO,CAAC,IAAI,IAAI,UAAO,CAAC,2BAA2B,CAAC,KAAe,CAAC,CAAC;AACxF,CAAC;AAED,SAAgB,KAAK,CAAC,MAAsB,EAAE,eAAyB;IACrE,MAAM,MAAM,GAAG,UAAO,CAAC,SAAS,CAAC,MAAM,CAAU,CAAC;IAClD,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC;QAAE,OAAO,KAAK,CAAC;IAEpC,IAAI,eAAe,EAAE,CAAC;QACpB,mEAAmE;QACnE,OAAO,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,KAAK,WAAO,CAAC,IAAI,CAAC,CAAC;IAC5F,CAAC;IAED,OAAQ,MAAmB,CAAC,KAAK,CAAC,UAAO,CAAC,2BAA2B,CAAC,CAAC;AACzE,CAAC;AACD,KAAK,CAAC,MAAM,GAAG,GAAW,EAAE;IAC1B,OAAO,sBAAsB,CAAC;AAChC,CAAC,CAAC","sourcesContent":["// [signatures ...]\n\nimport { Stack } from '../../';\nimport { script as bscript } from '../../';\nimport { opcodes } from '../../';\n\nfunction isPartialSignature(value: number | Buffer): boolean {\n  return value === opcodes.OP_0 || bscript.isCanonicalSchnorrSignature(value as Buffer);\n}\n\nexport function check(script: Buffer | Stack, allowIncomplete?: boolean): boolean {\n  const chunks = bscript.decompile(script) as Stack;\n  if (chunks.length < 1) return false;\n\n  if (allowIncomplete) {\n    // Don't match completely unsigned to avoid colliding with multisig\n    return chunks.every(isPartialSignature) && chunks.some((chunk) => chunk !== opcodes.OP_0);\n  }\n\n  return (chunks as Buffer[]).every(bscript.isCanonicalSchnorrSignature);\n}\ncheck.toJSON = (): string => {\n  return 'taproot n-of-n input';\n};\n"]}