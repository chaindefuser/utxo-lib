{"version":3,"file":"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/zcash/hashZip0244.ts","sources":["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/zcash/hashZip0244.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Implements hashing methods described in https://zips.z.cash/zip-0244.\n * Only supports full transparent transactions without shielded inputs or outputs.\n */\nimport { Transaction, TxInput, TxOutput } from 'bitcoinjs-lib';\nimport { BufferWriter } from 'bitcoinjs-lib/src/bufferutils';\n\nconst blake2b = require('@bitgo/blake2b');\n\nimport { ZcashTransaction } from './ZcashTransaction';\nimport { varSliceSize } from '../UtxoTransaction';\n\ntype SignatureParams<TNumber extends number | bigint = number> = {\n  inIndex?: number;\n  prevOutScript: Buffer;\n  value: TNumber;\n  hashType: number;\n};\n\n/**\n * Blake2b hashing algorithm for Zcash\n * @param buffer\n * @param personalization\n * @returns 256-bit BLAKE2b hash\n */\nexport function getBlake2bHash(buffer: Buffer, personalization: string | Buffer): Buffer {\n  const out = Buffer.allocUnsafe(32);\n  personalization = Buffer.from(personalization);\n  return blake2b(out.length, null, null, personalization).update(buffer).digest(out);\n}\n\nfunction getHeaderDigest<TNumber extends number | bigint>(tx: ZcashTransaction<TNumber>): Buffer {\n  // https://zips.z.cash/zip-0244#t-1-header-digest\n  const mask = tx.overwintered ? 1 : 0;\n  const writer = BufferWriter.withCapacity(4 * 5);\n  writer.writeInt32(tx.version | (mask << 31)); // Set overwinter bit\n  writer.writeUInt32(tx.versionGroupId);\n  writer.writeUInt32(tx.consensusBranchId);\n  writer.writeUInt32(tx.locktime);\n  writer.writeUInt32(tx.expiryHeight);\n  return getBlake2bHash(writer.end(), 'ZTxIdHeadersHash');\n}\n\nexport function getPrevoutsDigest<TNumber extends number | bigint>(\n  ins: TxInput[],\n  tag = 'ZTxIdPrevoutHash',\n  sigParams?: SignatureParams<TNumber>\n): Buffer {\n  if (sigParams) {\n    if (sigParams.hashType & Transaction.SIGHASH_ANYONECANPAY) {\n      return getPrevoutsDigest([]);\n    }\n  }\n\n  const bufferWriter = new BufferWriter(Buffer.allocUnsafe(36 * ins.length));\n  ins.forEach(function (txIn) {\n    bufferWriter.writeSlice(txIn.hash);\n    bufferWriter.writeUInt32(txIn.index);\n  });\n  return getBlake2bHash(bufferWriter.end(), tag);\n}\n\nexport function getSequenceDigest<TNumber extends number | bigint>(\n  ins: TxInput[],\n  tag = 'ZTxIdSequencHash',\n  sigParams?: SignatureParams<TNumber>\n): Buffer {\n  // txid: https://zips.z.cash/zip-0244#t-2b-sequence-digest\n  // sig: https://zips.z.cash/zip-0244#s-2b-sequence-sig-digest\n  // https://github.com/zcash-hackworks/zcash-test-vectors/blob/dd8fdb/zip_0244.py#L263\n  if (sigParams) {\n    const { hashType } = sigParams;\n    if (\n      hashType & Transaction.SIGHASH_ANYONECANPAY ||\n      (hashType & 0x1f) === Transaction.SIGHASH_SINGLE ||\n      (hashType & 0x1f) === Transaction.SIGHASH_NONE\n    ) {\n      return getSequenceDigest([]);\n    }\n  }\n\n  const bufferWriter = new BufferWriter(Buffer.allocUnsafe(4 * ins.length));\n\n  ins.forEach(function (txIn) {\n    bufferWriter.writeUInt32(txIn.sequence);\n  });\n\n  return getBlake2bHash(bufferWriter.end(), tag);\n}\n\nexport function getOutputsDigest<TNumber extends number | bigint>(\n  outs: TxOutput<TNumber>[],\n  tag = 'ZTxIdOutputsHash',\n  sigParams?: SignatureParams<TNumber>\n): Buffer {\n  // txid: https://zips.z.cash/zip-0244#t-2c-outputs-digest\n  // sig: https://zips.z.cash/zip-0244#s-2c-outputs-sig-digest\n  // https://github.com/zcash-hackworks/zcash-test-vectors/blob/dd8fdb/zip_0244.py#L275\n  if (sigParams) {\n    let { hashType } = sigParams;\n    hashType = hashType & 0x1f;\n\n    if (hashType === Transaction.SIGHASH_SINGLE) {\n      if (sigParams.inIndex === undefined) {\n        throw new Error();\n      }\n      if (outs[sigParams.inIndex] === undefined) {\n        return getOutputsDigest(outs);\n      }\n      return getOutputsDigest([outs[sigParams.inIndex]]);\n    }\n\n    if (hashType === Transaction.SIGHASH_NONE) {\n      return getOutputsDigest([]);\n    }\n\n    return getOutputsDigest(outs, tag);\n  }\n\n  // Find out the size of the outputs and write them\n  const txOutsSize = outs.reduce(function (sum, output) {\n    return sum + 8 + varSliceSize(output.script);\n  }, 0);\n\n  const bufferWriter = new BufferWriter(Buffer.allocUnsafe(txOutsSize));\n\n  outs.forEach(function (out) {\n    bufferWriter.writeUInt64(out.value);\n    bufferWriter.writeVarSlice(out.script);\n  });\n\n  return getBlake2bHash(bufferWriter.end(), tag);\n}\n\nfunction getTxinDigest<TNumber extends number | bigint>(input: TxInput, sigParams: SignatureParams<TNumber>) {\n  // https://zips.z.cash/zip-0244#s-2d-txin-sig-digest\n  // https://github.com/zcash-hackworks/zcash-test-vectors/blob/dd8fdb/zip_0244.py#L291\n  const writer = BufferWriter.withCapacity(\n    32 /* prevout hash */ +\n      4 /* prevout vin */ +\n      varSliceSize(sigParams.prevOutScript) +\n      8 /* value */ +\n      4 /* sequence */\n  );\n  writer.writeSlice(input.hash);\n  writer.writeUInt32(input.index);\n  writer.writeVarSlice(sigParams.prevOutScript);\n  writer.writeUInt64(sigParams.value);\n  writer.writeUInt32(input.sequence);\n  return getBlake2bHash(writer.end(), 'Zcash___TxInHash');\n}\n\nfunction getTransparentDigest<TNumber extends number | bigint>(\n  tx: { ins: TxInput[]; outs: TxOutput<TNumber>[] },\n  sigParams?: SignatureParams<TNumber>\n): Buffer {\n  // txid: https://zips.z.cash/zip-0244#t-2-transparent-digest\n  // sig: https://zips.z.cash/zip-0244#s-2a-prevouts-sig-digest\n  if (sigParams) {\n    if (sigParams.inIndex === undefined) {\n      return getTransparentDigest(tx);\n    }\n  }\n\n  let buffer;\n  if (tx.ins.length || tx.outs.length) {\n    const writer = BufferWriter.withCapacity(32 * (sigParams ? 4 : 3));\n    writer.writeSlice(getPrevoutsDigest(tx.ins, undefined, sigParams));\n    writer.writeSlice(getSequenceDigest(tx.ins, undefined, sigParams));\n    writer.writeSlice(getOutputsDigest(tx.outs, undefined, sigParams));\n    if (sigParams) {\n      if (sigParams.inIndex === undefined) {\n        throw new Error();\n      }\n      writer.writeSlice(getTxinDigest(tx.ins[sigParams.inIndex], sigParams));\n    }\n    buffer = writer.end();\n  } else {\n    buffer = Buffer.of();\n  }\n  return getBlake2bHash(buffer, 'ZTxIdTranspaHash');\n}\n\nfunction getSaplingDigest<TNumber extends number | bigint>(tx: ZcashTransaction<TNumber>): Buffer {\n  // https://zips.z.cash/zip-0244#t-3-sapling-digest\n  return getBlake2bHash(Buffer.of(), 'ZTxIdSaplingHash');\n}\n\nfunction getOrchardDigest<TNumber extends number | bigint>(tx: ZcashTransaction<TNumber>): Buffer {\n  // https://zips.z.cash/zip-0244#t-4-orchard-digest\n  return getBlake2bHash(Buffer.of(), 'ZTxIdOrchardHash');\n}\n\n/**\n * @param tx\n * @param signatureParams - calculates txid when undefined\n */\nfunction getDigest<TNumber extends number | bigint>(\n  tx: ZcashTransaction<TNumber>,\n  signatureParams?: SignatureParams<TNumber>\n): Buffer {\n  // txid: https://zips.z.cash/zip-0244#id4\n  // sig: https://zips.z.cash/zip-0244#id13\n  const writer = BufferWriter.withCapacity(32 * 4);\n  writer.writeSlice(getHeaderDigest(tx));\n  writer.writeSlice(getTransparentDigest(tx, signatureParams));\n  writer.writeSlice(getSaplingDigest(tx));\n  writer.writeSlice(getOrchardDigest(tx));\n\n  const tag = 'ZcashTxHash_';\n  const personalization = BufferWriter.withCapacity(tag.length + 4 /* UInt32 */);\n  personalization.writeSlice(Buffer.from(tag));\n  personalization.writeUInt32(tx.consensusBranchId);\n  return getBlake2bHash(writer.end(), personalization.end());\n}\n\nexport function getTxidDigest<TNumber extends number | bigint>(tx: ZcashTransaction<TNumber>): Buffer {\n  // https://zips.z.cash/zip-0244#id4\n  return getDigest(tx);\n}\n\nexport function getSignatureDigest<TNumber extends number | bigint>(\n  tx: ZcashTransaction<TNumber>,\n  inIndex: number | undefined,\n  prevOutScript: Buffer,\n  value: TNumber,\n  hashType: number\n): Buffer {\n  // https://zips.z.cash/zip-0244#id13\n  return getDigest(tx, {\n    inIndex,\n    prevOutScript,\n    value,\n    hashType,\n  });\n}\n"]}