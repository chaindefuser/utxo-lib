"use strict";function cov_1k3yi9qav5(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/psbt.ts";var hash="1132f901c69a86180d99e6ae1f3324a127c166b0";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/psbt.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:62}},"2":{start:{line:4,column:0},end:{line:4,column:30}},"3":{start:{line:5,column:0},end:{line:5,column:32}},"4":{start:{line:6,column:0},end:{line:6,column:38}},"5":{start:{line:7,column:0},end:{line:7,column:46}},"6":{start:{line:8,column:0},end:{line:8,column:38}},"7":{start:{line:9,column:0},end:{line:9,column:66}},"8":{start:{line:10,column:15},end:{line:10,column:32}},"9":{start:{line:11,column:24},end:{line:11,column:57}},"10":{start:{line:12,column:16},end:{line:12,column:35}},"11":{start:{line:13,column:15},end:{line:13,column:32}},"12":{start:{line:14,column:18},end:{line:14,column:39}},"13":{start:{line:20,column:0},end:{line:20,column:123}},"14":{start:{line:24,column:0},end:{line:24,column:60}},"15":{start:{line:29,column:4},end:{line:40,column:5}},"16":{start:{line:30,column:8},end:{line:30,column:123}},"17":{start:{line:33,column:22},end:{line:33,column:133}},"18":{start:{line:34,column:8},end:{line:39,column:11}},"19":{start:{line:49,column:4},end:{line:52,column:6}},"20":{start:{line:60,column:8},end:{line:65,column:9}},"21":{start:{line:61,column:12},end:{line:61,column:61}},"22":{start:{line:64,column:12},end:{line:64,column:23}},"23":{start:{line:67,column:59},end:{line:67,column:71}},"24":{start:{line:68,column:41},end:{line:68,column:89}},"25":{start:{line:69,column:4},end:{line:76,column:5}},"26":{start:{line:70,column:8},end:{line:75,column:9}},"27":{start:{line:71,column:12},end:{line:71,column:109}},"28":{start:{line:71,column:33},end:{line:71,column:87}},"29":{start:{line:74,column:12},end:{line:74,column:111}},"30":{start:{line:74,column:33},end:{line:74,column:89}},"31":{start:{line:77,column:4},end:{line:79,column:5}},"32":{start:{line:78,column:8},end:{line:78,column:128}},"33":{start:{line:78,column:29},end:{line:78,column:106}},"34":{start:{line:86,column:59},end:{line:86,column:71}},"35":{start:{line:87,column:4},end:{line:89,column:7}},"36":{start:{line:88,column:8},end:{line:88,column:117}},"37":{start:{line:95,column:59},end:{line:95,column:71}},"38":{start:{line:96,column:29},end:{line:96,column:88}},"39":{start:{line:96,column:59},end:{line:96,column:76}},"40":{start:{line:97,column:30},end:{line:97,column:92}},"41":{start:{line:97,column:62},end:{line:97,column:80}},"42":{start:{line:98,column:4},end:{line:98,column:93}},"43":{start:{line:99,column:17},end:{line:99,column:63}},"44":{start:{line:100,column:21},end:{line:100,column:91}},"45":{start:{line:100,column:46},end:{line:100,column:90}},"46":{start:{line:101,column:4},end:{line:111,column:7}},"47":{start:{line:102,column:45},end:{line:102,column:97}},"48":{start:{line:103,column:8},end:{line:110,column:9}},"49":{start:{line:104,column:12},end:{line:104,column:123}},"50":{start:{line:107,column:37},end:{line:107,column:122}},"51":{start:{line:108,column:12},end:{line:108,column:33}},"52":{start:{line:109,column:12},end:{line:109,column:105}},"53":{start:{line:112,column:4},end:{line:124,column:7}},"54":{start:{line:113,column:8},end:{line:123,column:9}},"55":{start:{line:114,column:12},end:{line:114,column:222}},"56":{start:{line:116,column:13},end:{line:123,column:9}},"57":{start:{line:117,column:39},end:{line:117,column:45}},"58":{start:{line:118,column:12},end:{line:118,column:95}},"59":{start:{line:120,column:13},end:{line:123,column:9}},"60":{start:{line:121,column:38},end:{line:121,column:44}},"61":{start:{line:122,column:12},end:{line:122,column:74}},"62":{start:{line:125,column:4},end:{line:127,column:5}},"63":{start:{line:126,column:8},end:{line:126,column:20}},"64":{start:{line:128,column:4},end:{line:128,column:59}},"65":{start:{line:129,column:4},end:{line:129,column:79}},"66":{start:{line:130,column:4},end:{line:130,column:99}},"67":{start:{line:131,column:4},end:{line:133,column:5}},"68":{start:{line:132,column:8},end:{line:132,column:110}},"69":{start:{line:134,column:4},end:{line:134,column:16}},"70":{start:{line:141,column:24},end:{line:141,column:81}},"71":{start:{line:141,column:44},end:{line:141,column:80}},"72":{start:{line:142,column:4},end:{line:159,column:7}},"73":{start:{line:143,column:8},end:{line:158,column:9}},"74":{start:{line:144,column:27},end:{line:144,column:109}},"75":{start:{line:145,column:12},end:{line:145,column:62}},"76":{start:{line:148,column:27},end:{line:148,column:99}},"77":{start:{line:149,column:12},end:{line:157,column:13}},"78":{start:{line:150,column:16},end:{line:150,column:60}},"79":{start:{line:152,column:17},end:{line:157,column:13}},"80":{start:{line:153,column:16},end:{line:153,column:60}},"81":{start:{line:156,column:16},end:{line:156,column:60}}},fnMap:{"0":{name:"toUnspent",decl:{start:{line:28,column:9},end:{line:28,column:18}},loc:{start:{line:28,column:58},end:{line:41,column:1}},line:28},"1":{name:"getSigners",decl:{start:{line:48,column:9},end:{line:48,column:19}},loc:{start:{line:48,column:31},end:{line:53,column:1}},line:48},"2":{name:"signPsbtInput",decl:{start:{line:58,column:9},end:{line:58,column:22}},loc:{start:{line:58,column:78},end:{line:80,column:1}},line:58},"3":{name:"signPsbt",decl:{start:{line:59,column:13},end:{line:59,column:21}},loc:{start:{line:59,column:58},end:{line:66,column:5}},line:59},"4":{name:"(anonymous_4)",decl:{start:{line:71,column:27},end:{line:71,column:28}},loc:{start:{line:71,column:33},end:{line:71,column:87}},line:71},"5":{name:"(anonymous_5)",decl:{start:{line:74,column:27},end:{line:74,column:28}},loc:{start:{line:74,column:33},end:{line:74,column:89}},line:74},"6":{name:"(anonymous_6)",decl:{start:{line:78,column:23},end:{line:78,column:24}},loc:{start:{line:78,column:29},end:{line:78,column:106}},line:78},"7":{name:"signAllPsbtInputs",decl:{start:{line:85,column:9},end:{line:85,column:26}},loc:{start:{line:85,column:71},end:{line:90,column:1}},line:85},"8":{name:"(anonymous_8)",decl:{start:{line:87,column:19},end:{line:87,column:20}},loc:{start:{line:87,column:42},end:{line:89,column:5}},line:87},"9":{name:"constructPsbt",decl:{start:{line:94,column:9},end:{line:94,column:22}},loc:{start:{line:94,column:79},end:{line:135,column:1}},line:94},"10":{name:"(anonymous_10)",decl:{start:{line:96,column:43},end:{line:96,column:44}},loc:{start:{line:96,column:59},end:{line:96,column:76}},line:96},"11":{name:"(anonymous_11)",decl:{start:{line:97,column:45},end:{line:97,column:46}},loc:{start:{line:97,column:62},end:{line:97,column:80}},line:97},"12":{name:"(anonymous_12)",decl:{start:{line:100,column:32},end:{line:100,column:33}},loc:{start:{line:100,column:46},end:{line:100,column:90}},line:100},"13":{name:"(anonymous_13)",decl:{start:{line:101,column:21},end:{line:101,column:22}},loc:{start:{line:101,column:31},end:{line:111,column:5}},line:101},"14":{name:"(anonymous_14)",decl:{start:{line:112,column:20},end:{line:112,column:21}},loc:{start:{line:112,column:35},end:{line:124,column:5}},line:112},"15":{name:"verifyFullySignedSignatures",decl:{start:{line:140,column:9},end:{line:140,column:36}},loc:{start:{line:140,column:81},end:{line:160,column:1}},line:140},"16":{name:"(anonymous_16)",decl:{start:{line:141,column:37},end:{line:141,column:38}},loc:{start:{line:141,column:44},end:{line:141,column:80}},line:141},"17":{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:40},end:{line:159,column:5}},line:142}},branchMap:{"0":{loc:{start:{line:29,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:29,column:4},end:{line:40,column:5}},{start:{line:29,column:4},end:{line:40,column:5}}],line:29},"1":{loc:{start:{line:33,column:56},end:{line:33,column:132}},type:"cond-expr",locations:[{start:{line:33,column:101},end:{line:33,column:113}},{start:{line:33,column:116},end:{line:33,column:132}}],line:33},"2":{loc:{start:{line:51,column:22},end:{line:51,column:108}},type:"cond-expr",locations:[{start:{line:51,column:49},end:{line:51,column:58}},{start:{line:51,column:61},end:{line:51,column:108}}],line:51},"3":{loc:{start:{line:51,column:61},end:{line:51,column:108}},type:"cond-expr",locations:[{start:{line:51,column:90},end:{line:51,column:98}},{start:{line:51,column:101},end:{line:51,column:108}}],line:51},"4":{loc:{start:{line:60,column:8},end:{line:65,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:65,column:9}},{start:{line:60,column:8},end:{line:65,column:9}}],line:60},"5":{loc:{start:{line:67,column:59},end:{line:67,column:71}},type:"binary-expr",locations:[{start:{line:67,column:59},end:{line:67,column:65}},{start:{line:67,column:69},end:{line:67,column:71}}],line:67},"6":{loc:{start:{line:68,column:41},end:{line:68,column:89}},type:"cond-expr",locations:[{start:{line:68,column:51},end:{line:68,column:58}},{start:{line:68,column:61},end:{line:68,column:89}}],line:68},"7":{loc:{start:{line:69,column:4},end:{line:76,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:76,column:5}},{start:{line:69,column:4},end:{line:76,column:5}}],line:69},"8":{loc:{start:{line:70,column:8},end:{line:75,column:9}},type:"if",locations:[{start:{line:70,column:8},end:{line:75,column:9}},{start:{line:70,column:8},end:{line:75,column:9}}],line:70},"9":{loc:{start:{line:77,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:79,column:5}},{start:{line:77,column:4},end:{line:79,column:5}}],line:77},"10":{loc:{start:{line:77,column:8},end:{line:77,column:80}},type:"binary-expr",locations:[{start:{line:77,column:8},end:{line:77,column:29}},{start:{line:77,column:33},end:{line:77,column:45}},{start:{line:77,column:49},end:{line:77,column:80}}],line:77},"11":{loc:{start:{line:86,column:59},end:{line:86,column:71}},type:"binary-expr",locations:[{start:{line:86,column:59},end:{line:86,column:65}},{start:{line:86,column:69},end:{line:86,column:71}}],line:86},"12":{loc:{start:{line:95,column:59},end:{line:95,column:71}},type:"binary-expr",locations:[{start:{line:95,column:59},end:{line:95,column:65}},{start:{line:95,column:69},end:{line:95,column:71}}],line:95},"13":{loc:{start:{line:102,column:45},end:{line:102,column:97}},type:"cond-expr",locations:[{start:{line:102,column:55},end:{line:102,column:62}},{start:{line:102,column:65},end:{line:102,column:97}}],line:102},"14":{loc:{start:{line:103,column:8},end:{line:110,column:9}},type:"if",locations:[{start:{line:103,column:8},end:{line:110,column:9}},{start:{line:103,column:8},end:{line:110,column:9}}],line:103},"15":{loc:{start:{line:103,column:12},end:{line:103,column:59}},type:"binary-expr",locations:[{start:{line:103,column:12},end:{line:103,column:43}},{start:{line:103,column:47},end:{line:103,column:59}}],line:103},"16":{loc:{start:{line:113,column:8},end:{line:123,column:9}},type:"if",locations:[{start:{line:113,column:8},end:{line:123,column:9}},{start:{line:113,column:8},end:{line:123,column:9}}],line:113},"17":{loc:{start:{line:114,column:69},end:{line:114,column:203}},type:"cond-expr",locations:[{start:{line:114,column:96},end:{line:114,column:148}},{start:{line:114,column:151},end:{line:114,column:203}}],line:114},"18":{loc:{start:{line:116,column:13},end:{line:123,column:9}},type:"if",locations:[{start:{line:116,column:13},end:{line:123,column:9}},{start:{line:116,column:13},end:{line:123,column:9}}],line:116},"19":{loc:{start:{line:120,column:13},end:{line:123,column:9}},type:"if",locations:[{start:{line:120,column:13},end:{line:123,column:9}},{start:{line:120,column:13},end:{line:123,column:9}}],line:120},"20":{loc:{start:{line:125,column:4},end:{line:127,column:5}},type:"if",locations:[{start:{line:125,column:4},end:{line:127,column:5}},{start:{line:125,column:4},end:{line:127,column:5}}],line:125},"21":{loc:{start:{line:131,column:4},end:{line:133,column:5}},type:"if",locations:[{start:{line:131,column:4},end:{line:133,column:5}},{start:{line:131,column:4},end:{line:133,column:5}}],line:131},"22":{loc:{start:{line:143,column:8},end:{line:158,column:9}},type:"if",locations:[{start:{line:143,column:8},end:{line:158,column:9}},{start:{line:143,column:8},end:{line:158,column:9}}],line:143},"23":{loc:{start:{line:145,column:19},end:{line:145,column:61}},type:"binary-expr",locations:[{start:{line:145,column:19},end:{line:145,column:38}},{start:{line:145,column:42},end:{line:145,column:61}}],line:145},"24":{loc:{start:{line:149,column:12},end:{line:157,column:13}},type:"if",locations:[{start:{line:149,column:12},end:{line:157,column:13}},{start:{line:149,column:12},end:{line:157,column:13}}],line:149},"25":{loc:{start:{line:149,column:16},end:{line:149,column:106}},type:"binary-expr",locations:[{start:{line:149,column:17},end:{line:149,column:34}},{start:{line:149,column:38},end:{line:149,column:58}},{start:{line:149,column:64},end:{line:149,column:82}},{start:{line:149,column:86},end:{line:149,column:105}}],line:149},"26":{loc:{start:{line:150,column:23},end:{line:150,column:59}},type:"binary-expr",locations:[{start:{line:150,column:23},end:{line:150,column:32}},{start:{line:150,column:36},end:{line:150,column:46}},{start:{line:150,column:50},end:{line:150,column:59}}],line:150},"27":{loc:{start:{line:152,column:17},end:{line:157,column:13}},type:"if",locations:[{start:{line:152,column:17},end:{line:157,column:13}},{start:{line:152,column:17},end:{line:157,column:13}}],line:152},"28":{loc:{start:{line:152,column:21},end:{line:152,column:113}},type:"binary-expr",locations:[{start:{line:152,column:22},end:{line:152,column:39}},{start:{line:152,column:43},end:{line:152,column:64}},{start:{line:152,column:70},end:{line:152,column:89}},{start:{line:152,column:93},end:{line:152,column:112}}],line:152},"29":{loc:{start:{line:153,column:23},end:{line:153,column:59}},type:"binary-expr",locations:[{start:{line:153,column:23},end:{line:153,column:32}},{start:{line:153,column:36},end:{line:153,column:45}},{start:{line:153,column:49},end:{line:153,column:59}}],line:153},"30":{loc:{start:{line:156,column:23},end:{line:156,column:59}},type:"binary-expr",locations:[{start:{line:156,column:23},end:{line:156,column:33}},{start:{line:156,column:37},end:{line:156,column:46}},{start:{line:156,column:50},end:{line:156,column:59}}],line:156}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0,0,0],"26":[0,0,0],"27":[0,0],"28":[0,0,0,0],"29":[0,0,0],"30":[0,0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/psbt.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/testutil/psbt.ts"],names:[],mappings:";;;AAwEA,8BAiBC;AAQD,gCAKC;AAMD,sCAoCC;AAMD,8CAeC;AAKD,sCA+DC;AAMD,kEAuBC;AAtQD,iCAAiC;AAEjC,0DAMgC;AAChC,oCAkBkB;AAElB,iCAAwE;AACxE,wCAA4C;AA2B5C;;;;GAIG;AACU,QAAA,gBAAgB,GAAG,CAAC,GAAG,+BAAe,EAAE,qBAAqB,EAAE,kCAAkB,CAAU,CAAC;AAEzG;;GAEG;AACU,QAAA,iBAAiB,GAAG,+BAAe,CAAC;AAEjD;;GAEG;AACH,SAAgB,SAAS,CACvB,KAAY,EACZ,KAAa,EACb,OAAgB,EAChB,cAA8B;IAE9B,IAAI,KAAK,CAAC,UAAU,KAAK,UAAU,EAAE,CAAC;QACpC,OAAO,IAAA,kCAA2B,EAAC,OAAO,EAAE,KAAK,CAAC,KAAK,EAAE,EAAE,GAAG,EAAE,cAAc,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;IACzG,CAAC;SAAM,CAAC;QACN,MAAM,KAAK,GAAG,IAAA,4BAAoB,EAAC,KAAK,CAAC,UAAU,KAAK,qBAAqB,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QACjH,OAAO,IAAA,wBAAiB,EAAC,OAAO,EAAE,KAAK,CAAC,KAAK,EAAE;YAC7C,KAAK;YACL,IAAI,EAAE,KAAK;YACX,IAAI,EAAE,cAAc;YACpB,KAAK;SACN,CAAC,CAAC;IACL,CAAC;AACH,CAAC;AAED;;;;;GAKG;AACH,SAAgB,UAAU,CAAC,SAA0B;IACnD,OAAO;QACL,UAAU,EAAE,MAAM;QAClB,YAAY,EAAE,SAAS,KAAK,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,KAAK,YAAY,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO;KACrG,CAAC;AACJ,CAAC;AAED;;;GAGG;AACH,SAAgB,aAAa,CAC3B,IAAc,EACd,KAAY,EACZ,UAAkB,EAClB,cAA8B,EAC9B,IAAiC,EACjC,MAIC;IAED,SAAS,QAAQ,CAAC,IAAc,EAAE,QAAoB,EAAE,kBAA4B;QAClF,IAAI,kBAAkB,EAAE,CAAC;YACvB,IAAA,2BAAmB,EAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;QACtC,CAAC;aAAM,CAAC;YACN,QAAQ,EAAE,CAAC;QACb,CAAC;IACH,CAAC;IAED,MAAM,EAAE,OAAO,EAAE,aAAa,EAAE,kBAAkB,EAAE,GAAG,MAAM,IAAI,EAAE,CAAC;IACpE,MAAM,EAAE,UAAU,EAAE,YAAY,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IACtF,IAAI,IAAI,KAAK,YAAY,EAAE,CAAC;QAC1B,IAAI,KAAK,CAAC,UAAU,KAAK,UAAU,EAAE,CAAC;YACpC,QAAQ,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,cAAc,CAAC,UAAU,CAAC,CAAC,EAAE,kBAAkB,CAAC,CAAC;QACnG,CAAC;aAAM,CAAC;YACN,QAAQ,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,cAAc,CAAC,UAAU,CAAC,CAAC,EAAE,kBAAkB,CAAC,CAAC;QACrG,CAAC;IACH,CAAC;IACD,IAAI,IAAI,KAAK,YAAY,IAAI,YAAY,IAAI,KAAK,CAAC,UAAU,KAAK,UAAU,EAAE,CAAC;QAC7E,QAAQ,CACN,IAAI,EACJ,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,cAAc,CAAC,YAAY,CAAC,EAAE,EAAE,aAAa,EAAE,CAAC,EACnF,kBAAkB,CACnB,CAAC;IACJ,CAAC;AACH,CAAC;AAED;;;GAGG;AACH,SAAgB,iBAAiB,CAC/B,IAAc,EACd,MAAe,EACf,cAA8B,EAC9B,IAAiC,EACjC,MAIC;IAED,MAAM,EAAE,OAAO,EAAE,aAAa,EAAE,kBAAkB,EAAE,GAAG,MAAM,IAAI,EAAE,CAAC;IACpE,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,UAAU,EAAE,EAAE;QACnC,aAAa,CAAC,IAAI,EAAE,KAAK,EAAE,UAAU,EAAE,cAAc,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,aAAa,EAAE,kBAAkB,EAAE,CAAC,CAAC;IAC/G,CAAC,CAAC,CAAC;AACL,CAAC;AAED;;GAEG;AACH,SAAgB,aAAa,CAC3B,MAAe,EACf,OAAiB,EACjB,OAAgB,EAChB,cAA8B,EAC9B,IAA8C,EAC9C,MAIC;IAED,MAAM,EAAE,OAAO,EAAE,aAAa,EAAE,kBAAkB,EAAE,GAAG,MAAM,IAAI,EAAE,CAAC;IACpE,MAAM,gBAAgB,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE,CAAC,GAAG,GAAG,KAAK,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IACrF,MAAM,iBAAiB,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,MAAM,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IACzF,MAAM,CAAC,gBAAgB,IAAI,iBAAiB,EAAE,yCAAyC,CAAC,CAAC;IAEzF,MAAM,IAAI,GAAG,IAAA,4BAAoB,EAAC,EAAE,OAAO,EAAE,CAAC,CAAC;IAC/C,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,OAAO,EAAE,cAAc,CAAC,CAAC,CAAC;IAExF,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;QACxB,MAAM,EAAE,UAAU,EAAE,YAAY,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;QAC1F,IAAI,IAAA,uBAAe,EAAC,CAAC,CAAC,IAAI,YAAY,EAAE,CAAC;YACvC,IAAA,8BAAsB,EAAC,IAAI,EAAE,CAAC,EAAE,cAAc,EAAE,UAAU,EAAE,YAAY,EAAE,EAAE,kBAAkB,EAAE,CAAC,CAAC;QACpG,CAAC;aAAM,CAAC;YACN,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,0CAA0B,EAAC,cAAc,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,CAAC;YAC1F,MAAM,CAAC,YAAY,CAAC,CAAC;YACrB,IAAA,wCAAgC,EAAC,IAAI,EAAE,CAAC,EAAE,YAAY,EAAE,EAAE,kBAAkB,EAAE,CAAC,CAAC;QAClF,CAAC;IACH,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC5B,IAAI,YAAY,IAAI,MAAM,EAAE,CAAC;YAC3B,IAAA,6BAAqB,EACnB,IAAI,EACJ,cAAc,EACd,MAAM,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAA,4BAAoB,EAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAA,4BAAoB,EAAC,MAAM,CAAC,UAAU,CAAC,EAC5G,CAAC,EACD,MAAM,CAAC,KAAK,CACb,CAAC;QACJ,CAAC;aAAM,IAAI,SAAS,IAAI,MAAM,EAAE,CAAC;YAC/B,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,MAAM,CAAC;YAClC,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,IAAA,wBAAc,EAAC,OAAO,EAAE,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;QACtE,CAAC;aAAM,IAAI,QAAQ,IAAI,MAAM,EAAE,CAAC;YAC9B,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,CAAC;YACjC,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;QAChE,CAAC;IACH,CAAC,CAAC,CAAC;IAEH,IAAI,IAAI,KAAK,UAAU,EAAE,CAAC;QACxB,OAAO,IAAI,CAAC;IACd,CAAC;IAED,IAAI,CAAC,yBAAyB,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;IACvD,IAAI,CAAC,yBAAyB,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE,EAAE,aAAa,EAAE,CAAC,CAAC;IAE3E,iBAAiB,CAAC,IAAI,EAAE,MAAM,EAAE,cAAc,EAAE,YAAY,EAAE,EAAE,OAAO,EAAE,kBAAkB,EAAE,CAAC,CAAC;IAE/F,IAAI,IAAI,KAAK,YAAY,EAAE,CAAC;QAC1B,iBAAiB,CAAC,IAAI,EAAE,MAAM,EAAE,cAAc,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,aAAa,EAAE,kBAAkB,EAAE,CAAC,CAAC;IACxG,CAAC;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AAED;;;GAGG;AACH,SAAgB,2BAA2B,CACzC,EAA2B,EAC3B,QAA2B,EAC3B,UAA0B,EAC1B,MAAe,EACf,QAAiB;IAEjB,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAA,gBAAQ,EAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;IACjE,OAAO,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE;QACjC,IAAI,IAAA,gCAAwB,EAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,KAAK,qBAAqB,EAAE,CAAC;YACjF,MAAM,MAAM,GAAG,IAAA,iCAAyB,EAAC,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,SAAS,EAAE,WAAW,CAAC,CAAC;YACrF,OAAO,MAAM,CAAC,MAAM,KAAK,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QACpD,CAAC;aAAM,CAAC;YACN,MAAM,MAAM,GAAG,IAAA,kCAA0B,EAAC,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;YAC3E,IAAI,CAAC,MAAM,KAAK,MAAM,IAAI,QAAQ,KAAK,OAAO,CAAC,IAAI,CAAC,MAAM,KAAK,OAAO,IAAI,QAAQ,KAAK,MAAM,CAAC,EAAE,CAAC;gBAC/F,OAAO,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC;YAC9C,CAAC;iBAAM,IAAI,CAAC,MAAM,KAAK,MAAM,IAAI,QAAQ,KAAK,QAAQ,CAAC,IAAI,CAAC,MAAM,KAAK,QAAQ,IAAI,QAAQ,KAAK,MAAM,CAAC,EAAE,CAAC;gBACxG,OAAO,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC9C,CAAC;iBAAM,CAAC;gBACN,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC;YAC9C,CAAC;QACH,CAAC;IACH,CAAC,CAAC,CAAC;AACL,CAAC",sourcesContent:["import * as assert from 'assert';\n\nimport {\n  createOutputScriptP2shP2pk,\n  ScriptType,\n  ScriptType2Of3,\n  scriptTypeP2shP2pk,\n  scriptTypes2Of3,\n} from '../bitgo/outputScripts';\nimport {\n  addReplayProtectionUnspentToPsbt,\n  addWalletOutputToPsbt,\n  addWalletUnspentToPsbt,\n  createPsbtForNetwork,\n  getExternalChainCode,\n  getInternalChainCode,\n  getSignatureVerifications,\n  isWalletUnspent,\n  KeyName,\n  parseSignatureScript2Of3,\n  RootWalletKeys,\n  toOutput,\n  Unspent,\n  UtxoPsbt,\n  UtxoTransaction,\n  verifySignatureWithUnspent,\n  withUnsafeNonSegwit,\n} from '../bitgo';\nimport { Network } from '../networks';\nimport { mockReplayProtectionUnspent, mockWalletUnspent } from './mock';\nimport { toOutputScript } from '../address';\n\n/**\n * input script type and value.\n * use p2trMusig2 for p2trMusig2 script path.\n * use taprootKeyPathSpend for p2trMusig2 key path.\n */\nexport type InputScriptType = ScriptType | 'taprootKeyPathSpend';\nexport type OutputScriptType = ScriptType2Of3;\n\n/**\n * input script type and value\n */\nexport type Input = {\n  scriptType: InputScriptType;\n  value: bigint;\n};\n\n/**\n * Set isInternalAddress=true for internal output address\n */\n// Make script: string as instead of scriptType or address\nexport type Output = {\n  value: bigint;\n  isInternalAddress?: boolean;\n} & ({ scriptType: OutputScriptType } | { address: string } | { script: string });\n\n/**\n * array of supported input script types.\n * use p2trMusig2 for p2trMusig2 script path.\n * use taprootKeyPathSpend for p2trMusig2 key path.\n */\nexport const inputScriptTypes = [...scriptTypes2Of3, 'taprootKeyPathSpend', scriptTypeP2shP2pk] as const;\n\n/**\n * array of supported output script types.\n */\nexport const outputScriptTypes = scriptTypes2Of3;\n\n/**\n * create unspent object from input script type, index, network and root wallet key.\n */\nexport function toUnspent(\n  input: Input,\n  index: number,\n  network: Network,\n  rootWalletKeys: RootWalletKeys\n): Unspent<bigint> {\n  if (input.scriptType === 'p2shP2pk') {\n    return mockReplayProtectionUnspent(network, input.value, { key: rootWalletKeys['user'], vout: index });\n  } else {\n    const chain = getInternalChainCode(input.scriptType === 'taprootKeyPathSpend' ? 'p2trMusig2' : input.scriptType);\n    return mockWalletUnspent(network, input.value, {\n      chain,\n      vout: index,\n      keys: rootWalletKeys,\n      index,\n    });\n  }\n}\n\n/**\n * returns signer and cosigner names for InputScriptType.\n * user and undefined as signer and cosigner respectively for p2shP2pk.\n * user and backup as signer and cosigner respectively for p2trMusig2.\n * user and bitgo as signer and cosigner respectively for other input script types.\n */\nexport function getSigners(inputType: InputScriptType): { signerName: KeyName; cosignerName?: KeyName } {\n  return {\n    signerName: 'user',\n    cosignerName: inputType === 'p2shP2pk' ? undefined : inputType === 'p2trMusig2' ? 'backup' : 'bitgo',\n  };\n}\n\n/**\n * signs with first or second signature for single input.\n * p2shP2pk is signed only with first sign.\n */\nexport function signPsbtInput(\n  psbt: UtxoPsbt,\n  input: Input,\n  inputIndex: number,\n  rootWalletKeys: RootWalletKeys,\n  sign: 'halfsigned' | 'fullsigned',\n  params?: {\n    signers?: { signerName: KeyName; cosignerName?: KeyName };\n    deterministic?: boolean;\n    skipNonWitnessUtxo?: boolean;\n  }\n): void {\n  function signPsbt(psbt: UtxoPsbt, signFunc: () => void, skipNonWitnessUtxo?: boolean) {\n    if (skipNonWitnessUtxo) {\n      withUnsafeNonSegwit(psbt, signFunc);\n    } else {\n      signFunc();\n    }\n  }\n\n  const { signers, deterministic, skipNonWitnessUtxo } = params ?? {};\n  const { signerName, cosignerName } = signers ? signers : getSigners(input.scriptType);\n  if (sign === 'halfsigned') {\n    if (input.scriptType === 'p2shP2pk') {\n      signPsbt(psbt, () => psbt.signInput(inputIndex, rootWalletKeys[signerName]), skipNonWitnessUtxo);\n    } else {\n      signPsbt(psbt, () => psbt.signInputHD(inputIndex, rootWalletKeys[signerName]), skipNonWitnessUtxo);\n    }\n  }\n  if (sign === 'fullsigned' && cosignerName && input.scriptType !== 'p2shP2pk') {\n    signPsbt(\n      psbt,\n      () => psbt.signInputHD(inputIndex, rootWalletKeys[cosignerName], { deterministic }),\n      skipNonWitnessUtxo\n    );\n  }\n}\n\n/**\n * signs with first or second signature for all inputs.\n * p2shP2pk is signed only with first sign.\n */\nexport function signAllPsbtInputs(\n  psbt: UtxoPsbt,\n  inputs: Input[],\n  rootWalletKeys: RootWalletKeys,\n  sign: 'halfsigned' | 'fullsigned',\n  params?: {\n    signers?: { signerName: KeyName; cosignerName?: KeyName };\n    deterministic?: boolean;\n    skipNonWitnessUtxo?: boolean;\n  }\n): void {\n  const { signers, deterministic, skipNonWitnessUtxo } = params ?? {};\n  inputs.forEach((input, inputIndex) => {\n    signPsbtInput(psbt, input, inputIndex, rootWalletKeys, sign, { signers, deterministic, skipNonWitnessUtxo });\n  });\n}\n\n/**\n * construct psbt for given inputs, outputs, network and root wallet keys.\n */\nexport function constructPsbt(\n  inputs: Input[],\n  outputs: Output[],\n  network: Network,\n  rootWalletKeys: RootWalletKeys,\n  sign: 'unsigned' | 'halfsigned' | 'fullsigned',\n  params?: {\n    signers?: { signerName: KeyName; cosignerName?: KeyName };\n    deterministic?: boolean;\n    skipNonWitnessUtxo?: boolean;\n  }\n): UtxoPsbt {\n  const { signers, deterministic, skipNonWitnessUtxo } = params ?? {};\n  const totalInputAmount = inputs.reduce((sum, input) => sum + input.value, BigInt(0));\n  const outputInputAmount = outputs.reduce((sum, output) => sum + output.value, BigInt(0));\n  assert(totalInputAmount >= outputInputAmount, 'total output can not exceed total input');\n\n  const psbt = createPsbtForNetwork({ network });\n  const unspents = inputs.map((input, i) => toUnspent(input, i, network, rootWalletKeys));\n\n  unspents.forEach((u, i) => {\n    const { signerName, cosignerName } = signers ? signers : getSigners(inputs[i].scriptType);\n    if (isWalletUnspent(u) && cosignerName) {\n      addWalletUnspentToPsbt(psbt, u, rootWalletKeys, signerName, cosignerName, { skipNonWitnessUtxo });\n    } else {\n      const { redeemScript } = createOutputScriptP2shP2pk(rootWalletKeys[signerName].publicKey);\n      assert(redeemScript);\n      addReplayProtectionUnspentToPsbt(psbt, u, redeemScript, { skipNonWitnessUtxo });\n    }\n  });\n\n  outputs.forEach((output, i) => {\n    if ('scriptType' in output) {\n      addWalletOutputToPsbt(\n        psbt,\n        rootWalletKeys,\n        output.isInternalAddress ? getInternalChainCode(output.scriptType) : getExternalChainCode(output.scriptType),\n        i,\n        output.value\n      );\n    } else if ('address' in output) {\n      const { address, value } = output;\n      psbt.addOutput({ script: toOutputScript(address, network), value });\n    } else if ('script' in output) {\n      const { script, value } = output;\n      psbt.addOutput({ script: Buffer.from(script, 'hex'), value });\n    }\n  });\n\n  if (sign === 'unsigned') {\n    return psbt;\n  }\n\n  psbt.setAllInputsMusig2NonceHD(rootWalletKeys['user']);\n  psbt.setAllInputsMusig2NonceHD(rootWalletKeys['bitgo'], { deterministic });\n\n  signAllPsbtInputs(psbt, inputs, rootWalletKeys, 'halfsigned', { signers, skipNonWitnessUtxo });\n\n  if (sign === 'fullsigned') {\n    signAllPsbtInputs(psbt, inputs, rootWalletKeys, sign, { signers, deterministic, skipNonWitnessUtxo });\n  }\n\n  return psbt;\n}\n\n/**\n * Verifies signatures of fully signed tx (with taproot key path support).\n * NOTE: taproot key path tx can only be built and signed with PSBT.\n */\nexport function verifyFullySignedSignatures(\n  tx: UtxoTransaction<bigint>,\n  unspents: Unspent<bigint>[],\n  walletKeys: RootWalletKeys,\n  signer: KeyName,\n  cosigner: KeyName\n): boolean {\n  const prevOutputs = unspents.map((u) => toOutput(u, tx.network));\n  return unspents.every((u, index) => {\n    if (parseSignatureScript2Of3(tx.ins[index]).scriptType === 'taprootKeyPathSpend') {\n      const result = getSignatureVerifications(tx, index, u.value, undefined, prevOutputs);\n      return result.length === 1 && result[0].signature;\n    } else {\n      const result = verifySignatureWithUnspent(tx, index, unspents, walletKeys);\n      if ((signer === 'user' && cosigner === 'bitgo') || (signer === 'bitgo' && cosigner === 'user')) {\n        return result[0] && !result[1] && result[2];\n      } else if ((signer === 'user' && cosigner === 'backup') || (signer === 'backup' && cosigner === 'user')) {\n        return result[0] && result[1] && !result[2];\n      } else {\n        return !result[0] && result[1] && result[2];\n      }\n    }\n  });\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1132f901c69a86180d99e6ae1f3324a127c166b0"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1k3yi9qav5=function(){return actualCoverage;};}return actualCoverage;}cov_1k3yi9qav5();cov_1k3yi9qav5().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1k3yi9qav5().s[1]++;exports.outputScriptTypes=exports.inputScriptTypes=void 0;cov_1k3yi9qav5().s[2]++;exports.toUnspent=toUnspent;cov_1k3yi9qav5().s[3]++;exports.getSigners=getSigners;cov_1k3yi9qav5().s[4]++;exports.signPsbtInput=signPsbtInput;cov_1k3yi9qav5().s[5]++;exports.signAllPsbtInputs=signAllPsbtInputs;cov_1k3yi9qav5().s[6]++;exports.constructPsbt=constructPsbt;cov_1k3yi9qav5().s[7]++;exports.verifyFullySignedSignatures=verifyFullySignedSignatures;const assert=(cov_1k3yi9qav5().s[8]++,require("assert"));const outputScripts_1=(cov_1k3yi9qav5().s[9]++,require("../bitgo/outputScripts"));const bitgo_1=(cov_1k3yi9qav5().s[10]++,require("../bitgo"));const mock_1=(cov_1k3yi9qav5().s[11]++,require("./mock"));const address_1=(cov_1k3yi9qav5().s[12]++,require("../address"));/**
 * array of supported input script types.
 * use p2trMusig2 for p2trMusig2 script path.
 * use taprootKeyPathSpend for p2trMusig2 key path.
 */cov_1k3yi9qav5().s[13]++;exports.inputScriptTypes=[...outputScripts_1.scriptTypes2Of3,'taprootKeyPathSpend',outputScripts_1.scriptTypeP2shP2pk];/**
 * array of supported output script types.
 */cov_1k3yi9qav5().s[14]++;exports.outputScriptTypes=outputScripts_1.scriptTypes2Of3;/**
 * create unspent object from input script type, index, network and root wallet key.
 */function toUnspent(input,index,network,rootWalletKeys){cov_1k3yi9qav5().f[0]++;cov_1k3yi9qav5().s[15]++;if(input.scriptType==='p2shP2pk'){cov_1k3yi9qav5().b[0][0]++;cov_1k3yi9qav5().s[16]++;return(0,mock_1.mockReplayProtectionUnspent)(network,input.value,{key:rootWalletKeys['user'],vout:index});}else{cov_1k3yi9qav5().b[0][1]++;const chain=(cov_1k3yi9qav5().s[17]++,(0,bitgo_1.getInternalChainCode)(input.scriptType==='taprootKeyPathSpend'?(cov_1k3yi9qav5().b[1][0]++,'p2trMusig2'):(cov_1k3yi9qav5().b[1][1]++,input.scriptType)));cov_1k3yi9qav5().s[18]++;return(0,mock_1.mockWalletUnspent)(network,input.value,{chain,vout:index,keys:rootWalletKeys,index});}}/**
 * returns signer and cosigner names for InputScriptType.
 * user and undefined as signer and cosigner respectively for p2shP2pk.
 * user and backup as signer and cosigner respectively for p2trMusig2.
 * user and bitgo as signer and cosigner respectively for other input script types.
 */function getSigners(inputType){cov_1k3yi9qav5().f[1]++;cov_1k3yi9qav5().s[19]++;return{signerName:'user',cosignerName:inputType==='p2shP2pk'?(cov_1k3yi9qav5().b[2][0]++,undefined):(cov_1k3yi9qav5().b[2][1]++,inputType==='p2trMusig2'?(cov_1k3yi9qav5().b[3][0]++,'backup'):(cov_1k3yi9qav5().b[3][1]++,'bitgo'))};}/**
 * signs with first or second signature for single input.
 * p2shP2pk is signed only with first sign.
 */function signPsbtInput(psbt,input,inputIndex,rootWalletKeys,sign,params){cov_1k3yi9qav5().f[2]++;function signPsbt(psbt,signFunc,skipNonWitnessUtxo){cov_1k3yi9qav5().f[3]++;cov_1k3yi9qav5().s[20]++;if(skipNonWitnessUtxo){cov_1k3yi9qav5().b[4][0]++;cov_1k3yi9qav5().s[21]++;(0,bitgo_1.withUnsafeNonSegwit)(psbt,signFunc);}else{cov_1k3yi9qav5().b[4][1]++;cov_1k3yi9qav5().s[22]++;signFunc();}}const{signers,deterministic,skipNonWitnessUtxo}=(cov_1k3yi9qav5().s[23]++,(cov_1k3yi9qav5().b[5][0]++,params)??(cov_1k3yi9qav5().b[5][1]++,{}));const{signerName,cosignerName}=(cov_1k3yi9qav5().s[24]++,signers?(cov_1k3yi9qav5().b[6][0]++,signers):(cov_1k3yi9qav5().b[6][1]++,getSigners(input.scriptType)));cov_1k3yi9qav5().s[25]++;if(sign==='halfsigned'){cov_1k3yi9qav5().b[7][0]++;cov_1k3yi9qav5().s[26]++;if(input.scriptType==='p2shP2pk'){cov_1k3yi9qav5().b[8][0]++;cov_1k3yi9qav5().s[27]++;signPsbt(psbt,()=>{cov_1k3yi9qav5().f[4]++;cov_1k3yi9qav5().s[28]++;return psbt.signInput(inputIndex,rootWalletKeys[signerName]);},skipNonWitnessUtxo);}else{cov_1k3yi9qav5().b[8][1]++;cov_1k3yi9qav5().s[29]++;signPsbt(psbt,()=>{cov_1k3yi9qav5().f[5]++;cov_1k3yi9qav5().s[30]++;return psbt.signInputHD(inputIndex,rootWalletKeys[signerName]);},skipNonWitnessUtxo);}}else{cov_1k3yi9qav5().b[7][1]++;}cov_1k3yi9qav5().s[31]++;if((cov_1k3yi9qav5().b[10][0]++,sign==='fullsigned')&&(cov_1k3yi9qav5().b[10][1]++,cosignerName)&&(cov_1k3yi9qav5().b[10][2]++,input.scriptType!=='p2shP2pk')){cov_1k3yi9qav5().b[9][0]++;cov_1k3yi9qav5().s[32]++;signPsbt(psbt,()=>{cov_1k3yi9qav5().f[6]++;cov_1k3yi9qav5().s[33]++;return psbt.signInputHD(inputIndex,rootWalletKeys[cosignerName],{deterministic});},skipNonWitnessUtxo);}else{cov_1k3yi9qav5().b[9][1]++;}}/**
 * signs with first or second signature for all inputs.
 * p2shP2pk is signed only with first sign.
 */function signAllPsbtInputs(psbt,inputs,rootWalletKeys,sign,params){cov_1k3yi9qav5().f[7]++;const{signers,deterministic,skipNonWitnessUtxo}=(cov_1k3yi9qav5().s[34]++,(cov_1k3yi9qav5().b[11][0]++,params)??(cov_1k3yi9qav5().b[11][1]++,{}));cov_1k3yi9qav5().s[35]++;inputs.forEach((input,inputIndex)=>{cov_1k3yi9qav5().f[8]++;cov_1k3yi9qav5().s[36]++;signPsbtInput(psbt,input,inputIndex,rootWalletKeys,sign,{signers,deterministic,skipNonWitnessUtxo});});}/**
 * construct psbt for given inputs, outputs, network and root wallet keys.
 */function constructPsbt(inputs,outputs,network,rootWalletKeys,sign,params){cov_1k3yi9qav5().f[9]++;const{signers,deterministic,skipNonWitnessUtxo}=(cov_1k3yi9qav5().s[37]++,(cov_1k3yi9qav5().b[12][0]++,params)??(cov_1k3yi9qav5().b[12][1]++,{}));const totalInputAmount=(cov_1k3yi9qav5().s[38]++,inputs.reduce((sum,input)=>{cov_1k3yi9qav5().f[10]++;cov_1k3yi9qav5().s[39]++;return sum+input.value;},BigInt(0)));const outputInputAmount=(cov_1k3yi9qav5().s[40]++,outputs.reduce((sum,output)=>{cov_1k3yi9qav5().f[11]++;cov_1k3yi9qav5().s[41]++;return sum+output.value;},BigInt(0)));cov_1k3yi9qav5().s[42]++;assert(totalInputAmount>=outputInputAmount,'total output can not exceed total input');const psbt=(cov_1k3yi9qav5().s[43]++,(0,bitgo_1.createPsbtForNetwork)({network}));const unspents=(cov_1k3yi9qav5().s[44]++,inputs.map((input,i)=>{cov_1k3yi9qav5().f[12]++;cov_1k3yi9qav5().s[45]++;return toUnspent(input,i,network,rootWalletKeys);}));cov_1k3yi9qav5().s[46]++;unspents.forEach((u,i)=>{cov_1k3yi9qav5().f[13]++;const{signerName,cosignerName}=(cov_1k3yi9qav5().s[47]++,signers?(cov_1k3yi9qav5().b[13][0]++,signers):(cov_1k3yi9qav5().b[13][1]++,getSigners(inputs[i].scriptType)));cov_1k3yi9qav5().s[48]++;if((cov_1k3yi9qav5().b[15][0]++,(0,bitgo_1.isWalletUnspent)(u))&&(cov_1k3yi9qav5().b[15][1]++,cosignerName)){cov_1k3yi9qav5().b[14][0]++;cov_1k3yi9qav5().s[49]++;(0,bitgo_1.addWalletUnspentToPsbt)(psbt,u,rootWalletKeys,signerName,cosignerName,{skipNonWitnessUtxo});}else{cov_1k3yi9qav5().b[14][1]++;const{redeemScript}=(cov_1k3yi9qav5().s[50]++,(0,outputScripts_1.createOutputScriptP2shP2pk)(rootWalletKeys[signerName].publicKey));cov_1k3yi9qav5().s[51]++;assert(redeemScript);cov_1k3yi9qav5().s[52]++;(0,bitgo_1.addReplayProtectionUnspentToPsbt)(psbt,u,redeemScript,{skipNonWitnessUtxo});}});cov_1k3yi9qav5().s[53]++;outputs.forEach((output,i)=>{cov_1k3yi9qav5().f[14]++;cov_1k3yi9qav5().s[54]++;if('scriptType'in output){cov_1k3yi9qav5().b[16][0]++;cov_1k3yi9qav5().s[55]++;(0,bitgo_1.addWalletOutputToPsbt)(psbt,rootWalletKeys,output.isInternalAddress?(cov_1k3yi9qav5().b[17][0]++,(0,bitgo_1.getInternalChainCode)(output.scriptType)):(cov_1k3yi9qav5().b[17][1]++,(0,bitgo_1.getExternalChainCode)(output.scriptType)),i,output.value);}else{cov_1k3yi9qav5().b[16][1]++;cov_1k3yi9qav5().s[56]++;if('address'in output){cov_1k3yi9qav5().b[18][0]++;const{address,value}=(cov_1k3yi9qav5().s[57]++,output);cov_1k3yi9qav5().s[58]++;psbt.addOutput({script:(0,address_1.toOutputScript)(address,network),value});}else{cov_1k3yi9qav5().b[18][1]++;cov_1k3yi9qav5().s[59]++;if('script'in output){cov_1k3yi9qav5().b[19][0]++;const{script,value}=(cov_1k3yi9qav5().s[60]++,output);cov_1k3yi9qav5().s[61]++;psbt.addOutput({script:Buffer.from(script,'hex'),value});}else{cov_1k3yi9qav5().b[19][1]++;}}}});cov_1k3yi9qav5().s[62]++;if(sign==='unsigned'){cov_1k3yi9qav5().b[20][0]++;cov_1k3yi9qav5().s[63]++;return psbt;}else{cov_1k3yi9qav5().b[20][1]++;}cov_1k3yi9qav5().s[64]++;psbt.setAllInputsMusig2NonceHD(rootWalletKeys['user']);cov_1k3yi9qav5().s[65]++;psbt.setAllInputsMusig2NonceHD(rootWalletKeys['bitgo'],{deterministic});cov_1k3yi9qav5().s[66]++;signAllPsbtInputs(psbt,inputs,rootWalletKeys,'halfsigned',{signers,skipNonWitnessUtxo});cov_1k3yi9qav5().s[67]++;if(sign==='fullsigned'){cov_1k3yi9qav5().b[21][0]++;cov_1k3yi9qav5().s[68]++;signAllPsbtInputs(psbt,inputs,rootWalletKeys,sign,{signers,deterministic,skipNonWitnessUtxo});}else{cov_1k3yi9qav5().b[21][1]++;}cov_1k3yi9qav5().s[69]++;return psbt;}/**
 * Verifies signatures of fully signed tx (with taproot key path support).
 * NOTE: taproot key path tx can only be built and signed with PSBT.
 */function verifyFullySignedSignatures(tx,unspents,walletKeys,signer,cosigner){cov_1k3yi9qav5().f[15]++;const prevOutputs=(cov_1k3yi9qav5().s[70]++,unspents.map(u=>{cov_1k3yi9qav5().f[16]++;cov_1k3yi9qav5().s[71]++;return(0,bitgo_1.toOutput)(u,tx.network);}));cov_1k3yi9qav5().s[72]++;return unspents.every((u,index)=>{cov_1k3yi9qav5().f[17]++;cov_1k3yi9qav5().s[73]++;if((0,bitgo_1.parseSignatureScript2Of3)(tx.ins[index]).scriptType==='taprootKeyPathSpend'){cov_1k3yi9qav5().b[22][0]++;const result=(cov_1k3yi9qav5().s[74]++,(0,bitgo_1.getSignatureVerifications)(tx,index,u.value,undefined,prevOutputs));cov_1k3yi9qav5().s[75]++;return(cov_1k3yi9qav5().b[23][0]++,result.length===1)&&(cov_1k3yi9qav5().b[23][1]++,result[0].signature);}else{cov_1k3yi9qav5().b[22][1]++;const result=(cov_1k3yi9qav5().s[76]++,(0,bitgo_1.verifySignatureWithUnspent)(tx,index,unspents,walletKeys));cov_1k3yi9qav5().s[77]++;if((cov_1k3yi9qav5().b[25][0]++,signer==='user')&&(cov_1k3yi9qav5().b[25][1]++,cosigner==='bitgo')||(cov_1k3yi9qav5().b[25][2]++,signer==='bitgo')&&(cov_1k3yi9qav5().b[25][3]++,cosigner==='user')){cov_1k3yi9qav5().b[24][0]++;cov_1k3yi9qav5().s[78]++;return(cov_1k3yi9qav5().b[26][0]++,result[0])&&(cov_1k3yi9qav5().b[26][1]++,!result[1])&&(cov_1k3yi9qav5().b[26][2]++,result[2]);}else{cov_1k3yi9qav5().b[24][1]++;cov_1k3yi9qav5().s[79]++;if((cov_1k3yi9qav5().b[28][0]++,signer==='user')&&(cov_1k3yi9qav5().b[28][1]++,cosigner==='backup')||(cov_1k3yi9qav5().b[28][2]++,signer==='backup')&&(cov_1k3yi9qav5().b[28][3]++,cosigner==='user')){cov_1k3yi9qav5().b[27][0]++;cov_1k3yi9qav5().s[80]++;return(cov_1k3yi9qav5().b[29][0]++,result[0])&&(cov_1k3yi9qav5().b[29][1]++,result[1])&&(cov_1k3yi9qav5().b[29][2]++,!result[2]);}else{cov_1k3yi9qav5().b[27][1]++;cov_1k3yi9qav5().s[81]++;return(cov_1k3yi9qav5().b[30][0]++,!result[0])&&(cov_1k3yi9qav5().b[30][1]++,result[1])&&(cov_1k3yi9qav5().b[30][2]++,result[2]);}}}});}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvdGVzdHV0aWwvcHNidC50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvdGVzdHV0aWwvcHNidC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUF3RUEsOEJBaUJDO0FBUUQsZ0NBS0M7QUFNRCxzQ0FvQ0M7QUFNRCw4Q0FlQztBQUtELHNDQStEQztBQU1ELGtFQXVCQztBQXRRRCxpQ0FBaUM7QUFFakMsMERBTWdDO0FBQ2hDLG9DQWtCa0I7QUFFbEIsaUNBQXdFO0FBQ3hFLHdDQUE0QztBQTJCNUM7Ozs7R0FJRztBQUNVLFFBQUEsZ0JBQWdCLEdBQUcsQ0FBQyxHQUFHLCtCQUFlLEVBQUUscUJBQXFCLEVBQUUsa0NBQWtCLENBQVUsQ0FBQztBQUV6Rzs7R0FFRztBQUNVLFFBQUEsaUJBQWlCLEdBQUcsK0JBQWUsQ0FBQztBQUVqRDs7R0FFRztBQUNILFNBQWdCLFNBQVMsQ0FDdkIsS0FBWSxFQUNaLEtBQWEsRUFDYixPQUFnQixFQUNoQixjQUE4QjtJQUU5QixJQUFJLEtBQUssQ0FBQyxVQUFVLEtBQUssVUFBVSxFQUFFLENBQUM7UUFDcEMsT0FBTyxJQUFBLGtDQUEyQixFQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLGNBQWMsQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUN6RyxDQUFDO1NBQU0sQ0FBQztRQUNOLE1BQU0sS0FBSyxHQUFHLElBQUEsNEJBQW9CLEVBQUMsS0FBSyxDQUFDLFVBQVUsS0FBSyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakgsT0FBTyxJQUFBLHdCQUFpQixFQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMs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QUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QyxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGFzc2VydCBmcm9tICdhc3NlcnQnO1xuXG5pbXBvcnQge1xuICBjcmVhdGVPdXRwdXRTY3JpcHRQMnNoUDJwayxcbiAgU2NyaXB0VHlwZSxcbiAgU2NyaXB0VHlwZTJPZjMsXG4gIHNjcmlwdFR5cGVQMnNoUDJwayxcbiAgc2NyaXB0VHlwZXMyT2YzLFxufSBmcm9tICcuLi9iaXRnby9vdXRwdXRTY3JpcHRzJztcbmltcG9ydCB7XG4gIGFkZFJlcGxheVByb3RlY3Rpb25VbnNwZW50VG9Qc2J0LFxuICBhZGRXYWxsZXRPdXRwdXRUb1BzYnQsXG4gIGFkZFdhbGxldFVuc3BlbnRUb1BzYnQsXG4gIGNyZWF0ZVBzYnRGb3JOZXR3b3JrLFxuICBnZXRFeHRlcm5hbENoYWluQ29kZSxcbiAgZ2V0SW50ZXJuYWxDaGFpbkNvZGUsXG4gIGdldFNpZ25hdHVyZVZlcmlmaWNhdGlvbnMsXG4gIGlzV2FsbGV0VW5zcGVudCxcbiAgS2V5TmFtZSxcbiAgcGFyc2VTaWduYXR1cmVTY3JpcHQyT2YzLFxuICBSb290V2FsbGV0S2V5cyxcbiAgdG9PdXRwdXQsXG4gIFVuc3BlbnQsXG4gIFV0eG9Qc2J0LFxuICBVdHhvVHJhbnNhY3Rpb24sXG4gIHZlcmlmeVNpZ25hdHVyZVdpdGhVbnNwZW50LFxuICB3aXRoVW5zYWZlTm9uU2Vnd2l0LFxufSBmcm9tICcuLi9iaXRnbyc7XG5pbXBvcnQgeyBOZXR3b3JrIH0gZnJvbSAnLi4vbmV0d29ya3MnO1xuaW1wb3J0IHsgbW9ja1JlcGxheVByb3RlY3Rpb25VbnNwZW50LCBtb2NrV2FsbGV0VW5zcGVudCB9IGZyb20gJy4vbW9jayc7XG5pbXBvcnQgeyB0b091dHB1dFNjcmlwdCB9IGZyb20gJy4uL2FkZHJlc3MnO1xuXG4vKipcbiAqIGlucHV0IHNjcmlwdCB0eXBlIGFuZCB2YWx1ZS5cbiAqIHVzZSBwMnRyTXVzaWcyIGZvciBwMnRyTXVzaWcyIHNjcmlwdCBwYXRoLlxuICogdXNlIHRhcHJvb3RLZXlQYXRoU3BlbmQgZm9yIHAydHJNdXNpZzIga2V5IHBhdGguXG4gKi9cbmV4cG9ydCB0eXBlIElucHV0U2NyaXB0VHlwZSA9IFNjcmlwdFR5cGUgfCAndGFwcm9vdEtleVBhdGhTcGVuZCc7XG5leHBvcnQgdHlwZSBPdXRwdXRTY3JpcHRUeXBlID0gU2NyaXB0VHlwZTJPZjM7XG5cbi8qKlxuICogaW5wdXQgc2NyaXB0IHR5cGUgYW5kIHZhbHVlXG4gKi9cbmV4cG9ydCB0eXBlIElucHV0ID0ge1xuICBzY3JpcHRUeXBlOiBJbnB1dFNjcmlwdFR5cGU7XG4gIHZhbHVlOiBiaWdpbnQ7XG59O1xuXG4vKipcbiAqIFNldCBpc0ludGVybmFsQWRkcmVzcz10cnVlIGZvciBpbnRlcm5hbCBvdXRwdXQgYWRkcmVzc1xuICovXG4vLyBNYWtlIHNjcmlwdDogc3RyaW5nIGFzIGluc3RlYWQgb2Ygc2NyaXB0VHlwZSBvciBhZGRyZXNzXG5leHBvcnQgdHlwZSBPdXRwdXQgPSB7XG4gIHZhbHVlOiBiaWdpbnQ7XG4gIGlzSW50ZXJuYWxBZGRyZXNzPzogYm9vbGVhbjtcbn0gJiAoeyBzY3JpcHRUeXBlOiBPdXRwdXRTY3JpcHRUeXBlIH0gfCB7IGFkZHJlc3M6IHN0cmluZyB9IHwgeyBzY3JpcHQ6IHN0cmluZyB9KTtcblxuLyoqXG4gKiBhcnJheSBvZiBzdXBwb3J0ZWQgaW5wdXQgc2NyaXB0IHR5cGVzLlxuICogdXNlIHAydHJNdXNpZzIgZm9yIHAydHJNdXNpZzIgc2NyaXB0IHBhdGguXG4gKiB1c2UgdGFwcm9vdEtleVBhdGhTcGVuZCBmb3IgcDJ0ck11c2lnMiBrZXkgcGF0aC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlucHV0U2NyaXB0VHlwZXMgPSBbLi4uc2NyaXB0VHlwZXMyT2YzLCAndGFwcm9vdEtleVBhdGhTcGVuZCcsIHNjcmlwdFR5cGVQMnNoUDJwa10gYXMgY29uc3Q7XG5cbi8qKlxuICogYXJyYXkgb2Ygc3VwcG9ydGVkIG91dHB1dCBzY3JpcHQgdHlwZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBvdXRwdXRTY3JpcHRUeXBlcyA9IHNjcmlwdFR5cGVzMk9mMztcblxuLyoqXG4gKiBjcmVhdGUgdW5zcGVudCBvYmplY3QgZnJvbSBpbnB1dCBzY3JpcHQgdHlwZSwgaW5kZXgsIG5ldHdvcmsgYW5kIHJvb3Qgd2FsbGV0IGtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvVW5zcGVudChcbiAgaW5wdXQ6IElucHV0LFxuICBpbmRleDogbnVtYmVyLFxuICBuZXR3b3JrOiBOZXR3b3JrLFxuICByb290V2FsbGV0S2V5czogUm9vdFdhbGxldEtleXNcbik6IFVuc3BlbnQ8YmlnaW50PiB7XG4gIGlmIChpbnB1dC5zY3JpcHRUeXBlID09PSAncDJzaFAycGsnKSB7XG4gICAgcmV0dXJuIG1vY2tSZXBsYXlQcm90ZWN0aW9uVW5zcGVudChuZXR3b3JrLCBpbnB1dC52YWx1ZSwgeyBrZXk6IHJvb3RXYWxsZXRLZXlzWyd1c2VyJ10sIHZvdXQ6IGluZGV4IH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGNoYWluID0gZ2V0SW50ZXJuYWxDaGFpbkNvZGUoaW5wdXQuc2NyaXB0VHlwZSA9PT0gJ3RhcHJvb3RLZXlQYXRoU3BlbmQnID8gJ3AydHJNdXNpZzInIDogaW5wdXQuc2NyaXB0VHlwZSk7XG4gICAgcmV0dXJuIG1vY2tXYWxsZXRVbnNwZW50KG5ldHdvcmssIGlucHV0LnZhbHVlLCB7XG4gICAgICBjaGFpbixcbiAgICAgIHZvdXQ6IGluZGV4LFxuICAgICAga2V5czogcm9vdFdhbGxldEtleXMsXG4gICAgICBpbmRleCxcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIHJldHVybnMgc2lnbmVyIGFuZCBjb3NpZ25lciBuYW1lcyBmb3IgSW5wdXRTY3JpcHRUeXBlLlxuICogdXNlciBhbmQgdW5kZWZpbmVkIGFzIHNpZ25lciBhbmQgY29zaWduZXIgcmVzcGVjdGl2ZWx5IGZvciBwMnNoUDJway5cbiAqIHVzZXIgYW5kIGJhY2t1cCBhcyBzaWduZXIgYW5kIGNvc2lnbmVyIHJlc3BlY3RpdmVseSBmb3IgcDJ0ck11c2lnMi5cbiAqIHVzZXIgYW5kIGJpdGdvIGFzIHNpZ25lciBhbmQgY29zaWduZXIgcmVzcGVjdGl2ZWx5IGZvciBvdGhlciBpbnB1dCBzY3JpcHQgdHlwZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaWduZXJzKGlucHV0VHlwZTogSW5wdXRTY3JpcHRUeXBlKTogeyBzaWduZXJOYW1lOiBLZXlOYW1lOyBjb3NpZ25lck5hbWU/OiBLZXlOYW1lIH0ge1xuICByZXR1cm4ge1xuICAgIHNpZ25lck5hbWU6ICd1c2VyJyxcbiAgICBjb3NpZ25lck5hbWU6IGlucHV0VHlwZSA9PT0gJ3Ayc2hQMnBrJyA/IHVuZGVmaW5lZCA6IGlucHV0VHlwZSA9PT0gJ3AydHJNdXNpZzInID8gJ2JhY2t1cCcgOiAnYml0Z28nLFxuICB9O1xufVxuXG4vKipcbiAqIHNpZ25zIHdpdGggZmlyc3Qgb3Igc2Vjb25kIHNpZ25hdHVyZSBmb3Igc2luZ2xlIGlucHV0LlxuICogcDJzaFAycGsgaXMgc2lnbmVkIG9ubHkgd2l0aCBmaXJzdCBzaWduLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2lnblBzYnRJbnB1dChcbiAgcHNidDogVXR4b1BzYnQsXG4gIGlucHV0OiBJbnB1dCxcbiAgaW5wdXRJbmRleDogbnVtYmVyLFxuICByb290V2FsbGV0S2V5czogUm9vdFdhbGxldEtleXMsXG4gIHNpZ246ICdoYWxmc2lnbmVkJyB8ICdmdWxsc2lnbmVkJyxcbiAgcGFyYW1zPzoge1xuICAgIHNpZ25lcnM/OiB7IHNpZ25lck5hbWU6IEtleU5hbWU7IGNvc2lnbmVyTmFtZT86IEtleU5hbWUgfTtcbiAgICBkZXRlcm1pbmlzdGljPzogYm9vbGVhbjtcbiAgICBza2lwTm9uV2l0bmVzc1V0eG8/OiBib29sZWFuO1xuICB9XG4pOiB2b2lkIHtcbiAgZnVuY3Rpb24gc2lnblBzYnQocHNidDogVXR4b1BzYnQsIHNpZ25GdW5jOiAoKSA9PiB2b2lkLCBza2lwTm9uV2l0bmVzc1V0eG8/OiBib29sZWFuKSB7XG4gICAgaWYgKHNraXBOb25XaXRuZXNzVXR4bykge1xuICAgICAgd2l0aFVuc2FmZU5vblNlZ3dpdChwc2J0LCBzaWduRnVuYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpZ25GdW5jKCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgeyBzaWduZXJzLCBkZXRlcm1pbmlzdGljLCBza2lwTm9uV2l0bmVzc1V0eG8gfSA9IHBhcmFtcyA/PyB7fTtcbiAgY29uc3QgeyBzaWduZXJOYW1lLCBjb3NpZ25lck5hbWUgfSA9IHNpZ25lcnMgPyBzaWduZXJzIDogZ2V0U2lnbmVycyhpbnB1dC5zY3JpcHRUeXBlKTtcbiAgaWYgKHNpZ24gPT09ICdoYWxmc2lnbmVkJykge1xuICAgIGlmIChpbnB1dC5zY3JpcHRUeXBlID09PSAncDJzaFAycGsnKSB7XG4gICAgICBzaWduUHNidChwc2J0LCAoKSA9PiBwc2J0LnNpZ25JbnB1dChpbnB1dEluZGV4LCByb290V2FsbGV0S2V5c1tzaWduZXJOYW1lXSksIHNraXBOb25XaXRuZXNzVXR4byk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpZ25Qc2J0KHBzYnQsICgpID0+IHBzYnQuc2lnbklucHV0SEQoaW5wdXRJbmRleCwgcm9vdFdhbGxldEtleXNbc2lnbmVyTmFtZV0pLCBza2lwTm9uV2l0bmVzc1V0eG8pO1xuICAgIH1cbiAgfVxuICBpZiAoc2lnbiA9PT0gJ2Z1bGxzaWduZWQnICYmIGNvc2lnbmVyTmFtZSAmJiBpbnB1dC5zY3JpcHRUeXBlICE9PSAncDJzaFAycGsnKSB7XG4gICAgc2lnblBzYnQoXG4gICAgICBwc2J0LFxuICAgICAgKCkgPT4gcHNidC5zaWduSW5wdXRIRChpbnB1dEluZGV4LCByb290V2FsbGV0S2V5c1tjb3NpZ25lck5hbWVdLCB7IGRldGVybWluaXN0aWMgfSksXG4gICAgICBza2lwTm9uV2l0bmVzc1V0eG9cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogc2lnbnMgd2l0aCBmaXJzdCBvciBzZWNvbmQgc2lnbmF0dXJlIGZvciBhbGwgaW5wdXRzLlxuICogcDJzaFAycGsgaXMgc2lnbmVkIG9ubHkgd2l0aCBmaXJzdCBzaWduLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2lnbkFsbFBzYnRJbnB1dHMoXG4gIHBzYnQ6IFV0eG9Qc2J0LFxuICBpbnB1dHM6IElucHV0W10sXG4gIHJvb3RXYWxsZXRLZXlzOiBSb290V2FsbGV0S2V5cyxcbiAgc2lnbjogJ2hhbGZzaWduZWQnIHwgJ2Z1bGxzaWduZWQnLFxuICBwYXJhbXM/OiB7XG4gICAgc2lnbmVycz86IHsgc2lnbmVyTmFtZTogS2V5TmFtZTsgY29zaWduZXJOYW1lPzogS2V5TmFtZSB9O1xuICAgIGRldGVybWluaXN0aWM/OiBib29sZWFuO1xuICAgIHNraXBOb25XaXRuZXNzVXR4bz86IGJvb2xlYW47XG4gIH1cbik6IHZvaWQge1xuICBjb25zdCB7IHNpZ25lcnMsIGRldGVybWluaXN0aWMsIHNraXBOb25XaXRuZXNzVXR4byB9ID0gcGFyYW1zID8/IHt9O1xuICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQsIGlucHV0SW5kZXgpID0+IHtcbiAgICBzaWduUHNidElucHV0KHBzYnQsIGlucHV0LCBpbnB1dEluZGV4LCByb290V2FsbGV0S2V5cywgc2lnbiwgeyBzaWduZXJzLCBkZXRlcm1pbmlzdGljLCBza2lwTm9uV2l0bmVzc1V0eG8gfSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIGNvbnN0cnVjdCBwc2J0IGZvciBnaXZlbiBpbnB1dHMsIG91dHB1dHMsIG5ldHdvcmsgYW5kIHJvb3Qgd2FsbGV0IGtleXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdHJ1Y3RQc2J0KFxuICBpbnB1dHM6IElucHV0W10sXG4gIG91dHB1dHM6IE91dHB1dFtdLFxuICBuZXR3b3JrOiBOZXR3b3JrLFxuICByb290V2FsbGV0S2V5czogUm9vdFdhbGxldEtleXMsXG4gIHNpZ246ICd1bnNpZ25lZCcgfCAnaGFsZnNpZ25lZCcgfCAnZnVsbHNpZ25lZCcsXG4gIHBhcmFtcz86IHtcbiAgICBzaWduZXJzPzogeyBzaWduZXJOYW1lOiBLZXlOYW1lOyBjb3NpZ25lck5hbWU/OiBLZXlOYW1lIH07XG4gICAgZGV0ZXJtaW5pc3RpYz86IGJvb2xlYW47XG4gICAgc2tpcE5vbldpdG5lc3NVdHhvPzogYm9vbGVhbjtcbiAgfVxuKTogVXR4b1BzYnQge1xuICBjb25zdCB7IHNpZ25lcnMsIGRldGVybWluaXN0aWMsIHNraXBOb25XaXRuZXNzVXR4byB9ID0gcGFyYW1zID8/IHt9O1xuICBjb25zdCB0b3RhbElucHV0QW1vdW50ID0gaW5wdXRzLnJlZHVjZSgoc3VtLCBpbnB1dCkgPT4gc3VtICsgaW5wdXQudmFsdWUsIEJpZ0ludCgwKSk7XG4gIGNvbnN0IG91dHB1dElucHV0QW1vdW50ID0gb3V0cHV0cy5yZWR1Y2UoKHN1bSwgb3V0cHV0KSA9PiBzdW0gKyBvdXRwdXQudmFsdWUsIEJpZ0ludCgwKSk7XG4gIGFzc2VydCh0b3RhbElucHV0QW1vdW50ID49IG91dHB1dElucHV0QW1vdW50LCAndG90YWwgb3V0cHV0IGNhbiBub3QgZXhjZWVkIHRvdGFsIGlucHV0Jyk7XG5cbiAgY29uc3QgcHNidCA9IGNyZWF0ZVBzYnRGb3JOZXR3b3JrKHsgbmV0d29yayB9KTtcbiAgY29uc3QgdW5zcGVudHMgPSBpbnB1dHMubWFwKChpbnB1dCwgaSkgPT4gdG9VbnNwZW50KGlucHV0LCBpLCBuZXR3b3JrLCByb290V2FsbGV0S2V5cykpO1xuXG4gIHVuc3BlbnRzLmZvckVhY2goKHUsIGkpID0+IHtcbiAgICBjb25zdCB7IHNpZ25lck5hbWUsIGNvc2lnbmVyTmFtZSB9ID0gc2lnbmVycyA/IHNpZ25lcnMgOiBnZXRTaWduZXJzKGlucHV0c1tpXS5zY3JpcHRUeXBlKTtcbiAgICBpZiAoaXNXYWxsZXRVbnNwZW50KHUpICYmIGNvc2lnbmVyTmFtZSkge1xuICAgICAgYWRkV2FsbGV0VW5zcGVudFRvUHNidChwc2J0LCB1LCByb290V2FsbGV0S2V5cywgc2lnbmVyTmFtZSwgY29zaWduZXJOYW1lLCB7IHNraXBOb25XaXRuZXNzVXR4byB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgeyByZWRlZW1TY3JpcHQgfSA9IGNyZWF0ZU91dHB1dFNjcmlwdFAyc2hQMnBrKHJvb3RXYWxsZXRLZXlzW3NpZ25lck5hbWVdLnB1YmxpY0tleSk7XG4gICAgICBhc3NlcnQocmVkZWVtU2NyaXB0KTtcbiAgICAgIGFkZFJlcGxheVByb3RlY3Rpb25VbnNwZW50VG9Qc2J0KHBzYnQsIHUsIHJlZGVlbVNjcmlwdCwgeyBza2lwTm9uV2l0bmVzc1V0eG8gfSk7XG4gICAgfVxuICB9KTtcblxuICBvdXRwdXRzLmZvckVhY2goKG91dHB1dCwgaSkgPT4ge1xuICAgIGlmICgnc2NyaXB0VHlwZScgaW4gb3V0cHV0KSB7XG4gICAgICBhZGRXYWxsZXRPdXRwdXRUb1BzYnQoXG4gICAgICAgIHBzYnQsXG4gICAgICAgIHJvb3RXYWxsZXRLZXlzLFxuICAgICAgICBvdXRwdXQuaXNJbnRlcm5hbEFkZHJlc3MgPyBnZXRJbnRlcm5hbENoYWluQ29kZShvdXRwdXQuc2NyaXB0VHlwZSkgOiBnZXRFeHRlcm5hbENoYWluQ29kZShvdXRwdXQuc2NyaXB0VHlwZSksXG4gICAgICAgIGksXG4gICAgICAgIG91dHB1dC52YWx1ZVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKCdhZGRyZXNzJyBpbiBvdXRwdXQpIHtcbiAgICAgIGNvbnN0IHsgYWRkcmVzcywgdmFsdWUgfSA9IG91dHB1dDtcbiAgICAgIHBzYnQuYWRkT3V0cHV0KHsgc2NyaXB0OiB0b091dHB1dFNjcmlwdChhZGRyZXNzLCBuZXR3b3JrKSwgdmFsdWUgfSk7XG4gICAgfSBlbHNlIGlmICgnc2NyaXB0JyBpbiBvdXRwdXQpIHtcbiAgICAgIGNvbnN0IHsgc2NyaXB0LCB2YWx1ZSB9ID0gb3V0cHV0O1xuICAgICAgcHNidC5hZGRPdXRwdXQoeyBzY3JpcHQ6IEJ1ZmZlci5mcm9tKHNjcmlwdCwgJ2hleCcpLCB2YWx1ZSB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmIChzaWduID09PSAndW5zaWduZWQnKSB7XG4gICAgcmV0dXJuIHBzYnQ7XG4gIH1cblxuICBwc2J0LnNldEFsbElucHV0c011c2lnMk5vbmNlSEQocm9vdFdhbGxldEtleXNbJ3VzZXInXSk7XG4gIHBzYnQuc2V0QWxsSW5wdXRzTXVzaWcyTm9uY2VIRChyb290V2FsbGV0S2V5c1snYml0Z28nXSwgeyBkZXRlcm1pbmlzdGljIH0pO1xuXG4gIHNpZ25BbGxQc2J0SW5wdXRzKHBzYnQsIGlucHV0cywgcm9vdFdhbGxldEtleXMsICdoYWxmc2lnbmVkJywgeyBzaWduZXJzLCBza2lwTm9uV2l0bmVzc1V0eG8gfSk7XG5cbiAgaWYgKHNpZ24gPT09ICdmdWxsc2lnbmVkJykge1xuICAgIHNpZ25BbGxQc2J0SW5wdXRzKHBzYnQsIGlucHV0cywgcm9vdFdhbGxldEtleXMsIHNpZ24sIHsgc2lnbmVycywgZGV0ZXJtaW5pc3RpYywgc2tpcE5vbldpdG5lc3NVdHhvIH0pO1xuICB9XG5cbiAgcmV0dXJuIHBzYnQ7XG59XG5cbi8qKlxuICogVmVyaWZpZXMgc2lnbmF0dXJlcyBvZiBmdWxseSBzaWduZWQgdHggKHdpdGggdGFwcm9vdCBrZXkgcGF0aCBzdXBwb3J0KS5cbiAqIE5PVEU6IHRhcHJvb3Qga2V5IHBhdGggdHggY2FuIG9ubHkgYmUgYnVpbHQgYW5kIHNpZ25lZCB3aXRoIFBTQlQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlGdWxseVNpZ25lZFNpZ25hdHVyZXMoXG4gIHR4OiBVdHhvVHJhbnNhY3Rpb248YmlnaW50PixcbiAgdW5zcGVudHM6IFVuc3BlbnQ8YmlnaW50PltdLFxuICB3YWxsZXRLZXlzOiBSb290V2FsbGV0S2V5cyxcbiAgc2lnbmVyOiBLZXlOYW1lLFxuICBjb3NpZ25lcjogS2V5TmFtZVxuKTogYm9vbGVhbiB7XG4gIGNvbnN0IHByZXZPdXRwdXRzID0gdW5zcGVudHMubWFwKCh1KSA9PiB0b091dHB1dCh1LCB0eC5uZXR3b3JrKSk7XG4gIHJldHVybiB1bnNwZW50cy5ldmVyeSgodSwgaW5kZXgpID0+IHtcbiAgICBpZiAocGFyc2VTaWduYXR1cmVTY3JpcHQyT2YzKHR4Lmluc1tpbmRleF0pLnNjcmlwdFR5cGUgPT09ICd0YXByb290S2V5UGF0aFNwZW5kJykge1xuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0U2lnbmF0dXJlVmVyaWZpY2F0aW9ucyh0eCwgaW5kZXgsIHUudmFsdWUsIHVuZGVmaW5lZCwgcHJldk91dHB1dHMpO1xuICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPT09IDEgJiYgcmVzdWx0WzBdLnNpZ25hdHVyZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmVzdWx0ID0gdmVyaWZ5U2lnbmF0dXJlV2l0aFVuc3BlbnQodHgsIGluZGV4LCB1bnNwZW50cywgd2FsbGV0S2V5cyk7XG4gICAgICBpZiAoKHNpZ25lciA9PT0gJ3VzZXInICYmIGNvc2lnbmVyID09PSAnYml0Z28nKSB8fCAoc2lnbmVyID09PSAnYml0Z28nICYmIGNvc2lnbmVyID09PSAndXNlcicpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF0gJiYgIXJlc3VsdFsxXSAmJiByZXN1bHRbMl07XG4gICAgICB9IGVsc2UgaWYgKChzaWduZXIgPT09ICd1c2VyJyAmJiBjb3NpZ25lciA9PT0gJ2JhY2t1cCcpIHx8IChzaWduZXIgPT09ICdiYWNrdXAnICYmIGNvc2lnbmVyID09PSAndXNlcicpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF0gJiYgcmVzdWx0WzFdICYmICFyZXN1bHRbMl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gIXJlc3VsdFswXSAmJiByZXN1bHRbMV0gJiYgcmVzdWx0WzJdO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwidG9VbnNwZW50IiwiY292XzFrM3lpOXFhdjUiLCJzIiwiZ2V0U2lnbmVycyIsInNpZ25Qc2J0SW5wdXQiLCJzaWduQWxsUHNidElucHV0cyIsImNvbnN0cnVjdFBzYnQiLCJ2ZXJpZnlGdWxseVNpZ25lZFNpZ25hdHVyZXMiLCJhc3NlcnQiLCJyZXF1aXJlIiwib3V0cHV0U2NyaXB0c18xIiwiYml0Z29fMSIsIm1vY2tfMSIsImFkZHJlc3NfMSIsImlucHV0U2NyaXB0VHlwZXMiLCJzY3JpcHRUeXBlczJPZjMiLCJzY3JpcHRUeXBlUDJzaFAycGsiLCJvdXRwdXRTY3JpcHRUeXBlcyIsImlucHV0IiwiaW5kZXgiLCJuZXR3b3JrIiwicm9vdFdhbGxldEtleXMiLCJmIiwic2NyaXB0VHlwZSIsImIiLCJtb2NrUmVwbGF5UHJvdGVjdGlvblVuc3BlbnQiLCJ2YWx1ZSIsImtleSIsInZvdXQiLCJjaGFpbiIsImdldEludGVybmFsQ2hhaW5Db2RlIiwibW9ja1dhbGxldFVuc3BlbnQiLCJrZXlzIiwiaW5wdXRUeXBlIiwic2lnbmVyTmFtZSIsImNvc2lnbmVyTmFtZSIsInVuZGVmaW5lZCIsInBzYnQiLCJpbnB1dEluZGV4Iiwic2lnbiIsInBhcmFtcyIsInNpZ25Qc2J0Iiwic2lnbkZ1bmMiLCJza2lwTm9uV2l0bmVzc1V0eG8iLCJ3aXRoVW5zYWZlTm9uU2Vnd2l0Iiwic2lnbmVycyIsImRldGVybWluaXN0aWMiLCJzaWduSW5wdXQiLCJzaWduSW5wdXRIRCIsImlucHV0cyIsImZvckVhY2giLCJvdXRwdXRzIiwidG90YWxJbnB1dEFtb3VudCIsInJlZHVjZSIsInN1bSIsIkJpZ0ludCIsIm91dHB1dElucHV0QW1vdW50Iiwib3V0cHV0IiwiY3JlYXRlUHNidEZvck5ldHdvcmsiLCJ1bnNwZW50cyIsIm1hcCIsImkiLCJ1IiwiaXNXYWxsZXRVbnNwZW50IiwiYWRkV2FsbGV0VW5zcGVudFRvUHNidCIsInJlZGVlbVNjcmlwdCIsImNyZWF0ZU91dHB1dFNjcmlwdFAyc2hQMnBrIiwicHVibGljS2V5IiwiYWRkUmVwbGF5UHJvdGVjdGlvblVuc3BlbnRUb1BzYnQiLCJhZGRXYWxsZXRPdXRwdXRUb1BzYnQiLCJpc0ludGVybmFsQWRkcmVzcyIsImdldEV4dGVybmFsQ2hhaW5Db2RlIiwiYWRkcmVzcyIsImFkZE91dHB1dCIsInNjcmlwdCIsInRvT3V0cHV0U2NyaXB0IiwiQnVmZmVyIiwiZnJvbSIsInNldEFsbElucHV0c011c2lnMk5vbmNlSEQiLCJ0eCIsIndhbGxldEtleXMiLCJzaWduZXIiLCJjb3NpZ25lciIsInByZXZPdXRwdXRzIiwidG9PdXRwdXQiLCJldmVyeSIsInBhcnNlU2lnbmF0dXJlU2NyaXB0Mk9mMyIsImlucyIsInJlc3VsdCIsImdldFNpZ25hdHVyZVZlcmlmaWNhdGlvbnMiLCJsZW5ndGgiLCJzaWduYXR1cmUiLCJ2ZXJpZnlTaWduYXR1cmVXaXRoVW5zcGVudCJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9xcm9jL0NvZGUvaGFwaS9jaGFpbmRlZnVzZXIvdXR4by1saWIvc3JjL3Rlc3R1dGlsL3BzYnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYXNzZXJ0IGZyb20gJ2Fzc2VydCc7XG5cbmltcG9ydCB7XG4gIGNyZWF0ZU91dHB1dFNjcmlwdFAyc2hQMnBrLFxuICBTY3JpcHRUeXBlLFxuICBTY3JpcHRUeXBlMk9mMyxcbiAgc2NyaXB0VHlwZVAyc2hQMnBrLFxuICBzY3JpcHRUeXBlczJPZjMsXG59IGZyb20gJy4uL2JpdGdvL291dHB1dFNjcmlwdHMnO1xuaW1wb3J0IHtcbiAgYWRkUmVwbGF5UHJvdGVjdGlvblVuc3BlbnRUb1BzYnQsXG4gIGFkZFdhbGxldE91dHB1dFRvUHNidCxcbiAgYWRkV2FsbGV0VW5zcGVudFRvUHNidCxcbiAgY3JlYXRlUHNidEZvck5ldHdvcmssXG4gIGdldEV4dGVybmFsQ2hhaW5Db2RlLFxuICBnZXRJbnRlcm5hbENoYWluQ29kZSxcbiAgZ2V0U2lnbmF0dXJlVmVyaWZpY2F0aW9ucyxcbiAgaXNXYWxsZXRVbnNwZW50LFxuICBLZXlOYW1lLFxuICBwYXJzZVNpZ25hdHVyZVNjcmlwdDJPZjMsXG4gIFJvb3RXYWxsZXRLZXlzLFxuICB0b091dHB1dCxcbiAgVW5zcGVudCxcbiAgVXR4b1BzYnQsXG4gIFV0eG9UcmFuc2FjdGlvbixcbiAgdmVyaWZ5U2lnbmF0dXJlV2l0aFVuc3BlbnQsXG4gIHdpdGhVbnNhZmVOb25TZWd3aXQsXG59IGZyb20gJy4uL2JpdGdvJztcbmltcG9ydCB7IE5ldHdvcmsgfSBmcm9tICcuLi9uZXR3b3Jrcyc7XG5pbXBvcnQgeyBtb2NrUmVwbGF5UHJvdGVjdGlvblVuc3BlbnQsIG1vY2tXYWxsZXRVbnNwZW50IH0gZnJvbSAnLi9tb2NrJztcbmltcG9ydCB7IHRvT3V0cHV0U2NyaXB0IH0gZnJvbSAnLi4vYWRkcmVzcyc7XG5cbi8qKlxuICogaW5wdXQgc2NyaXB0IHR5cGUgYW5kIHZhbHVlLlxuICogdXNlIHAydHJNdXNpZzIgZm9yIHAydHJNdXNpZzIgc2NyaXB0IHBhdGguXG4gKiB1c2UgdGFwcm9vdEtleVBhdGhTcGVuZCBmb3IgcDJ0ck11c2lnMiBrZXkgcGF0aC5cbiAqL1xuZXhwb3J0IHR5cGUgSW5wdXRTY3JpcHRUeXBlID0gU2NyaXB0VHlwZSB8ICd0YXByb290S2V5UGF0aFNwZW5kJztcbmV4cG9ydCB0eXBlIE91dHB1dFNjcmlwdFR5cGUgPSBTY3JpcHRUeXBlMk9mMztcblxuLyoqXG4gKiBpbnB1dCBzY3JpcHQgdHlwZSBhbmQgdmFsdWVcbiAqL1xuZXhwb3J0IHR5cGUgSW5wdXQgPSB7XG4gIHNjcmlwdFR5cGU6IElucHV0U2NyaXB0VHlwZTtcbiAgdmFsdWU6IGJpZ2ludDtcbn07XG5cbi8qKlxuICogU2V0IGlzSW50ZXJuYWxBZGRyZXNzPXRydWUgZm9yIGludGVybmFsIG91dHB1dCBhZGRyZXNzXG4gKi9cbi8vIE1ha2Ugc2NyaXB0OiBzdHJpbmcgYXMgaW5zdGVhZCBvZiBzY3JpcHRUeXBlIG9yIGFkZHJlc3NcbmV4cG9ydCB0eXBlIE91dHB1dCA9IHtcbiAgdmFsdWU6IGJpZ2ludDtcbiAgaXNJbnRlcm5hbEFkZHJlc3M/OiBib29sZWFuO1xufSAmICh7IHNjcmlwdFR5cGU6IE91dHB1dFNjcmlwdFR5cGUgfSB8IHsgYWRkcmVzczogc3RyaW5nIH0gfCB7IHNjcmlwdDogc3RyaW5nIH0pO1xuXG4vKipcbiAqIGFycmF5IG9mIHN1cHBvcnRlZCBpbnB1dCBzY3JpcHQgdHlwZXMuXG4gKiB1c2UgcDJ0ck11c2lnMiBmb3IgcDJ0ck11c2lnMiBzY3JpcHQgcGF0aC5cbiAqIHVzZSB0YXByb290S2V5UGF0aFNwZW5kIGZvciBwMnRyTXVzaWcyIGtleSBwYXRoLlxuICovXG5leHBvcnQgY29uc3QgaW5wdXRTY3JpcHRUeXBlcyA9IFsuLi5zY3JpcHRUeXBlczJPZjMsICd0YXByb290S2V5UGF0aFNwZW5kJywgc2NyaXB0VHlwZVAyc2hQMnBrXSBhcyBjb25zdDtcblxuLyoqXG4gKiBhcnJheSBvZiBzdXBwb3J0ZWQgb3V0cHV0IHNjcmlwdCB0eXBlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG91dHB1dFNjcmlwdFR5cGVzID0gc2NyaXB0VHlwZXMyT2YzO1xuXG4vKipcbiAqIGNyZWF0ZSB1bnNwZW50IG9iamVjdCBmcm9tIGlucHV0IHNjcmlwdCB0eXBlLCBpbmRleCwgbmV0d29yayBhbmQgcm9vdCB3YWxsZXQga2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9VbnNwZW50KFxuICBpbnB1dDogSW5wdXQsXG4gIGluZGV4OiBudW1iZXIsXG4gIG5ldHdvcms6IE5ldHdvcmssXG4gIHJvb3RXYWxsZXRLZXlzOiBSb290V2FsbGV0S2V5c1xuKTogVW5zcGVudDxiaWdpbnQ+IHtcbiAgaWYgKGlucHV0LnNjcmlwdFR5cGUgPT09ICdwMnNoUDJwaycpIHtcbiAgICByZXR1cm4gbW9ja1JlcGxheVByb3RlY3Rpb25VbnNwZW50KG5ldHdvcmssIGlucHV0LnZhbHVlLCB7IGtleTogcm9vdFdhbGxldEtleXNbJ3VzZXInXSwgdm91dDogaW5kZXggfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY2hhaW4gPSBnZXRJbnRlcm5hbENoYWluQ29kZShpbnB1dC5zY3JpcHRUeXBlID09PSAndGFwcm9vdEtleVBhdGhTcGVuZCcgPyAncDJ0ck11c2lnMicgOiBpbnB1dC5zY3JpcHRUeXBlKTtcbiAgICByZXR1cm4gbW9ja1dhbGxldFVuc3BlbnQobmV0d29yaywgaW5wdXQudmFsdWUsIHtcbiAgICAgIGNoYWluLFxuICAgICAgdm91dDogaW5kZXgsXG4gICAgICBrZXlzOiByb290V2FsbGV0S2V5cyxcbiAgICAgIGluZGV4LFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogcmV0dXJucyBzaWduZXIgYW5kIGNvc2lnbmVyIG5hbWVzIGZvciBJbnB1dFNjcmlwdFR5cGUuXG4gKiB1c2VyIGFuZCB1bmRlZmluZWQgYXMgc2lnbmVyIGFuZCBjb3NpZ25lciByZXNwZWN0aXZlbHkgZm9yIHAyc2hQMnBrLlxuICogdXNlciBhbmQgYmFja3VwIGFzIHNpZ25lciBhbmQgY29zaWduZXIgcmVzcGVjdGl2ZWx5IGZvciBwMnRyTXVzaWcyLlxuICogdXNlciBhbmQgYml0Z28gYXMgc2lnbmVyIGFuZCBjb3NpZ25lciByZXNwZWN0aXZlbHkgZm9yIG90aGVyIGlucHV0IHNjcmlwdCB0eXBlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNpZ25lcnMoaW5wdXRUeXBlOiBJbnB1dFNjcmlwdFR5cGUpOiB7IHNpZ25lck5hbWU6IEtleU5hbWU7IGNvc2lnbmVyTmFtZT86IEtleU5hbWUgfSB7XG4gIHJldHVybiB7XG4gICAgc2lnbmVyTmFtZTogJ3VzZXInLFxuICAgIGNvc2lnbmVyTmFtZTogaW5wdXRUeXBlID09PSAncDJzaFAycGsnID8gdW5kZWZpbmVkIDogaW5wdXRUeXBlID09PSAncDJ0ck11c2lnMicgPyAnYmFja3VwJyA6ICdiaXRnbycsXG4gIH07XG59XG5cbi8qKlxuICogc2lnbnMgd2l0aCBmaXJzdCBvciBzZWNvbmQgc2lnbmF0dXJlIGZvciBzaW5nbGUgaW5wdXQuXG4gKiBwMnNoUDJwayBpcyBzaWduZWQgb25seSB3aXRoIGZpcnN0IHNpZ24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaWduUHNidElucHV0KFxuICBwc2J0OiBVdHhvUHNidCxcbiAgaW5wdXQ6IElucHV0LFxuICBpbnB1dEluZGV4OiBudW1iZXIsXG4gIHJvb3RXYWxsZXRLZXlzOiBSb290V2FsbGV0S2V5cyxcbiAgc2lnbjogJ2hhbGZzaWduZWQnIHwgJ2Z1bGxzaWduZWQnLFxuICBwYXJhbXM/OiB7XG4gICAgc2lnbmVycz86IHsgc2lnbmVyTmFtZTogS2V5TmFtZTsgY29zaWduZXJOYW1lPzogS2V5TmFtZSB9O1xuICAgIGRldGVybWluaXN0aWM/OiBib29sZWFuO1xuICAgIHNraXBOb25XaXRuZXNzVXR4bz86IGJvb2xlYW47XG4gIH1cbik6IHZvaWQge1xuICBmdW5jdGlvbiBzaWduUHNidChwc2J0OiBVdHhvUHNidCwgc2lnbkZ1bmM6ICgpID0+IHZvaWQsIHNraXBOb25XaXRuZXNzVXR4bz86IGJvb2xlYW4pIHtcbiAgICBpZiAoc2tpcE5vbldpdG5lc3NVdHhvKSB7XG4gICAgICB3aXRoVW5zYWZlTm9uU2Vnd2l0KHBzYnQsIHNpZ25GdW5jKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2lnbkZ1bmMoKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCB7IHNpZ25lcnMsIGRldGVybWluaXN0aWMsIHNraXBOb25XaXRuZXNzVXR4byB9ID0gcGFyYW1zID8/IHt9O1xuICBjb25zdCB7IHNpZ25lck5hbWUsIGNvc2lnbmVyTmFtZSB9ID0gc2lnbmVycyA/IHNpZ25lcnMgOiBnZXRTaWduZXJzKGlucHV0LnNjcmlwdFR5cGUpO1xuICBpZiAoc2lnbiA9PT0gJ2hhbGZzaWduZWQnKSB7XG4gICAgaWYgKGlucHV0LnNjcmlwdFR5cGUgPT09ICdwMnNoUDJwaycpIHtcbiAgICAgIHNpZ25Qc2J0KHBzYnQsICgpID0+IHBzYnQuc2lnbklucHV0KGlucHV0SW5kZXgsIHJvb3RXYWxsZXRLZXlzW3NpZ25lck5hbWVdKSwgc2tpcE5vbldpdG5lc3NVdHhvKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2lnblBzYnQocHNidCwgKCkgPT4gcHNidC5zaWduSW5wdXRIRChpbnB1dEluZGV4LCByb290V2FsbGV0S2V5c1tzaWduZXJOYW1lXSksIHNraXBOb25XaXRuZXNzVXR4byk7XG4gICAgfVxuICB9XG4gIGlmIChzaWduID09PSAnZnVsbHNpZ25lZCcgJiYgY29zaWduZXJOYW1lICYmIGlucHV0LnNjcmlwdFR5cGUgIT09ICdwMnNoUDJwaycpIHtcbiAgICBzaWduUHNidChcbiAgICAgIHBzYnQsXG4gICAgICAoKSA9PiBwc2J0LnNpZ25JbnB1dEhEKGlucHV0SW5kZXgsIHJvb3RXYWxsZXRLZXlzW2Nvc2lnbmVyTmFtZV0sIHsgZGV0ZXJtaW5pc3RpYyB9KSxcbiAgICAgIHNraXBOb25XaXRuZXNzVXR4b1xuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBzaWducyB3aXRoIGZpcnN0IG9yIHNlY29uZCBzaWduYXR1cmUgZm9yIGFsbCBpbnB1dHMuXG4gKiBwMnNoUDJwayBpcyBzaWduZWQgb25seSB3aXRoIGZpcnN0IHNpZ24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaWduQWxsUHNidElucHV0cyhcbiAgcHNidDogVXR4b1BzYnQsXG4gIGlucHV0czogSW5wdXRbXSxcbiAgcm9vdFdhbGxldEtleXM6IFJvb3RXYWxsZXRLZXlzLFxuICBzaWduOiAnaGFsZnNpZ25lZCcgfCAnZnVsbHNpZ25lZCcsXG4gIHBhcmFtcz86IHtcbiAgICBzaWduZXJzPzogeyBzaWduZXJOYW1lOiBLZXlOYW1lOyBjb3NpZ25lck5hbWU/OiBLZXlOYW1lIH07XG4gICAgZGV0ZXJtaW5pc3RpYz86IGJvb2xlYW47XG4gICAgc2tpcE5vbldpdG5lc3NVdHhvPzogYm9vbGVhbjtcbiAgfVxuKTogdm9pZCB7XG4gIGNvbnN0IHsgc2lnbmVycywgZGV0ZXJtaW5pc3RpYywgc2tpcE5vbldpdG5lc3NVdHhvIH0gPSBwYXJhbXMgPz8ge307XG4gIGlucHV0cy5mb3JFYWNoKChpbnB1dCwgaW5wdXRJbmRleCkgPT4ge1xuICAgIHNpZ25Qc2J0SW5wdXQocHNidCwgaW5wdXQsIGlucHV0SW5kZXgsIHJvb3RXYWxsZXRLZXlzLCBzaWduLCB7IHNpZ25lcnMsIGRldGVybWluaXN0aWMsIHNraXBOb25XaXRuZXNzVXR4byB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogY29uc3RydWN0IHBzYnQgZm9yIGdpdmVuIGlucHV0cywgb3V0cHV0cywgbmV0d29yayBhbmQgcm9vdCB3YWxsZXQga2V5cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnN0cnVjdFBzYnQoXG4gIGlucHV0czogSW5wdXRbXSxcbiAgb3V0cHV0czogT3V0cHV0W10sXG4gIG5ldHdvcms6IE5ldHdvcmssXG4gIHJvb3RXYWxsZXRLZXlzOiBSb290V2FsbGV0S2V5cyxcbiAgc2lnbjogJ3Vuc2lnbmVkJyB8ICdoYWxmc2lnbmVkJyB8ICdmdWxsc2lnbmVkJyxcbiAgcGFyYW1zPzoge1xuICAgIHNpZ25lcnM/OiB7IHNpZ25lck5hbWU6IEtleU5hbWU7IGNvc2lnbmVyTmFtZT86IEtleU5hbWUgfTtcbiAgICBkZXRlcm1pbmlzdGljPzogYm9vbGVhbjtcbiAgICBza2lwTm9uV2l0bmVzc1V0eG8/OiBib29sZWFuO1xuICB9XG4pOiBVdHhvUHNidCB7XG4gIGNvbnN0IHsgc2lnbmVycywgZGV0ZXJtaW5pc3RpYywgc2tpcE5vbldpdG5lc3NVdHhvIH0gPSBwYXJhbXMgPz8ge307XG4gIGNvbnN0IHRvdGFsSW5wdXRBbW91bnQgPSBpbnB1dHMucmVkdWNlKChzdW0sIGlucHV0KSA9PiBzdW0gKyBpbnB1dC52YWx1ZSwgQmlnSW50KDApKTtcbiAgY29uc3Qgb3V0cHV0SW5wdXRBbW91bnQgPSBvdXRwdXRzLnJlZHVjZSgoc3VtLCBvdXRwdXQpID0+IHN1bSArIG91dHB1dC52YWx1ZSwgQmlnSW50KDApKTtcbiAgYXNzZXJ0KHRvdGFsSW5wdXRBbW91bnQgPj0gb3V0cHV0SW5wdXRBbW91bnQsICd0b3RhbCBvdXRwdXQgY2FuIG5vdCBleGNlZWQgdG90YWwgaW5wdXQnKTtcblxuICBjb25zdCBwc2J0ID0gY3JlYXRlUHNidEZvck5ldHdvcmsoeyBuZXR3b3JrIH0pO1xuICBjb25zdCB1bnNwZW50cyA9IGlucHV0cy5tYXAoKGlucHV0LCBpKSA9PiB0b1Vuc3BlbnQoaW5wdXQsIGksIG5ldHdvcmssIHJvb3RXYWxsZXRLZXlzKSk7XG5cbiAgdW5zcGVudHMuZm9yRWFjaCgodSwgaSkgPT4ge1xuICAgIGNvbnN0IHsgc2lnbmVyTmFtZSwgY29zaWduZXJOYW1lIH0gPSBzaWduZXJzID8gc2lnbmVycyA6IGdldFNpZ25lcnMoaW5wdXRzW2ldLnNjcmlwdFR5cGUpO1xuICAgIGlmIChpc1dhbGxldFVuc3BlbnQodSkgJiYgY29zaWduZXJOYW1lKSB7XG4gICAgICBhZGRXYWxsZXRVbnNwZW50VG9Qc2J0KHBzYnQsIHUsIHJvb3RXYWxsZXRLZXlzLCBzaWduZXJOYW1lLCBjb3NpZ25lck5hbWUsIHsgc2tpcE5vbldpdG5lc3NVdHhvIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7IHJlZGVlbVNjcmlwdCB9ID0gY3JlYXRlT3V0cHV0U2NyaXB0UDJzaFAycGsocm9vdFdhbGxldEtleXNbc2lnbmVyTmFtZV0ucHVibGljS2V5KTtcbiAgICAgIGFzc2VydChyZWRlZW1TY3JpcHQpO1xuICAgICAgYWRkUmVwbGF5UHJvdGVjdGlvblVuc3BlbnRUb1BzYnQocHNidCwgdSwgcmVkZWVtU2NyaXB0LCB7IHNraXBOb25XaXRuZXNzVXR4byB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIG91dHB1dHMuZm9yRWFjaCgob3V0cHV0LCBpKSA9PiB7XG4gICAgaWYgKCdzY3JpcHRUeXBlJyBpbiBvdXRwdXQpIHtcbiAgICAgIGFkZFdhbGxldE91dHB1dFRvUHNidChcbiAgICAgICAgcHNidCxcbiAgICAgICAgcm9vdFdhbGxldEtleXMsXG4gICAgICAgIG91dHB1dC5pc0ludGVybmFsQWRkcmVzcyA/IGdldEludGVybmFsQ2hhaW5Db2RlKG91dHB1dC5zY3JpcHRUeXBlKSA6IGdldEV4dGVybmFsQ2hhaW5Db2RlKG91dHB1dC5zY3JpcHRUeXBlKSxcbiAgICAgICAgaSxcbiAgICAgICAgb3V0cHV0LnZhbHVlXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoJ2FkZHJlc3MnIGluIG91dHB1dCkge1xuICAgICAgY29uc3QgeyBhZGRyZXNzLCB2YWx1ZSB9ID0gb3V0cHV0O1xuICAgICAgcHNidC5hZGRPdXRwdXQoeyBzY3JpcHQ6IHRvT3V0cHV0U2NyaXB0KGFkZHJlc3MsIG5ldHdvcmspLCB2YWx1ZSB9KTtcbiAgICB9IGVsc2UgaWYgKCdzY3JpcHQnIGluIG91dHB1dCkge1xuICAgICAgY29uc3QgeyBzY3JpcHQsIHZhbHVlIH0gPSBvdXRwdXQ7XG4gICAgICBwc2J0LmFkZE91dHB1dCh7IHNjcmlwdDogQnVmZmVyLmZyb20oc2NyaXB0LCAnaGV4JyksIHZhbHVlIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKHNpZ24gPT09ICd1bnNpZ25lZCcpIHtcbiAgICByZXR1cm4gcHNidDtcbiAgfVxuXG4gIHBzYnQuc2V0QWxsSW5wdXRzTXVzaWcyTm9uY2VIRChyb290V2FsbGV0S2V5c1sndXNlciddKTtcbiAgcHNidC5zZXRBbGxJbnB1dHNNdXNpZzJOb25jZUhEKHJvb3RXYWxsZXRLZXlzWydiaXRnbyddLCB7IGRldGVybWluaXN0aWMgfSk7XG5cbiAgc2lnbkFsbFBzYnRJbnB1dHMocHNidCwgaW5wdXRzLCByb290V2FsbGV0S2V5cywgJ2hhbGZzaWduZWQnLCB7IHNpZ25lcnMsIHNraXBOb25XaXRuZXNzVXR4byB9KTtcblxuICBpZiAoc2lnbiA9PT0gJ2Z1bGxzaWduZWQnKSB7XG4gICAgc2lnbkFsbFBzYnRJbnB1dHMocHNidCwgaW5wdXRzLCByb290V2FsbGV0S2V5cywgc2lnbiwgeyBzaWduZXJzLCBkZXRlcm1pbmlzdGljLCBza2lwTm9uV2l0bmVzc1V0eG8gfSk7XG4gIH1cblxuICByZXR1cm4gcHNidDtcbn1cblxuLyoqXG4gKiBWZXJpZmllcyBzaWduYXR1cmVzIG9mIGZ1bGx5IHNpZ25lZCB0eCAod2l0aCB0YXByb290IGtleSBwYXRoIHN1cHBvcnQpLlxuICogTk9URTogdGFwcm9vdCBrZXkgcGF0aCB0eCBjYW4gb25seSBiZSBidWlsdCBhbmQgc2lnbmVkIHdpdGggUFNCVC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeUZ1bGx5U2lnbmVkU2lnbmF0dXJlcyhcbiAgdHg6IFV0eG9UcmFuc2FjdGlvbjxiaWdpbnQ+LFxuICB1bnNwZW50czogVW5zcGVudDxiaWdpbnQ+W10sXG4gIHdhbGxldEtleXM6IFJvb3RXYWxsZXRLZXlzLFxuICBzaWduZXI6IEtleU5hbWUsXG4gIGNvc2lnbmVyOiBLZXlOYW1lXG4pOiBib29sZWFuIHtcbiAgY29uc3QgcHJldk91dHB1dHMgPSB1bnNwZW50cy5tYXAoKHUpID0+IHRvT3V0cHV0KHUsIHR4Lm5ldHdvcmspKTtcbiAgcmV0dXJuIHVuc3BlbnRzLmV2ZXJ5KCh1LCBpbmRleCkgPT4ge1xuICAgIGlmIChwYXJzZVNpZ25hdHVyZVNjcmlwdDJPZjModHguaW5zW2luZGV4XSkuc2NyaXB0VHlwZSA9PT0gJ3RhcHJvb3RLZXlQYXRoU3BlbmQnKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBnZXRTaWduYXR1cmVWZXJpZmljYXRpb25zKHR4LCBpbmRleCwgdS52YWx1ZSwgdW5kZWZpbmVkLCBwcmV2T3V0cHV0cyk7XG4gICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA9PT0gMSAmJiByZXN1bHRbMF0uc2lnbmF0dXJlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXN1bHQgPSB2ZXJpZnlTaWduYXR1cmVXaXRoVW5zcGVudCh0eCwgaW5kZXgsIHVuc3BlbnRzLCB3YWxsZXRLZXlzKTtcbiAgICAgIGlmICgoc2lnbmVyID09PSAndXNlcicgJiYgY29zaWduZXIgPT09ICdiaXRnbycpIHx8IChzaWduZXIgPT09ICdiaXRnbycgJiYgY29zaWduZXIgPT09ICd1c2VyJykpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFswXSAmJiAhcmVzdWx0WzFdICYmIHJlc3VsdFsyXTtcbiAgICAgIH0gZWxzZSBpZiAoKHNpZ25lciA9PT0gJ3VzZXInICYmIGNvc2lnbmVyID09PSAnYmFja3VwJykgfHwgKHNpZ25lciA9PT0gJ2JhY2t1cCcgJiYgY29zaWduZXIgPT09ICd1c2VyJykpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFswXSAmJiByZXN1bHRbMV0gJiYgIXJlc3VsdFsyXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAhcmVzdWx0WzBdICYmIHJlc3VsdFsxXSAmJiByZXN1bHRbMl07XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6IjtzUkF3RUFBLE9BQUEsQ0FBQUMsU0FBQSxDQUFBQSxTQUFBLENBaUJDQyxjQUFBLEdBQUFDLENBQUEsTUFRREgsT0FBQSxDQUFBSSxVQUFBLENBQUFBLFVBQUEsQ0FLQ0YsY0FBQSxHQUFBQyxDQUFBLE1BTURILE9BQUEsQ0FBQUssYUFBQSxDQUFBQSxhQUFBLENBb0NDSCxjQUFBLEdBQUFDLENBQUEsTUFNREgsT0FBQSxDQUFBTSxpQkFBQSxDQUFBQSxpQkFBQSxDQWVDSixjQUFBLEdBQUFDLENBQUEsTUFLREgsT0FBQSxDQUFBTyxhQUFBLENBQUFBLGFBQUEsQ0ErRENMLGNBQUEsR0FBQUMsQ0FBQSxNQU1ESCxPQUFBLENBQUFRLDJCQUFBLENBQUFBLDJCQUFBLENBL09BLE1BQUFDLE1BQUEsRUFBQVAsY0FBQSxHQUFBQyxDQUFBLE1BQUFPLE9BQUEsWUFFQSxNQUFBQyxlQUFBLEVBQUFULGNBQUEsR0FBQUMsQ0FBQSxNQUFBTyxPQUFBLDRCQU9BLE1BQUFFLE9BQUEsRUFBQVYsY0FBQSxHQUFBQyxDQUFBLE9BQUFPLE9BQUEsY0FvQkEsTUFBQUcsTUFBQSxFQUFBWCxjQUFBLEdBQUFDLENBQUEsT0FBQU8sT0FBQSxZQUNBLE1BQUFJLFNBQUEsRUFB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QUFBLFVBQUkwRCxRQUFRLEdBQUssT0FBTyxHQUFNLENBQUFqRixjQUFBLEdBQUF1QixDQUFBLFVBQUF5RCxNQUFNLEdBQUssT0FBTyxJQUFBaEYsY0FBQSxHQUFBdUIsQ0FBQSxVQUFJMEQsUUFBUSxHQUFLLE1BQU0sQ0FBQyxDQUFFLENBQUFqRixjQUFBLEdBQUF1QixDQUFBLFVBQUF2QixjQUFBLEdBQUFDLENBQUEsT0FDOUYsTUFBTyxDQUFBRCxjQUFBLEdBQUF1QixDQUFBLFVBQUFnRSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUF2RixjQUFBLEdBQUF1QixDQUFBLFVBQUksQ0FBQ2dFLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBQXZGLGNBQUEsR0FBQXVCLENBQUEsVUFBSWdFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFDN0MsQ0FBQyxJQUFNLENBQUF2RixjQUFBLEdBQUF1QixDQUFBLFVBQUF2QixjQUFBLEdBQUFDLENBQUEsVUFBSyxDQUFBRCxjQUFBLEdBQUF1QixDQUFBLFVBQUF5RCxNQUFNLEdBQUssTUFBTSxJQUFBaEYsY0FBQSxHQUFBdUIsQ0FBQSxVQUFJMEQsUUFBUSxHQUFLLFFBQVEsR0FBTSxDQUFBakYsY0FBQSxHQUFBdUIsQ0FBQSxVQUFBeUQsTUFBTSxHQUFLLFFBQVEsSUFBQWhGLGNBQUEsR0FBQXVCLENBQUEsVUFBSTBELFFBQVEsR0FBSyxNQUFNLENBQUMsQ0FBRSxDQUFBakYsY0FBQSxHQUFBdUIsQ0FBQSxVQUFBdkIsY0FBQSxHQUFBQyxDQUFBLE9BQ3ZHLE1BQU8sQ0FBQUQsY0FBQSxHQUFBdUIsQ0FBQSxVQUFBZ0UsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFBdkYsY0FBQSxHQUFBdUIsQ0FBQSxVQUFJZ0UsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFBdkYsY0FBQSxHQUFBdUIsQ0FBQSxVQUFJLENBQUNnRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQzdDLENBQUMsSUFBTSxDQUFBdkYsY0FBQSxHQUFBdUIsQ0FBQSxVQUFBdkIsY0FBQSxHQUFBQyxDQUFBLE9BQ0wsTUFBTyxDQUFBRCxjQUFBLEdBQUF1QixDQUFBLFdBQUNnRSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUF2RixjQUFBLEdBQUF1QixDQUFBLFVBQUlnRSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUF2RixjQUFBLEdBQUF1QixDQUFBLFVBQUlnRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQzdDLEVBQ0YsQ0FDRixDQUFDLENBQUMsQ0FDSixDIiwiaWdub3JlTGlzdCI6W119