"use strict";function cov_16bc12fk7(){var path="/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/Musig2.ts";var hash="afcddbcec6762bb992b4fe0326d92f429fd69ef6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/Musig2.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:34}},"2":{start:{line:4,column:0},end:{line:4,column:68}},"3":{start:{line:5,column:0},end:{line:5,column:60}},"4":{start:{line:6,column:0},end:{line:6,column:64}},"5":{start:{line:7,column:0},end:{line:7,column:68}},"6":{start:{line:8,column:0},end:{line:8,column:54}},"7":{start:{line:9,column:0},end:{line:9,column:64}},"8":{start:{line:10,column:0},end:{line:10,column:52}},"9":{start:{line:11,column:0},end:{line:11,column:48}},"10":{start:{line:12,column:0},end:{line:12,column:52}},"11":{start:{line:13,column:0},end:{line:13,column:40}},"12":{start:{line:14,column:0},end:{line:14,column:46}},"13":{start:{line:15,column:0},end:{line:15,column:56}},"14":{start:{line:16,column:0},end:{line:16,column:50}},"15":{start:{line:17,column:0},end:{line:17,column:64}},"16":{start:{line:18,column:0},end:{line:18,column:66}},"17":{start:{line:19,column:0},end:{line:19,column:54}},"18":{start:{line:20,column:0},end:{line:20,column:64}},"19":{start:{line:21,column:0},end:{line:21,column:68}},"20":{start:{line:22,column:0},end:{line:22,column:56}},"21":{start:{line:23,column:0},end:{line:23,column:56}},"22":{start:{line:24,column:0},end:{line:24,column:72}},"23":{start:{line:25,column:0},end:{line:25,column:58}},"24":{start:{line:26,column:24},end:{line:26,column:50}},"25":{start:{line:27,column:20},end:{line:27,column:43}},"26":{start:{line:28,column:18},end:{line:28,column:39}},"27":{start:{line:29,column:16},end:{line:29,column:35}},"28":{start:{line:30,column:19},end:{line:30,column:40}},"29":{start:{line:37,column:8},end:{line:37,column:25}},"30":{start:{line:44,column:8},end:{line:48,column:9}},"31":{start:{line:45,column:12},end:{line:47,column:13}},"32":{start:{line:46,column:16},end:{line:46,column:25}},"33":{start:{line:49,column:8},end:{line:49,column:41}},"34":{start:{line:63,column:8},end:{line:65,column:9}},"35":{start:{line:64,column:12},end:{line:64,column:61}},"36":{start:{line:66,column:20},end:{line:66,column:124}},"37":{start:{line:67,column:8},end:{line:67,column:30}},"38":{start:{line:68,column:8},end:{line:68,column:19}},"39":{start:{line:71,column:0},end:{line:71,column:44}},"40":{start:{line:78,column:20},end:{line:78,column:142}},"41":{start:{line:78,column:93},end:{line:78,column:141}},"42":{start:{line:79,column:18},end:{line:79,column:115}},"43":{start:{line:79,column:66},end:{line:79,column:114}},"44":{start:{line:80,column:16},end:{line:84,column:5}},"45":{start:{line:85,column:4},end:{line:85,column:48}},"46":{start:{line:93,column:4},end:{line:95,column:5}},"47":{start:{line:94,column:8},end:{line:94,column:77}},"48":{start:{line:96,column:20},end:{line:99,column:6}},"49":{start:{line:100,column:16},end:{line:104,column:5}},"50":{start:{line:105,column:4},end:{line:105,column:42}},"51":{start:{line:108,column:4},end:{line:110,column:5}},"52":{start:{line:109,column:8},end:{line:109,column:85}},"53":{start:{line:111,column:20},end:{line:114,column:6}},"54":{start:{line:115,column:16},end:{line:119,column:5}},"55":{start:{line:120,column:4},end:{line:120,column:49}},"56":{start:{line:127,column:4},end:{line:130,column:5}},"57":{start:{line:129,column:8},end:{line:129,column:122}},"58":{start:{line:131,column:16},end:{line:131,column:30}},"59":{start:{line:132,column:4},end:{line:134,column:5}},"60":{start:{line:133,column:8},end:{line:133,column:87}},"61":{start:{line:135,column:18},end:{line:135,column:26}},"62":{start:{line:136,column:4},end:{line:138,column:5}},"63":{start:{line:137,column:8},end:{line:137,column:91}},"64":{start:{line:139,column:31},end:{line:139,column:74}},"65":{start:{line:140,column:4},end:{line:142,column:5}},"66":{start:{line:141,column:8},end:{line:141,column:64}},"67":{start:{line:143,column:4},end:{line:143,column:103}},"68":{start:{line:150,column:4},end:{line:152,column:5}},"69":{start:{line:151,column:8},end:{line:151,column:106}},"70":{start:{line:153,column:16},end:{line:153,column:30}},"71":{start:{line:154,column:4},end:{line:156,column:5}},"72":{start:{line:155,column:8},end:{line:155,column:72}},"73":{start:{line:157,column:18},end:{line:157,column:26}},"74":{start:{line:158,column:4},end:{line:160,column:5}},"75":{start:{line:159,column:8},end:{line:159,column:76}},"76":{start:{line:161,column:4},end:{line:161,column:103}},"77":{start:{line:168,column:4},end:{line:171,column:5}},"78":{start:{line:170,column:8},end:{line:170,column:112}},"79":{start:{line:172,column:16},end:{line:172,column:30}},"80":{start:{line:173,column:4},end:{line:175,column:5}},"81":{start:{line:174,column:8},end:{line:174,column:78}},"82":{start:{line:176,column:18},end:{line:176,column:26}},"83":{start:{line:177,column:4},end:{line:179,column:5}},"84":{start:{line:178,column:8},end:{line:178,column:82}},"85":{start:{line:180,column:4},end:{line:180,column:105}},"86":{start:{line:183,column:4},end:{line:183,column:97}},"87":{start:{line:186,column:4},end:{line:186,column:192}},"88":{start:{line:189,column:4},end:{line:189,column:62}},"89":{start:{line:192,column:4},end:{line:192,column:171}},"90":{start:{line:195,column:4},end:{line:195,column:101}},"91":{start:{line:198,column:4},end:{line:198,column:66}},"92":{start:{line:199,column:4},end:{line:203,column:8}},"93":{start:{line:206,column:4},end:{line:206,column:66}},"94":{start:{line:207,column:4},end:{line:207,column:88}},"95":{start:{line:210,column:4},end:{line:210,column:68}},"96":{start:{line:214,column:4},end:{line:214,column:57}},"97":{start:{line:215,column:21},end:{line:215,column:64}},"98":{start:{line:216,column:18},end:{line:216,column:85}},"99":{start:{line:217,column:4},end:{line:217,column:95}},"100":{start:{line:224,column:32},end:{line:227,column:6}},"101":{start:{line:228,column:4},end:{line:230,column:5}},"102":{start:{line:229,column:8},end:{line:229,column:25}},"103":{start:{line:231,column:4},end:{line:233,column:5}},"104":{start:{line:232,column:8},end:{line:232,column:107}},"105":{start:{line:234,column:4},end:{line:234,column:64}},"106":{start:{line:241,column:25},end:{line:244,column:6}},"107":{start:{line:245,column:4},end:{line:247,column:5}},"108":{start:{line:246,column:8},end:{line:246,column:25}},"109":{start:{line:248,column:4},end:{line:250,column:5}},"110":{start:{line:249,column:8},end:{line:249,column:99}},"111":{start:{line:251,column:4},end:{line:251,column:63}},"112":{start:{line:251,column:36},end:{line:251,column:61}},"113":{start:{line:258,column:23},end:{line:261,column:6}},"114":{start:{line:262,column:4},end:{line:264,column:5}},"115":{start:{line:263,column:8},end:{line:263,column:25}},"116":{start:{line:265,column:4},end:{line:267,column:5}},"117":{start:{line:266,column:8},end:{line:266,column:109}},"118":{start:{line:268,column:4},end:{line:268,column:66}},"119":{start:{line:268,column:34},end:{line:268,column:64}},"120":{start:{line:277,column:4},end:{line:277,column:61}},"121":{start:{line:278,column:4},end:{line:278,column:59}},"122":{start:{line:279,column:31},end:{line:279,column:71}},"123":{start:{line:280,column:24},end:{line:280,column:64}},"124":{start:{line:281,column:4},end:{line:283,column:5}},"125":{start:{line:282,column:8},end:{line:282,column:71}},"126":{start:{line:284,column:22},end:{line:284,column:68}},"127":{start:{line:285,column:4},end:{line:287,column:5}},"128":{start:{line:286,column:8},end:{line:286,column:69}},"129":{start:{line:288,column:4},end:{line:290,column:5}},"130":{start:{line:289,column:8},end:{line:289,column:93}},"131":{start:{line:300,column:4},end:{line:300,column:81}},"132":{start:{line:301,column:4},end:{line:301,column:107}},"133":{start:{line:301,column:61},end:{line:301,column:105}},"134":{start:{line:302,column:4},end:{line:304,column:5}},"135":{start:{line:303,column:8},end:{line:303,column:64}},"136":{start:{line:305,column:4},end:{line:307,column:5}},"137":{start:{line:306,column:8},end:{line:306,column:84}},"138":{start:{line:308,column:4},end:{line:316,column:7}},"139":{start:{line:309,column:22},end:{line:309,column:126}},"140":{start:{line:309,column:85},end:{line:309,column:125}},"141":{start:{line:310,column:8},end:{line:312,column:9}},"142":{start:{line:311,column:12},end:{line:311,column:73}},"143":{start:{line:313,column:8},end:{line:315,column:9}},"144":{start:{line:314,column:12},end:{line:314,column:66}},"145":{start:{line:323,column:4},end:{line:325,column:5}},"146":{start:{line:324,column:8},end:{line:324,column:62}},"147":{start:{line:326,column:30},end:{line:331,column:6}},"148":{start:{line:327,column:64},end:{line:327,column:66}},"149":{start:{line:328,column:8},end:{line:330,column:122}},"150":{start:{line:332,column:24},end:{line:332,column:56}},"151":{start:{line:333,column:4},end:{line:335,column:5}},"152":{start:{line:333,column:43},end:{line:333,column:75}},"153":{start:{line:334,column:8},end:{line:334,column:66}},"154":{start:{line:336,column:4},end:{line:336,column:83}},"155":{start:{line:336,column:62},end:{line:336,column:66}},"156":{start:{line:339,column:4},end:{line:345,column:20}},"157":{start:{line:348,column:45},end:{line:354,column:6}},"158":{start:{line:355,column:4},end:{line:355,column:88}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:36,column:4},end:{line:36,column:5}},loc:{start:{line:36,column:18},end:{line:38,column:5}},line:36},"1":{name:"(anonymous_1)",decl:{start:{line:43,column:4},end:{line:43,column:5}},loc:{start:{line:43,column:18},end:{line:50,column:5}},line:43},"2":{name:"(anonymous_2)",decl:{start:{line:62,column:4},end:{line:62,column:5}},loc:{start:{line:62,column:80},end:{line:69,column:5}},line:62},"3":{name:"encodePsbtMusig2Participants",decl:{start:{line:77,column:9},end:{line:77,column:37}},loc:{start:{line:77,column:52},end:{line:86,column:1}},line:77},"4":{name:"(anonymous_4)",decl:{start:{line:78,column:81},end:{line:78,column:82}},loc:{start:{line:78,column:93},end:{line:78,column:141}},line:78},"5":{name:"(anonymous_5)",decl:{start:{line:79,column:54},end:{line:79,column:55}},loc:{start:{line:79,column:66},end:{line:79,column:114}},line:79},"6":{name:"encodePsbtMusig2PubNonce",decl:{start:{line:92,column:9},end:{line:92,column:33}},loc:{start:{line:92,column:41},end:{line:106,column:1}},line:92},"7":{name:"encodePsbtMusig2PartialSig",decl:{start:{line:107,column:9},end:{line:107,column:35}},loc:{start:{line:107,column:48},end:{line:121,column:1}},line:107},"8":{name:"decodePsbtMusig2Participants",decl:{start:{line:126,column:9},end:{line:126,column:37}},loc:{start:{line:126,column:42},end:{line:144,column:1}},line:126},"9":{name:"decodePsbtMusig2Nonce",decl:{start:{line:149,column:9},end:{line:149,column:30}},loc:{start:{line:149,column:35},end:{line:162,column:1}},line:149},"10":{name:"decodePsbtMusig2PartialSig",decl:{start:{line:167,column:9},end:{line:167,column:35}},loc:{start:{line:167,column:40},end:{line:181,column:1}},line:167},"11":{name:"createTapInternalKey",decl:{start:{line:182,column:9},end:{line:182,column:29}},loc:{start:{line:182,column:44},end:{line:184,column:1}},line:182},"12":{name:"createTapOutputKey",decl:{start:{line:185,column:9},end:{line:185,column:27}},loc:{start:{line:185,column:57},end:{line:187,column:1}},line:185},"13":{name:"createAggregateNonce",decl:{start:{line:188,column:9},end:{line:188,column:29}},loc:{start:{line:188,column:41},end:{line:190,column:1}},line:188},"14":{name:"createTapTweak",decl:{start:{line:191,column:9},end:{line:191,column:23}},loc:{start:{line:191,column:55},end:{line:193,column:1}},line:191},"15":{name:"startMusig2SigningSession",decl:{start:{line:194,column:9},end:{line:194,column:34}},loc:{start:{line:194,column:70},end:{line:196,column:1}},line:194},"16":{name:"musig2PartialSign",decl:{start:{line:197,column:9},end:{line:197,column:26}},loc:{start:{line:197,column:76},end:{line:204,column:1}},line:197},"17":{name:"musig2PartialSigVerify",decl:{start:{line:205,column:9},end:{line:205,column:31}},loc:{start:{line:205,column:73},end:{line:208,column:1}},line:205},"18":{name:"musig2AggregateSigs",decl:{start:{line:209,column:9},end:{line:209,column:28}},loc:{start:{line:209,column:47},end:{line:211,column:1}},line:209},"19":{name:"createMusig2SigningSession",decl:{start:{line:213,column:9},end:{line:213,column:35}},loc:{start:{line:213,column:49},end:{line:218,column:1}},line:213},"20":{name:"parsePsbtMusig2Participants",decl:{start:{line:223,column:9},end:{line:223,column:36}},loc:{start:{line:223,column:44},end:{line:235,column:1}},line:223},"21":{name:"parsePsbtMusig2Nonces",decl:{start:{line:240,column:9},end:{line:240,column:30}},loc:{start:{line:240,column:38},end:{line:252,column:1}},line:240},"22":{name:"(anonymous_22)",decl:{start:{line:251,column:28},end:{line:251,column:29}},loc:{start:{line:251,column:36},end:{line:251,column:61}},line:251},"23":{name:"parsePsbtMusig2PartialSigs",decl:{start:{line:257,column:9},end:{line:257,column:35}},loc:{start:{line:257,column:43},end:{line:269,column:1}},line:257},"24":{name:"(anonymous_24)",decl:{start:{line:268,column:26},end:{line:268,column:27}},loc:{start:{line:268,column:34},end:{line:268,column:64}},line:268},"25":{name:"assertPsbtMusig2Participants",decl:{start:{line:276,column:9},end:{line:276,column:37}},loc:{start:{line:276,column:92},end:{line:291,column:1}},line:276},"26":{name:"assertPsbtMusig2Nonces",decl:{start:{line:299,column:9},end:{line:299,column:31}},loc:{start:{line:299,column:73},end:{line:317,column:1}},line:299},"27":{name:"(anonymous_27)",decl:{start:{line:301,column:53},end:{line:301,column:54}},loc:{start:{line:301,column:61},end:{line:301,column:105}},line:301},"28":{name:"(anonymous_28)",decl:{start:{line:308,column:29},end:{line:308,column:30}},loc:{start:{line:308,column:42},end:{line:316,column:5}},line:308},"29":{name:"(anonymous_29)",decl:{start:{line:309,column:73},end:{line:309,column:74}},loc:{start:{line:309,column:85},end:{line:309,column:125}},line:309},"30":{name:"getSigHashTypeFromSigs",decl:{start:{line:322,column:9},end:{line:322,column:31}},loc:{start:{line:322,column:45},end:{line:337,column:1}},line:322},"31":{name:"(anonymous_31)",decl:{start:{line:326,column:46},end:{line:326,column:47}},loc:{start:{line:326,column:54},end:{line:331,column:5}},line:326},"32":{name:"(anonymous_32)",decl:{start:{line:333,column:33},end:{line:333,column:34}},loc:{start:{line:333,column:43},end:{line:333,column:75}},line:333},"33":{name:"(anonymous_33)",decl:{start:{line:336,column:48},end:{line:336,column:49}},loc:{start:{line:336,column:62},end:{line:336,column:66}},line:336},"34":{name:"createMusig2DeterministicNonce",decl:{start:{line:338,column:9},end:{line:338,column:39}},loc:{start:{line:338,column:48},end:{line:346,column:1}},line:338},"35":{name:"musig2DeterministicSign",decl:{start:{line:347,column:9},end:{line:347,column:32}},loc:{start:{line:347,column:41},end:{line:356,column:1}},line:347}},branchMap:{"0":{loc:{start:{line:45,column:12},end:{line:47,column:13}},type:"if",locations:[{start:{line:45,column:12},end:{line:47,column:13}},{start:{line:45,column:12},end:{line:47,column:13}}],line:45},"1":{loc:{start:{line:63,column:8},end:{line:65,column:9}},type:"if",locations:[{start:{line:63,column:8},end:{line:65,column:9}},{start:{line:63,column:8},end:{line:65,column:9}}],line:63},"2":{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:93,column:4},end:{line:95,column:5}}],line:93},"3":{loc:{start:{line:108,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:108,column:4},end:{line:110,column:5}},{start:{line:108,column:4},end:{line:110,column:5}}],line:108},"4":{loc:{start:{line:108,column:8},end:{line:108,column:82}},type:"binary-expr",locations:[{start:{line:108,column:8},end:{line:108,column:43}},{start:{line:108,column:47},end:{line:108,column:82}}],line:108},"5":{loc:{start:{line:127,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:130,column:5}},{start:{line:127,column:4},end:{line:130,column:5}}],line:127},"6":{loc:{start:{line:127,column:8},end:{line:128,column:87}},type:"binary-expr",locations:[{start:{line:127,column:8},end:{line:127,column:68}},{start:{line:128,column:8},end:{line:128,column:87}}],line:127},"7":{loc:{start:{line:132,column:4},end:{line:134,column:5}},type:"if",locations:[{start:{line:132,column:4},end:{line:134,column:5}},{start:{line:132,column:4},end:{line:134,column:5}}],line:132},"8":{loc:{start:{line:136,column:4},end:{line:138,column:5}},type:"if",locations:[{start:{line:136,column:4},end:{line:138,column:5}},{start:{line:136,column:4},end:{line:138,column:5}}],line:136},"9":{loc:{start:{line:140,column:4},end:{line:142,column:5}},type:"if",locations:[{start:{line:140,column:4},end:{line:142,column:5}},{start:{line:140,column:4},end:{line:142,column:5}}],line:140},"10":{loc:{start:{line:150,column:4},end:{line:152,column:5}},type:"if",locations:[{start:{line:150,column:4},end:{line:152,column:5}},{start:{line:150,column:4},end:{line:152,column:5}}],line:150},"11":{loc:{start:{line:150,column:8},end:{line:150,column:140}},type:"binary-expr",locations:[{start:{line:150,column:8},end:{line:150,column:68}},{start:{line:150,column:72},end:{line:150,column:140}}],line:150},"12":{loc:{start:{line:154,column:4},end:{line:156,column:5}},type:"if",locations:[{start:{line:154,column:4},end:{line:156,column:5}},{start:{line:154,column:4},end:{line:156,column:5}}],line:154},"13":{loc:{start:{line:158,column:4},end:{line:160,column:5}},type:"if",locations:[{start:{line:158,column:4},end:{line:160,column:5}},{start:{line:158,column:4},end:{line:160,column:5}}],line:158},"14":{loc:{start:{line:168,column:4},end:{line:171,column:5}},type:"if",locations:[{start:{line:168,column:4},end:{line:171,column:5}},{start:{line:168,column:4},end:{line:171,column:5}}],line:168},"15":{loc:{start:{line:168,column:8},end:{line:169,column:78}},type:"binary-expr",locations:[{start:{line:168,column:8},end:{line:168,column:68}},{start:{line:169,column:8},end:{line:169,column:78}}],line:168},"16":{loc:{start:{line:173,column:4},end:{line:175,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:175,column:5}},{start:{line:173,column:4},end:{line:175,column:5}}],line:173},"17":{loc:{start:{line:177,column:4},end:{line:179,column:5}},type:"if",locations:[{start:{line:177,column:4},end:{line:179,column:5}},{start:{line:177,column:4},end:{line:179,column:5}}],line:177},"18":{loc:{start:{line:177,column:8},end:{line:177,column:50}},type:"binary-expr",locations:[{start:{line:177,column:8},end:{line:177,column:27}},{start:{line:177,column:31},end:{line:177,column:50}}],line:177},"19":{loc:{start:{line:228,column:4},end:{line:230,column:5}},type:"if",locations:[{start:{line:228,column:4},end:{line:230,column:5}},{start:{line:228,column:4},end:{line:230,column:5}}],line:228},"20":{loc:{start:{line:231,column:4},end:{line:233,column:5}},type:"if",locations:[{start:{line:231,column:4},end:{line:233,column:5}},{start:{line:231,column:4},end:{line:233,column:5}}],line:231},"21":{loc:{start:{line:245,column:4},end:{line:247,column:5}},type:"if",locations:[{start:{line:245,column:4},end:{line:247,column:5}},{start:{line:245,column:4},end:{line:247,column:5}}],line:245},"22":{loc:{start:{line:248,column:4},end:{line:250,column:5}},type:"if",locations:[{start:{line:248,column:4},end:{line:250,column:5}},{start:{line:248,column:4},end:{line:250,column:5}}],line:248},"23":{loc:{start:{line:262,column:4},end:{line:264,column:5}},type:"if",locations:[{start:{line:262,column:4},end:{line:264,column:5}},{start:{line:262,column:4},end:{line:264,column:5}}],line:262},"24":{loc:{start:{line:265,column:4},end:{line:267,column:5}},type:"if",locations:[{start:{line:265,column:4},end:{line:267,column:5}},{start:{line:265,column:4},end:{line:267,column:5}}],line:265},"25":{loc:{start:{line:281,column:4},end:{line:283,column:5}},type:"if",locations:[{start:{line:281,column:4},end:{line:283,column:5}},{start:{line:281,column:4},end:{line:283,column:5}}],line:281},"26":{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:285,column:4},end:{line:287,column:5}}],line:285},"27":{loc:{start:{line:288,column:4},end:{line:290,column:5}},type:"if",locations:[{start:{line:288,column:4},end:{line:290,column:5}},{start:{line:288,column:4},end:{line:290,column:5}}],line:288},"28":{loc:{start:{line:302,column:4},end:{line:304,column:5}},type:"if",locations:[{start:{line:302,column:4},end:{line:304,column:5}},{start:{line:302,column:4},end:{line:304,column:5}}],line:302},"29":{loc:{start:{line:305,column:4},end:{line:307,column:5}},type:"if",locations:[{start:{line:305,column:4},end:{line:307,column:5}},{start:{line:305,column:4},end:{line:307,column:5}}],line:305},"30":{loc:{start:{line:310,column:8},end:{line:312,column:9}},type:"if",locations:[{start:{line:310,column:8},end:{line:312,column:9}},{start:{line:310,column:8},end:{line:312,column:9}}],line:310},"31":{loc:{start:{line:313,column:8},end:{line:315,column:9}},type:"if",locations:[{start:{line:313,column:8},end:{line:315,column:9}},{start:{line:313,column:8},end:{line:315,column:9}}],line:313},"32":{loc:{start:{line:323,column:4},end:{line:325,column:5}},type:"if",locations:[{start:{line:323,column:4},end:{line:325,column:5}},{start:{line:323,column:4},end:{line:325,column:5}}],line:323},"33":{loc:{start:{line:328,column:15},end:{line:330,column:121}},type:"cond-expr",locations:[{start:{line:329,column:14},end:{line:329,column:125}},{start:{line:330,column:14},end:{line:330,column:121}}],line:328},"34":{loc:{start:{line:333,column:4},end:{line:335,column:5}},type:"if",locations:[{start:{line:333,column:4},end:{line:335,column:5}},{start:{line:333,column:4},end:{line:335,column:5}}],line:333}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0]},inputSourceMap:{version:3,file:"/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/Musig2.ts",sources:["/Users/qroc/Code/hapi/chaindefuser/utxo-lib/src/bitgo/Musig2.ts"],names:[],mappings:"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",sourcesContent:["import { SessionKey } from '@brandonblack/musig';\n\nimport {\n  checkPlainPublicKey,\n  checkTapMerkleRoot,\n  checkTxHash,\n  checkXOnlyPublicKey,\n  toXOnlyPublicKey,\n} from './outputScripts';\nimport { ecc, musig } from '../noble_ecc';\nimport { Tuple } from './types';\nimport { calculateTapTweak, tapTweakPubkey } from '../taproot';\nimport { Transaction } from '../index';\nimport { PsbtInput } from 'bip174/src/lib/interfaces';\nimport {\n  getPsbtInputProprietaryKeyVals,\n  ProprietaryKeySubtype,\n  ProprietaryKeyValue,\n  PSBT_PROPRIETARY_IDENTIFIER,\n} from './PsbtUtil';\n\n/**\n *  Participant key value object.\n */\nexport interface PsbtMusig2Participants {\n  tapOutputKey: Buffer;\n  tapInternalKey: Buffer;\n  participantPubKeys: Tuple<Buffer>;\n}\n\nexport interface PsbtMusig2DeterministicParams {\n  privateKey: Buffer;\n  otherNonce: Buffer;\n  publicKeys: Tuple<Buffer>;\n  internalPubKey: Buffer;\n  tapTreeRoot: Buffer;\n  hash: Buffer;\n}\n\n/**\n *  Nonce key value object.\n */\nexport interface PsbtMusig2PubNonce {\n  participantPubKey: Buffer;\n  tapOutputKey: Buffer;\n  pubNonce: Buffer;\n}\n\n/**\n *  Partial signature key value object.\n */\nexport interface PsbtMusig2PartialSig {\n  participantPubKey: Buffer;\n  tapOutputKey: Buffer;\n  partialSig: Buffer;\n}\n\n/**\n * Because musig uses reference-equal buffers to cache nonces, we wrap it here to allow using\n * nonces that are byte-equal but not reference-equal.\n */\nexport class Musig2NonceStore {\n  private nonces: Uint8Array[] = [];\n\n  /**\n   * Get original Buffer instance for nonce (which may be a copy).\n   * @return byte-equal buffer that is reference-equal to what was stored earlier in createMusig2Nonce\n   */\n  getRef(nonce: Uint8Array): Uint8Array {\n    for (const b of this.nonces) {\n      if (Buffer.from(b).equals(nonce)) {\n        return b;\n      }\n    }\n    throw new Error(`unknown nonce`);\n  }\n\n  /**\n   * Creates musig2 nonce and stores buffer reference.\n   * tapInternalkey, tapMerkleRoot, tapBip32Derivation for rootWalletKey are required per p2trMusig2 key path input.\n   * Also participant keys are required from psbt proprietary key values.\n   * Ref: https://gist.github.com/sanket1729/4b525c6049f4d9e034d27368c49f28a6\n   * @param privateKey - signer private key\n   * @param publicKey - signer xy public key\n   * @param xOnlyPublicKey - tweaked aggregated key (tapOutputKey)\n   * @param sessionId Additional entropy. If provided it must either be a counter unique to this secret key,\n   * (converted to an array of 32 bytes), or 32 uniformly random bytes.\n   */\n  createMusig2Nonce(\n    privateKey: Uint8Array,\n    publicKey: Uint8Array,\n    xOnlyPublicKey: Uint8Array,\n    txHash: Uint8Array,\n    sessionId?: Buffer\n  ): Uint8Array {\n    if (txHash.length != 32) {\n      throw new Error(`Invalid txHash size ${txHash}`);\n    }\n    const buf = musig.nonceGen({ secretKey: privateKey, publicKey, xOnlyPublicKey, msg: txHash, sessionId });\n    this.nonces.push(buf);\n    return buf;\n  }\n}\n\n/**\n * Psbt proprietary key val util function for participants pub keys. SubType is 0x01\n * Ref: https://gist.github.com/sanket1729/4b525c6049f4d9e034d27368c49f28a6\n * @return x-only tapOutputKey||tapInternalKey as sub keydata, plain sigining participant keys as valuedata\n */\nexport function encodePsbtMusig2Participants(participants: PsbtMusig2Participants): ProprietaryKeyValue {\n  const keydata = [participants.tapOutputKey, participants.tapInternalKey].map((pubkey) => checkXOnlyPublicKey(pubkey));\n  const value = participants.participantPubKeys.map((pubkey) => checkPlainPublicKey(pubkey));\n  const key = {\n    identifier: PSBT_PROPRIETARY_IDENTIFIER,\n    subtype: ProprietaryKeySubtype.MUSIG2_PARTICIPANT_PUB_KEYS,\n    keydata: Buffer.concat(keydata),\n  };\n  return { key, value: Buffer.concat(value) };\n}\n\n/**\n * Psbt proprietary key val util function for pub nonce. SubType is 0x02\n * Ref: https://gist.github.com/sanket1729/4b525c6049f4d9e034d27368c49f28a6\n * @return plain-participantPubKey||x-only-tapOutputKey as sub keydata, 66 bytes of 2 pub nonces as valuedata\n */\nexport function encodePsbtMusig2PubNonce(nonce: PsbtMusig2PubNonce): ProprietaryKeyValue {\n  if (nonce.pubNonce.length !== 66) {\n    throw new Error(`Invalid pubNonces length ${nonce.pubNonce.length}`);\n  }\n  const keydata = Buffer.concat([\n    checkPlainPublicKey(nonce.participantPubKey),\n    checkXOnlyPublicKey(nonce.tapOutputKey),\n  ]);\n  const key = {\n    identifier: PSBT_PROPRIETARY_IDENTIFIER,\n    subtype: ProprietaryKeySubtype.MUSIG2_PUB_NONCE,\n    keydata,\n  };\n  return { key, value: nonce.pubNonce };\n}\n\nexport function encodePsbtMusig2PartialSig(partialSig: PsbtMusig2PartialSig): ProprietaryKeyValue {\n  if (partialSig.partialSig.length !== 32 && partialSig.partialSig.length !== 33) {\n    throw new Error(`Invalid partialSig length ${partialSig.partialSig.length}`);\n  }\n  const keydata = Buffer.concat([\n    checkPlainPublicKey(partialSig.participantPubKey),\n    checkXOnlyPublicKey(partialSig.tapOutputKey),\n  ]);\n  const key = {\n    identifier: PSBT_PROPRIETARY_IDENTIFIER,\n    subtype: ProprietaryKeySubtype.MUSIG2_PARTIAL_SIG,\n    keydata,\n  };\n  return { key, value: partialSig.partialSig };\n}\n\n/**\n * Decodes proprietary key value data for participant pub keys\n * @param kv\n */\nexport function decodePsbtMusig2Participants(kv: ProprietaryKeyValue): PsbtMusig2Participants {\n  if (\n    kv.key.identifier !== PSBT_PROPRIETARY_IDENTIFIER ||\n    kv.key.subtype !== ProprietaryKeySubtype.MUSIG2_PARTICIPANT_PUB_KEYS\n  ) {\n    throw new Error(`Invalid identifier ${kv.key.identifier} or subtype ${kv.key.subtype} for participants pub keys`);\n  }\n\n  const key = kv.key.keydata;\n  if (key.length !== 64) {\n    throw new Error(`Invalid keydata size ${key.length} for participant pub keys`);\n  }\n\n  const value = kv.value;\n  if (value.length !== 66) {\n    throw new Error(`Invalid valuedata size ${value.length} for participant pub keys`);\n  }\n  const participantPubKeys: Tuple<Buffer> = [value.subarray(0, 33), value.subarray(33)];\n  if (participantPubKeys[0].equals(participantPubKeys[1])) {\n    throw new Error(`Duplicate participant pub keys found`);\n  }\n\n  return { tapOutputKey: key.subarray(0, 32), tapInternalKey: key.subarray(32), participantPubKeys };\n}\n\n/**\n * Decodes proprietary key value data for musig2 nonce\n * @param kv\n */\nexport function decodePsbtMusig2Nonce(kv: ProprietaryKeyValue): PsbtMusig2PubNonce {\n  if (kv.key.identifier !== PSBT_PROPRIETARY_IDENTIFIER || kv.key.subtype !== ProprietaryKeySubtype.MUSIG2_PUB_NONCE) {\n    throw new Error(`Invalid identifier ${kv.key.identifier} or subtype ${kv.key.subtype} for nonce`);\n  }\n\n  const key = kv.key.keydata;\n  if (key.length !== 65) {\n    throw new Error(`Invalid keydata size ${key.length} for nonce`);\n  }\n\n  const value = kv.value;\n  if (value.length !== 66) {\n    throw new Error(`Invalid valuedata size ${value.length} for nonce`);\n  }\n\n  return { participantPubKey: key.subarray(0, 33), tapOutputKey: key.subarray(33), pubNonce: value };\n}\n\n/**\n * Decodes proprietary key value data for musig2 partial sig\n * @param kv\n */\nexport function decodePsbtMusig2PartialSig(kv: ProprietaryKeyValue): PsbtMusig2PartialSig {\n  if (\n    kv.key.identifier !== PSBT_PROPRIETARY_IDENTIFIER ||\n    kv.key.subtype !== ProprietaryKeySubtype.MUSIG2_PARTIAL_SIG\n  ) {\n    throw new Error(`Invalid identifier ${kv.key.identifier} or subtype ${kv.key.subtype} for partial sig`);\n  }\n\n  const key = kv.key.keydata;\n  if (key.length !== 65) {\n    throw new Error(`Invalid keydata size ${key.length} for partial sig`);\n  }\n\n  const value = kv.value;\n  if (value.length !== 32 && value.length !== 33) {\n    throw new Error(`Invalid valuedata size ${value.length} for partial sig`);\n  }\n\n  return { participantPubKey: key.subarray(0, 33), tapOutputKey: key.subarray(33), partialSig: value };\n}\n\nexport function createTapInternalKey(plainPubKeys: Buffer[]): Buffer {\n  return Buffer.from(musig.getXOnlyPubkey(musig.keyAgg(plainPubKeys)));\n}\n\nexport function createTapOutputKey(internalPubKey: Buffer, tapTreeRoot: Buffer): Buffer {\n  return Buffer.from(\n    tapTweakPubkey(ecc, toXOnlyPublicKey(internalPubKey), checkTapMerkleRoot(tapTreeRoot)).xOnlyPubkey\n  );\n}\n\nexport function createAggregateNonce(pubNonces: Tuple<Buffer>): Buffer {\n  return Buffer.from(musig.nonceAgg(pubNonces));\n}\n\nexport function createTapTweak(tapInternalKey: Buffer, tapMerkleRoot: Buffer): Buffer {\n  return Buffer.from(calculateTapTweak(checkXOnlyPublicKey(tapInternalKey), checkTapMerkleRoot(tapMerkleRoot)));\n}\n\nfunction startMusig2SigningSession(\n  aggNonce: Buffer,\n  hash: Buffer,\n  publicKeys: Tuple<Buffer>,\n  tweak: Buffer\n): SessionKey {\n  return musig.startSigningSession(aggNonce, hash, publicKeys, { tweak, xOnly: true });\n}\n\nexport function musig2PartialSign(\n  privateKey: Buffer,\n  publicNonce: Uint8Array,\n  sessionKey: SessionKey,\n  nonceStore: Musig2NonceStore\n): Buffer {\n  checkTxHash(Buffer.from(sessionKey.msg));\n  return Buffer.from(\n    musig.partialSign({\n      secretKey: privateKey,\n      publicNonce: nonceStore.getRef(publicNonce),\n      sessionKey,\n    })\n  );\n}\n\nexport function musig2PartialSigVerify(\n  sig: Buffer,\n  publicKey: Buffer,\n  publicNonce: Buffer,\n  sessionKey: SessionKey\n): boolean {\n  checkTxHash(Buffer.from(sessionKey.msg));\n  return musig.partialVerify({ sig, publicKey, publicNonce, sessionKey });\n}\n\nexport function musig2AggregateSigs(sigs: Buffer[], sessionKey: SessionKey): Buffer {\n  return Buffer.from(musig.signAgg(sigs, sessionKey));\n}\n\n/** @return session key that can be used to reference the session later */\nexport function createMusig2SigningSession(sessionArgs: {\n  pubNonces: Tuple<Buffer>;\n  txHash: Buffer;\n  pubKeys: Tuple<Buffer>;\n  internalPubKey: Buffer;\n  tapTreeRoot: Buffer;\n}): SessionKey {\n  checkTxHash(sessionArgs.txHash);\n  const aggNonce = createAggregateNonce(sessionArgs.pubNonces);\n  const tweak = createTapTweak(sessionArgs.internalPubKey, sessionArgs.tapTreeRoot);\n  return startMusig2SigningSession(aggNonce, sessionArgs.txHash, sessionArgs.pubKeys, tweak);\n}\n\n/**\n * @returns psbt proprietary key for musig2 participant key value data\n * If no key value exists, undefined is returned.\n */\nexport function parsePsbtMusig2Participants(input: PsbtInput): PsbtMusig2Participants | undefined {\n  const participantsKeyVals = getPsbtInputProprietaryKeyVals(input, {\n    identifier: PSBT_PROPRIETARY_IDENTIFIER,\n    subtype: ProprietaryKeySubtype.MUSIG2_PARTICIPANT_PUB_KEYS,\n  });\n\n  if (!participantsKeyVals.length) {\n    return undefined;\n  }\n\n  if (participantsKeyVals.length > 1) {\n    throw new Error(`Found ${participantsKeyVals.length} matching participant key value instead of 1`);\n  }\n\n  return decodePsbtMusig2Participants(participantsKeyVals[0]);\n}\n\n/**\n * @returns psbt proprietary key for musig2 public nonce key value data\n * If no key value exists, undefined is returned.\n */\nexport function parsePsbtMusig2Nonces(input: PsbtInput): PsbtMusig2PubNonce[] | undefined {\n  const nonceKeyVals = getPsbtInputProprietaryKeyVals(input, {\n    identifier: PSBT_PROPRIETARY_IDENTIFIER,\n    subtype: ProprietaryKeySubtype.MUSIG2_PUB_NONCE,\n  });\n\n  if (!nonceKeyVals.length) {\n    return undefined;\n  }\n\n  if (nonceKeyVals.length > 2) {\n    throw new Error(`Found ${nonceKeyVals.length} matching nonce key value instead of 1 or 2`);\n  }\n\n  return nonceKeyVals.map((kv) => decodePsbtMusig2Nonce(kv));\n}\n\n/**\n * @returns psbt proprietary key for musig2 partial sig key value data\n * If no key value exists, undefined is returned.\n */\nexport function parsePsbtMusig2PartialSigs(input: PsbtInput): PsbtMusig2PartialSig[] | undefined {\n  const sigKeyVals = getPsbtInputProprietaryKeyVals(input, {\n    identifier: PSBT_PROPRIETARY_IDENTIFIER,\n    subtype: ProprietaryKeySubtype.MUSIG2_PARTIAL_SIG,\n  });\n\n  if (!sigKeyVals.length) {\n    return undefined;\n  }\n\n  if (sigKeyVals.length > 2) {\n    throw new Error(`Found ${sigKeyVals.length} matching partial signature key value instead of 1 or 2`);\n  }\n\n  return sigKeyVals.map((kv) => decodePsbtMusig2PartialSig(kv));\n}\n\n/**\n * Assert musig2 participant key value data with tapInternalKey and tapMerkleRoot.\n * <tapOutputKey><tapInputKey> => <participantKey1><participantKey2>\n * Using tapMerkleRoot and 2 participant keys, the tapInputKey is validated and using tapMerkleRoot and tapInputKey,\n * the tapOutputKey is validated.\n */\nexport function assertPsbtMusig2Participants(\n  participantKeyValData: PsbtMusig2Participants,\n  tapInternalKey: Buffer,\n  tapMerkleRoot: Buffer\n): void {\n  checkXOnlyPublicKey(tapInternalKey);\n  checkTapMerkleRoot(tapMerkleRoot);\n\n  const participantPubKeys = participantKeyValData.participantPubKeys;\n\n  const internalKey = createTapInternalKey(participantPubKeys);\n  if (!internalKey.equals(participantKeyValData.tapInternalKey)) {\n    throw new Error('Invalid participants keydata tapInternalKey');\n  }\n\n  const outputKey = createTapOutputKey(internalKey, tapMerkleRoot);\n  if (!outputKey.equals(participantKeyValData.tapOutputKey)) {\n    throw new Error('Invalid participants keydata tapOutputKey');\n  }\n\n  if (!internalKey.equals(tapInternalKey)) {\n    throw new Error('tapInternalKey and aggregated participant pub keys does not match');\n  }\n}\n\n/**\n * Assert musig2 public nonce key value data with participant key value data\n * (refer assertPsbtMusig2ParticipantsKeyValData).\n * <participantKey1><tapOutputKey> => <pubNonce1>\n * <participantKey2><tapOutputKey> => <pubNonce2>\n * Checks against participant keys and tapOutputKey\n */\nexport function assertPsbtMusig2Nonces(\n  noncesKeyValData: PsbtMusig2PubNonce[],\n  participantKeyValData: PsbtMusig2Participants\n): void {\n  checkXOnlyPublicKey(participantKeyValData.tapOutputKey);\n  participantKeyValData.participantPubKeys.forEach((kv) => checkPlainPublicKey(kv));\n  if (participantKeyValData.participantPubKeys[0].equals(participantKeyValData.participantPubKeys[1])) {\n    throw new Error(`Duplicate participant pub keys found`);\n  }\n\n  if (noncesKeyValData.length > 2) {\n    throw new Error(`Invalid nonce key value count ${noncesKeyValData.length}`);\n  }\n\n  noncesKeyValData.forEach((nonceKv) => {\n    const index = participantKeyValData.participantPubKeys.findIndex((pubKey) =>\n      nonceKv.participantPubKey.equals(pubKey)\n    );\n    if (index < 0) {\n      throw new Error('Invalid nonce keydata participant pub key');\n    }\n\n    if (!nonceKv.tapOutputKey.equals(participantKeyValData.tapOutputKey)) {\n      throw new Error('Invalid nonce keydata tapOutputKey');\n    }\n  });\n}\n\n/**\n * @returns Input object but sig hash type data is taken out from partialSig field.\n * If sig hash type is not common for all sigs, error out, otherwise returns the modified object and single hash type.\n */\nexport function getSigHashTypeFromSigs(partialSigs: PsbtMusig2PartialSig[]): {\n  partialSigs: PsbtMusig2PartialSig[];\n  sigHashType: number;\n} {\n  if (!partialSigs.length) {\n    throw new Error('partialSigs array can not be empty');\n  }\n  const pSigsWithHashType = partialSigs.map((kv) => {\n    const { partialSig, participantPubKey, tapOutputKey } = kv;\n    return partialSig.length === 33\n      ? { pSig: { partialSig: partialSig.slice(0, 32), participantPubKey, tapOutputKey }, sigHashType: partialSig[32] }\n      : { pSig: { partialSig, participantPubKey, tapOutputKey }, sigHashType: Transaction.SIGHASH_DEFAULT };\n  });\n\n  const sigHashType = pSigsWithHashType[0].sigHashType;\n  if (!pSigsWithHashType.every((pSig) => pSig.sigHashType === sigHashType)) {\n    throw new Error('signatures must use same sig hash type');\n  }\n\n  return { partialSigs: pSigsWithHashType.map(({ pSig }) => pSig), sigHashType };\n}\n\nexport function createMusig2DeterministicNonce(params: PsbtMusig2DeterministicParams): Buffer {\n  return Buffer.from(\n    musig.deterministicNonceGen({\n      secretKey: params.privateKey,\n      aggOtherNonce: musig.nonceAgg([params.otherNonce]),\n      publicKeys: params.publicKeys,\n      tweaks: [{ tweak: createTapTweak(params.internalPubKey, params.tapTreeRoot), xOnly: true }],\n      msg: params.hash,\n    }).publicNonce\n  );\n}\n\nexport function musig2DeterministicSign(params: PsbtMusig2DeterministicParams): {\n  sig: Buffer;\n  sessionKey: SessionKey;\n  publicNonce: Buffer;\n} {\n  const { sig, sessionKey, publicNonce } = musig.deterministicSign({\n    secretKey: params.privateKey,\n    aggOtherNonce: musig.nonceAgg([params.otherNonce]),\n    publicKeys: params.publicKeys,\n    tweaks: [{ tweak: createTapTweak(params.internalPubKey, params.tapTreeRoot), xOnly: true }],\n    msg: params.hash,\n  });\n  return { sig: Buffer.from(sig), sessionKey, publicNonce: Buffer.from(publicNonce) };\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"afcddbcec6762bb992b4fe0326d92f429fd69ef6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_16bc12fk7=function(){return actualCoverage;};}return actualCoverage;}cov_16bc12fk7();cov_16bc12fk7().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_16bc12fk7().s[1]++;exports.Musig2NonceStore=void 0;cov_16bc12fk7().s[2]++;exports.encodePsbtMusig2Participants=encodePsbtMusig2Participants;cov_16bc12fk7().s[3]++;exports.encodePsbtMusig2PubNonce=encodePsbtMusig2PubNonce;cov_16bc12fk7().s[4]++;exports.encodePsbtMusig2PartialSig=encodePsbtMusig2PartialSig;cov_16bc12fk7().s[5]++;exports.decodePsbtMusig2Participants=decodePsbtMusig2Participants;cov_16bc12fk7().s[6]++;exports.decodePsbtMusig2Nonce=decodePsbtMusig2Nonce;cov_16bc12fk7().s[7]++;exports.decodePsbtMusig2PartialSig=decodePsbtMusig2PartialSig;cov_16bc12fk7().s[8]++;exports.createTapInternalKey=createTapInternalKey;cov_16bc12fk7().s[9]++;exports.createTapOutputKey=createTapOutputKey;cov_16bc12fk7().s[10]++;exports.createAggregateNonce=createAggregateNonce;cov_16bc12fk7().s[11]++;exports.createTapTweak=createTapTweak;cov_16bc12fk7().s[12]++;exports.musig2PartialSign=musig2PartialSign;cov_16bc12fk7().s[13]++;exports.musig2PartialSigVerify=musig2PartialSigVerify;cov_16bc12fk7().s[14]++;exports.musig2AggregateSigs=musig2AggregateSigs;cov_16bc12fk7().s[15]++;exports.createMusig2SigningSession=createMusig2SigningSession;cov_16bc12fk7().s[16]++;exports.parsePsbtMusig2Participants=parsePsbtMusig2Participants;cov_16bc12fk7().s[17]++;exports.parsePsbtMusig2Nonces=parsePsbtMusig2Nonces;cov_16bc12fk7().s[18]++;exports.parsePsbtMusig2PartialSigs=parsePsbtMusig2PartialSigs;cov_16bc12fk7().s[19]++;exports.assertPsbtMusig2Participants=assertPsbtMusig2Participants;cov_16bc12fk7().s[20]++;exports.assertPsbtMusig2Nonces=assertPsbtMusig2Nonces;cov_16bc12fk7().s[21]++;exports.getSigHashTypeFromSigs=getSigHashTypeFromSigs;cov_16bc12fk7().s[22]++;exports.createMusig2DeterministicNonce=createMusig2DeterministicNonce;cov_16bc12fk7().s[23]++;exports.musig2DeterministicSign=musig2DeterministicSign;const outputScripts_1=(cov_16bc12fk7().s[24]++,require("./outputScripts"));const noble_ecc_1=(cov_16bc12fk7().s[25]++,require("../noble_ecc"));const taproot_1=(cov_16bc12fk7().s[26]++,require("../taproot"));const index_1=(cov_16bc12fk7().s[27]++,require("../index"));const PsbtUtil_1=(cov_16bc12fk7().s[28]++,require("./PsbtUtil"));/**
 * Because musig uses reference-equal buffers to cache nonces, we wrap it here to allow using
 * nonces that are byte-equal but not reference-equal.
 */class Musig2NonceStore{constructor(){cov_16bc12fk7().f[0]++;cov_16bc12fk7().s[29]++;this.nonces=[];}/**
     * Get original Buffer instance for nonce (which may be a copy).
     * @return byte-equal buffer that is reference-equal to what was stored earlier in createMusig2Nonce
     */getRef(nonce){cov_16bc12fk7().f[1]++;cov_16bc12fk7().s[30]++;for(const b of this.nonces){cov_16bc12fk7().s[31]++;if(Buffer.from(b).equals(nonce)){cov_16bc12fk7().b[0][0]++;cov_16bc12fk7().s[32]++;return b;}else{cov_16bc12fk7().b[0][1]++;}}cov_16bc12fk7().s[33]++;throw new Error(`unknown nonce`);}/**
     * Creates musig2 nonce and stores buffer reference.
     * tapInternalkey, tapMerkleRoot, tapBip32Derivation for rootWalletKey are required per p2trMusig2 key path input.
     * Also participant keys are required from psbt proprietary key values.
     * Ref: https://gist.github.com/sanket1729/4b525c6049f4d9e034d27368c49f28a6
     * @param privateKey - signer private key
     * @param publicKey - signer xy public key
     * @param xOnlyPublicKey - tweaked aggregated key (tapOutputKey)
     * @param sessionId Additional entropy. If provided it must either be a counter unique to this secret key,
     * (converted to an array of 32 bytes), or 32 uniformly random bytes.
     */createMusig2Nonce(privateKey,publicKey,xOnlyPublicKey,txHash,sessionId){cov_16bc12fk7().f[2]++;cov_16bc12fk7().s[34]++;if(txHash.length!=32){cov_16bc12fk7().b[1][0]++;cov_16bc12fk7().s[35]++;throw new Error(`Invalid txHash size ${txHash}`);}else{cov_16bc12fk7().b[1][1]++;}const buf=(cov_16bc12fk7().s[36]++,noble_ecc_1.musig.nonceGen({secretKey:privateKey,publicKey,xOnlyPublicKey,msg:txHash,sessionId}));cov_16bc12fk7().s[37]++;this.nonces.push(buf);cov_16bc12fk7().s[38]++;return buf;}}cov_16bc12fk7().s[39]++;exports.Musig2NonceStore=Musig2NonceStore;/**
 * Psbt proprietary key val util function for participants pub keys. SubType is 0x01
 * Ref: https://gist.github.com/sanket1729/4b525c6049f4d9e034d27368c49f28a6
 * @return x-only tapOutputKey||tapInternalKey as sub keydata, plain sigining participant keys as valuedata
 */function encodePsbtMusig2Participants(participants){cov_16bc12fk7().f[3]++;const keydata=(cov_16bc12fk7().s[40]++,[participants.tapOutputKey,participants.tapInternalKey].map(pubkey=>{cov_16bc12fk7().f[4]++;cov_16bc12fk7().s[41]++;return(0,outputScripts_1.checkXOnlyPublicKey)(pubkey);}));const value=(cov_16bc12fk7().s[42]++,participants.participantPubKeys.map(pubkey=>{cov_16bc12fk7().f[5]++;cov_16bc12fk7().s[43]++;return(0,outputScripts_1.checkPlainPublicKey)(pubkey);}));const key=(cov_16bc12fk7().s[44]++,{identifier:PsbtUtil_1.PSBT_PROPRIETARY_IDENTIFIER,subtype:PsbtUtil_1.ProprietaryKeySubtype.MUSIG2_PARTICIPANT_PUB_KEYS,keydata:Buffer.concat(keydata)});cov_16bc12fk7().s[45]++;return{key,value:Buffer.concat(value)};}/**
 * Psbt proprietary key val util function for pub nonce. SubType is 0x02
 * Ref: https://gist.github.com/sanket1729/4b525c6049f4d9e034d27368c49f28a6
 * @return plain-participantPubKey||x-only-tapOutputKey as sub keydata, 66 bytes of 2 pub nonces as valuedata
 */function encodePsbtMusig2PubNonce(nonce){cov_16bc12fk7().f[6]++;cov_16bc12fk7().s[46]++;if(nonce.pubNonce.length!==66){cov_16bc12fk7().b[2][0]++;cov_16bc12fk7().s[47]++;throw new Error(`Invalid pubNonces length ${nonce.pubNonce.length}`);}else{cov_16bc12fk7().b[2][1]++;}const keydata=(cov_16bc12fk7().s[48]++,Buffer.concat([(0,outputScripts_1.checkPlainPublicKey)(nonce.participantPubKey),(0,outputScripts_1.checkXOnlyPublicKey)(nonce.tapOutputKey)]));const key=(cov_16bc12fk7().s[49]++,{identifier:PsbtUtil_1.PSBT_PROPRIETARY_IDENTIFIER,subtype:PsbtUtil_1.ProprietaryKeySubtype.MUSIG2_PUB_NONCE,keydata});cov_16bc12fk7().s[50]++;return{key,value:nonce.pubNonce};}function encodePsbtMusig2PartialSig(partialSig){cov_16bc12fk7().f[7]++;cov_16bc12fk7().s[51]++;if((cov_16bc12fk7().b[4][0]++,partialSig.partialSig.length!==32)&&(cov_16bc12fk7().b[4][1]++,partialSig.partialSig.length!==33)){cov_16bc12fk7().b[3][0]++;cov_16bc12fk7().s[52]++;throw new Error(`Invalid partialSig length ${partialSig.partialSig.length}`);}else{cov_16bc12fk7().b[3][1]++;}const keydata=(cov_16bc12fk7().s[53]++,Buffer.concat([(0,outputScripts_1.checkPlainPublicKey)(partialSig.participantPubKey),(0,outputScripts_1.checkXOnlyPublicKey)(partialSig.tapOutputKey)]));const key=(cov_16bc12fk7().s[54]++,{identifier:PsbtUtil_1.PSBT_PROPRIETARY_IDENTIFIER,subtype:PsbtUtil_1.ProprietaryKeySubtype.MUSIG2_PARTIAL_SIG,keydata});cov_16bc12fk7().s[55]++;return{key,value:partialSig.partialSig};}/**
 * Decodes proprietary key value data for participant pub keys
 * @param kv
 */function decodePsbtMusig2Participants(kv){cov_16bc12fk7().f[8]++;cov_16bc12fk7().s[56]++;if((cov_16bc12fk7().b[6][0]++,kv.key.identifier!==PsbtUtil_1.PSBT_PROPRIETARY_IDENTIFIER)||(cov_16bc12fk7().b[6][1]++,kv.key.subtype!==PsbtUtil_1.ProprietaryKeySubtype.MUSIG2_PARTICIPANT_PUB_KEYS)){cov_16bc12fk7().b[5][0]++;cov_16bc12fk7().s[57]++;throw new Error(`Invalid identifier ${kv.key.identifier} or subtype ${kv.key.subtype} for participants pub keys`);}else{cov_16bc12fk7().b[5][1]++;}const key=(cov_16bc12fk7().s[58]++,kv.key.keydata);cov_16bc12fk7().s[59]++;if(key.length!==64){cov_16bc12fk7().b[7][0]++;cov_16bc12fk7().s[60]++;throw new Error(`Invalid keydata size ${key.length} for participant pub keys`);}else{cov_16bc12fk7().b[7][1]++;}const value=(cov_16bc12fk7().s[61]++,kv.value);cov_16bc12fk7().s[62]++;if(value.length!==66){cov_16bc12fk7().b[8][0]++;cov_16bc12fk7().s[63]++;throw new Error(`Invalid valuedata size ${value.length} for participant pub keys`);}else{cov_16bc12fk7().b[8][1]++;}const participantPubKeys=(cov_16bc12fk7().s[64]++,[value.subarray(0,33),value.subarray(33)]);cov_16bc12fk7().s[65]++;if(participantPubKeys[0].equals(participantPubKeys[1])){cov_16bc12fk7().b[9][0]++;cov_16bc12fk7().s[66]++;throw new Error(`Duplicate participant pub keys found`);}else{cov_16bc12fk7().b[9][1]++;}cov_16bc12fk7().s[67]++;return{tapOutputKey:key.subarray(0,32),tapInternalKey:key.subarray(32),participantPubKeys};}/**
 * Decodes proprietary key value data for musig2 nonce
 * @param kv
 */function decodePsbtMusig2Nonce(kv){cov_16bc12fk7().f[9]++;cov_16bc12fk7().s[68]++;if((cov_16bc12fk7().b[11][0]++,kv.key.identifier!==PsbtUtil_1.PSBT_PROPRIETARY_IDENTIFIER)||(cov_16bc12fk7().b[11][1]++,kv.key.subtype!==PsbtUtil_1.ProprietaryKeySubtype.MUSIG2_PUB_NONCE)){cov_16bc12fk7().b[10][0]++;cov_16bc12fk7().s[69]++;throw new Error(`Invalid identifier ${kv.key.identifier} or subtype ${kv.key.subtype} for nonce`);}else{cov_16bc12fk7().b[10][1]++;}const key=(cov_16bc12fk7().s[70]++,kv.key.keydata);cov_16bc12fk7().s[71]++;if(key.length!==65){cov_16bc12fk7().b[12][0]++;cov_16bc12fk7().s[72]++;throw new Error(`Invalid keydata size ${key.length} for nonce`);}else{cov_16bc12fk7().b[12][1]++;}const value=(cov_16bc12fk7().s[73]++,kv.value);cov_16bc12fk7().s[74]++;if(value.length!==66){cov_16bc12fk7().b[13][0]++;cov_16bc12fk7().s[75]++;throw new Error(`Invalid valuedata size ${value.length} for nonce`);}else{cov_16bc12fk7().b[13][1]++;}cov_16bc12fk7().s[76]++;return{participantPubKey:key.subarray(0,33),tapOutputKey:key.subarray(33),pubNonce:value};}/**
 * Decodes proprietary key value data for musig2 partial sig
 * @param kv
 */function decodePsbtMusig2PartialSig(kv){cov_16bc12fk7().f[10]++;cov_16bc12fk7().s[77]++;if((cov_16bc12fk7().b[15][0]++,kv.key.identifier!==PsbtUtil_1.PSBT_PROPRIETARY_IDENTIFIER)||(cov_16bc12fk7().b[15][1]++,kv.key.subtype!==PsbtUtil_1.ProprietaryKeySubtype.MUSIG2_PARTIAL_SIG)){cov_16bc12fk7().b[14][0]++;cov_16bc12fk7().s[78]++;throw new Error(`Invalid identifier ${kv.key.identifier} or subtype ${kv.key.subtype} for partial sig`);}else{cov_16bc12fk7().b[14][1]++;}const key=(cov_16bc12fk7().s[79]++,kv.key.keydata);cov_16bc12fk7().s[80]++;if(key.length!==65){cov_16bc12fk7().b[16][0]++;cov_16bc12fk7().s[81]++;throw new Error(`Invalid keydata size ${key.length} for partial sig`);}else{cov_16bc12fk7().b[16][1]++;}const value=(cov_16bc12fk7().s[82]++,kv.value);cov_16bc12fk7().s[83]++;if((cov_16bc12fk7().b[18][0]++,value.length!==32)&&(cov_16bc12fk7().b[18][1]++,value.length!==33)){cov_16bc12fk7().b[17][0]++;cov_16bc12fk7().s[84]++;throw new Error(`Invalid valuedata size ${value.length} for partial sig`);}else{cov_16bc12fk7().b[17][1]++;}cov_16bc12fk7().s[85]++;return{participantPubKey:key.subarray(0,33),tapOutputKey:key.subarray(33),partialSig:value};}function createTapInternalKey(plainPubKeys){cov_16bc12fk7().f[11]++;cov_16bc12fk7().s[86]++;return Buffer.from(noble_ecc_1.musig.getXOnlyPubkey(noble_ecc_1.musig.keyAgg(plainPubKeys)));}function createTapOutputKey(internalPubKey,tapTreeRoot){cov_16bc12fk7().f[12]++;cov_16bc12fk7().s[87]++;return Buffer.from((0,taproot_1.tapTweakPubkey)(noble_ecc_1.ecc,(0,outputScripts_1.toXOnlyPublicKey)(internalPubKey),(0,outputScripts_1.checkTapMerkleRoot)(tapTreeRoot)).xOnlyPubkey);}function createAggregateNonce(pubNonces){cov_16bc12fk7().f[13]++;cov_16bc12fk7().s[88]++;return Buffer.from(noble_ecc_1.musig.nonceAgg(pubNonces));}function createTapTweak(tapInternalKey,tapMerkleRoot){cov_16bc12fk7().f[14]++;cov_16bc12fk7().s[89]++;return Buffer.from((0,taproot_1.calculateTapTweak)((0,outputScripts_1.checkXOnlyPublicKey)(tapInternalKey),(0,outputScripts_1.checkTapMerkleRoot)(tapMerkleRoot)));}function startMusig2SigningSession(aggNonce,hash,publicKeys,tweak){cov_16bc12fk7().f[15]++;cov_16bc12fk7().s[90]++;return noble_ecc_1.musig.startSigningSession(aggNonce,hash,publicKeys,{tweak,xOnly:true});}function musig2PartialSign(privateKey,publicNonce,sessionKey,nonceStore){cov_16bc12fk7().f[16]++;cov_16bc12fk7().s[91]++;(0,outputScripts_1.checkTxHash)(Buffer.from(sessionKey.msg));cov_16bc12fk7().s[92]++;return Buffer.from(noble_ecc_1.musig.partialSign({secretKey:privateKey,publicNonce:nonceStore.getRef(publicNonce),sessionKey}));}function musig2PartialSigVerify(sig,publicKey,publicNonce,sessionKey){cov_16bc12fk7().f[17]++;cov_16bc12fk7().s[93]++;(0,outputScripts_1.checkTxHash)(Buffer.from(sessionKey.msg));cov_16bc12fk7().s[94]++;return noble_ecc_1.musig.partialVerify({sig,publicKey,publicNonce,sessionKey});}function musig2AggregateSigs(sigs,sessionKey){cov_16bc12fk7().f[18]++;cov_16bc12fk7().s[95]++;return Buffer.from(noble_ecc_1.musig.signAgg(sigs,sessionKey));}/** @return session key that can be used to reference the session later */function createMusig2SigningSession(sessionArgs){cov_16bc12fk7().f[19]++;cov_16bc12fk7().s[96]++;(0,outputScripts_1.checkTxHash)(sessionArgs.txHash);const aggNonce=(cov_16bc12fk7().s[97]++,createAggregateNonce(sessionArgs.pubNonces));const tweak=(cov_16bc12fk7().s[98]++,createTapTweak(sessionArgs.internalPubKey,sessionArgs.tapTreeRoot));cov_16bc12fk7().s[99]++;return startMusig2SigningSession(aggNonce,sessionArgs.txHash,sessionArgs.pubKeys,tweak);}/**
 * @returns psbt proprietary key for musig2 participant key value data
 * If no key value exists, undefined is returned.
 */function parsePsbtMusig2Participants(input){cov_16bc12fk7().f[20]++;const participantsKeyVals=(cov_16bc12fk7().s[100]++,(0,PsbtUtil_1.getPsbtInputProprietaryKeyVals)(input,{identifier:PsbtUtil_1.PSBT_PROPRIETARY_IDENTIFIER,subtype:PsbtUtil_1.ProprietaryKeySubtype.MUSIG2_PARTICIPANT_PUB_KEYS}));cov_16bc12fk7().s[101]++;if(!participantsKeyVals.length){cov_16bc12fk7().b[19][0]++;cov_16bc12fk7().s[102]++;return undefined;}else{cov_16bc12fk7().b[19][1]++;}cov_16bc12fk7().s[103]++;if(participantsKeyVals.length>1){cov_16bc12fk7().b[20][0]++;cov_16bc12fk7().s[104]++;throw new Error(`Found ${participantsKeyVals.length} matching participant key value instead of 1`);}else{cov_16bc12fk7().b[20][1]++;}cov_16bc12fk7().s[105]++;return decodePsbtMusig2Participants(participantsKeyVals[0]);}/**
 * @returns psbt proprietary key for musig2 public nonce key value data
 * If no key value exists, undefined is returned.
 */function parsePsbtMusig2Nonces(input){cov_16bc12fk7().f[21]++;const nonceKeyVals=(cov_16bc12fk7().s[106]++,(0,PsbtUtil_1.getPsbtInputProprietaryKeyVals)(input,{identifier:PsbtUtil_1.PSBT_PROPRIETARY_IDENTIFIER,subtype:PsbtUtil_1.ProprietaryKeySubtype.MUSIG2_PUB_NONCE}));cov_16bc12fk7().s[107]++;if(!nonceKeyVals.length){cov_16bc12fk7().b[21][0]++;cov_16bc12fk7().s[108]++;return undefined;}else{cov_16bc12fk7().b[21][1]++;}cov_16bc12fk7().s[109]++;if(nonceKeyVals.length>2){cov_16bc12fk7().b[22][0]++;cov_16bc12fk7().s[110]++;throw new Error(`Found ${nonceKeyVals.length} matching nonce key value instead of 1 or 2`);}else{cov_16bc12fk7().b[22][1]++;}cov_16bc12fk7().s[111]++;return nonceKeyVals.map(kv=>{cov_16bc12fk7().f[22]++;cov_16bc12fk7().s[112]++;return decodePsbtMusig2Nonce(kv);});}/**
 * @returns psbt proprietary key for musig2 partial sig key value data
 * If no key value exists, undefined is returned.
 */function parsePsbtMusig2PartialSigs(input){cov_16bc12fk7().f[23]++;const sigKeyVals=(cov_16bc12fk7().s[113]++,(0,PsbtUtil_1.getPsbtInputProprietaryKeyVals)(input,{identifier:PsbtUtil_1.PSBT_PROPRIETARY_IDENTIFIER,subtype:PsbtUtil_1.ProprietaryKeySubtype.MUSIG2_PARTIAL_SIG}));cov_16bc12fk7().s[114]++;if(!sigKeyVals.length){cov_16bc12fk7().b[23][0]++;cov_16bc12fk7().s[115]++;return undefined;}else{cov_16bc12fk7().b[23][1]++;}cov_16bc12fk7().s[116]++;if(sigKeyVals.length>2){cov_16bc12fk7().b[24][0]++;cov_16bc12fk7().s[117]++;throw new Error(`Found ${sigKeyVals.length} matching partial signature key value instead of 1 or 2`);}else{cov_16bc12fk7().b[24][1]++;}cov_16bc12fk7().s[118]++;return sigKeyVals.map(kv=>{cov_16bc12fk7().f[24]++;cov_16bc12fk7().s[119]++;return decodePsbtMusig2PartialSig(kv);});}/**
 * Assert musig2 participant key value data with tapInternalKey and tapMerkleRoot.
 * <tapOutputKey><tapInputKey> => <participantKey1><participantKey2>
 * Using tapMerkleRoot and 2 participant keys, the tapInputKey is validated and using tapMerkleRoot and tapInputKey,
 * the tapOutputKey is validated.
 */function assertPsbtMusig2Participants(participantKeyValData,tapInternalKey,tapMerkleRoot){cov_16bc12fk7().f[25]++;cov_16bc12fk7().s[120]++;(0,outputScripts_1.checkXOnlyPublicKey)(tapInternalKey);cov_16bc12fk7().s[121]++;(0,outputScripts_1.checkTapMerkleRoot)(tapMerkleRoot);const participantPubKeys=(cov_16bc12fk7().s[122]++,participantKeyValData.participantPubKeys);const internalKey=(cov_16bc12fk7().s[123]++,createTapInternalKey(participantPubKeys));cov_16bc12fk7().s[124]++;if(!internalKey.equals(participantKeyValData.tapInternalKey)){cov_16bc12fk7().b[25][0]++;cov_16bc12fk7().s[125]++;throw new Error('Invalid participants keydata tapInternalKey');}else{cov_16bc12fk7().b[25][1]++;}const outputKey=(cov_16bc12fk7().s[126]++,createTapOutputKey(internalKey,tapMerkleRoot));cov_16bc12fk7().s[127]++;if(!outputKey.equals(participantKeyValData.tapOutputKey)){cov_16bc12fk7().b[26][0]++;cov_16bc12fk7().s[128]++;throw new Error('Invalid participants keydata tapOutputKey');}else{cov_16bc12fk7().b[26][1]++;}cov_16bc12fk7().s[129]++;if(!internalKey.equals(tapInternalKey)){cov_16bc12fk7().b[27][0]++;cov_16bc12fk7().s[130]++;throw new Error('tapInternalKey and aggregated participant pub keys does not match');}else{cov_16bc12fk7().b[27][1]++;}}/**
 * Assert musig2 public nonce key value data with participant key value data
 * (refer assertPsbtMusig2ParticipantsKeyValData).
 * <participantKey1><tapOutputKey> => <pubNonce1>
 * <participantKey2><tapOutputKey> => <pubNonce2>
 * Checks against participant keys and tapOutputKey
 */function assertPsbtMusig2Nonces(noncesKeyValData,participantKeyValData){cov_16bc12fk7().f[26]++;cov_16bc12fk7().s[131]++;(0,outputScripts_1.checkXOnlyPublicKey)(participantKeyValData.tapOutputKey);cov_16bc12fk7().s[132]++;participantKeyValData.participantPubKeys.forEach(kv=>{cov_16bc12fk7().f[27]++;cov_16bc12fk7().s[133]++;return(0,outputScripts_1.checkPlainPublicKey)(kv);});cov_16bc12fk7().s[134]++;if(participantKeyValData.participantPubKeys[0].equals(participantKeyValData.participantPubKeys[1])){cov_16bc12fk7().b[28][0]++;cov_16bc12fk7().s[135]++;throw new Error(`Duplicate participant pub keys found`);}else{cov_16bc12fk7().b[28][1]++;}cov_16bc12fk7().s[136]++;if(noncesKeyValData.length>2){cov_16bc12fk7().b[29][0]++;cov_16bc12fk7().s[137]++;throw new Error(`Invalid nonce key value count ${noncesKeyValData.length}`);}else{cov_16bc12fk7().b[29][1]++;}cov_16bc12fk7().s[138]++;noncesKeyValData.forEach(nonceKv=>{cov_16bc12fk7().f[28]++;const index=(cov_16bc12fk7().s[139]++,participantKeyValData.participantPubKeys.findIndex(pubKey=>{cov_16bc12fk7().f[29]++;cov_16bc12fk7().s[140]++;return nonceKv.participantPubKey.equals(pubKey);}));cov_16bc12fk7().s[141]++;if(index<0){cov_16bc12fk7().b[30][0]++;cov_16bc12fk7().s[142]++;throw new Error('Invalid nonce keydata participant pub key');}else{cov_16bc12fk7().b[30][1]++;}cov_16bc12fk7().s[143]++;if(!nonceKv.tapOutputKey.equals(participantKeyValData.tapOutputKey)){cov_16bc12fk7().b[31][0]++;cov_16bc12fk7().s[144]++;throw new Error('Invalid nonce keydata tapOutputKey');}else{cov_16bc12fk7().b[31][1]++;}});}/**
 * @returns Input object but sig hash type data is taken out from partialSig field.
 * If sig hash type is not common for all sigs, error out, otherwise returns the modified object and single hash type.
 */function getSigHashTypeFromSigs(partialSigs){cov_16bc12fk7().f[30]++;cov_16bc12fk7().s[145]++;if(!partialSigs.length){cov_16bc12fk7().b[32][0]++;cov_16bc12fk7().s[146]++;throw new Error('partialSigs array can not be empty');}else{cov_16bc12fk7().b[32][1]++;}const pSigsWithHashType=(cov_16bc12fk7().s[147]++,partialSigs.map(kv=>{cov_16bc12fk7().f[31]++;const{partialSig,participantPubKey,tapOutputKey}=(cov_16bc12fk7().s[148]++,kv);cov_16bc12fk7().s[149]++;return partialSig.length===33?(cov_16bc12fk7().b[33][0]++,{pSig:{partialSig:partialSig.slice(0,32),participantPubKey,tapOutputKey},sigHashType:partialSig[32]}):(cov_16bc12fk7().b[33][1]++,{pSig:{partialSig,participantPubKey,tapOutputKey},sigHashType:index_1.Transaction.SIGHASH_DEFAULT});}));const sigHashType=(cov_16bc12fk7().s[150]++,pSigsWithHashType[0].sigHashType);cov_16bc12fk7().s[151]++;if(!pSigsWithHashType.every(pSig=>{cov_16bc12fk7().f[32]++;cov_16bc12fk7().s[152]++;return pSig.sigHashType===sigHashType;})){cov_16bc12fk7().b[34][0]++;cov_16bc12fk7().s[153]++;throw new Error('signatures must use same sig hash type');}else{cov_16bc12fk7().b[34][1]++;}cov_16bc12fk7().s[154]++;return{partialSigs:pSigsWithHashType.map(({pSig})=>{cov_16bc12fk7().f[33]++;cov_16bc12fk7().s[155]++;return pSig;}),sigHashType};}function createMusig2DeterministicNonce(params){cov_16bc12fk7().f[34]++;cov_16bc12fk7().s[156]++;return Buffer.from(noble_ecc_1.musig.deterministicNonceGen({secretKey:params.privateKey,aggOtherNonce:noble_ecc_1.musig.nonceAgg([params.otherNonce]),publicKeys:params.publicKeys,tweaks:[{tweak:createTapTweak(params.internalPubKey,params.tapTreeRoot),xOnly:true}],msg:params.hash}).publicNonce);}function musig2DeterministicSign(params){cov_16bc12fk7().f[35]++;const{sig,sessionKey,publicNonce}=(cov_16bc12fk7().s[157]++,noble_ecc_1.musig.deterministicSign({secretKey:params.privateKey,aggOtherNonce:noble_ecc_1.musig.nonceAgg([params.otherNonce]),publicKeys:params.publicKeys,tweaks:[{tweak:createTapTweak(params.internalPubKey,params.tapTreeRoot),xOnly:true}],msg:params.hash}));cov_16bc12fk7().s[158]++;return{sig:Buffer.from(sig),sessionKey,publicNonce:Buffer.from(publicNonce)};}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vTXVzaWcyLnRzIiwic291cmNlcyI6WyIvVXNlcnMvcXJvYy9Db2RlL2hhcGkvY2hhaW5kZWZ1c2VyL3V0eG8tbGliL3NyYy9iaXRnby9NdXNpZzIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBNkdBLG9FQVNDO0FBT0QsNERBY0M7QUFFRCxnRUFjQztBQU1ELG9FQXVCQztBQU1ELHNEQWdCQztBQU1ELGdFQW1CQztBQUVELG9EQUVDO0FBRUQsZ0RBSUM7QUFFRCxvREFFQztBQUVELHdDQUVDO0FBV0QsOENBY0M7QUFFRCx3REFRQztBQUVELGtEQUVDO0FBR0QsZ0VBV0M7QUFNRCxrRUFlQztBQU1ELHNEQWVDO0FBTUQsZ0VBZUM7QUFRRCxvRUF1QkM7QUFTRCx3REEwQkM7QUFNRCx3REFvQkM7QUFFRCx3RUFVQztBQUVELDBEQWFDO0FBbGVELG1EQU15QjtBQUN6Qiw0Q0FBMEM7QUFFMUMsd0NBQStEO0FBQy9ELG9DQUF1QztBQUV2Qyx5Q0FLb0I7QUFzQ3BCOzs7R0FHRztBQUNILE1BQWEsZ0JBQWdCO0lBQTdCO1FBQ1UsV0FBTSxHQUFpQixFQUFFLENBQUM7SUF3Q3BDLENBQUM7SUF0Q0M7OztPQUdHO0lBQ0gsTUFBTSxDQUFDLEtBQWlCO1FBQ3RCLEtBQUssTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQzVCLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQkFDakMsT0FBTyxDQUFDLENBQUM7WUFDWCxDQUFDO1FBQ0gsQ0FBQztRQUNELE1BQU0sSUFBSSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVEOzs7Ozs7Ozs7O09BVUc7SUFDSCxpQkFBaUIsQ0FDZixVQUFzQixFQUN0QixTQUFxQixFQUNyQixjQUEwQixF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UUFDM0YsR0FBRyxFQUFFLE1BQU0sQ0FBQyxJQUFJO0tBQ2pCLENBQUMsQ0FBQztJQUNILE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQztBQUN0RixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2Vzc2lvbktleSB9IGZyb20gJ0BicmFuZG9uYmxhY2svbXVzaWcnO1xuXG5pbXBvcnQge1xuICBjaGVja1BsYWluUHVibGljS2V5LFxuICBjaGVja1RhcE1lcmtsZVJvb3QsXG4gIGNoZWNrVHhIYXNoLFxuICBjaGVja1hPbmx5UHVibGljS2V5LFxuICB0b1hPbmx5UHVibGljS2V5LFxufSBmcm9tICcuL291dHB1dFNjcmlwdHMnO1xuaW1wb3J0IHsgZWNjLCBtdXNpZyB9IGZyb20gJy4uL25vYmxlX2VjYyc7XG5pbXBvcnQgeyBUdXBsZSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgY2FsY3VsYXRlVGFwVHdlYWssIHRhcFR3ZWFrUHVia2V5IH0gZnJvbSAnLi4vdGFwcm9vdCc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbiB9IGZyb20gJy4uL2luZGV4JztcbmltcG9ydCB7IFBzYnRJbnB1dCB9IGZyb20gJ2JpcDE3NC9zcmMvbGliL2ludGVyZmFjZXMnO1xuaW1wb3J0IHtcbiAgZ2V0UHNidElucHV0UHJvcHJpZXRhcnlLZXlWYWxzLFxuICBQcm9wcmlldGFyeUtleVN1YnR5cGUsXG4gIFByb3ByaWV0YXJ5S2V5VmFsdWUsXG4gIFBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUixcbn0gZnJvbSAnLi9Qc2J0VXRpbCc7XG5cbi8qKlxuICogIFBhcnRpY2lwYW50IGtleSB2YWx1ZSBvYmplY3QuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHNidE11c2lnMlBhcnRpY2lwYW50cyB7XG4gIHRhcE91dHB1dEtleTogQnVmZmVyO1xuICB0YXBJbnRlcm5hbEtleTogQnVmZmVyO1xuICBwYXJ0aWNpcGFudFB1YktleXM6IFR1cGxlPEJ1ZmZlcj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHNidE11c2lnMkRldGVybWluaXN0aWNQYXJhbXMge1xuICBwcml2YXRlS2V5OiBCdWZmZXI7XG4gIG90aGVyTm9uY2U6IEJ1ZmZlcjtcbiAgcHVibGljS2V5czogVHVwbGU8QnVmZmVyPjtcbiAgaW50ZXJuYWxQdWJLZXk6IEJ1ZmZlcjtcbiAgdGFwVHJlZVJvb3Q6IEJ1ZmZlcjtcbiAgaGFzaDogQnVmZmVyO1xufVxuXG4vKipcbiAqICBOb25jZSBrZXkgdmFsdWUgb2JqZWN0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBzYnRNdXNpZzJQdWJOb25jZSB7XG4gIHBhcnRpY2lwYW50UHViS2V5OiBCdWZmZXI7XG4gIHRhcE91dHB1dEtleTogQnVmZmVyO1xuICBwdWJOb25jZTogQnVmZmVyO1xufVxuXG4vKipcbiAqICBQYXJ0aWFsIHNpZ25hdHVyZSBrZXkgdmFsdWUgb2JqZWN0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBzYnRNdXNpZzJQYXJ0aWFsU2lnIHtcbiAgcGFydGljaXBhbnRQdWJLZXk6IEJ1ZmZlcjtcbiAgdGFwT3V0cHV0S2V5OiBCdWZmZXI7XG4gIHBhcnRpYWxTaWc6IEJ1ZmZlcjtcbn1cblxuLyoqXG4gKiBCZWNhdXNlIG11c2lnIHVzZXMgcmVmZXJlbmNlLWVxdWFsIGJ1ZmZlcnMgdG8gY2FjaGUgbm9uY2VzLCB3ZSB3cmFwIGl0IGhlcmUgdG8gYWxsb3cgdXNpbmdcbiAqIG5vbmNlcyB0aGF0IGFyZSBieXRlLWVxdWFsIGJ1dCBub3QgcmVmZXJlbmNlLWVxdWFsLlxuICovXG5leHBvcnQgY2xhc3MgTXVzaWcyTm9uY2VTdG9yZSB7XG4gIHByaXZhdGUgbm9uY2VzOiBVaW50OEFycmF5W10gPSBbXTtcblxuICAvKipcbiAgICogR2V0IG9yaWdpbmFsIEJ1ZmZlciBpbnN0YW5jZSBmb3Igbm9uY2UgKHdoaWNoIG1heSBiZSBhIGNvcHkpLlxuICAgKiBAcmV0dXJuIGJ5dGUtZXF1YWwgYnVmZmVyIHRoYXQgaXMgcmVmZXJlbmNlLWVxdWFsIHRvIHdoYXQgd2FzIHN0b3JlZCBlYXJsaWVyIGluIGNyZWF0ZU11c2lnMk5vbmNlXG4gICAqL1xuICBnZXRSZWYobm9uY2U6IFVpbnQ4QXJyYXkpOiBVaW50OEFycmF5IHtcbiAgICBmb3IgKGNvbnN0IGIgb2YgdGhpcy5ub25jZXMpIHtcbiAgICAgIGlmIChCdWZmZXIuZnJvbShiKS5lcXVhbHMobm9uY2UpKSB7XG4gICAgICAgIHJldHVybiBiO1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gbm9uY2VgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG11c2lnMiBub25jZSBhbmQgc3RvcmVzIGJ1ZmZlciByZWZlcmVuY2UuXG4gICAqIHRhcEludGVybmFsa2V5LCB0YXBNZXJrbGVSb290LCB0YXBCaXAzMkRlcml2YXRpb24gZm9yIHJvb3RXYWxsZXRLZXkgYXJlIHJlcXVpcmVkIHBlciBwMnRyTXVzaWcyIGtleSBwYXRoIGlucHV0LlxuICAgKiBBbHNvIHBhcnRpY2lwYW50IGtleXMgYXJlIHJlcXVpcmVkIGZyb20gcHNidCBwcm9wcmlldGFyeSBrZXkgdmFsdWVzLlxuICAgKiBSZWY6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3NhbmtldDE3MjkvNGI1MjVjNjA0OWY0ZDllMDM0ZDI3MzY4YzQ5ZjI4YTZcbiAgICogQHBhcmFtIHByaXZhdGVLZXkgLSBzaWduZXIgcHJpdmF0ZSBrZXlcbiAgICogQHBhcmFtIHB1YmxpY0tleSAtIHNpZ25lciB4eSBwdWJsaWMga2V5XG4gICAqIEBwYXJhbSB4T25seVB1YmxpY0tleSAtIHR3ZWFrZWQgYWdncmVnYXRlZCBrZXkgKHRhcE91dHB1dEtleSlcbiAgICogQHBhcmFtIHNlc3Npb25JZCBBZGRpdGlvbmFsIGVudHJvcHkuIElmIHByb3ZpZGVkIGl0IG11c3QgZWl0aGVyIGJlIGEgY291bnRlciB1bmlxdWUgdG8gdGhpcyBzZWNyZXQga2V5LFxuICAgKiAoY29udmVydGVkIHRvIGFuIGFycmF5IG9mIDMyIGJ5dGVzKSwgb3IgMzIgdW5pZm9ybWx5IHJhbmRvbSBieXRlcy5cbiAgICovXG4gIGNyZWF0ZU11c2lnMk5vbmNlKFxuICAgIHByaXZhdGVLZXk6IFVpbnQ4QXJyYXksXG4gICAgcHVibGljS2V5OiBVaW50OEFycmF5LFxuICAgIHhPbmx5UHVibGljS2V5OiBVaW50OEFycmF5LFxuICAgIHR4SGFzaDogVWludDhBcnJheSxcbiAgICBzZXNzaW9uSWQ/OiBCdWZmZXJcbiAgKTogVWludDhBcnJheSB7XG4gICAgaWYgKHR4SGFzaC5sZW5ndGggIT0gMzIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0eEhhc2ggc2l6ZSAke3R4SGFzaH1gKTtcbiAgICB9XG4gICAgY29uc3QgYnVmID0gbXVzaWcubm9uY2VHZW4oeyBzZWNyZXRLZXk6IHByaXZhdGVLZXksIHB1YmxpY0tleSwgeE9ubHlQdWJsaWNLZXksIG1zZzogdHhIYXNoLCBzZXNzaW9uSWQgfSk7XG4gICAgdGhpcy5ub25jZXMucHVzaChidWYpO1xuICAgIHJldHVybiBidWY7XG4gIH1cbn1cblxuLyoqXG4gKiBQc2J0IHByb3ByaWV0YXJ5IGtleSB2YWwgdXRpbCBmdW5jdGlvbiBmb3IgcGFydGljaXBhbnRzIHB1YiBrZXlzLiBTdWJUeXBlIGlzIDB4MDFcbiAqIFJlZjogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vc2Fua2V0MTcyOS80YjUyNWM2MDQ5ZjRkOWUwMzRkMjczNjhjNDlmMjhhNlxuICogQHJldHVybiB4LW9ubHkgdGFwT3V0cHV0S2V5fHx0YXBJbnRlcm5hbEtleSBhcyBzdWIga2V5ZGF0YSwgcGxhaW4gc2lnaW5pbmcgcGFydGljaXBhbnQga2V5cyBhcyB2YWx1ZWRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVBzYnRNdXNpZzJQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzOiBQc2J0TXVzaWcyUGFydGljaXBhbnRzKTogUHJvcHJpZXRhcnlLZXlWYWx1ZSB7XG4gIGNvbnN0IGtleWRhdGEgPSBbcGFydGljaXBhbnRzLnRhcE91dHB1dEtleSwgcGFydGljaXBhbnRzLnRhcEludGVybmFsS2V5XS5tYXAoKHB1YmtleSkgPT4gY2hlY2tYT25seVB1YmxpY0tleShwdWJrZXkpKTtcbiAgY29uc3QgdmFsdWUgPSBwYXJ0aWNpcGFudHMucGFydGljaXBhbnRQdWJLZXlzLm1hcCgocHVia2V5KSA9PiBjaGVja1BsYWluUHVibGljS2V5KHB1YmtleSkpO1xuICBjb25zdCBrZXkgPSB7XG4gICAgaWRlbnRpZmllcjogUFNCVF9QUk9QUklFVEFSWV9JREVOVElGSUVSLFxuICAgIHN1YnR5cGU6IFByb3ByaWV0YXJ5S2V5U3VidHlwZS5NVVNJRzJfUEFSVElDSVBBTlRfUFVCX0tFWVMsXG4gICAga2V5ZGF0YTogQnVmZmVyLmNvbmNhdChrZXlkYXRhKSxcbiAgfTtcbiAgcmV0dXJuIHsga2V5LCB2YWx1ZTogQnVmZmVyLmNvbmNhdCh2YWx1ZSkgfTtcbn1cblxuLyoqXG4gKiBQc2J0IHByb3ByaWV0YXJ5IGtleSB2YWwgdXRpbCBmdW5jdGlvbiBmb3IgcHViIG5vbmNlLiBTdWJUeXBlIGlzIDB4MDJcbiAqIFJlZjogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vc2Fua2V0MTcyOS80YjUyNWM2MDQ5ZjRkOWUwMzRkMjczNjhjNDlmMjhhNlxuICogQHJldHVybiBwbGFpbi1wYXJ0aWNpcGFudFB1YktleXx8eC1vbmx5LXRhcE91dHB1dEtleSBhcyBzdWIga2V5ZGF0YSwgNjYgYnl0ZXMgb2YgMiBwdWIgbm9uY2VzIGFzIHZhbHVlZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlUHNidE11c2lnMlB1Yk5vbmNlKG5vbmNlOiBQc2J0TXVzaWcyUHViTm9uY2UpOiBQcm9wcmlldGFyeUtleVZhbHVlIHtcbiAgaWYgKG5vbmNlLnB1Yk5vbmNlLmxlbmd0aCAhPT0gNjYpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcHViTm9uY2VzIGxlbmd0aCAke25vbmNlLnB1Yk5vbmNlLmxlbmd0aH1gKTtcbiAgfVxuICBjb25zdCBrZXlkYXRhID0gQnVmZmVyLmNvbmNhdChbXG4gICAgY2hlY2tQbGFpblB1YmxpY0tleShub25jZS5wYXJ0aWNpcGFudFB1YktleSksXG4gICAgY2hlY2tYT25seVB1YmxpY0tleShub25jZS50YXBPdXRwdXRLZXkpLFxuICBdKTtcbiAgY29uc3Qga2V5ID0ge1xuICAgIGlkZW50aWZpZXI6IFBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUixcbiAgICBzdWJ0eXBlOiBQcm9wcmlldGFyeUtleVN1YnR5cGUuTVVTSUcyX1BVQl9OT05DRSxcbiAgICBrZXlkYXRhLFxuICB9O1xuICByZXR1cm4geyBrZXksIHZhbHVlOiBub25jZS5wdWJOb25jZSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlUHNidE11c2lnMlBhcnRpYWxTaWcocGFydGlhbFNpZzogUHNidE11c2lnMlBhcnRpYWxTaWcpOiBQcm9wcmlldGFyeUtleVZhbHVlIHtcbiAgaWYgKHBhcnRpYWxTaWcucGFydGlhbFNpZy5sZW5ndGggIT09IDMyICYmIHBhcnRpYWxTaWcucGFydGlhbFNpZy5sZW5ndGggIT09IDMzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBhcnRpYWxTaWcgbGVuZ3RoICR7cGFydGlhbFNpZy5wYXJ0aWFsU2lnLmxlbmd0aH1gKTtcbiAgfVxuICBjb25zdCBrZXlkYXRhID0gQnVmZmVyLmNvbmNhdChbXG4gICAgY2hlY2tQbGFpblB1YmxpY0tleShwYXJ0aWFsU2lnLnBhcnRpY2lwYW50UHViS2V5KSxcbiAgICBjaGVja1hPbmx5UHVibGljS2V5KHBhcnRpYWxTaWcudGFwT3V0cHV0S2V5KSxcbiAgXSk7XG4gIGNvbnN0IGtleSA9IHtcbiAgICBpZGVudGlmaWVyOiBQU0JUX1BST1BSSUVUQVJZX0lERU5USUZJRVIsXG4gICAgc3VidHlwZTogUHJvcHJpZXRhcnlLZXlTdWJ0eXBlLk1VU0lHMl9QQVJUSUFMX1NJRyxcbiAgICBrZXlkYXRhLFxuICB9O1xuICByZXR1cm4geyBrZXksIHZhbHVlOiBwYXJ0aWFsU2lnLnBhcnRpYWxTaWcgfTtcbn1cblxuLyoqXG4gKiBEZWNvZGVzIHByb3ByaWV0YXJ5IGtleSB2YWx1ZSBkYXRhIGZvciBwYXJ0aWNpcGFudCBwdWIga2V5c1xuICogQHBhcmFtIGt2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVQc2J0TXVzaWcyUGFydGljaXBhbnRzKGt2OiBQcm9wcmlldGFyeUtleVZhbHVlKTogUHNidE11c2lnMlBhcnRpY2lwYW50cyB7XG4gIGlmIChcbiAgICBrdi5rZXkuaWRlbnRpZmllciAhPT0gUFNCVF9QUk9QUklFVEFSWV9JREVOVElGSUVSIHx8XG4gICAga3Yua2V5LnN1YnR5cGUgIT09IFByb3ByaWV0YXJ5S2V5U3VidHlwZS5NVVNJRzJfUEFSVElDSVBBTlRfUFVCX0tFWVNcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGlkZW50aWZpZXIgJHtrdi5rZXkuaWRlbnRpZmllcn0gb3Igc3VidHlwZSAke2t2LmtleS5zdWJ0eXBlfSBmb3IgcGFydGljaXBhbnRzIHB1YiBrZXlzYCk7XG4gIH1cblxuICBjb25zdCBrZXkgPSBrdi5rZXkua2V5ZGF0YTtcbiAgaWYgKGtleS5sZW5ndGggIT09IDY0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGtleWRhdGEgc2l6ZSAke2tleS5sZW5ndGh9IGZvciBwYXJ0aWNpcGFudCBwdWIga2V5c2ApO1xuICB9XG5cbiAgY29uc3QgdmFsdWUgPSBrdi52YWx1ZTtcbiAgaWYgKHZhbHVlLmxlbmd0aCAhPT0gNjYpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdmFsdWVkYXRhIHNpemUgJHt2YWx1ZS5sZW5ndGh9IGZvciBwYXJ0aWNpcGFudCBwdWIga2V5c2ApO1xuICB9XG4gIGNvbnN0IHBhcnRpY2lwYW50UHViS2V5czogVHVwbGU8QnVmZmVyPiA9IFt2YWx1ZS5zdWJhcnJheSgwLCAzMyksIHZhbHVlLnN1YmFycmF5KDMzKV07XG4gIGlmIChwYXJ0aWNpcGFudFB1YktleXNbMF0uZXF1YWxzKHBhcnRpY2lwYW50UHViS2V5c1sxXSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYER1cGxpY2F0ZSBwYXJ0aWNpcGFudCBwdWIga2V5cyBmb3VuZGApO1xuICB9XG5cbiAgcmV0dXJuIHsgdGFwT3V0cHV0S2V5OiBrZXkuc3ViYXJyYXkoMCwgMzIpLCB0YXBJbnRlcm5hbEtleToga2V5LnN1YmFycmF5KDMyKSwgcGFydGljaXBhbnRQdWJLZXlzIH07XG59XG5cbi8qKlxuICogRGVjb2RlcyBwcm9wcmlldGFyeSBrZXkgdmFsdWUgZGF0YSBmb3IgbXVzaWcyIG5vbmNlXG4gKiBAcGFyYW0ga3ZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZVBzYnRNdXNpZzJOb25jZShrdjogUHJvcHJpZXRhcnlLZXlWYWx1ZSk6IFBzYnRNdXNpZzJQdWJOb25jZSB7XG4gIGlmIChrdi5rZXkuaWRlbnRpZmllciAhPT0gUFNCVF9QUk9QUklFVEFSWV9JREVOVElGSUVSIHx8IGt2LmtleS5zdWJ0eXBlICE9PSBQcm9wcmlldGFyeUtleVN1YnR5cGUuTVVTSUcyX1BVQl9OT05DRSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpZGVudGlmaWVyICR7a3Yua2V5LmlkZW50aWZpZXJ9IG9yIHN1YnR5cGUgJHtrdi5rZXkuc3VidHlwZX0gZm9yIG5vbmNlYCk7XG4gIH1cblxuICBjb25zdCBrZXkgPSBrdi5rZXkua2V5ZGF0YTtcbiAgaWYgKGtleS5sZW5ndGggIT09IDY1KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGtleWRhdGEgc2l6ZSAke2tleS5sZW5ndGh9IGZvciBub25jZWApO1xuICB9XG5cbiAgY29uc3QgdmFsdWUgPSBrdi52YWx1ZTtcbiAgaWYgKHZhbHVlLmxlbmd0aCAhPT0gNjYpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdmFsdWVkYXRhIHNpemUgJHt2YWx1ZS5sZW5ndGh9IGZvciBub25jZWApO1xuICB9XG5cbiAgcmV0dXJuIHsgcGFydGljaXBhbnRQdWJLZXk6IGtleS5zdWJhcnJheSgwLCAzMyksIHRhcE91dHB1dEtleToga2V5LnN1YmFycmF5KDMzKSwgcHViTm9uY2U6IHZhbHVlIH07XG59XG5cbi8qKlxuICogRGVjb2RlcyBwcm9wcmlldGFyeSBrZXkgdmFsdWUgZGF0YSBmb3IgbXVzaWcyIHBhcnRpYWwgc2lnXG4gKiBAcGFyYW0ga3ZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZVBzYnRNdXNpZzJQYXJ0aWFsU2lnKGt2OiBQcm9wcmlldGFyeUtleVZhbHVlKTogUHNidE11c2lnMlBhcnRpYWxTaWcge1xuICBpZiAoXG4gICAga3Yua2V5LmlkZW50aWZpZXIgIT09IFBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUiB8fFxuICAgIGt2LmtleS5zdWJ0eXBlICE9PSBQcm9wcmlldGFyeUtleVN1YnR5cGUuTVVTSUcyX1BBUlRJQUxfU0lHXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpZGVudGlmaWVyICR7a3Yua2V5LmlkZW50aWZpZXJ9IG9yIHN1YnR5cGUgJHtrdi5rZXkuc3VidHlwZX0gZm9yIHBhcnRpYWwgc2lnYCk7XG4gIH1cblxuICBjb25zdCBrZXkgPSBrdi5rZXkua2V5ZGF0YTtcbiAgaWYgKGtleS5sZW5ndGggIT09IDY1KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGtleWRhdGEgc2l6ZSAke2tleS5sZW5ndGh9IGZvciBwYXJ0aWFsIHNpZ2ApO1xuICB9XG5cbiAgY29uc3QgdmFsdWUgPSBrdi52YWx1ZTtcbiAgaWYgKHZhbHVlLmxlbmd0aCAhPT0gMzIgJiYgdmFsdWUubGVuZ3RoICE9PSAzMykge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB2YWx1ZWRhdGEgc2l6ZSAke3ZhbHVlLmxlbmd0aH0gZm9yIHBhcnRpYWwgc2lnYCk7XG4gIH1cblxuICByZXR1cm4geyBwYXJ0aWNpcGFudFB1YktleToga2V5LnN1YmFycmF5KDAsIDMzKSwgdGFwT3V0cHV0S2V5OiBrZXkuc3ViYXJyYXkoMzMpLCBwYXJ0aWFsU2lnOiB2YWx1ZSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFwSW50ZXJuYWxLZXkocGxhaW5QdWJLZXlzOiBCdWZmZXJbXSk6IEJ1ZmZlciB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShtdXNpZy5nZXRYT25seVB1YmtleShtdXNpZy5rZXlBZ2cocGxhaW5QdWJLZXlzKSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFwT3V0cHV0S2V5KGludGVybmFsUHViS2V5OiBCdWZmZXIsIHRhcFRyZWVSb290OiBCdWZmZXIpOiBCdWZmZXIge1xuICByZXR1cm4gQnVmZmVyLmZyb20oXG4gICAgdGFwVHdlYWtQdWJrZXkoZWNjLCB0b1hPbmx5UHVibGljS2V5KGludGVybmFsUHViS2V5KSwgY2hlY2tUYXBNZXJrbGVSb290KHRhcFRyZWVSb290KSkueE9ubHlQdWJrZXlcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFnZ3JlZ2F0ZU5vbmNlKHB1Yk5vbmNlczogVHVwbGU8QnVmZmVyPik6IEJ1ZmZlciB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShtdXNpZy5ub25jZUFnZyhwdWJOb25jZXMpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhcFR3ZWFrKHRhcEludGVybmFsS2V5OiBCdWZmZXIsIHRhcE1lcmtsZVJvb3Q6IEJ1ZmZlcik6IEJ1ZmZlciB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShjYWxjdWxhdGVUYXBUd2VhayhjaGVja1hPbmx5UHVibGljS2V5KHRhcEludGVybmFsS2V5KSwgY2hlY2tUYXBNZXJrbGVSb290KHRhcE1lcmtsZVJvb3QpKSk7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0TXVzaWcyU2lnbmluZ1Nlc3Npb24oXG4gIGFnZ05vbmNlOiBCdWZmZXIsXG4gIGhhc2g6IEJ1ZmZlcixcbiAgcHVibGljS2V5czogVHVwbGU8QnVmZmVyPixcbiAgdHdlYWs6IEJ1ZmZlclxuKTogU2Vzc2lvbktleSB7XG4gIHJldHVybiBtdXNpZy5zdGFydFNpZ25pbmdTZXNzaW9uKGFnZ05vbmNlLCBoYXNoLCBwdWJsaWNLZXlzLCB7IHR3ZWFrLCB4T25seTogdHJ1ZSB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG11c2lnMlBhcnRpYWxTaWduKFxuICBwcml2YXRlS2V5OiBCdWZmZXIsXG4gIHB1YmxpY05vbmNlOiBVaW50OEFycmF5LFxuICBzZXNzaW9uS2V5OiBTZXNzaW9uS2V5LFxuICBub25jZVN0b3JlOiBNdXNpZzJOb25jZVN0b3JlXG4pOiBCdWZmZXIge1xuICBjaGVja1R4SGFzaChCdWZmZXIuZnJvbShzZXNzaW9uS2V5Lm1zZykpO1xuICByZXR1cm4gQnVmZmVyLmZyb20oXG4gICAgbXVzaWcucGFydGlhbFNpZ24oe1xuICAgICAgc2VjcmV0S2V5OiBwcml2YXRlS2V5LFxuICAgICAgcHVibGljTm9uY2U6IG5vbmNlU3RvcmUuZ2V0UmVmKHB1YmxpY05vbmNlKSxcbiAgICAgIHNlc3Npb25LZXksXG4gICAgfSlcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG11c2lnMlBhcnRpYWxTaWdWZXJpZnkoXG4gIHNpZzogQnVmZmVyLFxuICBwdWJsaWNLZXk6IEJ1ZmZlcixcbiAgcHVibGljTm9uY2U6IEJ1ZmZlcixcbiAgc2Vzc2lvbktleTogU2Vzc2lvbktleVxuKTogYm9vbGVhbiB7XG4gIGNoZWNrVHhIYXNoKEJ1ZmZlci5mcm9tKHNlc3Npb25LZXkubXNnKSk7XG4gIHJldHVybiBtdXNpZy5wYXJ0aWFsVmVyaWZ5KHsgc2lnLCBwdWJsaWNLZXksIHB1YmxpY05vbmNlLCBzZXNzaW9uS2V5IH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbXVzaWcyQWdncmVnYXRlU2lncyhzaWdzOiBCdWZmZXJbXSwgc2Vzc2lvbktleTogU2Vzc2lvbktleSk6IEJ1ZmZlciB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShtdXNpZy5zaWduQWdnKHNpZ3MsIHNlc3Npb25LZXkpKTtcbn1cblxuLyoqIEByZXR1cm4gc2Vzc2lvbiBrZXkgdGhhdCBjYW4gYmUgdXNlZCB0byByZWZlcmVuY2UgdGhlIHNlc3Npb24gbGF0ZXIgKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNdXNpZzJTaWduaW5nU2Vzc2lvbihzZXNzaW9uQXJnczoge1xuICBwdWJOb25jZXM6IFR1cGxlPEJ1ZmZlcj47XG4gIHR4SGFzaDogQnVmZmVyO1xuICBwdWJLZXlzOiBUdXBsZTxCdWZmZXI+O1xuICBpbnRlcm5hbFB1YktleTogQnVmZmVyO1xuICB0YXBUcmVlUm9vdDogQnVmZmVyO1xufSk6IFNlc3Npb25LZXkge1xuICBjaGVja1R4SGFzaChzZXNzaW9uQXJncy50eEhhc2gpO1xuICBjb25zdCBhZ2dOb25jZSA9IGNyZWF0ZUFnZ3JlZ2F0ZU5vbmNlKHNlc3Npb25BcmdzLnB1Yk5vbmNlcyk7XG4gIGNvbnN0IHR3ZWFrID0gY3JlYXRlVGFwVHdlYWsoc2Vzc2lvbkFyZ3MuaW50ZXJuYWxQdWJLZXksIHNlc3Npb25BcmdzLnRhcFRyZWVSb290KTtcbiAgcmV0dXJuIHN0YXJ0TXVzaWcyU2lnbmluZ1Nlc3Npb24oYWdnTm9uY2UsIHNlc3Npb25BcmdzLnR4SGFzaCwgc2Vzc2lvbkFyZ3MucHViS2V5cywgdHdlYWspO1xufVxuXG4vKipcbiAqIEByZXR1cm5zIHBzYnQgcHJvcHJpZXRhcnkga2V5IGZvciBtdXNpZzIgcGFydGljaXBhbnQga2V5IHZhbHVlIGRhdGFcbiAqIElmIG5vIGtleSB2YWx1ZSBleGlzdHMsIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHNidE11c2lnMlBhcnRpY2lwYW50cyhpbnB1dDogUHNidElucHV0KTogUHNidE11c2lnMlBhcnRpY2lwYW50cyB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHBhcnRpY2lwYW50c0tleVZhbHMgPSBnZXRQc2J0SW5wdXRQcm9wcmlldGFyeUtleVZhbHMoaW5wdXQsIHtcbiAgICBpZGVudGlmaWVyOiBQU0JUX1BST1BSSUVUQVJZX0lERU5USUZJRVIsXG4gICAgc3VidHlwZTogUHJvcHJpZXRhcnlLZXlTdWJ0eXBlLk1VU0lHMl9QQVJUSUNJUEFOVF9QVUJfS0VZUyxcbiAgfSk7XG5cbiAgaWYgKCFwYXJ0aWNpcGFudHNLZXlWYWxzLmxlbmd0aCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAocGFydGljaXBhbnRzS2V5VmFscy5sZW5ndGggPiAxKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGb3VuZCAke3BhcnRpY2lwYW50c0tleVZhbHMubGVuZ3RofSBtYXRjaGluZyBwYXJ0aWNpcGFudCBrZXkgdmFsdWUgaW5zdGVhZCBvZiAxYCk7XG4gIH1cblxuICByZXR1cm4gZGVjb2RlUHNidE11c2lnMlBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHNLZXlWYWxzWzBdKTtcbn1cblxuLyoqXG4gKiBAcmV0dXJucyBwc2J0IHByb3ByaWV0YXJ5IGtleSBmb3IgbXVzaWcyIHB1YmxpYyBub25jZSBrZXkgdmFsdWUgZGF0YVxuICogSWYgbm8ga2V5IHZhbHVlIGV4aXN0cywgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQc2J0TXVzaWcyTm9uY2VzKGlucHV0OiBQc2J0SW5wdXQpOiBQc2J0TXVzaWcyUHViTm9uY2VbXSB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IG5vbmNlS2V5VmFscyA9IGdldFBzYnRJbnB1dFByb3ByaWV0YXJ5S2V5VmFscyhpbnB1dCwge1xuICAgIGlkZW50aWZpZXI6IFBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUixcbiAgICBzdWJ0eXBlOiBQcm9wcmlldGFyeUtleVN1YnR5cGUuTVVTSUcyX1BVQl9OT05DRSxcbiAgfSk7XG5cbiAgaWYgKCFub25jZUtleVZhbHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmIChub25jZUtleVZhbHMubGVuZ3RoID4gMikge1xuICAgIHRocm93IG5ldyBFcnJvcihgRm91bmQgJHtub25jZUtleVZhbHMubGVuZ3RofSBtYXRjaGluZyBub25jZSBrZXkgdmFsdWUgaW5zdGVhZCBvZiAxIG9yIDJgKTtcbiAgfVxuXG4gIHJldHVybiBub25jZUtleVZhbHMubWFwKChrdikgPT4gZGVjb2RlUHNidE11c2lnMk5vbmNlKGt2KSk7XG59XG5cbi8qKlxuICogQHJldHVybnMgcHNidCBwcm9wcmlldGFyeSBrZXkgZm9yIG11c2lnMiBwYXJ0aWFsIHNpZyBrZXkgdmFsdWUgZGF0YVxuICogSWYgbm8ga2V5IHZhbHVlIGV4aXN0cywgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQc2J0TXVzaWcyUGFydGlhbFNpZ3MoaW5wdXQ6IFBzYnRJbnB1dCk6IFBzYnRNdXNpZzJQYXJ0aWFsU2lnW10gfCB1bmRlZmluZWQge1xuICBjb25zdCBzaWdLZXlWYWxzID0gZ2V0UHNidElucHV0UHJvcHJpZXRhcnlLZXlWYWxzKGlucHV0LCB7XG4gICAgaWRlbnRpZmllcjogUFNCVF9QUk9QUklFVEFSWV9JREVOVElGSUVSLFxuICAgIHN1YnR5cGU6IFByb3ByaWV0YXJ5S2V5U3VidHlwZS5NVVNJRzJfUEFSVElBTF9TSUcsXG4gIH0pO1xuXG4gIGlmICghc2lnS2V5VmFscy5sZW5ndGgpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHNpZ0tleVZhbHMubGVuZ3RoID4gMikge1xuICAgIHRocm93IG5ldyBFcnJvcihgRm91bmQgJHtzaWdLZXlWYWxzLmxlbmd0aH0gbWF0Y2hpbmcgcGFydGlhbCBzaWduYXR1cmUga2V5IHZhbHVlIGluc3RlYWQgb2YgMSBvciAyYCk7XG4gIH1cblxuICByZXR1cm4gc2lnS2V5VmFscy5tYXAoKGt2KSA9PiBkZWNvZGVQc2J0TXVzaWcyUGFydGlhbFNpZyhrdikpO1xufVxuXG4vKipcbiAqIEFzc2VydCBtdXNpZzIgcGFydGljaXBhbnQga2V5IHZhbHVlIGRhdGEgd2l0aCB0YXBJbnRlcm5hbEtleSBhbmQgdGFwTWVya2xlUm9vdC5cbiAqIDx0YXBPdXRwdXRLZXk+PHRhcElucHV0S2V5PiA9PiA8cGFydGljaXBhbnRLZXkxPjxwYXJ0aWNpcGFudEtleTI+XG4gKiBVc2luZyB0YXBNZXJrbGVSb290IGFuZCAyIHBhcnRpY2lwYW50IGtleXMsIHRoZSB0YXBJbnB1dEtleSBpcyB2YWxpZGF0ZWQgYW5kIHVzaW5nIHRhcE1lcmtsZVJvb3QgYW5kIHRhcElucHV0S2V5LFxuICogdGhlIHRhcE91dHB1dEtleSBpcyB2YWxpZGF0ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRQc2J0TXVzaWcyUGFydGljaXBhbnRzKFxuICBwYXJ0aWNpcGFudEtleVZhbERhdGE6IFBzYnRNdXNpZzJQYXJ0aWNpcGFudHMsXG4gIHRhcEludGVybmFsS2V5OiBCdWZmZXIsXG4gIHRhcE1lcmtsZVJvb3Q6IEJ1ZmZlclxuKTogdm9pZCB7XG4gIGNoZWNrWE9ubHlQdWJsaWNLZXkodGFwSW50ZXJuYWxLZXkpO1xuICBjaGVja1RhcE1lcmtsZVJvb3QodGFwTWVya2xlUm9vdCk7XG5cbiAgY29uc3QgcGFydGljaXBhbnRQdWJLZXlzID0gcGFydGljaXBhbnRLZXlWYWxEYXRhLnBhcnRpY2lwYW50UHViS2V5cztcblxuICBjb25zdCBpbnRlcm5hbEtleSA9IGNyZWF0ZVRhcEludGVybmFsS2V5KHBhcnRpY2lwYW50UHViS2V5cyk7XG4gIGlmICghaW50ZXJuYWxLZXkuZXF1YWxzKHBhcnRpY2lwYW50S2V5VmFsRGF0YS50YXBJbnRlcm5hbEtleSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGFydGljaXBhbnRzIGtleWRhdGEgdGFwSW50ZXJuYWxLZXknKTtcbiAgfVxuXG4gIGNvbnN0IG91dHB1dEtleSA9IGNyZWF0ZVRhcE91dHB1dEtleShpbnRlcm5hbEtleSwgdGFwTWVya2xlUm9vdCk7XG4gIGlmICghb3V0cHV0S2V5LmVxdWFscyhwYXJ0aWNpcGFudEtleVZhbERhdGEudGFwT3V0cHV0S2V5KSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwYXJ0aWNpcGFudHMga2V5ZGF0YSB0YXBPdXRwdXRLZXknKTtcbiAgfVxuXG4gIGlmICghaW50ZXJuYWxLZXkuZXF1YWxzKHRhcEludGVybmFsS2V5KSkge1xuICAgIHRocm93IG5ldyBFcnJvcigndGFwSW50ZXJuYWxLZXkgYW5kIGFnZ3JlZ2F0ZWQgcGFydGljaXBhbnQgcHViIGtleXMgZG9lcyBub3QgbWF0Y2gnKTtcbiAgfVxufVxuXG4vKipcbiAqIEFzc2VydCBtdXNpZzIgcHVibGljIG5vbmNlIGtleSB2YWx1ZSBkYXRhIHdpdGggcGFydGljaXBhbnQga2V5IHZhbHVlIGRhdGFcbiAqIChyZWZlciBhc3NlcnRQc2J0TXVzaWcyUGFydGljaXBhbnRzS2V5VmFsRGF0YSkuXG4gKiA8cGFydGljaXBhbnRLZXkxPjx0YXBPdXRwdXRLZXk+ID0+IDxwdWJOb25jZTE+XG4gKiA8cGFydGljaXBhbnRLZXkyPjx0YXBPdXRwdXRLZXk+ID0+IDxwdWJOb25jZTI+XG4gKiBDaGVja3MgYWdhaW5zdCBwYXJ0aWNpcGFudCBrZXlzIGFuZCB0YXBPdXRwdXRLZXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFBzYnRNdXNpZzJOb25jZXMoXG4gIG5vbmNlc0tleVZhbERhdGE6IFBzYnRNdXNpZzJQdWJOb25jZVtdLFxuICBwYXJ0aWNpcGFudEtleVZhbERhdGE6IFBzYnRNdXNpZzJQYXJ0aWNpcGFudHNcbik6IHZvaWQge1xuICBjaGVja1hPbmx5UHVibGljS2V5KHBhcnRpY2lwYW50S2V5VmFsRGF0YS50YXBPdXRwdXRLZXkpO1xuICBwYXJ0aWNpcGFudEtleVZhbERhdGEucGFydGljaXBhbnRQdWJLZXlzLmZvckVhY2goKGt2KSA9PiBjaGVja1BsYWluUHVibGljS2V5KGt2KSk7XG4gIGlmIChwYXJ0aWNpcGFudEtleVZhbERhdGEucGFydGljaXBhbnRQdWJLZXlzWzBdLmVxdWFscyhwYXJ0aWNpcGFudEtleVZhbERhdGEucGFydGljaXBhbnRQdWJLZXlzWzFdKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIHBhcnRpY2lwYW50IHB1YiBrZXlzIGZvdW5kYCk7XG4gIH1cblxuICBpZiAobm9uY2VzS2V5VmFsRGF0YS5sZW5ndGggPiAyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG5vbmNlIGtleSB2YWx1ZSBjb3VudCAke25vbmNlc0tleVZhbERhdGEubGVuZ3RofWApO1xuICB9XG5cbiAgbm9uY2VzS2V5VmFsRGF0YS5mb3JFYWNoKChub25jZUt2KSA9PiB7XG4gICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudEtleVZhbERhdGEucGFydGljaXBhbnRQdWJLZXlzLmZpbmRJbmRleCgocHViS2V5KSA9PlxuICAgICAgbm9uY2VLdi5wYXJ0aWNpcGFudFB1YktleS5lcXVhbHMocHViS2V5KVxuICAgICk7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG5vbmNlIGtleWRhdGEgcGFydGljaXBhbnQgcHViIGtleScpO1xuICAgIH1cblxuICAgIGlmICghbm9uY2VLdi50YXBPdXRwdXRLZXkuZXF1YWxzKHBhcnRpY2lwYW50S2V5VmFsRGF0YS50YXBPdXRwdXRLZXkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbm9uY2Uga2V5ZGF0YSB0YXBPdXRwdXRLZXknKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEByZXR1cm5zIElucHV0IG9iamVjdCBidXQgc2lnIGhhc2ggdHlwZSBkYXRhIGlzIHRha2VuIG91dCBmcm9tIHBhcnRpYWxTaWcgZmllbGQuXG4gKiBJZiBzaWcgaGFzaCB0eXBlIGlzIG5vdCBjb21tb24gZm9yIGFsbCBzaWdzLCBlcnJvciBvdXQsIG90aGVyd2lzZSByZXR1cm5zIHRoZSBtb2RpZmllZCBvYmplY3QgYW5kIHNpbmdsZSBoYXNoIHR5cGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaWdIYXNoVHlwZUZyb21TaWdzKHBhcnRpYWxTaWdzOiBQc2J0TXVzaWcyUGFydGlhbFNpZ1tdKToge1xuICBwYXJ0aWFsU2lnczogUHNidE11c2lnMlBhcnRpYWxTaWdbXTtcbiAgc2lnSGFzaFR5cGU6IG51bWJlcjtcbn0ge1xuICBpZiAoIXBhcnRpYWxTaWdzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncGFydGlhbFNpZ3MgYXJyYXkgY2FuIG5vdCBiZSBlbXB0eScpO1xuICB9XG4gIGNvbnN0IHBTaWdzV2l0aEhhc2hUeXBlID0gcGFydGlhbFNpZ3MubWFwKChrdikgPT4ge1xuICAgIGNvbnN0IHsgcGFydGlhbFNpZywgcGFydGljaXBhbnRQdWJLZXksIHRhcE91dHB1dEtleSB9ID0ga3Y7XG4gICAgcmV0dXJuIHBhcnRpYWxTaWcubGVuZ3RoID09PSAzM1xuICAgICAgPyB7IHBTaWc6IHsgcGFydGlhbFNpZzogcGFydGlhbFNpZy5zbGljZSgwLCAzMiksIHBhcnRpY2lwYW50UHViS2V5LCB0YXBPdXRwdXRLZXkgfSwgc2lnSGFzaFR5cGU6IHBhcnRpYWxTaWdbMzJdIH1cbiAgICAgIDogeyBwU2lnOiB7IHBhcnRpYWxTaWcsIHBhcnRpY2lwYW50UHViS2V5LCB0YXBPdXRwdXRLZXkgfSwgc2lnSGFzaFR5cGU6IFRyYW5zYWN0aW9uLlNJR0hBU0hfREVGQVVMVCB9O1xuICB9KTtcblxuICBjb25zdCBzaWdIYXNoVHlwZSA9IHBTaWdzV2l0aEhhc2hUeXBlWzBdLnNpZ0hhc2hUeXBlO1xuICBpZiAoIXBTaWdzV2l0aEhhc2hUeXBlLmV2ZXJ5KChwU2lnKSA9PiBwU2lnLnNpZ0hhc2hUeXBlID09PSBzaWdIYXNoVHlwZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NpZ25hdHVyZXMgbXVzdCB1c2Ugc2FtZSBzaWcgaGFzaCB0eXBlJyk7XG4gIH1cblxuICByZXR1cm4geyBwYXJ0aWFsU2lnczogcFNpZ3NXaXRoSGFzaFR5cGUubWFwKCh7IHBTaWcgfSkgPT4gcFNpZyksIHNpZ0hhc2hUeXBlIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNdXNpZzJEZXRlcm1pbmlzdGljTm9uY2UocGFyYW1zOiBQc2J0TXVzaWcyRGV0ZXJtaW5pc3RpY1BhcmFtcyk6IEJ1ZmZlciB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShcbiAgICBtdXNpZy5kZXRlcm1pbmlzdGljTm9uY2VHZW4oe1xuICAgICAgc2VjcmV0S2V5OiBwYXJhbXMucHJpdmF0ZUtleSxcbiAgICAgIGFnZ090aGVyTm9uY2U6IG11c2lnLm5vbmNlQWdnKFtwYXJhbXMub3RoZXJOb25jZV0pLFxuICAgICAgcHVibGljS2V5czogcGFyYW1zLnB1YmxpY0tleXMsXG4gICAgICB0d2Vha3M6IFt7IHR3ZWFrOiBjcmVhdGVUYXBUd2VhayhwYXJhbXMuaW50ZXJuYWxQdWJLZXksIHBhcmFtcy50YXBUcmVlUm9vdCksIHhPbmx5OiB0cnVlIH1dLFxuICAgICAgbXNnOiBwYXJhbXMuaGFzaCxcbiAgICB9KS5wdWJsaWNOb25jZVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbXVzaWcyRGV0ZXJtaW5pc3RpY1NpZ24ocGFyYW1zOiBQc2J0TXVzaWcyRGV0ZXJtaW5pc3RpY1BhcmFtcyk6IHtcbiAgc2lnOiBCdWZmZXI7XG4gIHNlc3Npb25LZXk6IFNlc3Npb25LZXk7XG4gIHB1YmxpY05vbmNlOiBCdWZmZXI7XG59IHtcbiAgY29uc3QgeyBzaWcsIHNlc3Npb25LZXksIHB1YmxpY05vbmNlIH0gPSBtdXNpZy5kZXRlcm1pbmlzdGljU2lnbih7XG4gICAgc2VjcmV0S2V5OiBwYXJhbXMucHJpdmF0ZUtleSxcbiAgICBhZ2dPdGhlck5vbmNlOiBtdXNpZy5ub25jZUFnZyhbcGFyYW1zLm90aGVyTm9uY2VdKSxcbiAgICBwdWJsaWNLZXlzOiBwYXJhbXMucHVibGljS2V5cyxcbiAgICB0d2Vha3M6IFt7IHR3ZWFrOiBjcmVhdGVUYXBUd2VhayhwYXJhbXMuaW50ZXJuYWxQdWJLZXksIHBhcmFtcy50YXBUcmVlUm9vdCksIHhPbmx5OiB0cnVlIH1dLFxuICAgIG1zZzogcGFyYW1zLmhhc2gsXG4gIH0pO1xuICByZXR1cm4geyBzaWc6IEJ1ZmZlci5mcm9tKHNpZyksIHNlc3Npb25LZXksIHB1YmxpY05vbmNlOiBCdWZmZXIuZnJvbShwdWJsaWNOb25jZSkgfTtcbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTZiYzEyZms3IiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwiZXhwb3J0cyIsImVuY29kZVBzYnRNdXNpZzJQYXJ0aWNpcGFudHMiLCJlbmNvZGVQc2J0TXVzaWcyUHViTm9uY2UiLCJlbmNvZGVQc2J0TXVzaWcyUGFydGlhbFNpZyIsImRlY29kZVBzYnRNdXNpZzJQYXJ0aWNpcGFudHMiLCJkZWNvZGVQc2J0TXVzaWcyTm9uY2UiLCJkZWNvZGVQc2J0TXVzaWcyUGFydGlhbFNpZyIsImNyZWF0ZVRhcEludGVybmFsS2V5IiwiY3JlYXRlVGFwT3V0cHV0S2V5IiwiY3JlYXRlQWdncmVnYXRlTm9uY2UiLCJjcmVhdGVUYXBUd2VhayIsIm11c2lnMlBhcnRpYWxTaWduIiwibXVzaWcyUGFydGlhbFNpZ1ZlcmlmeSIsIm11c2lnMkFnZ3JlZ2F0ZVNpZ3MiLCJjcmVhdGVNdXNpZzJTaWduaW5nU2Vzc2lvbiIsInBhcnNlUHNidE11c2lnMlBhcnRpY2lwYW50cyIsInBhcnNlUHNidE11c2lnMk5vbmNlcyIsInBhcnNlUHNidE11c2lnMlBhcnRpYWxTaWdzIiwiYXNzZXJ0UHNidE11c2lnMlBhcnRpY2lwYW50cyIsImFzc2VydFBzYnRNdXNpZzJOb25jZXMiLCJnZXRTaWdIYXNoVHlwZUZyb21TaWdzIiwiY3JlYXRlTXVzaWcyRGV0ZXJtaW5pc3RpY05vbmNlIiwibXVzaWcyRGV0ZXJtaW5pc3RpY1NpZ24iLCJvdXRwdXRTY3JpcHRzXzEiLCJyZXF1aXJlIiwibm9ibGVfZWNjXzEiLCJ0YXByb290XzEiLCJpbmRleF8xIiwiUHNidFV0aWxfMSIsIk11c2lnMk5vbmNlU3RvcmUiLCJjb25zdHJ1Y3RvciIsImYiLCJub25jZXMiLCJnZXRSZWYiLCJub25jZSIsImIiLCJCdWZmZXIiLCJmcm9tIiwiZXF1YWxzIiwiRXJyb3IiLCJjcmVhdGVNdXNpZzJOb25jZSIsInByaXZhdGVLZXkiLCJwdWJsaWNLZXkiLCJ4T25seVB1YmxpY0tleSIsInR4SGFzaCIsInNlc3Npb25JZCIsImxlbmd0aCIsImJ1ZiIsIm11c2lnIiwibm9uY2VHZW4iLCJzZWNyZXRLZXkiLCJtc2ciLCJwdXNoIiwicGFydGljaXBhbnRzIiwia2V5ZGF0YSIsInRhcE91dHB1dEtleSIsInRhcEludGVybmFsS2V5IiwibWFwIiwicHVia2V5IiwiY2hlY2tYT25seVB1YmxpY0tleSIsInZhbHVlIiwicGFydGljaXBhbnRQdWJLZXlzIiwiY2hlY2tQbGFpblB1YmxpY0tleSIsImtleSIsImlkZW50aWZpZXIiLCJQU0JUX1BST1BSSUVUQVJZX0lERU5USUZJRVIiLCJzdWJ0eXBlIiwiUHJvcHJpZXRhcnlLZXlTdWJ0eXBlIiwiTVVTSUcyX1BBUlRJQ0lQQU5UX1BVQl9LRVlTIiwiY29uY2F0IiwicHViTm9uY2UiLCJwYXJ0aWNpcGFudFB1YktleSIsIk1VU0lHMl9QVUJfTk9OQ0UiLCJwYXJ0aWFsU2lnIiwiTVVTSUcyX1BBUlRJQUxfU0lHIiwia3YiLCJzdWJhcnJheSIsInBsYWluUHViS2V5cyIsImdldFhPbmx5UHVia2V5Iiwia2V5QWdnIiwiaW50ZXJuYWxQdWJLZXkiLCJ0YXBUcmVlUm9vdCIsInRhcFR3ZWFrUHVia2V5IiwiZWNjIiwidG9YT25seVB1YmxpY0tleSIsImNoZWNrVGFwTWVya2xlUm9vdCIsInhPbmx5UHVia2V5IiwicHViTm9uY2VzIiwibm9uY2VBZ2ciLCJ0YXBNZXJrbGVSb290IiwiY2FsY3VsYXRlVGFwVHdlYWsiLCJzdGFydE11c2lnMlNpZ25pbmdTZXNzaW9uIiwiYWdnTm9uY2UiLCJoYXNoIiwicHVibGljS2V5cyIsInR3ZWFrIiwic3RhcnRTaWduaW5nU2Vzc2lvbiIsInhPbmx5IiwicHVibGljTm9uY2UiLCJzZXNzaW9uS2V5Iiwibm9uY2VTdG9yZSIsImNoZWNrVHhIYXNoIiwicGFydGlhbFNpZ24iLCJzaWciLCJwYXJ0aWFsVmVyaWZ5Iiwic2lncyIsInNpZ25BZ2ciLCJzZXNzaW9uQXJncyIsInB1YktleXMiLCJpbnB1dCIsInBhcnRpY2lwYW50c0tleVZhbHMiLCJnZXRQc2J0SW5wdXRQcm9wcmlldGFyeUtleVZhbHMiLCJ1bmRlZmluZWQiLCJub25jZUtleVZhbHMiLCJzaWdLZXlWYWxzIiwicGFydGljaXBhbnRLZXlWYWxEYXRhIiwiaW50ZXJuYWxLZXkiLCJvdXRwdXRLZXkiLCJub25jZXNLZXlWYWxEYXRhIiwiZm9yRWFjaCIsIm5vbmNlS3YiLCJpbmRleCIsImZpbmRJbmRleCIsInB1YktleSIsInBhcnRpYWxTaWdzIiwicFNpZ3NXaXRoSGFzaFR5cGUiLCJwU2lnIiwic2xpY2UiLCJzaWdIYXNoVHlwZSIsIlRyYW5zYWN0aW9uIiwiU0lHSEFTSF9ERUZBVUxUIiwiZXZlcnkiLCJwYXJhbXMiLCJkZXRlcm1pbmlzdGljTm9uY2VHZW4iLCJhZ2dPdGhlck5vbmNlIiwib3RoZXJOb25jZSIsInR3ZWFrcyIsImRldGVybWluaXN0aWNTaWduIl0sInNvdXJjZXMiOlsiL1VzZXJzL3Fyb2MvQ29kZS9oYXBpL2NoYWluZGVmdXNlci91dHhvLWxpYi9zcmMvYml0Z28vTXVzaWcyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlc3Npb25LZXkgfSBmcm9tICdAYnJhbmRvbmJsYWNrL211c2lnJztcblxuaW1wb3J0IHtcbiAgY2hlY2tQbGFpblB1YmxpY0tleSxcbiAgY2hlY2tUYXBNZXJrbGVSb290LFxuICBjaGVja1R4SGFzaCxcbiAgY2hlY2tYT25seVB1YmxpY0tleSxcbiAgdG9YT25seVB1YmxpY0tleSxcbn0gZnJvbSAnLi9vdXRwdXRTY3JpcHRzJztcbmltcG9ydCB7IGVjYywgbXVzaWcgfSBmcm9tICcuLi9ub2JsZV9lY2MnO1xuaW1wb3J0IHsgVHVwbGUgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGNhbGN1bGF0ZVRhcFR3ZWFrLCB0YXBUd2Vha1B1YmtleSB9IGZyb20gJy4uL3RhcHJvb3QnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb24gfSBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgeyBQc2J0SW5wdXQgfSBmcm9tICdiaXAxNzQvc3JjL2xpYi9pbnRlcmZhY2VzJztcbmltcG9ydCB7XG4gIGdldFBzYnRJbnB1dFByb3ByaWV0YXJ5S2V5VmFscyxcbiAgUHJvcHJpZXRhcnlLZXlTdWJ0eXBlLFxuICBQcm9wcmlldGFyeUtleVZhbHVlLFxuICBQU0JUX1BST1BSSUVUQVJZX0lERU5USUZJRVIsXG59IGZyb20gJy4vUHNidFV0aWwnO1xuXG4vKipcbiAqICBQYXJ0aWNpcGFudCBrZXkgdmFsdWUgb2JqZWN0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBzYnRNdXNpZzJQYXJ0aWNpcGFudHMge1xuICB0YXBPdXRwdXRLZXk6IEJ1ZmZlcjtcbiAgdGFwSW50ZXJuYWxLZXk6IEJ1ZmZlcjtcbiAgcGFydGljaXBhbnRQdWJLZXlzOiBUdXBsZTxCdWZmZXI+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBzYnRNdXNpZzJEZXRlcm1pbmlzdGljUGFyYW1zIHtcbiAgcHJpdmF0ZUtleTogQnVmZmVyO1xuICBvdGhlck5vbmNlOiBCdWZmZXI7XG4gIHB1YmxpY0tleXM6IFR1cGxlPEJ1ZmZlcj47XG4gIGludGVybmFsUHViS2V5OiBCdWZmZXI7XG4gIHRhcFRyZWVSb290OiBCdWZmZXI7XG4gIGhhc2g6IEJ1ZmZlcjtcbn1cblxuLyoqXG4gKiAgTm9uY2Uga2V5IHZhbHVlIG9iamVjdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQc2J0TXVzaWcyUHViTm9uY2Uge1xuICBwYXJ0aWNpcGFudFB1YktleTogQnVmZmVyO1xuICB0YXBPdXRwdXRLZXk6IEJ1ZmZlcjtcbiAgcHViTm9uY2U6IEJ1ZmZlcjtcbn1cblxuLyoqXG4gKiAgUGFydGlhbCBzaWduYXR1cmUga2V5IHZhbHVlIG9iamVjdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQc2J0TXVzaWcyUGFydGlhbFNpZyB7XG4gIHBhcnRpY2lwYW50UHViS2V5OiBCdWZmZXI7XG4gIHRhcE91dHB1dEtleTogQnVmZmVyO1xuICBwYXJ0aWFsU2lnOiBCdWZmZXI7XG59XG5cbi8qKlxuICogQmVjYXVzZSBtdXNpZyB1c2VzIHJlZmVyZW5jZS1lcXVhbCBidWZmZXJzIHRvIGNhY2hlIG5vbmNlcywgd2Ugd3JhcCBpdCBoZXJlIHRvIGFsbG93IHVzaW5nXG4gKiBub25jZXMgdGhhdCBhcmUgYnl0ZS1lcXVhbCBidXQgbm90IHJlZmVyZW5jZS1lcXVhbC5cbiAqL1xuZXhwb3J0IGNsYXNzIE11c2lnMk5vbmNlU3RvcmUge1xuICBwcml2YXRlIG5vbmNlczogVWludDhBcnJheVtdID0gW107XG5cbiAgLyoqXG4gICAqIEdldCBvcmlnaW5hbCBCdWZmZXIgaW5zdGFuY2UgZm9yIG5vbmNlICh3aGljaCBtYXkgYmUgYSBjb3B5KS5cbiAgICogQHJldHVybiBieXRlLWVxdWFsIGJ1ZmZlciB0aGF0IGlzIHJlZmVyZW5jZS1lcXVhbCB0byB3aGF0IHdhcyBzdG9yZWQgZWFybGllciBpbiBjcmVhdGVNdXNpZzJOb25jZVxuICAgKi9cbiAgZ2V0UmVmKG5vbmNlOiBVaW50OEFycmF5KTogVWludDhBcnJheSB7XG4gICAgZm9yIChjb25zdCBiIG9mIHRoaXMubm9uY2VzKSB7XG4gICAgICBpZiAoQnVmZmVyLmZyb20oYikuZXF1YWxzKG5vbmNlKSkge1xuICAgICAgICByZXR1cm4gYjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIG5vbmNlYCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBtdXNpZzIgbm9uY2UgYW5kIHN0b3JlcyBidWZmZXIgcmVmZXJlbmNlLlxuICAgKiB0YXBJbnRlcm5hbGtleSwgdGFwTWVya2xlUm9vdCwgdGFwQmlwMzJEZXJpdmF0aW9uIGZvciByb290V2FsbGV0S2V5IGFyZSByZXF1aXJlZCBwZXIgcDJ0ck11c2lnMiBrZXkgcGF0aCBpbnB1dC5cbiAgICogQWxzbyBwYXJ0aWNpcGFudCBrZXlzIGFyZSByZXF1aXJlZCBmcm9tIHBzYnQgcHJvcHJpZXRhcnkga2V5IHZhbHVlcy5cbiAgICogUmVmOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9zYW5rZXQxNzI5LzRiNTI1YzYwNDlmNGQ5ZTAzNGQyNzM2OGM0OWYyOGE2XG4gICAqIEBwYXJhbSBwcml2YXRlS2V5IC0gc2lnbmVyIHByaXZhdGUga2V5XG4gICAqIEBwYXJhbSBwdWJsaWNLZXkgLSBzaWduZXIgeHkgcHVibGljIGtleVxuICAgKiBAcGFyYW0geE9ubHlQdWJsaWNLZXkgLSB0d2Vha2VkIGFnZ3JlZ2F0ZWQga2V5ICh0YXBPdXRwdXRLZXkpXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgQWRkaXRpb25hbCBlbnRyb3B5LiBJZiBwcm92aWRlZCBpdCBtdXN0IGVpdGhlciBiZSBhIGNvdW50ZXIgdW5pcXVlIHRvIHRoaXMgc2VjcmV0IGtleSxcbiAgICogKGNvbnZlcnRlZCB0byBhbiBhcnJheSBvZiAzMiBieXRlcyksIG9yIDMyIHVuaWZvcm1seSByYW5kb20gYnl0ZXMuXG4gICAqL1xuICBjcmVhdGVNdXNpZzJOb25jZShcbiAgICBwcml2YXRlS2V5OiBVaW50OEFycmF5LFxuICAgIHB1YmxpY0tleTogVWludDhBcnJheSxcbiAgICB4T25seVB1YmxpY0tleTogVWludDhBcnJheSxcbiAgICB0eEhhc2g6IFVpbnQ4QXJyYXksXG4gICAgc2Vzc2lvbklkPzogQnVmZmVyXG4gICk6IFVpbnQ4QXJyYXkge1xuICAgIGlmICh0eEhhc2gubGVuZ3RoICE9IDMyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdHhIYXNoIHNpemUgJHt0eEhhc2h9YCk7XG4gICAgfVxuICAgIGNvbnN0IGJ1ZiA9IG11c2lnLm5vbmNlR2VuKHsgc2VjcmV0S2V5OiBwcml2YXRlS2V5LCBwdWJsaWNLZXksIHhPbmx5UHVibGljS2V5LCBtc2c6IHR4SGFzaCwgc2Vzc2lvbklkIH0pO1xuICAgIHRoaXMubm9uY2VzLnB1c2goYnVmKTtcbiAgICByZXR1cm4gYnVmO1xuICB9XG59XG5cbi8qKlxuICogUHNidCBwcm9wcmlldGFyeSBrZXkgdmFsIHV0aWwgZnVuY3Rpb24gZm9yIHBhcnRpY2lwYW50cyBwdWIga2V5cy4gU3ViVHlwZSBpcyAweDAxXG4gKiBSZWY6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3NhbmtldDE3MjkvNGI1MjVjNjA0OWY0ZDllMDM0ZDI3MzY4YzQ5ZjI4YTZcbiAqIEByZXR1cm4geC1vbmx5IHRhcE91dHB1dEtleXx8dGFwSW50ZXJuYWxLZXkgYXMgc3ViIGtleWRhdGEsIHBsYWluIHNpZ2luaW5nIHBhcnRpY2lwYW50IGtleXMgYXMgdmFsdWVkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVQc2J0TXVzaWcyUGFydGljaXBhbnRzKHBhcnRpY2lwYW50czogUHNidE11c2lnMlBhcnRpY2lwYW50cyk6IFByb3ByaWV0YXJ5S2V5VmFsdWUge1xuICBjb25zdCBrZXlkYXRhID0gW3BhcnRpY2lwYW50cy50YXBPdXRwdXRLZXksIHBhcnRpY2lwYW50cy50YXBJbnRlcm5hbEtleV0ubWFwKChwdWJrZXkpID0+IGNoZWNrWE9ubHlQdWJsaWNLZXkocHVia2V5KSk7XG4gIGNvbnN0IHZhbHVlID0gcGFydGljaXBhbnRzLnBhcnRpY2lwYW50UHViS2V5cy5tYXAoKHB1YmtleSkgPT4gY2hlY2tQbGFpblB1YmxpY0tleShwdWJrZXkpKTtcbiAgY29uc3Qga2V5ID0ge1xuICAgIGlkZW50aWZpZXI6IFBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUixcbiAgICBzdWJ0eXBlOiBQcm9wcmlldGFyeUtleVN1YnR5cGUuTVVTSUcyX1BBUlRJQ0lQQU5UX1BVQl9LRVlTLFxuICAgIGtleWRhdGE6IEJ1ZmZlci5jb25jYXQoa2V5ZGF0YSksXG4gIH07XG4gIHJldHVybiB7IGtleSwgdmFsdWU6IEJ1ZmZlci5jb25jYXQodmFsdWUpIH07XG59XG5cbi8qKlxuICogUHNidCBwcm9wcmlldGFyeSBrZXkgdmFsIHV0aWwgZnVuY3Rpb24gZm9yIHB1YiBub25jZS4gU3ViVHlwZSBpcyAweDAyXG4gKiBSZWY6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3NhbmtldDE3MjkvNGI1MjVjNjA0OWY0ZDllMDM0ZDI3MzY4YzQ5ZjI4YTZcbiAqIEByZXR1cm4gcGxhaW4tcGFydGljaXBhbnRQdWJLZXl8fHgtb25seS10YXBPdXRwdXRLZXkgYXMgc3ViIGtleWRhdGEsIDY2IGJ5dGVzIG9mIDIgcHViIG5vbmNlcyBhcyB2YWx1ZWRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVBzYnRNdXNpZzJQdWJOb25jZShub25jZTogUHNidE11c2lnMlB1Yk5vbmNlKTogUHJvcHJpZXRhcnlLZXlWYWx1ZSB7XG4gIGlmIChub25jZS5wdWJOb25jZS5sZW5ndGggIT09IDY2KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHB1Yk5vbmNlcyBsZW5ndGggJHtub25jZS5wdWJOb25jZS5sZW5ndGh9YCk7XG4gIH1cbiAgY29uc3Qga2V5ZGF0YSA9IEJ1ZmZlci5jb25jYXQoW1xuICAgIGNoZWNrUGxhaW5QdWJsaWNLZXkobm9uY2UucGFydGljaXBhbnRQdWJLZXkpLFxuICAgIGNoZWNrWE9ubHlQdWJsaWNLZXkobm9uY2UudGFwT3V0cHV0S2V5KSxcbiAgXSk7XG4gIGNvbnN0IGtleSA9IHtcbiAgICBpZGVudGlmaWVyOiBQU0JUX1BST1BSSUVUQVJZX0lERU5USUZJRVIsXG4gICAgc3VidHlwZTogUHJvcHJpZXRhcnlLZXlTdWJ0eXBlLk1VU0lHMl9QVUJfTk9OQ0UsXG4gICAga2V5ZGF0YSxcbiAgfTtcbiAgcmV0dXJuIHsga2V5LCB2YWx1ZTogbm9uY2UucHViTm9uY2UgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVBzYnRNdXNpZzJQYXJ0aWFsU2lnKHBhcnRpYWxTaWc6IFBzYnRNdXNpZzJQYXJ0aWFsU2lnKTogUHJvcHJpZXRhcnlLZXlWYWx1ZSB7XG4gIGlmIChwYXJ0aWFsU2lnLnBhcnRpYWxTaWcubGVuZ3RoICE9PSAzMiAmJiBwYXJ0aWFsU2lnLnBhcnRpYWxTaWcubGVuZ3RoICE9PSAzMykge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwYXJ0aWFsU2lnIGxlbmd0aCAke3BhcnRpYWxTaWcucGFydGlhbFNpZy5sZW5ndGh9YCk7XG4gIH1cbiAgY29uc3Qga2V5ZGF0YSA9IEJ1ZmZlci5jb25jYXQoW1xuICAgIGNoZWNrUGxhaW5QdWJsaWNLZXkocGFydGlhbFNpZy5wYXJ0aWNpcGFudFB1YktleSksXG4gICAgY2hlY2tYT25seVB1YmxpY0tleShwYXJ0aWFsU2lnLnRhcE91dHB1dEtleSksXG4gIF0pO1xuICBjb25zdCBrZXkgPSB7XG4gICAgaWRlbnRpZmllcjogUFNCVF9QUk9QUklFVEFSWV9JREVOVElGSUVSLFxuICAgIHN1YnR5cGU6IFByb3ByaWV0YXJ5S2V5U3VidHlwZS5NVVNJRzJfUEFSVElBTF9TSUcsXG4gICAga2V5ZGF0YSxcbiAgfTtcbiAgcmV0dXJuIHsga2V5LCB2YWx1ZTogcGFydGlhbFNpZy5wYXJ0aWFsU2lnIH07XG59XG5cbi8qKlxuICogRGVjb2RlcyBwcm9wcmlldGFyeSBrZXkgdmFsdWUgZGF0YSBmb3IgcGFydGljaXBhbnQgcHViIGtleXNcbiAqIEBwYXJhbSBrdlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlUHNidE11c2lnMlBhcnRpY2lwYW50cyhrdjogUHJvcHJpZXRhcnlLZXlWYWx1ZSk6IFBzYnRNdXNpZzJQYXJ0aWNpcGFudHMge1xuICBpZiAoXG4gICAga3Yua2V5LmlkZW50aWZpZXIgIT09IFBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUiB8fFxuICAgIGt2LmtleS5zdWJ0eXBlICE9PSBQcm9wcmlldGFyeUtleVN1YnR5cGUuTVVTSUcyX1BBUlRJQ0lQQU5UX1BVQl9LRVlTXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpZGVudGlmaWVyICR7a3Yua2V5LmlkZW50aWZpZXJ9IG9yIHN1YnR5cGUgJHtrdi5rZXkuc3VidHlwZX0gZm9yIHBhcnRpY2lwYW50cyBwdWIga2V5c2ApO1xuICB9XG5cbiAgY29uc3Qga2V5ID0ga3Yua2V5LmtleWRhdGE7XG4gIGlmIChrZXkubGVuZ3RoICE9PSA2NCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBrZXlkYXRhIHNpemUgJHtrZXkubGVuZ3RofSBmb3IgcGFydGljaXBhbnQgcHViIGtleXNgKTtcbiAgfVxuXG4gIGNvbnN0IHZhbHVlID0ga3YudmFsdWU7XG4gIGlmICh2YWx1ZS5sZW5ndGggIT09IDY2KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHZhbHVlZGF0YSBzaXplICR7dmFsdWUubGVuZ3RofSBmb3IgcGFydGljaXBhbnQgcHViIGtleXNgKTtcbiAgfVxuICBjb25zdCBwYXJ0aWNpcGFudFB1YktleXM6IFR1cGxlPEJ1ZmZlcj4gPSBbdmFsdWUuc3ViYXJyYXkoMCwgMzMpLCB2YWx1ZS5zdWJhcnJheSgzMyldO1xuICBpZiAocGFydGljaXBhbnRQdWJLZXlzWzBdLmVxdWFscyhwYXJ0aWNpcGFudFB1YktleXNbMV0pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBEdXBsaWNhdGUgcGFydGljaXBhbnQgcHViIGtleXMgZm91bmRgKTtcbiAgfVxuXG4gIHJldHVybiB7IHRhcE91dHB1dEtleToga2V5LnN1YmFycmF5KDAsIDMyKSwgdGFwSW50ZXJuYWxLZXk6IGtleS5zdWJhcnJheSgzMiksIHBhcnRpY2lwYW50UHViS2V5cyB9O1xufVxuXG4vKipcbiAqIERlY29kZXMgcHJvcHJpZXRhcnkga2V5IHZhbHVlIGRhdGEgZm9yIG11c2lnMiBub25jZVxuICogQHBhcmFtIGt2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVQc2J0TXVzaWcyTm9uY2Uoa3Y6IFByb3ByaWV0YXJ5S2V5VmFsdWUpOiBQc2J0TXVzaWcyUHViTm9uY2Uge1xuICBpZiAoa3Yua2V5LmlkZW50aWZpZXIgIT09IFBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUiB8fCBrdi5rZXkuc3VidHlwZSAhPT0gUHJvcHJpZXRhcnlLZXlTdWJ0eXBlLk1VU0lHMl9QVUJfTk9OQ0UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaWRlbnRpZmllciAke2t2LmtleS5pZGVudGlmaWVyfSBvciBzdWJ0eXBlICR7a3Yua2V5LnN1YnR5cGV9IGZvciBub25jZWApO1xuICB9XG5cbiAgY29uc3Qga2V5ID0ga3Yua2V5LmtleWRhdGE7XG4gIGlmIChrZXkubGVuZ3RoICE9PSA2NSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBrZXlkYXRhIHNpemUgJHtrZXkubGVuZ3RofSBmb3Igbm9uY2VgKTtcbiAgfVxuXG4gIGNvbnN0IHZhbHVlID0ga3YudmFsdWU7XG4gIGlmICh2YWx1ZS5sZW5ndGggIT09IDY2KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHZhbHVlZGF0YSBzaXplICR7dmFsdWUubGVuZ3RofSBmb3Igbm9uY2VgKTtcbiAgfVxuXG4gIHJldHVybiB7IHBhcnRpY2lwYW50UHViS2V5OiBrZXkuc3ViYXJyYXkoMCwgMzMpLCB0YXBPdXRwdXRLZXk6IGtleS5zdWJhcnJheSgzMyksIHB1Yk5vbmNlOiB2YWx1ZSB9O1xufVxuXG4vKipcbiAqIERlY29kZXMgcHJvcHJpZXRhcnkga2V5IHZhbHVlIGRhdGEgZm9yIG11c2lnMiBwYXJ0aWFsIHNpZ1xuICogQHBhcmFtIGt2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVQc2J0TXVzaWcyUGFydGlhbFNpZyhrdjogUHJvcHJpZXRhcnlLZXlWYWx1ZSk6IFBzYnRNdXNpZzJQYXJ0aWFsU2lnIHtcbiAgaWYgKFxuICAgIGt2LmtleS5pZGVudGlmaWVyICE9PSBQU0JUX1BST1BSSUVUQVJZX0lERU5USUZJRVIgfHxcbiAgICBrdi5rZXkuc3VidHlwZSAhPT0gUHJvcHJpZXRhcnlLZXlTdWJ0eXBlLk1VU0lHMl9QQVJUSUFMX1NJR1xuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaWRlbnRpZmllciAke2t2LmtleS5pZGVudGlmaWVyfSBvciBzdWJ0eXBlICR7a3Yua2V5LnN1YnR5cGV9IGZvciBwYXJ0aWFsIHNpZ2ApO1xuICB9XG5cbiAgY29uc3Qga2V5ID0ga3Yua2V5LmtleWRhdGE7XG4gIGlmIChrZXkubGVuZ3RoICE9PSA2NSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBrZXlkYXRhIHNpemUgJHtrZXkubGVuZ3RofSBmb3IgcGFydGlhbCBzaWdgKTtcbiAgfVxuXG4gIGNvbnN0IHZhbHVlID0ga3YudmFsdWU7XG4gIGlmICh2YWx1ZS5sZW5ndGggIT09IDMyICYmIHZhbHVlLmxlbmd0aCAhPT0gMzMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdmFsdWVkYXRhIHNpemUgJHt2YWx1ZS5sZW5ndGh9IGZvciBwYXJ0aWFsIHNpZ2ApO1xuICB9XG5cbiAgcmV0dXJuIHsgcGFydGljaXBhbnRQdWJLZXk6IGtleS5zdWJhcnJheSgwLCAzMyksIHRhcE91dHB1dEtleToga2V5LnN1YmFycmF5KDMzKSwgcGFydGlhbFNpZzogdmFsdWUgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhcEludGVybmFsS2V5KHBsYWluUHViS2V5czogQnVmZmVyW10pOiBCdWZmZXIge1xuICByZXR1cm4gQnVmZmVyLmZyb20obXVzaWcuZ2V0WE9ubHlQdWJrZXkobXVzaWcua2V5QWdnKHBsYWluUHViS2V5cykpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhcE91dHB1dEtleShpbnRlcm5hbFB1YktleTogQnVmZmVyLCB0YXBUcmVlUm9vdDogQnVmZmVyKTogQnVmZmVyIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKFxuICAgIHRhcFR3ZWFrUHVia2V5KGVjYywgdG9YT25seVB1YmxpY0tleShpbnRlcm5hbFB1YktleSksIGNoZWNrVGFwTWVya2xlUm9vdCh0YXBUcmVlUm9vdCkpLnhPbmx5UHVia2V5XG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZ2dyZWdhdGVOb25jZShwdWJOb25jZXM6IFR1cGxlPEJ1ZmZlcj4pOiBCdWZmZXIge1xuICByZXR1cm4gQnVmZmVyLmZyb20obXVzaWcubm9uY2VBZ2cocHViTm9uY2VzKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYXBUd2Vhayh0YXBJbnRlcm5hbEtleTogQnVmZmVyLCB0YXBNZXJrbGVSb290OiBCdWZmZXIpOiBCdWZmZXIge1xuICByZXR1cm4gQnVmZmVyLmZyb20oY2FsY3VsYXRlVGFwVHdlYWsoY2hlY2tYT25seVB1YmxpY0tleSh0YXBJbnRlcm5hbEtleSksIGNoZWNrVGFwTWVya2xlUm9vdCh0YXBNZXJrbGVSb290KSkpO1xufVxuXG5mdW5jdGlvbiBzdGFydE11c2lnMlNpZ25pbmdTZXNzaW9uKFxuICBhZ2dOb25jZTogQnVmZmVyLFxuICBoYXNoOiBCdWZmZXIsXG4gIHB1YmxpY0tleXM6IFR1cGxlPEJ1ZmZlcj4sXG4gIHR3ZWFrOiBCdWZmZXJcbik6IFNlc3Npb25LZXkge1xuICByZXR1cm4gbXVzaWcuc3RhcnRTaWduaW5nU2Vzc2lvbihhZ2dOb25jZSwgaGFzaCwgcHVibGljS2V5cywgeyB0d2VhaywgeE9ubHk6IHRydWUgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtdXNpZzJQYXJ0aWFsU2lnbihcbiAgcHJpdmF0ZUtleTogQnVmZmVyLFxuICBwdWJsaWNOb25jZTogVWludDhBcnJheSxcbiAgc2Vzc2lvbktleTogU2Vzc2lvbktleSxcbiAgbm9uY2VTdG9yZTogTXVzaWcyTm9uY2VTdG9yZVxuKTogQnVmZmVyIHtcbiAgY2hlY2tUeEhhc2goQnVmZmVyLmZyb20oc2Vzc2lvbktleS5tc2cpKTtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKFxuICAgIG11c2lnLnBhcnRpYWxTaWduKHtcbiAgICAgIHNlY3JldEtleTogcHJpdmF0ZUtleSxcbiAgICAgIHB1YmxpY05vbmNlOiBub25jZVN0b3JlLmdldFJlZihwdWJsaWNOb25jZSksXG4gICAgICBzZXNzaW9uS2V5LFxuICAgIH0pXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtdXNpZzJQYXJ0aWFsU2lnVmVyaWZ5KFxuICBzaWc6IEJ1ZmZlcixcbiAgcHVibGljS2V5OiBCdWZmZXIsXG4gIHB1YmxpY05vbmNlOiBCdWZmZXIsXG4gIHNlc3Npb25LZXk6IFNlc3Npb25LZXlcbik6IGJvb2xlYW4ge1xuICBjaGVja1R4SGFzaChCdWZmZXIuZnJvbShzZXNzaW9uS2V5Lm1zZykpO1xuICByZXR1cm4gbXVzaWcucGFydGlhbFZlcmlmeSh7IHNpZywgcHVibGljS2V5LCBwdWJsaWNOb25jZSwgc2Vzc2lvbktleSB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG11c2lnMkFnZ3JlZ2F0ZVNpZ3Moc2lnczogQnVmZmVyW10sIHNlc3Npb25LZXk6IFNlc3Npb25LZXkpOiBCdWZmZXIge1xuICByZXR1cm4gQnVmZmVyLmZyb20obXVzaWcuc2lnbkFnZyhzaWdzLCBzZXNzaW9uS2V5KSk7XG59XG5cbi8qKiBAcmV0dXJuIHNlc3Npb24ga2V5IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVmZXJlbmNlIHRoZSBzZXNzaW9uIGxhdGVyICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTXVzaWcyU2lnbmluZ1Nlc3Npb24oc2Vzc2lvbkFyZ3M6IHtcbiAgcHViTm9uY2VzOiBUdXBsZTxCdWZmZXI+O1xuICB0eEhhc2g6IEJ1ZmZlcjtcbiAgcHViS2V5czogVHVwbGU8QnVmZmVyPjtcbiAgaW50ZXJuYWxQdWJLZXk6IEJ1ZmZlcjtcbiAgdGFwVHJlZVJvb3Q6IEJ1ZmZlcjtcbn0pOiBTZXNzaW9uS2V5IHtcbiAgY2hlY2tUeEhhc2goc2Vzc2lvbkFyZ3MudHhIYXNoKTtcbiAgY29uc3QgYWdnTm9uY2UgPSBjcmVhdGVBZ2dyZWdhdGVOb25jZShzZXNzaW9uQXJncy5wdWJOb25jZXMpO1xuICBjb25zdCB0d2VhayA9IGNyZWF0ZVRhcFR3ZWFrKHNlc3Npb25BcmdzLmludGVybmFsUHViS2V5LCBzZXNzaW9uQXJncy50YXBUcmVlUm9vdCk7XG4gIHJldHVybiBzdGFydE11c2lnMlNpZ25pbmdTZXNzaW9uKGFnZ05vbmNlLCBzZXNzaW9uQXJncy50eEhhc2gsIHNlc3Npb25BcmdzLnB1YktleXMsIHR3ZWFrKTtcbn1cblxuLyoqXG4gKiBAcmV0dXJucyBwc2J0IHByb3ByaWV0YXJ5IGtleSBmb3IgbXVzaWcyIHBhcnRpY2lwYW50IGtleSB2YWx1ZSBkYXRhXG4gKiBJZiBubyBrZXkgdmFsdWUgZXhpc3RzLCB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVBzYnRNdXNpZzJQYXJ0aWNpcGFudHMoaW5wdXQ6IFBzYnRJbnB1dCk6IFBzYnRNdXNpZzJQYXJ0aWNpcGFudHMgfCB1bmRlZmluZWQge1xuICBjb25zdCBwYXJ0aWNpcGFudHNLZXlWYWxzID0gZ2V0UHNidElucHV0UHJvcHJpZXRhcnlLZXlWYWxzKGlucHV0LCB7XG4gICAgaWRlbnRpZmllcjogUFNCVF9QUk9QUklFVEFSWV9JREVOVElGSUVSLFxuICAgIHN1YnR5cGU6IFByb3ByaWV0YXJ5S2V5U3VidHlwZS5NVVNJRzJfUEFSVElDSVBBTlRfUFVCX0tFWVMsXG4gIH0pO1xuXG4gIGlmICghcGFydGljaXBhbnRzS2V5VmFscy5sZW5ndGgpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHBhcnRpY2lwYW50c0tleVZhbHMubGVuZ3RoID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRm91bmQgJHtwYXJ0aWNpcGFudHNLZXlWYWxzLmxlbmd0aH0gbWF0Y2hpbmcgcGFydGljaXBhbnQga2V5IHZhbHVlIGluc3RlYWQgb2YgMWApO1xuICB9XG5cbiAgcmV0dXJuIGRlY29kZVBzYnRNdXNpZzJQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzS2V5VmFsc1swXSk7XG59XG5cbi8qKlxuICogQHJldHVybnMgcHNidCBwcm9wcmlldGFyeSBrZXkgZm9yIG11c2lnMiBwdWJsaWMgbm9uY2Uga2V5IHZhbHVlIGRhdGFcbiAqIElmIG5vIGtleSB2YWx1ZSBleGlzdHMsIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHNidE11c2lnMk5vbmNlcyhpbnB1dDogUHNidElucHV0KTogUHNidE11c2lnMlB1Yk5vbmNlW10gfCB1bmRlZmluZWQge1xuICBjb25zdCBub25jZUtleVZhbHMgPSBnZXRQc2J0SW5wdXRQcm9wcmlldGFyeUtleVZhbHMoaW5wdXQsIHtcbiAgICBpZGVudGlmaWVyOiBQU0JUX1BST1BSSUVUQVJZX0lERU5USUZJRVIsXG4gICAgc3VidHlwZTogUHJvcHJpZXRhcnlLZXlTdWJ0eXBlLk1VU0lHMl9QVUJfTk9OQ0UsXG4gIH0pO1xuXG4gIGlmICghbm9uY2VLZXlWYWxzLmxlbmd0aCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAobm9uY2VLZXlWYWxzLmxlbmd0aCA+IDIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZvdW5kICR7bm9uY2VLZXlWYWxzLmxlbmd0aH0gbWF0Y2hpbmcgbm9uY2Uga2V5IHZhbHVlIGluc3RlYWQgb2YgMSBvciAyYCk7XG4gIH1cblxuICByZXR1cm4gbm9uY2VLZXlWYWxzLm1hcCgoa3YpID0+IGRlY29kZVBzYnRNdXNpZzJOb25jZShrdikpO1xufVxuXG4vKipcbiAqIEByZXR1cm5zIHBzYnQgcHJvcHJpZXRhcnkga2V5IGZvciBtdXNpZzIgcGFydGlhbCBzaWcga2V5IHZhbHVlIGRhdGFcbiAqIElmIG5vIGtleSB2YWx1ZSBleGlzdHMsIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHNidE11c2lnMlBhcnRpYWxTaWdzKGlucHV0OiBQc2J0SW5wdXQpOiBQc2J0TXVzaWcyUGFydGlhbFNpZ1tdIHwgdW5kZWZpbmVkIHtcbiAgY29uc3Qgc2lnS2V5VmFscyA9IGdldFBzYnRJbnB1dFByb3ByaWV0YXJ5S2V5VmFscyhpbnB1dCwge1xuICAgIGlkZW50aWZpZXI6IFBTQlRfUFJPUFJJRVRBUllfSURFTlRJRklFUixcbiAgICBzdWJ0eXBlOiBQcm9wcmlldGFyeUtleVN1YnR5cGUuTVVTSUcyX1BBUlRJQUxfU0lHLFxuICB9KTtcblxuICBpZiAoIXNpZ0tleVZhbHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmIChzaWdLZXlWYWxzLmxlbmd0aCA+IDIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZvdW5kICR7c2lnS2V5VmFscy5sZW5ndGh9IG1hdGNoaW5nIHBhcnRpYWwgc2lnbmF0dXJlIGtleSB2YWx1ZSBpbnN0ZWFkIG9mIDEgb3IgMmApO1xuICB9XG5cbiAgcmV0dXJuIHNpZ0tleVZhbHMubWFwKChrdikgPT4gZGVjb2RlUHNidE11c2lnMlBhcnRpYWxTaWcoa3YpKTtcbn1cblxuLyoqXG4gKiBBc3NlcnQgbXVzaWcyIHBhcnRpY2lwYW50IGtleSB2YWx1ZSBkYXRhIHdpdGggdGFwSW50ZXJuYWxLZXkgYW5kIHRhcE1lcmtsZVJvb3QuXG4gKiA8dGFwT3V0cHV0S2V5Pjx0YXBJbnB1dEtleT4gPT4gPHBhcnRpY2lwYW50S2V5MT48cGFydGljaXBhbnRLZXkyPlxuICogVXNpbmcgdGFwTWVya2xlUm9vdCBhbmQgMiBwYXJ0aWNpcGFudCBrZXlzLCB0aGUgdGFwSW5wdXRLZXkgaXMgdmFsaWRhdGVkIGFuZCB1c2luZyB0YXBNZXJrbGVSb290IGFuZCB0YXBJbnB1dEtleSxcbiAqIHRoZSB0YXBPdXRwdXRLZXkgaXMgdmFsaWRhdGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0UHNidE11c2lnMlBhcnRpY2lwYW50cyhcbiAgcGFydGljaXBhbnRLZXlWYWxEYXRhOiBQc2J0TXVzaWcyUGFydGljaXBhbnRzLFxuICB0YXBJbnRlcm5hbEtleTogQnVmZmVyLFxuICB0YXBNZXJrbGVSb290OiBCdWZmZXJcbik6IHZvaWQge1xuICBjaGVja1hPbmx5UHVibGljS2V5KHRhcEludGVybmFsS2V5KTtcbiAgY2hlY2tUYXBNZXJrbGVSb290KHRhcE1lcmtsZVJvb3QpO1xuXG4gIGNvbnN0IHBhcnRpY2lwYW50UHViS2V5cyA9IHBhcnRpY2lwYW50S2V5VmFsRGF0YS5wYXJ0aWNpcGFudFB1YktleXM7XG5cbiAgY29uc3QgaW50ZXJuYWxLZXkgPSBjcmVhdGVUYXBJbnRlcm5hbEtleShwYXJ0aWNpcGFudFB1YktleXMpO1xuICBpZiAoIWludGVybmFsS2V5LmVxdWFscyhwYXJ0aWNpcGFudEtleVZhbERhdGEudGFwSW50ZXJuYWxLZXkpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHBhcnRpY2lwYW50cyBrZXlkYXRhIHRhcEludGVybmFsS2V5Jyk7XG4gIH1cblxuICBjb25zdCBvdXRwdXRLZXkgPSBjcmVhdGVUYXBPdXRwdXRLZXkoaW50ZXJuYWxLZXksIHRhcE1lcmtsZVJvb3QpO1xuICBpZiAoIW91dHB1dEtleS5lcXVhbHMocGFydGljaXBhbnRLZXlWYWxEYXRhLnRhcE91dHB1dEtleSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGFydGljaXBhbnRzIGtleWRhdGEgdGFwT3V0cHV0S2V5Jyk7XG4gIH1cblxuICBpZiAoIWludGVybmFsS2V5LmVxdWFscyh0YXBJbnRlcm5hbEtleSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3RhcEludGVybmFsS2V5IGFuZCBhZ2dyZWdhdGVkIHBhcnRpY2lwYW50IHB1YiBrZXlzIGRvZXMgbm90IG1hdGNoJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBBc3NlcnQgbXVzaWcyIHB1YmxpYyBub25jZSBrZXkgdmFsdWUgZGF0YSB3aXRoIHBhcnRpY2lwYW50IGtleSB2YWx1ZSBkYXRhXG4gKiAocmVmZXIgYXNzZXJ0UHNidE11c2lnMlBhcnRpY2lwYW50c0tleVZhbERhdGEpLlxuICogPHBhcnRpY2lwYW50S2V5MT48dGFwT3V0cHV0S2V5PiA9PiA8cHViTm9uY2UxPlxuICogPHBhcnRpY2lwYW50S2V5Mj48dGFwT3V0cHV0S2V5PiA9PiA8cHViTm9uY2UyPlxuICogQ2hlY2tzIGFnYWluc3QgcGFydGljaXBhbnQga2V5cyBhbmQgdGFwT3V0cHV0S2V5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRQc2J0TXVzaWcyTm9uY2VzKFxuICBub25jZXNLZXlWYWxEYXRhOiBQc2J0TXVzaWcyUHViTm9uY2VbXSxcbiAgcGFydGljaXBhbnRLZXlWYWxEYXRhOiBQc2J0TXVzaWcyUGFydGljaXBhbnRzXG4pOiB2b2lkIHtcbiAgY2hlY2tYT25seVB1YmxpY0tleShwYXJ0aWNpcGFudEtleVZhbERhdGEudGFwT3V0cHV0S2V5KTtcbiAgcGFydGljaXBhbnRLZXlWYWxEYXRhLnBhcnRpY2lwYW50UHViS2V5cy5mb3JFYWNoKChrdikgPT4gY2hlY2tQbGFpblB1YmxpY0tleShrdikpO1xuICBpZiAocGFydGljaXBhbnRLZXlWYWxEYXRhLnBhcnRpY2lwYW50UHViS2V5c1swXS5lcXVhbHMocGFydGljaXBhbnRLZXlWYWxEYXRhLnBhcnRpY2lwYW50UHViS2V5c1sxXSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYER1cGxpY2F0ZSBwYXJ0aWNpcGFudCBwdWIga2V5cyBmb3VuZGApO1xuICB9XG5cbiAgaWYgKG5vbmNlc0tleVZhbERhdGEubGVuZ3RoID4gMikge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBub25jZSBrZXkgdmFsdWUgY291bnQgJHtub25jZXNLZXlWYWxEYXRhLmxlbmd0aH1gKTtcbiAgfVxuXG4gIG5vbmNlc0tleVZhbERhdGEuZm9yRWFjaCgobm9uY2VLdikgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gcGFydGljaXBhbnRLZXlWYWxEYXRhLnBhcnRpY2lwYW50UHViS2V5cy5maW5kSW5kZXgoKHB1YktleSkgPT5cbiAgICAgIG5vbmNlS3YucGFydGljaXBhbnRQdWJLZXkuZXF1YWxzKHB1YktleSlcbiAgICApO1xuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBub25jZSBrZXlkYXRhIHBhcnRpY2lwYW50IHB1YiBrZXknKTtcbiAgICB9XG5cbiAgICBpZiAoIW5vbmNlS3YudGFwT3V0cHV0S2V5LmVxdWFscyhwYXJ0aWNpcGFudEtleVZhbERhdGEudGFwT3V0cHV0S2V5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG5vbmNlIGtleWRhdGEgdGFwT3V0cHV0S2V5Jyk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBAcmV0dXJucyBJbnB1dCBvYmplY3QgYnV0IHNpZyBoYXNoIHR5cGUgZGF0YSBpcyB0YWtlbiBvdXQgZnJvbSBwYXJ0aWFsU2lnIGZpZWxkLlxuICogSWYgc2lnIGhhc2ggdHlwZSBpcyBub3QgY29tbW9uIGZvciBhbGwgc2lncywgZXJyb3Igb3V0LCBvdGhlcndpc2UgcmV0dXJucyB0aGUgbW9kaWZpZWQgb2JqZWN0IGFuZCBzaW5nbGUgaGFzaCB0eXBlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2lnSGFzaFR5cGVGcm9tU2lncyhwYXJ0aWFsU2lnczogUHNidE11c2lnMlBhcnRpYWxTaWdbXSk6IHtcbiAgcGFydGlhbFNpZ3M6IFBzYnRNdXNpZzJQYXJ0aWFsU2lnW107XG4gIHNpZ0hhc2hUeXBlOiBudW1iZXI7XG59IHtcbiAgaWYgKCFwYXJ0aWFsU2lncy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3BhcnRpYWxTaWdzIGFycmF5IGNhbiBub3QgYmUgZW1wdHknKTtcbiAgfVxuICBjb25zdCBwU2lnc1dpdGhIYXNoVHlwZSA9IHBhcnRpYWxTaWdzLm1hcCgoa3YpID0+IHtcbiAgICBjb25zdCB7IHBhcnRpYWxTaWcsIHBhcnRpY2lwYW50UHViS2V5LCB0YXBPdXRwdXRLZXkgfSA9IGt2O1xuICAgIHJldHVybiBwYXJ0aWFsU2lnLmxlbmd0aCA9PT0gMzNcbiAgICAgID8geyBwU2lnOiB7IHBhcnRpYWxTaWc6IHBhcnRpYWxTaWcuc2xpY2UoMCwgMzIpLCBwYXJ0aWNpcGFudFB1YktleSwgdGFwT3V0cHV0S2V5IH0sIHNpZ0hhc2hUeXBlOiBwYXJ0aWFsU2lnWzMyXSB9XG4gICAgICA6IHsgcFNpZzogeyBwYXJ0aWFsU2lnLCBwYXJ0aWNpcGFudFB1YktleSwgdGFwT3V0cHV0S2V5IH0sIHNpZ0hhc2hUeXBlOiBUcmFuc2FjdGlvbi5TSUdIQVNIX0RFRkFVTFQgfTtcbiAgfSk7XG5cbiAgY29uc3Qgc2lnSGFzaFR5cGUgPSBwU2lnc1dpdGhIYXNoVHlwZVswXS5zaWdIYXNoVHlwZTtcbiAgaWYgKCFwU2lnc1dpdGhIYXNoVHlwZS5ldmVyeSgocFNpZykgPT4gcFNpZy5zaWdIYXNoVHlwZSA9PT0gc2lnSGFzaFR5cGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzaWduYXR1cmVzIG11c3QgdXNlIHNhbWUgc2lnIGhhc2ggdHlwZScpO1xuICB9XG5cbiAgcmV0dXJuIHsgcGFydGlhbFNpZ3M6IHBTaWdzV2l0aEhhc2hUeXBlLm1hcCgoeyBwU2lnIH0pID0+IHBTaWcpLCBzaWdIYXNoVHlwZSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTXVzaWcyRGV0ZXJtaW5pc3RpY05vbmNlKHBhcmFtczogUHNidE11c2lnMkRldGVybWluaXN0aWNQYXJhbXMpOiBCdWZmZXIge1xuICByZXR1cm4gQnVmZmVyLmZyb20oXG4gICAgbXVzaWcuZGV0ZXJtaW5pc3RpY05vbmNlR2VuKHtcbiAgICAgIHNlY3JldEtleTogcGFyYW1zLnByaXZhdGVLZXksXG4gICAgICBhZ2dPdGhlck5vbmNlOiBtdXNpZy5ub25jZUFnZyhbcGFyYW1zLm90aGVyTm9uY2VdKSxcbiAgICAgIHB1YmxpY0tleXM6IHBhcmFtcy5wdWJsaWNLZXlzLFxuICAgICAgdHdlYWtzOiBbeyB0d2VhazogY3JlYXRlVGFwVHdlYWsocGFyYW1zLmludGVybmFsUHViS2V5LCBwYXJhbXMudGFwVHJlZVJvb3QpLCB4T25seTogdHJ1ZSB9XSxcbiAgICAgIG1zZzogcGFyYW1zLmhhc2gsXG4gICAgfSkucHVibGljTm9uY2VcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG11c2lnMkRldGVybWluaXN0aWNTaWduKHBhcmFtczogUHNidE11c2lnMkRldGVybWluaXN0aWNQYXJhbXMpOiB7XG4gIHNpZzogQnVmZmVyO1xuICBzZXNzaW9uS2V5OiBTZXNzaW9uS2V5O1xuICBwdWJsaWNOb25jZTogQnVmZmVyO1xufSB7XG4gIGNvbnN0IHsgc2lnLCBzZXNzaW9uS2V5LCBwdWJsaWNOb25jZSB9ID0gbXVzaWcuZGV0ZXJtaW5pc3RpY1NpZ24oe1xuICAgIHNlY3JldEtleTogcGFyYW1zLnByaXZhdGVLZXksXG4gICAgYWdnT3RoZXJOb25jZTogbXVzaWcubm9uY2VBZ2coW3BhcmFtcy5vdGhlck5vbmNlXSksXG4gICAgcHVibGljS2V5czogcGFyYW1zLnB1YmxpY0tleXMsXG4gICAgdHdlYWtzOiBbeyB0d2VhazogY3JlYXRlVGFwVHdlYWsocGFyYW1zLmludGVybmFsUHViS2V5LCBwYXJhbXMudGFwVHJlZVJvb3QpLCB4T25seTogdHJ1ZSB9XSxcbiAgICBtc2c6IHBhcmFtcy5oYXNoLFxuICB9KTtcbiAgcmV0dXJuIHsgc2lnOiBCdWZmZXIuZnJvbShzaWcpLCBzZXNzaW9uS2V5LCBwdWJsaWNOb25jZTogQnVmZmVyLmZyb20ocHVibGljTm9uY2UpIH07XG59XG4iXSwibWFwcGluZ3MiOiJ3Z29EQThSQTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FBQUEsYUFBQSxHQUFBRSxDQUFBLE0sdUlBakxBQyxPQUFBLENBQUFDLDRCQUFBLENBQUFBLDRCQUFBLENBU0NKLGFBQUEsR0FBQUUsQ0FBQSxNQU9EQyxPQUFBLENBQUFFLHdCQUFBLENBQUFBLHdCQUFBLENBY0NMLGFBQUEsR0FBQUUsQ0FBQSxNQUVEQyxPQUFBLENBQUFHLDBCQUFBLENBQUFBLDBCQUFBLENBY0NOLGFBQUEsR0FBQUUsQ0FBQSxNQU1EQyxPQUFBLENBQUFJLDRCQUFBLENBQUFBLDRCQUFBLENBdUJDUCxhQUFBLEdBQUFFLENBQUEsTUFNREMsT0FBQSxDQUFBSyxxQkFBQSxDQUFBQSxxQkFBQSxDQWdCQ1IsYUFBQSxHQUFBRSxDQUFBLE1BTURDLE9BQUEsQ0FBQU0sMEJBQUEsQ0FBQUEsMEJBQUEsQ0FtQkNULGFB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